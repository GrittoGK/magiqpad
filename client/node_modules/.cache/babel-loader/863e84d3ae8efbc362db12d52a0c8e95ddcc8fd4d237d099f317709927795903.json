{"ast":null,"code":"var Ot = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {};\nfunction xe(s) {\n  return s && s.__esModule && Object.prototype.hasOwnProperty.call(s, \"default\") ? s.default : s;\n}\nfunction Be() {}\nObject.assign(Be, {\n  default: Be,\n  register: Be,\n  revert: function () {},\n  __esModule: !0\n});\nElement.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function (s) {\n  const e = (this.document || this.ownerDocument).querySelectorAll(s);\n  let t = e.length;\n  for (; --t >= 0 && e.item(t) !== this;);\n  return t > -1;\n});\nElement.prototype.closest || (Element.prototype.closest = function (s) {\n  let e = this;\n  if (!document.documentElement.contains(e)) return null;\n  do {\n    if (e.matches(s)) return e;\n    e = e.parentElement || e.parentNode;\n  } while (e !== null);\n  return null;\n});\nElement.prototype.prepend || (Element.prototype.prepend = function (e) {\n  const t = document.createDocumentFragment();\n  Array.isArray(e) || (e = [e]), e.forEach(o => {\n    const i = o instanceof Node;\n    t.appendChild(i ? o : document.createTextNode(o));\n  }), this.insertBefore(t, this.firstChild);\n});\nElement.prototype.scrollIntoViewIfNeeded || (Element.prototype.scrollIntoViewIfNeeded = function (s) {\n  s = arguments.length === 0 ? !0 : !!s;\n  const e = this.parentNode,\n    t = window.getComputedStyle(e, null),\n    o = parseInt(t.getPropertyValue(\"border-top-width\")),\n    i = parseInt(t.getPropertyValue(\"border-left-width\")),\n    n = this.offsetTop - e.offsetTop < e.scrollTop,\n    r = this.offsetTop - e.offsetTop + this.clientHeight - o > e.scrollTop + e.clientHeight,\n    a = this.offsetLeft - e.offsetLeft < e.scrollLeft,\n    l = this.offsetLeft - e.offsetLeft + this.clientWidth - i > e.scrollLeft + e.clientWidth,\n    c = n && !r;\n  (n || r) && s && (e.scrollTop = this.offsetTop - e.offsetTop - e.clientHeight / 2 - o + this.clientHeight / 2), (a || l) && s && (e.scrollLeft = this.offsetLeft - e.offsetLeft - e.clientWidth / 2 - i + this.clientWidth / 2), (n || r || a || l) && !s && this.scrollIntoView(c);\n});\nwindow.requestIdleCallback = window.requestIdleCallback || function (s) {\n  const e = Date.now();\n  return setTimeout(function () {\n    s({\n      didTimeout: !1,\n      timeRemaining: function () {\n        return Math.max(0, 50 - (Date.now() - e));\n      }\n    });\n  }, 1);\n};\nwindow.cancelIdleCallback = window.cancelIdleCallback || function (s) {\n  clearTimeout(s);\n};\nlet At = function () {\n  let s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 21;\n  return crypto.getRandomValues(new Uint8Array(s)).reduce((e, t) => (t &= 63, t < 36 ? e += t.toString(36) : t < 62 ? e += (t - 26).toString(36).toUpperCase() : t > 62 ? e += \"-\" : e += \"_\", e), \"\");\n};\nvar it = /* @__PURE__ */(s => (s.VERBOSE = \"VERBOSE\", s.INFO = \"INFO\", s.WARN = \"WARN\", s.ERROR = \"ERROR\", s))(it || {});\nconst B = {\n    BACKSPACE: 8,\n    TAB: 9,\n    ENTER: 13,\n    SHIFT: 16,\n    CTRL: 17,\n    ALT: 18,\n    ESC: 27,\n    SPACE: 32,\n    LEFT: 37,\n    UP: 38,\n    DOWN: 40,\n    RIGHT: 39,\n    DELETE: 46,\n    META: 91\n  },\n  _t = {\n    LEFT: 0,\n    WHEEL: 1,\n    RIGHT: 2,\n    BACKWARD: 3,\n    FORWARD: 4\n  };\nfunction be(s, e) {\n  let t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"log\";\n  let o = arguments.length > 3 ? arguments[3] : undefined;\n  let i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"color: inherit\";\n  if (!(\"console\" in window) || !window.console[t]) return;\n  const n = [\"info\", \"log\", \"warn\", \"error\"].includes(t),\n    r = [];\n  switch (be.logLevel) {\n    case \"ERROR\":\n      if (t !== \"error\") return;\n      break;\n    case \"WARN\":\n      if (![\"error\", \"warn\"].includes(t)) return;\n      break;\n    case \"INFO\":\n      if (!n || s) return;\n      break;\n  }\n  o && r.push(o);\n  const a = \"Editor.js 2.28.2\",\n    l = \"line-height: 1em;\\n            color: #006FEA;\\n            display: inline-block;\\n            font-size: 11px;\\n            line-height: 1em;\\n            background-color: #fff;\\n            padding: 4px 9px;\\n            border-radius: 30px;\\n            border: 1px solid rgba(56, 138, 229, 0.16);\\n            margin: 4px 5px 4px 0;\";\n  s && (n ? (r.unshift(l, i), e = \"%c\".concat(a, \"%c \").concat(e)) : e = \"( \".concat(a, \" )\").concat(e));\n  try {\n    n ? o ? console[t](\"\".concat(e, \" %o\"), ...r) : console[t](e, ...r) : console[t](e);\n  } catch {}\n}\nbe.logLevel = \"VERBOSE\";\nfunction Nt(s) {\n  be.logLevel = s;\n}\nconst L = be.bind(window, !1),\n  K = be.bind(window, !0);\nfunction oe(s) {\n  return Object.prototype.toString.call(s).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n}\nfunction D(s) {\n  return oe(s) === \"function\" || oe(s) === \"asyncfunction\";\n}\nfunction z(s) {\n  return oe(s) === \"object\";\n}\nfunction J(s) {\n  return oe(s) === \"string\";\n}\nfunction Rt(s) {\n  return oe(s) === \"boolean\";\n}\nfunction qe(s) {\n  return oe(s) === \"number\";\n}\nfunction Ze(s) {\n  return oe(s) === \"undefined\";\n}\nfunction V(s) {\n  return s ? Object.keys(s).length === 0 && s.constructor === Object : !0;\n}\nfunction nt(s) {\n  return s > 47 && s < 58 ||\n  // number keys\n  s === 32 || s === 13 ||\n  // Space bar & return key(s)\n  s === 229 ||\n  // processing key input for certain languages — Chinese, Japanese, etc.\n  s > 64 && s < 91 ||\n  // letter keys\n  s > 95 && s < 112 ||\n  // Numpad keys\n  s > 185 && s < 193 ||\n  // ;=,-./` (in order)\n  s > 218 && s < 223;\n}\nasync function Dt(s) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n  let t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : () => {};\n  async function o(i, n, r) {\n    try {\n      await i.function(i.data), await n(Ze(i.data) ? {} : i.data);\n    } catch {\n      r(Ze(i.data) ? {} : i.data);\n    }\n  }\n  return s.reduce(async (i, n) => (await i, o(n, e, t)), Promise.resolve());\n}\nfunction st(s) {\n  return Array.prototype.slice.call(s);\n}\nfunction re(s, e) {\n  return function () {\n    const t = this,\n      o = arguments;\n    window.setTimeout(() => s.apply(t, o), e);\n  };\n}\nfunction Pt(s) {\n  return s.name.split(\".\").pop();\n}\nfunction Ft(s) {\n  return /^[-\\w]+\\/([-+\\w]+|\\*)$/.test(s);\n}\nfunction Ht(s, e, t) {\n  var _this = this;\n  let o;\n  return function () {\n    for (var _len = arguments.length, i = new Array(_len), _key = 0; _key < _len; _key++) {\n      i[_key] = arguments[_key];\n    }\n    const n = _this,\n      r = () => {\n        o = null, t || s.apply(n, i);\n      },\n      a = t && !o;\n    window.clearTimeout(o), o = window.setTimeout(r, e), a && s.apply(n, i);\n  };\n}\nfunction Ce(s, e) {\n  let t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : void 0;\n  let o,\n    i,\n    n,\n    r = null,\n    a = 0;\n  t || (t = {});\n  const l = function () {\n    a = t.leading === !1 ? 0 : Date.now(), r = null, n = s.apply(o, i), r || (o = i = null);\n  };\n  return function () {\n    const c = Date.now();\n    !a && t.leading === !1 && (a = c);\n    const u = e - (c - a);\n    return o = this, i = arguments, u <= 0 || u > e ? (r && (clearTimeout(r), r = null), a = c, n = s.apply(o, i), r || (o = i = null)) : !r && t.trailing !== !1 && (r = setTimeout(l, u)), n;\n  };\n}\nfunction jt() {\n  const s = {\n      win: !1,\n      mac: !1,\n      x11: !1,\n      linux: !1\n    },\n    e = Object.keys(s).find(t => window.navigator.appVersion.toLowerCase().indexOf(t) !== -1);\n  return e && (s[e] = !0), s;\n}\nfunction ae(s) {\n  return s[0].toUpperCase() + s.slice(1);\n}\nfunction Se(s) {\n  for (var _len2 = arguments.length, e = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    e[_key2 - 1] = arguments[_key2];\n  }\n  if (!e.length) return s;\n  const t = e.shift();\n  if (z(s) && z(t)) for (const o in t) z(t[o]) ? (s[o] || Object.assign(s, {\n    [o]: {}\n  }), Se(s[o], t[o])) : Object.assign(s, {\n    [o]: t[o]\n  });\n  return Se(s, ...e);\n}\nfunction Re(s) {\n  const e = jt();\n  return s = s.replace(/shift/gi, \"⇧\").replace(/backspace/gi, \"⌫\").replace(/enter/gi, \"⏎\").replace(/up/gi, \"↑\").replace(/left/gi, \"→\").replace(/down/gi, \"↓\").replace(/right/gi, \"←\").replace(/escape/gi, \"⎋\").replace(/insert/gi, \"Ins\").replace(/delete/gi, \"␡\").replace(/\\+/gi, \" + \"), e.mac ? s = s.replace(/ctrl|cmd/gi, \"⌘\").replace(/alt/gi, \"⌥\") : s = s.replace(/cmd/gi, \"Ctrl\").replace(/windows/gi, \"WIN\"), s;\n}\nfunction zt(s) {\n  try {\n    return new URL(s).href;\n  } catch {}\n  return s.substring(0, 2) === \"//\" ? window.location.protocol + s : window.location.origin + s;\n}\nfunction Ut() {\n  return At(10);\n}\nfunction $t(s) {\n  window.open(s, \"_blank\");\n}\nfunction Wt() {\n  let s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  return \"\".concat(s).concat(Math.floor(Math.random() * 1e8).toString(16));\n}\nfunction Ie(s, e, t) {\n  const o = \"\\xAB\".concat(e, \"\\xBB is deprecated and will be removed in the next major release. Please use the \\xAB\").concat(t, \"\\xBB instead.\");\n  s && K(o, \"warn\");\n}\nfunction ce(s, e, t) {\n  const o = t.value ? \"value\" : \"get\",\n    i = t[o],\n    n = \"#\".concat(e, \"Cache\");\n  if (t[o] = function () {\n    for (var _len3 = arguments.length, r = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      r[_key3] = arguments[_key3];\n    }\n    return this[n] === void 0 && (this[n] = i.apply(this, ...r)), this[n];\n  }, o === \"get\" && t.set) {\n    const r = t.set;\n    t.set = function (a) {\n      delete s[n], r.apply(this, a);\n    };\n  }\n  return t;\n}\nconst rt = 650;\nfunction te() {\n  return window.matchMedia(\"(max-width: \".concat(rt, \"px)\")).matches;\n}\nconst Ge = typeof window < \"u\" && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === \"MacIntel\" && window.navigator.maxTouchPoints > 1);\nfunction Yt(s, e) {\n  const t = Array.isArray(s) || z(s),\n    o = Array.isArray(e) || z(e);\n  return t || o ? JSON.stringify(s) === JSON.stringify(e) : s === e;\n}\nclass d {\n  /**\n   * Check if passed tag has no closed tag\n   *\n   * @param {HTMLElement} tag - element to check\n   * @returns {boolean}\n   */\n  static isSingleTag(e) {\n    return e.tagName && [\"AREA\", \"BASE\", \"BR\", \"COL\", \"COMMAND\", \"EMBED\", \"HR\", \"IMG\", \"INPUT\", \"KEYGEN\", \"LINK\", \"META\", \"PARAM\", \"SOURCE\", \"TRACK\", \"WBR\"].includes(e.tagName);\n  }\n  /**\n   * Check if element is BR or WBR\n   *\n   * @param {HTMLElement} element - element to check\n   * @returns {boolean}\n   */\n  static isLineBreakTag(e) {\n    return e && e.tagName && [\"BR\", \"WBR\"].includes(e.tagName);\n  }\n  /**\n   * Helper for making Elements with class name and attributes\n   *\n   * @param  {string} tagName - new Element tag name\n   * @param  {string[]|string} [classNames] - list or name of CSS class name(s)\n   * @param  {object} [attributes] - any attributes\n   * @returns {HTMLElement}\n   */\n  static make(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const i = document.createElement(e);\n    Array.isArray(t) ? i.classList.add(...t) : t && i.classList.add(t);\n    for (const n in o) Object.prototype.hasOwnProperty.call(o, n) && (i[n] = o[n]);\n    return i;\n  }\n  /**\n   * Creates Text Node with the passed content\n   *\n   * @param {string} content - text content\n   * @returns {Text}\n   */\n  static text(e) {\n    return document.createTextNode(e);\n  }\n  /**\n   * Append one or several elements to the parent\n   *\n   * @param  {Element|DocumentFragment} parent - where to append\n   * @param  {Element|Element[]|DocumentFragment|Text|Text[]} elements - element or elements list\n   */\n  static append(e, t) {\n    Array.isArray(t) ? t.forEach(o => e.appendChild(o)) : e.appendChild(t);\n  }\n  /**\n   * Append element or a couple to the beginning of the parent elements\n   *\n   * @param {Element} parent - where to append\n   * @param {Element|Element[]} elements - element or elements list\n   */\n  static prepend(e, t) {\n    Array.isArray(t) ? (t = t.reverse(), t.forEach(o => e.prepend(o))) : e.prepend(t);\n  }\n  /**\n   * Swap two elements in parent\n   *\n   * @param {HTMLElement} el1 - from\n   * @param {HTMLElement} el2 - to\n   * @deprecated\n   */\n  static swap(e, t) {\n    const o = document.createElement(\"div\"),\n      i = e.parentNode;\n    i.insertBefore(o, e), i.insertBefore(e, t), i.insertBefore(t, o), i.removeChild(o);\n  }\n  /**\n   * Selector Decorator\n   *\n   * Returns first match\n   *\n   * @param {Element} el - element we searching inside. Default - DOM Document\n   * @param {string} selector - searching string\n   * @returns {Element}\n   */\n  static find() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n    let t = arguments.length > 1 ? arguments[1] : undefined;\n    return e.querySelector(t);\n  }\n  /**\n   * Get Element by Id\n   *\n   * @param {string} id - id to find\n   * @returns {HTMLElement | null}\n   */\n  static get(e) {\n    return document.getElementById(e);\n  }\n  /**\n   * Selector Decorator.\n   *\n   * Returns all matches\n   *\n   * @param {Element|Document} el - element we searching inside. Default - DOM Document\n   * @param {string} selector - searching string\n   * @returns {NodeList}\n   */\n  static findAll() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n    let t = arguments.length > 1 ? arguments[1] : undefined;\n    return e.querySelectorAll(t);\n  }\n  /**\n   * Returns CSS selector for all text inputs\n   */\n  static get allInputsSelector() {\n    return \"[contenteditable=true], textarea, input:not([type]), \" + [\"text\", \"password\", \"email\", \"number\", \"search\", \"tel\", \"url\"].map(t => \"input[type=\\\"\".concat(t, \"\\\"]\")).join(\", \");\n  }\n  /**\n   * Find all contenteditable, textarea and editable input elements passed holder contains\n   *\n   * @param holder - element where to find inputs\n   */\n  static findAllInputs(e) {\n    return st(e.querySelectorAll(d.allInputsSelector)).reduce((t, o) => d.isNativeInput(o) || d.containsOnlyInlineElements(o) ? [...t, o] : [...t, ...d.getDeepestBlockElements(o)], []);\n  }\n  /**\n   * Search for deepest node which is Leaf.\n   * Leaf is the vertex that doesn't have any child nodes\n   *\n   * @description Method recursively goes throw the all Node until it finds the Leaf\n   * @param {Node} node - root Node. From this vertex we start Deep-first search\n   *                      {@link https://en.wikipedia.org/wiki/Depth-first_search}\n   * @param {boolean} [atLast] - find last text node\n   * @returns {Node} - it can be text Node or Element Node, so that caret will able to work with it\n   */\n  static getDeepestNode(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const o = t ? \"lastChild\" : \"firstChild\",\n      i = t ? \"previousSibling\" : \"nextSibling\";\n    if (e && e.nodeType === Node.ELEMENT_NODE && e[o]) {\n      let n = e[o];\n      if (d.isSingleTag(n) && !d.isNativeInput(n) && !d.isLineBreakTag(n)) if (n[i]) n = n[i];else if (n.parentNode[i]) n = n.parentNode[i];else return n.parentNode;\n      return this.getDeepestNode(n, t);\n    }\n    return e;\n  }\n  /**\n   * Check if object is DOM node\n   *\n   * @param {*} node - object to check\n   * @returns {boolean}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static isElement(e) {\n    return qe(e) ? !1 : e && e.nodeType && e.nodeType === Node.ELEMENT_NODE;\n  }\n  /**\n   * Check if object is DocumentFragment node\n   *\n   * @param {object} node - object to check\n   * @returns {boolean}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static isFragment(e) {\n    return qe(e) ? !1 : e && e.nodeType && e.nodeType === Node.DOCUMENT_FRAGMENT_NODE;\n  }\n  /**\n   * Check if passed element is contenteditable\n   *\n   * @param {HTMLElement} element - html element to check\n   * @returns {boolean}\n   */\n  static isContentEditable(e) {\n    return e.contentEditable === \"true\";\n  }\n  /**\n   * Checks target if it is native input\n   *\n   * @param {*} target - HTML element or string\n   * @returns {boolean}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static isNativeInput(e) {\n    const t = [\"INPUT\", \"TEXTAREA\"];\n    return e && e.tagName ? t.includes(e.tagName) : !1;\n  }\n  /**\n   * Checks if we can set caret\n   *\n   * @param {HTMLElement} target - target to check\n   * @returns {boolean}\n   */\n  static canSetCaret(e) {\n    let t = !0;\n    if (d.isNativeInput(e)) switch (e.type) {\n      case \"file\":\n      case \"checkbox\":\n      case \"radio\":\n      case \"hidden\":\n      case \"submit\":\n      case \"button\":\n      case \"image\":\n      case \"reset\":\n        t = !1;\n        break;\n    } else t = d.isContentEditable(e);\n    return t;\n  }\n  /**\n   * Checks node if it is empty\n   *\n   * @description Method checks simple Node without any childs for emptiness\n   * If you have Node with 2 or more children id depth, you better use {@link Dom#isEmpty} method\n   * @param {Node} node - node to check\n   * @returns {boolean} true if it is empty\n   */\n  static isNodeEmpty(e) {\n    let t;\n    return this.isSingleTag(e) && !this.isLineBreakTag(e) ? !1 : (this.isElement(e) && this.isNativeInput(e) ? t = e.value : t = e.textContent.replace(\"​\", \"\"), t.trim().length === 0);\n  }\n  /**\n   * checks node if it is doesn't have any child nodes\n   *\n   * @param {Node} node - node to check\n   * @returns {boolean}\n   */\n  static isLeaf(e) {\n    return e ? e.childNodes.length === 0 : !1;\n  }\n  /**\n   * breadth-first search (BFS)\n   * {@link https://en.wikipedia.org/wiki/Breadth-first_search}\n   *\n   * @description Pushes to stack all DOM leafs and checks for emptiness\n   * @param {Node} node - node to check\n   * @returns {boolean}\n   */\n  static isEmpty(e) {\n    e.normalize();\n    const t = [e];\n    for (; t.length > 0;) if (e = t.shift(), !!e) {\n      if (this.isLeaf(e) && !this.isNodeEmpty(e)) return !1;\n      e.childNodes && t.push(...Array.from(e.childNodes));\n    }\n    return !0;\n  }\n  /**\n   * Check if string contains html elements\n   *\n   * @param {string} str - string to check\n   * @returns {boolean}\n   */\n  static isHTMLString(e) {\n    const t = d.make(\"div\");\n    return t.innerHTML = e, t.childElementCount > 0;\n  }\n  /**\n   * Return length of node`s text content\n   *\n   * @param {Node} node - node with content\n   * @returns {number}\n   */\n  static getContentLength(e) {\n    return d.isNativeInput(e) ? e.value.length : e.nodeType === Node.TEXT_NODE ? e.length : e.textContent.length;\n  }\n  /**\n   * Return array of names of block html elements\n   *\n   * @returns {string[]}\n   */\n  static get blockElements() {\n    return [\"address\", \"article\", \"aside\", \"blockquote\", \"canvas\", \"div\", \"dl\", \"dt\", \"fieldset\", \"figcaption\", \"figure\", \"footer\", \"form\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"header\", \"hgroup\", \"hr\", \"li\", \"main\", \"nav\", \"noscript\", \"ol\", \"output\", \"p\", \"pre\", \"ruby\", \"section\", \"table\", \"tbody\", \"thead\", \"tr\", \"tfoot\", \"ul\", \"video\"];\n  }\n  /**\n   * Check if passed content includes only inline elements\n   *\n   * @param {string|HTMLElement} data - element or html string\n   * @returns {boolean}\n   */\n  static containsOnlyInlineElements(e) {\n    let t;\n    J(e) ? (t = document.createElement(\"div\"), t.innerHTML = e) : t = e;\n    const o = i => !d.blockElements.includes(i.tagName.toLowerCase()) && Array.from(i.children).every(o);\n    return Array.from(t.children).every(o);\n  }\n  /**\n   * Find and return all block elements in the passed parent (including subtree)\n   *\n   * @param {HTMLElement} parent - root element\n   * @returns {HTMLElement[]}\n   */\n  static getDeepestBlockElements(e) {\n    return d.containsOnlyInlineElements(e) ? [e] : Array.from(e.children).reduce((t, o) => [...t, ...d.getDeepestBlockElements(o)], []);\n  }\n  /**\n   * Helper for get holder from {string} or return HTMLElement\n   *\n   * @param {string | HTMLElement} element - holder's id or holder's HTML Element\n   * @returns {HTMLElement}\n   */\n  static getHolder(e) {\n    return J(e) ? document.getElementById(e) : e;\n  }\n  /**\n   * Returns true if element is anchor (is A tag)\n   *\n   * @param {Element} element - element to check\n   * @returns {boolean}\n   */\n  static isAnchor(e) {\n    return e.tagName.toLowerCase() === \"a\";\n  }\n  /**\n   * Return element's offset related to the document\n   *\n   * @todo handle case when editor initialized in scrollable popup\n   * @param el - element to compute offset\n   */\n  static offset(e) {\n    const t = e.getBoundingClientRect(),\n      o = window.pageXOffset || document.documentElement.scrollLeft,\n      i = window.pageYOffset || document.documentElement.scrollTop,\n      n = t.top + i,\n      r = t.left + o;\n    return {\n      top: n,\n      left: r,\n      bottom: n + t.height,\n      right: r + t.width\n    };\n  }\n}\nconst Kt = {\n    blockTunes: {\n      toggler: {\n        \"Click to tune\": \"\",\n        \"or drag to move\": \"\"\n      }\n    },\n    inlineToolbar: {\n      converter: {\n        \"Convert to\": \"\"\n      }\n    },\n    toolbar: {\n      toolbox: {\n        Add: \"\"\n      }\n    },\n    popover: {\n      Filter: \"\",\n      \"Nothing found\": \"\"\n    }\n  },\n  Xt = {\n    Text: \"\",\n    Link: \"\",\n    Bold: \"\",\n    Italic: \"\"\n  },\n  Vt = {\n    link: {\n      \"Add a link\": \"\"\n    },\n    stub: {\n      \"The block can not be displayed correctly.\": \"\"\n    }\n  },\n  qt = {\n    delete: {\n      Delete: \"\",\n      \"Click to delete\": \"\"\n    },\n    moveUp: {\n      \"Move up\": \"\"\n    },\n    moveDown: {\n      \"Move down\": \"\"\n    }\n  },\n  at = {\n    ui: Kt,\n    toolNames: Xt,\n    tools: Vt,\n    blockTunes: qt\n  },\n  ie = class {\n    /**\n     * Type-safe translation for internal UI texts:\n     * Perform translation of the string by namespace and a key\n     *\n     * @example I18n.ui(I18nInternalNS.ui.blockTunes.toggler, 'Click to tune')\n     * @param internalNamespace - path to translated string in dictionary\n     * @param dictKey - dictionary key. Better to use default locale original text\n     */\n    static ui(s, e) {\n      return ie._t(s, e);\n    }\n    /**\n     * Translate for external strings that is not presented in default dictionary.\n     * For example, for user-specified tool names\n     *\n     * @param namespace - path to translated string in dictionary\n     * @param dictKey - dictionary key. Better to use default locale original text\n     */\n    static t(s, e) {\n      return ie._t(s, e);\n    }\n    /**\n     * Adjust module for using external dictionary\n     *\n     * @param dictionary - new messages list to override default\n     */\n    static setDictionary(s) {\n      ie.currentDictionary = s;\n    }\n    /**\n     * Perform translation both for internal and external namespaces\n     * If there is no translation found, returns passed key as a translated message\n     *\n     * @param namespace - path to translated string in dictionary\n     * @param dictKey - dictionary key. Better to use default locale original text\n     */\n    static _t(s, e) {\n      const t = ie.getNamespace(s);\n      return !t || !t[e] ? e : t[e];\n    }\n    /**\n     * Find messages section by namespace path\n     *\n     * @param namespace - path to section\n     */\n    static getNamespace(s) {\n      return s.split(\".\").reduce((t, o) => !t || !Object.keys(t).length ? {} : t[o], ie.currentDictionary);\n    }\n  };\nlet $ = ie;\n$.currentDictionary = at;\nclass lt extends Error {}\nclass we {\n  constructor() {\n    this.subscribers = {};\n  }\n  /**\n   * Subscribe any event on callback\n   *\n   * @param eventName - event name\n   * @param callback - subscriber\n   */\n  on(e, t) {\n    e in this.subscribers || (this.subscribers[e] = []), this.subscribers[e].push(t);\n  }\n  /**\n   * Subscribe any event on callback. Callback will be called once and be removed from subscribers array after call.\n   *\n   * @param eventName - event name\n   * @param callback - subscriber\n   */\n  once(e, t) {\n    e in this.subscribers || (this.subscribers[e] = []);\n    const o = i => {\n      const n = t(i),\n        r = this.subscribers[e].indexOf(o);\n      return r !== -1 && this.subscribers[e].splice(r, 1), n;\n    };\n    this.subscribers[e].push(o);\n  }\n  /**\n   * Emit callbacks with passed data\n   *\n   * @param eventName - event name\n   * @param data - subscribers get this data when they were fired\n   */\n  emit(e, t) {\n    V(this.subscribers) || !this.subscribers[e] || this.subscribers[e].reduce((o, i) => {\n      const n = i(o);\n      return n !== void 0 ? n : o;\n    }, t);\n  }\n  /**\n   * Unsubscribe callback from event\n   *\n   * @param eventName - event name\n   * @param callback - event handler\n   */\n  off(e, t) {\n    if (this.subscribers[e] === void 0) {\n      console.warn(\"EventDispatcher .off(): there is no subscribers for event \\\"\".concat(e.toString(), \"\\\". Probably, .off() called before .on()\"));\n      return;\n    }\n    for (let o = 0; o < this.subscribers[e].length; o++) if (this.subscribers[e][o] === t) {\n      delete this.subscribers[e][o];\n      break;\n    }\n  }\n  /**\n   * Destroyer\n   * clears subscribers list\n   */\n  destroy() {\n    this.subscribers = {};\n  }\n}\nfunction ee(s) {\n  Object.setPrototypeOf(this, {\n    /**\n     * Block id\n     *\n     * @returns {string}\n     */\n    get id() {\n      return s.id;\n    },\n    /**\n     * Tool name\n     *\n     * @returns {string}\n     */\n    get name() {\n      return s.name;\n    },\n    /**\n     * Tool config passed on Editor's initialization\n     *\n     * @returns {ToolConfig}\n     */\n    get config() {\n      return s.config;\n    },\n    /**\n     * .ce-block element, that wraps plugin contents\n     *\n     * @returns {HTMLElement}\n     */\n    get holder() {\n      return s.holder;\n    },\n    /**\n     * True if Block content is empty\n     *\n     * @returns {boolean}\n     */\n    get isEmpty() {\n      return s.isEmpty;\n    },\n    /**\n     * True if Block is selected with Cross-Block selection\n     *\n     * @returns {boolean}\n     */\n    get selected() {\n      return s.selected;\n    },\n    /**\n     * Set Block's stretch state\n     *\n     * @param {boolean} state — state to set\n     */\n    set stretched(t) {\n      s.stretched = t;\n    },\n    /**\n     * True if Block is stretched\n     *\n     * @returns {boolean}\n     */\n    get stretched() {\n      return s.stretched;\n    },\n    /**\n     * Call Tool method with errors handler under-the-hood\n     *\n     * @param {string} methodName - method to call\n     * @param {object} param - object with parameters\n     * @returns {unknown}\n     */\n    call(t, o) {\n      return s.call(t, o);\n    },\n    /**\n     * Save Block content\n     *\n     * @returns {Promise<void|SavedData>}\n     */\n    save() {\n      return s.save();\n    },\n    /**\n     * Validate Block data\n     *\n     * @param {BlockToolData} data - data to validate\n     * @returns {Promise<boolean>}\n     */\n    validate(t) {\n      return s.validate(t);\n    },\n    /**\n     * Allows to say Editor that Block was changed. Used to manually trigger Editor's 'onChange' callback\n     * Can be useful for block changes invisible for editor core.\n     */\n    dispatchChange() {\n      s.dispatchChange();\n    }\n  });\n}\nclass De {\n  constructor() {\n    this.allListeners = [];\n  }\n  /**\n   * Assigns event listener on element and returns unique identifier\n   *\n   * @param {EventTarget} element - DOM element that needs to be listened\n   * @param {string} eventType - event type\n   * @param {Function} handler - method that will be fired on event\n   * @param {boolean|AddEventListenerOptions} options - useCapture or {capture, passive, once}\n   */\n  on(e, t, o) {\n    let i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n    const n = Wt(\"l\"),\n      r = {\n        id: n,\n        element: e,\n        eventType: t,\n        handler: o,\n        options: i\n      };\n    if (!this.findOne(e, t, o)) return this.allListeners.push(r), e.addEventListener(t, o, i), n;\n  }\n  /**\n   * Removes event listener from element\n   *\n   * @param {EventTarget} element - DOM element that we removing listener\n   * @param {string} eventType - event type\n   * @param {Function} handler - remove handler, if element listens several handlers on the same event type\n   * @param {boolean|AddEventListenerOptions} options - useCapture or {capture, passive, once}\n   */\n  off(e, t, o, i) {\n    const n = this.findAll(e, t, o);\n    n.forEach((r, a) => {\n      const l = this.allListeners.indexOf(n[a]);\n      l > -1 && (this.allListeners.splice(l, 1), r.element.removeEventListener(r.eventType, r.handler, r.options));\n    });\n  }\n  /**\n   * Removes listener by id\n   *\n   * @param {string} id - listener identifier\n   */\n  offById(e) {\n    const t = this.findById(e);\n    t && t.element.removeEventListener(t.eventType, t.handler, t.options);\n  }\n  /**\n   * Finds and returns first listener by passed params\n   *\n   * @param {EventTarget} element - event target\n   * @param {string} [eventType] - event type\n   * @param {Function} [handler] - event handler\n   * @returns {ListenerData|null}\n   */\n  findOne(e, t, o) {\n    const i = this.findAll(e, t, o);\n    return i.length > 0 ? i[0] : null;\n  }\n  /**\n   * Return all stored listeners by passed params\n   *\n   * @param {EventTarget} element - event target\n   * @param {string} eventType - event type\n   * @param {Function} handler - event handler\n   * @returns {ListenerData[]}\n   */\n  findAll(e, t, o) {\n    let i;\n    const n = e ? this.findByEventTarget(e) : [];\n    return e && t && o ? i = n.filter(r => r.eventType === t && r.handler === o) : e && t ? i = n.filter(r => r.eventType === t) : i = n, i;\n  }\n  /**\n   * Removes all listeners\n   */\n  removeAll() {\n    this.allListeners.map(e => {\n      e.element.removeEventListener(e.eventType, e.handler, e.options);\n    }), this.allListeners = [];\n  }\n  /**\n   * Module cleanup on destruction\n   */\n  destroy() {\n    this.removeAll();\n  }\n  /**\n   * Search method: looks for listener by passed element\n   *\n   * @param {EventTarget} element - searching element\n   * @returns {Array} listeners that found on element\n   */\n  findByEventTarget(e) {\n    return this.allListeners.filter(t => {\n      if (t.element === e) return t;\n    });\n  }\n  /**\n   * Search method: looks for listener by passed event type\n   *\n   * @param {string} eventType - event type\n   * @returns {ListenerData[]} listeners that found on element\n   */\n  findByType(e) {\n    return this.allListeners.filter(t => {\n      if (t.eventType === e) return t;\n    });\n  }\n  /**\n   * Search method: looks for listener by passed handler\n   *\n   * @param {Function} handler - event handler\n   * @returns {ListenerData[]} listeners that found on element\n   */\n  findByHandler(e) {\n    return this.allListeners.filter(t => {\n      if (t.handler === e) return t;\n    });\n  }\n  /**\n   * Returns listener data found by id\n   *\n   * @param {string} id - listener identifier\n   * @returns {ListenerData}\n   */\n  findById(e) {\n    return this.allListeners.find(t => t.id === e);\n  }\n}\nclass C {\n  /**\n   * @class\n   * @param options - Module options\n   * @param options.config - Module config\n   * @param options.eventsDispatcher - Common event bus\n   */\n  constructor(_ref) {\n    var _this2 = this;\n    let {\n      config: e,\n      eventsDispatcher: t\n    } = _ref;\n    if (this.nodes = {}, this.listeners = new De(), this.readOnlyMutableListeners = {\n      /**\n       * Assigns event listener on DOM element and pushes into special array that might be removed\n       *\n       * @param {EventTarget} element - DOM Element\n       * @param {string} eventType - Event name\n       * @param {Function} handler - Event handler\n       * @param {boolean|AddEventListenerOptions} options - Listening options\n       */\n      on: function (o, i, n) {\n        let r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n        _this2.mutableListenerIds.push(_this2.listeners.on(o, i, n, r));\n      },\n      /**\n       * Clears all mutable listeners\n       */\n      clearAll: () => {\n        for (const o of this.mutableListenerIds) this.listeners.offById(o);\n        this.mutableListenerIds = [];\n      }\n    }, this.mutableListenerIds = [], new.target === C) throw new TypeError(\"Constructors for abstract class Module are not allowed.\");\n    this.config = e, this.eventsDispatcher = t;\n  }\n  /**\n   * Editor modules setter\n   *\n   * @param {EditorModules} Editor - Editor's Modules\n   */\n  set state(e) {\n    this.Editor = e;\n  }\n  /**\n   * Remove memorized nodes\n   */\n  removeAllNodes() {\n    for (const e in this.nodes) {\n      const t = this.nodes[e];\n      t instanceof HTMLElement && t.remove();\n    }\n  }\n  /**\n   * Returns true if current direction is RTL (Right-To-Left)\n   */\n  get isRtl() {\n    return this.config.i18n.direction === \"rtl\";\n  }\n}\nclass m {\n  constructor() {\n    this.instance = null, this.selection = null, this.savedSelectionRange = null, this.isFakeBackgroundEnabled = !1, this.commandBackground = \"backColor\", this.commandRemoveFormat = \"removeFormat\";\n  }\n  /**\n   * Editor styles\n   *\n   * @returns {{editorWrapper: string, editorZone: string}}\n   */\n  static get CSS() {\n    return {\n      editorWrapper: \"codex-editor\",\n      editorZone: \"codex-editor__redactor\"\n    };\n  }\n  /**\n   * Returns selected anchor\n   * {@link https://developer.mozilla.org/ru/docs/Web/API/Selection/anchorNode}\n   *\n   * @returns {Node|null}\n   */\n  static get anchorNode() {\n    const e = window.getSelection();\n    return e ? e.anchorNode : null;\n  }\n  /**\n   * Returns selected anchor element\n   *\n   * @returns {Element|null}\n   */\n  static get anchorElement() {\n    const e = window.getSelection();\n    if (!e) return null;\n    const t = e.anchorNode;\n    return t ? d.isElement(t) ? t : t.parentElement : null;\n  }\n  /**\n   * Returns selection offset according to the anchor node\n   * {@link https://developer.mozilla.org/ru/docs/Web/API/Selection/anchorOffset}\n   *\n   * @returns {number|null}\n   */\n  static get anchorOffset() {\n    const e = window.getSelection();\n    return e ? e.anchorOffset : null;\n  }\n  /**\n   * Is current selection range collapsed\n   *\n   * @returns {boolean|null}\n   */\n  static get isCollapsed() {\n    const e = window.getSelection();\n    return e ? e.isCollapsed : null;\n  }\n  /**\n   * Check current selection if it is at Editor's zone\n   *\n   * @returns {boolean}\n   */\n  static get isAtEditor() {\n    return this.isSelectionAtEditor(m.get());\n  }\n  /**\n   * Check if passed selection is at Editor's zone\n   *\n   * @param selection - Selection object to check\n   */\n  static isSelectionAtEditor(e) {\n    if (!e) return !1;\n    let t = e.anchorNode || e.focusNode;\n    t && t.nodeType === Node.TEXT_NODE && (t = t.parentNode);\n    let o = null;\n    return t && t instanceof Element && (o = t.closest(\".\".concat(m.CSS.editorZone))), o ? o.nodeType === Node.ELEMENT_NODE : !1;\n  }\n  /**\n   * Check if passed range at Editor zone\n   *\n   * @param range - range to check\n   */\n  static isRangeAtEditor(e) {\n    if (!e) return;\n    let t = e.startContainer;\n    t && t.nodeType === Node.TEXT_NODE && (t = t.parentNode);\n    let o = null;\n    return t && t instanceof Element && (o = t.closest(\".\".concat(m.CSS.editorZone))), o ? o.nodeType === Node.ELEMENT_NODE : !1;\n  }\n  /**\n   * Methods return boolean that true if selection exists on the page\n   */\n  static get isSelectionExists() {\n    return !!m.get().anchorNode;\n  }\n  /**\n   * Return first range\n   *\n   * @returns {Range|null}\n   */\n  static get range() {\n    return this.getRangeFromSelection(this.get());\n  }\n  /**\n   * Returns range from passed Selection object\n   *\n   * @param selection - Selection object to get Range from\n   */\n  static getRangeFromSelection(e) {\n    return e && e.rangeCount ? e.getRangeAt(0) : null;\n  }\n  /**\n   * Calculates position and size of selected text\n   *\n   * @returns {DOMRect | ClientRect}\n   */\n  static get rect() {\n    let e = document.selection,\n      t,\n      o = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    if (e && e.type !== \"Control\") return e = e, t = e.createRange(), o.x = t.boundingLeft, o.y = t.boundingTop, o.width = t.boundingWidth, o.height = t.boundingHeight, o;\n    if (!window.getSelection) return L(\"Method window.getSelection is not supported\", \"warn\"), o;\n    if (e = window.getSelection(), e.rangeCount === null || isNaN(e.rangeCount)) return L(\"Method SelectionUtils.rangeCount is not supported\", \"warn\"), o;\n    if (e.rangeCount === 0) return o;\n    if (t = e.getRangeAt(0).cloneRange(), t.getBoundingClientRect && (o = t.getBoundingClientRect()), o.x === 0 && o.y === 0) {\n      const i = document.createElement(\"span\");\n      if (i.getBoundingClientRect) {\n        i.appendChild(document.createTextNode(\"​\")), t.insertNode(i), o = i.getBoundingClientRect();\n        const n = i.parentNode;\n        n.removeChild(i), n.normalize();\n      }\n    }\n    return o;\n  }\n  /**\n   * Returns selected text as String\n   *\n   * @returns {string}\n   */\n  static get text() {\n    return window.getSelection ? window.getSelection().toString() : \"\";\n  }\n  /**\n   * Returns window SelectionUtils\n   * {@link https://developer.mozilla.org/ru/docs/Web/API/Window/getSelection}\n   *\n   * @returns {Selection}\n   */\n  static get() {\n    return window.getSelection();\n  }\n  /**\n   * Set focus to contenteditable or native input element\n   *\n   * @param element - element where to set focus\n   * @param offset - offset of cursor\n   */\n  static setCursor(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const o = document.createRange(),\n      i = window.getSelection();\n    return d.isNativeInput(e) ? d.canSetCaret(e) ? (e.focus(), e.selectionStart = e.selectionEnd = t, e.getBoundingClientRect()) : void 0 : (o.setStart(e, t), o.setEnd(e, t), i.removeAllRanges(), i.addRange(o), o.getBoundingClientRect());\n  }\n  /**\n   * Check if current range exists and belongs to container\n   *\n   * @param container - where range should be\n   */\n  static isRangeInsideContainer(e) {\n    const t = m.range;\n    return t === null ? !1 : e.contains(t.startContainer);\n  }\n  /**\n   * Adds fake cursor to the current range\n   */\n  static addFakeCursor() {\n    const e = m.range;\n    if (e === null) return;\n    const t = d.make(\"span\", \"codex-editor__fake-cursor\");\n    t.dataset.mutationFree = \"true\", e.collapse(), e.insertNode(t);\n  }\n  /**\n   * Check if passed element contains a fake cursor\n   *\n   * @param el - where to check\n   */\n  static isFakeCursorInsideContainer(e) {\n    return d.find(e, \".codex-editor__fake-cursor\") !== null;\n  }\n  /**\n   * Removes fake cursor from a container\n   *\n   * @param container - container to look for\n   */\n  static removeFakeCursor() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.body;\n    const t = d.find(e, \".codex-editor__fake-cursor\");\n    t && t.remove();\n  }\n  /**\n   * Removes fake background\n   */\n  removeFakeBackground() {\n    this.isFakeBackgroundEnabled && (this.isFakeBackgroundEnabled = !1, document.execCommand(this.commandRemoveFormat));\n  }\n  /**\n   * Sets fake background\n   */\n  setFakeBackground() {\n    document.execCommand(this.commandBackground, !1, \"#a8d6ff\"), this.isFakeBackgroundEnabled = !0;\n  }\n  /**\n   * Save SelectionUtils's range\n   */\n  save() {\n    this.savedSelectionRange = m.range;\n  }\n  /**\n   * Restore saved SelectionUtils's range\n   */\n  restore() {\n    if (!this.savedSelectionRange) return;\n    const e = window.getSelection();\n    e.removeAllRanges(), e.addRange(this.savedSelectionRange);\n  }\n  /**\n   * Clears saved selection\n   */\n  clearSaved() {\n    this.savedSelectionRange = null;\n  }\n  /**\n   * Collapse current selection\n   */\n  collapseToEnd() {\n    const e = window.getSelection(),\n      t = document.createRange();\n    t.selectNodeContents(e.focusNode), t.collapse(!1), e.removeAllRanges(), e.addRange(t);\n  }\n  /**\n   * Looks ahead to find passed tag from current selection\n   *\n   * @param  {string} tagName       - tag to found\n   * @param  {string} [className]   - tag's class name\n   * @param  {number} [searchDepth] - count of tags that can be included. For better performance.\n   * @returns {HTMLElement|null}\n   */\n  findParentTag(e, t) {\n    let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n    const i = window.getSelection();\n    let n = null;\n    return !i || !i.anchorNode || !i.focusNode ? null : ([/** the Node in which the selection begins */\n    i.anchorNode, /** the Node in which the selection ends */\n    i.focusNode].forEach(a => {\n      let l = o;\n      for (; l > 0 && a.parentNode && !(a.tagName === e && (n = a, t && a.classList && !a.classList.contains(t) && (n = null), n));) a = a.parentNode, l--;\n    }), n);\n  }\n  /**\n   * Expands selection range to the passed parent node\n   *\n   * @param {HTMLElement} element - element which contents should be selected\n   */\n  expandToTag(e) {\n    const t = window.getSelection();\n    t.removeAllRanges();\n    const o = document.createRange();\n    o.selectNodeContents(e), t.addRange(o);\n  }\n}\nfunction Zt(s, e) {\n  const {\n    type: t,\n    target: o,\n    addedNodes: i,\n    removedNodes: n\n  } = s;\n  if (o === e) return !0;\n  if ([\"characterData\", \"attributes\"].includes(t)) {\n    const l = o.nodeType === Node.TEXT_NODE ? o.parentNode : o;\n    return e.contains(l);\n  }\n  const r = Array.from(i).some(l => e.contains(l)),\n    a = Array.from(n).some(l => e.contains(l));\n  return r || a;\n}\nconst Me = \"redactor dom changed\",\n  ct = \"block changed\",\n  dt = \"fake cursor is about to be toggled\",\n  ht = \"fake cursor have been set\";\nfunction Je(s, e) {\n  return s.mergeable && s.name === e.name;\n}\nfunction Gt(s, e) {\n  const t = e == null ? void 0 : e.export;\n  return D(t) ? t(s) : J(t) ? s[t] : (t !== void 0 && L(\"Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export.\"), \"\");\n}\nfunction Jt(s, e) {\n  const t = e == null ? void 0 : e.import;\n  return D(t) ? t(s) : J(t) ? {\n    [t]: s\n  } : (t !== void 0 && L(\"Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data.\"), {});\n}\nvar q = /* @__PURE__ */(s => (s.APPEND_CALLBACK = \"appendCallback\", s.RENDERED = \"rendered\", s.MOVED = \"moved\", s.UPDATED = \"updated\", s.REMOVED = \"removed\", s.ON_PASTE = \"onPaste\", s))(q || {});\nclass F extends we {\n  /**\n   * @param options - block constructor options\n   * @param [options.id] - block's id. Will be generated if omitted.\n   * @param options.data - Tool's initial data\n   * @param options.tool — block's tool\n   * @param options.api - Editor API module for pass it to the Block Tunes\n   * @param options.readOnly - Read-Only flag\n   * @param [eventBus] - Editor common event bus. Allows to subscribe on some Editor events. Could be omitted when \"virtual\" Block is created. See BlocksAPI@composeBlockData.\n   */\n  constructor(_ref2, a) {\n    var _this3;\n    let {\n      id: e = Ut(),\n      data: t,\n      tool: o,\n      api: i,\n      readOnly: n,\n      tunesData: r\n    } = _ref2;\n    (super(), _this3 = this), this.cachedInputs = [], this.toolRenderedElement = null, this.tunesInstances = /* @__PURE__ */new Map(), this.defaultTunesInstances = /* @__PURE__ */new Map(), this.unavailableTunesData = {}, this.inputIndex = 0, this.editorEventBus = null, this.handleFocus = () => {\n      this.dropInputsCache(), this.updateCurrentInput();\n    }, this.didMutated = function () {\n      let l = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : void 0;\n      const c = l === void 0,\n        u = l instanceof InputEvent;\n      !c && !u && _this3.detectToolRootChange(l);\n      let h;\n      c || u ? h = !0 : h = !(l.length > 0 && l.every(k => {\n        const {\n          addedNodes: p,\n          removedNodes: v,\n          target: A\n        } = k;\n        return [...Array.from(p), ...Array.from(v), A].some(_ => d.isElement(_) ? _.dataset.mutationFree === \"true\" : !1);\n      })), h && (_this3.dropInputsCache(), _this3.updateCurrentInput(), _this3.call(\"updated\"\n      /* UPDATED */), _this3.emit(\"didMutated\", _this3));\n    }, this.name = o.name, this.id = e, this.settings = o.settings, this.config = o.settings.config || {}, this.api = i, this.editorEventBus = a || null, this.blockAPI = new ee(this), this.tool = o, this.toolInstance = o.create(t, this.blockAPI, n), this.tunes = o.tunes, this.composeTunes(r), this.holder = this.compose(), window.requestIdleCallback(() => {\n      this.watchBlockMutations(), this.addInputEvents();\n    });\n  }\n  /**\n   * CSS classes for the Block\n   *\n   * @returns {{wrapper: string, content: string}}\n   */\n  static get CSS() {\n    return {\n      wrapper: \"ce-block\",\n      wrapperStretched: \"ce-block--stretched\",\n      content: \"ce-block__content\",\n      focused: \"ce-block--focused\",\n      selected: \"ce-block--selected\",\n      dropTarget: \"ce-block--drop-target\"\n    };\n  }\n  /**\n   * Find and return all editable elements (contenteditable and native inputs) in the Tool HTML\n   *\n   * @returns {HTMLElement[]}\n   */\n  get inputs() {\n    if (this.cachedInputs.length !== 0) return this.cachedInputs;\n    const e = d.findAllInputs(this.holder);\n    return this.inputIndex > e.length - 1 && (this.inputIndex = e.length - 1), this.cachedInputs = e, e;\n  }\n  /**\n   * Return current Tool`s input\n   *\n   * @returns {HTMLElement}\n   */\n  get currentInput() {\n    return this.inputs[this.inputIndex];\n  }\n  /**\n   * Set input index to the passed element\n   *\n   * @param {HTMLElement | Node} element - HTML Element to set as current input\n   */\n  set currentInput(e) {\n    const t = this.inputs.findIndex(o => o === e || o.contains(e));\n    t !== -1 && (this.inputIndex = t);\n  }\n  /**\n   * Return first Tool`s input\n   *\n   * @returns {HTMLElement}\n   */\n  get firstInput() {\n    return this.inputs[0];\n  }\n  /**\n   * Return first Tool`s input\n   *\n   * @returns {HTMLElement}\n   */\n  get lastInput() {\n    const e = this.inputs;\n    return e[e.length - 1];\n  }\n  /**\n   * Return next Tool`s input or undefined if it doesn't exist\n   *\n   * @returns {HTMLElement}\n   */\n  get nextInput() {\n    return this.inputs[this.inputIndex + 1];\n  }\n  /**\n   * Return previous Tool`s input or undefined if it doesn't exist\n   *\n   * @returns {HTMLElement}\n   */\n  get previousInput() {\n    return this.inputs[this.inputIndex - 1];\n  }\n  /**\n   * Get Block's JSON data\n   *\n   * @returns {object}\n   */\n  get data() {\n    return this.save().then(e => e && !V(e.data) ? e.data : {});\n  }\n  /**\n   * Returns tool's sanitizer config\n   *\n   * @returns {object}\n   */\n  get sanitize() {\n    return this.tool.sanitizeConfig;\n  }\n  /**\n   * is block mergeable\n   * We plugin have merge function then we call it mergeable\n   *\n   * @returns {boolean}\n   */\n  get mergeable() {\n    return D(this.toolInstance.merge);\n  }\n  /**\n   * Check block for emptiness\n   *\n   * @returns {boolean}\n   */\n  get isEmpty() {\n    const e = d.isEmpty(this.pluginsContent),\n      t = !this.hasMedia;\n    return e && t;\n  }\n  /**\n   * Check if block has a media content such as images, iframe and other\n   *\n   * @returns {boolean}\n   */\n  get hasMedia() {\n    const e = [\"img\", \"iframe\", \"video\", \"audio\", \"source\", \"input\", \"textarea\", \"twitterwidget\"];\n    return !!this.holder.querySelector(e.join(\",\"));\n  }\n  /**\n   * Set focused state\n   *\n   * @param {boolean} state - 'true' to select, 'false' to remove selection\n   */\n  set focused(e) {\n    this.holder.classList.toggle(F.CSS.focused, e);\n  }\n  /**\n   * Get Block's focused state\n   */\n  get focused() {\n    return this.holder.classList.contains(F.CSS.focused);\n  }\n  /**\n   * Set selected state\n   * We don't need to mark Block as Selected when it is empty\n   *\n   * @param {boolean} state - 'true' to select, 'false' to remove selection\n   */\n  set selected(e) {\n    var i, n;\n    this.holder.classList.toggle(F.CSS.selected, e);\n    const t = e === !0 && m.isRangeInsideContainer(this.holder),\n      o = e === !1 && m.isFakeCursorInsideContainer(this.holder);\n    (t || o) && ((i = this.editorEventBus) == null || i.emit(dt, {\n      state: e\n    }), t ? m.addFakeCursor() : m.removeFakeCursor(this.holder), (n = this.editorEventBus) == null || n.emit(ht, {\n      state: e\n    }));\n  }\n  /**\n   * Returns True if it is Selected\n   *\n   * @returns {boolean}\n   */\n  get selected() {\n    return this.holder.classList.contains(F.CSS.selected);\n  }\n  /**\n   * Set stretched state\n   *\n   * @param {boolean} state - 'true' to enable, 'false' to disable stretched state\n   */\n  set stretched(e) {\n    this.holder.classList.toggle(F.CSS.wrapperStretched, e);\n  }\n  /**\n   * Return Block's stretched state\n   *\n   * @returns {boolean}\n   */\n  get stretched() {\n    return this.holder.classList.contains(F.CSS.wrapperStretched);\n  }\n  /**\n   * Toggle drop target state\n   *\n   * @param {boolean} state - 'true' if block is drop target, false otherwise\n   */\n  set dropTarget(e) {\n    this.holder.classList.toggle(F.CSS.dropTarget, e);\n  }\n  /**\n   * Returns Plugins content\n   *\n   * @returns {HTMLElement}\n   */\n  get pluginsContent() {\n    return this.toolRenderedElement;\n  }\n  /**\n   * Calls Tool's method\n   *\n   * Method checks tool property {MethodName}. Fires method with passes params If it is instance of Function\n   *\n   * @param {string} methodName - method to call\n   * @param {object} params - method argument\n   */\n  call(e, t) {\n    if (D(this.toolInstance[e])) {\n      e === \"appendCallback\" && L(\"`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead\", \"warn\");\n      try {\n        this.toolInstance[e].call(this.toolInstance, t);\n      } catch (o) {\n        L(\"Error during '\".concat(e, \"' call: \").concat(o.message), \"error\");\n      }\n    }\n  }\n  /**\n   * Call plugins merge method\n   *\n   * @param {BlockToolData} data - data to merge\n   */\n  async mergeWith(e) {\n    await this.toolInstance.merge(e);\n  }\n  /**\n   * Extracts data from Block\n   * Groups Tool's save processing time\n   *\n   * @returns {object}\n   */\n  async save() {\n    const e = await this.toolInstance.save(this.pluginsContent),\n      t = this.unavailableTunesData;\n    [...this.tunesInstances.entries(), ...this.defaultTunesInstances.entries()].forEach(_ref3 => {\n      let [n, r] = _ref3;\n      if (D(r.save)) try {\n        t[n] = r.save();\n      } catch (a) {\n        L(\"Tune \".concat(r.constructor.name, \" save method throws an Error %o\"), \"warn\", a);\n      }\n    });\n    const o = window.performance.now();\n    let i;\n    return Promise.resolve(e).then(n => (i = window.performance.now(), {\n      id: this.id,\n      tool: this.name,\n      data: n,\n      tunes: t,\n      time: i - o\n    })).catch(n => {\n      L(\"Saving process for \".concat(this.name, \" tool failed due to the \").concat(n), \"log\", \"red\");\n    });\n  }\n  /**\n   * Uses Tool's validation method to check the correctness of output data\n   * Tool's validation method is optional\n   *\n   * @description Method returns true|false whether data passed the validation or not\n   * @param {BlockToolData} data - data to validate\n   * @returns {Promise<boolean>} valid\n   */\n  async validate(e) {\n    let t = !0;\n    return this.toolInstance.validate instanceof Function && (t = await this.toolInstance.validate(e)), t;\n  }\n  /**\n   * Returns data to render in tunes menu.\n   * Splits block tunes settings into 2 groups: popover items and custom html.\n   */\n  getTunes() {\n    const e = document.createElement(\"div\"),\n      t = [],\n      o = typeof this.toolInstance.renderSettings == \"function\" ? this.toolInstance.renderSettings() : [],\n      i = [...this.tunesInstances.values(), ...this.defaultTunesInstances.values()].map(n => n.render());\n    return [o, i].flat().forEach(n => {\n      d.isElement(n) ? e.appendChild(n) : Array.isArray(n) ? t.push(...n) : t.push(n);\n    }), [t, e];\n  }\n  /**\n   * Update current input index with selection anchor node\n   */\n  updateCurrentInput() {\n    this.currentInput = d.isNativeInput(document.activeElement) || !m.anchorNode ? document.activeElement : m.anchorNode;\n  }\n  /**\n   * Allows to say Editor that Block was changed. Used to manually trigger Editor's 'onChange' callback\n   * Can be useful for block changes invisible for editor core.\n   */\n  dispatchChange() {\n    this.didMutated();\n  }\n  /**\n   * Call Tool instance destroy method\n   */\n  destroy() {\n    this.unwatchBlockMutations(), this.removeInputEvents(), super.destroy(), D(this.toolInstance.destroy) && this.toolInstance.destroy();\n  }\n  /**\n   * Tool could specify several entries to be displayed at the Toolbox (for example, \"Heading 1\", \"Heading 2\", \"Heading 3\")\n   * This method returns the entry that is related to the Block (depended on the Block data)\n   */\n  async getActiveToolboxEntry() {\n    const e = this.tool.toolbox;\n    if (e.length === 1) return Promise.resolve(this.tool.toolbox[0]);\n    const t = await this.data;\n    return e.find(i => Object.entries(i.data).some(_ref4 => {\n      let [n, r] = _ref4;\n      return t[n] && Yt(t[n], r);\n    }));\n  }\n  /**\n   * Exports Block data as string using conversion config\n   */\n  async exportDataAsString() {\n    const e = await this.data;\n    return Gt(e, this.tool.conversionConfig);\n  }\n  /**\n   * Make default Block wrappers and put Tool`s content there\n   *\n   * @returns {HTMLDivElement}\n   */\n  compose() {\n    const e = d.make(\"div\", F.CSS.wrapper),\n      t = d.make(\"div\", F.CSS.content),\n      o = this.toolInstance.render();\n    e.dataset.id = this.id, this.toolRenderedElement = o, t.appendChild(this.toolRenderedElement);\n    let i = t;\n    return [...this.tunesInstances.values(), ...this.defaultTunesInstances.values()].forEach(n => {\n      if (D(n.wrap)) try {\n        i = n.wrap(i);\n      } catch (r) {\n        L(\"Tune \".concat(n.constructor.name, \" wrap method throws an Error %o\"), \"warn\", r);\n      }\n    }), e.appendChild(i), e;\n  }\n  /**\n   * Instantiate Block Tunes\n   *\n   * @param tunesData - current Block tunes data\n   * @private\n   */\n  composeTunes(e) {\n    Array.from(this.tunes.values()).forEach(t => {\n      (t.isInternal ? this.defaultTunesInstances : this.tunesInstances).set(t.name, t.create(e[t.name], this.blockAPI));\n    }), Object.entries(e).forEach(_ref5 => {\n      let [t, o] = _ref5;\n      this.tunesInstances.has(t) || (this.unavailableTunesData[t] = o);\n    });\n  }\n  /**\n   * Adds focus event listeners to all inputs and contenteditable\n   */\n  addInputEvents() {\n    this.inputs.forEach(e => {\n      e.addEventListener(\"focus\", this.handleFocus), d.isNativeInput(e) && e.addEventListener(\"input\", this.didMutated);\n    });\n  }\n  /**\n   * removes focus event listeners from all inputs and contenteditable\n   */\n  removeInputEvents() {\n    this.inputs.forEach(e => {\n      e.removeEventListener(\"focus\", this.handleFocus), d.isNativeInput(e) && e.removeEventListener(\"input\", this.didMutated);\n    });\n  }\n  /**\n   * Listen common editor Dom Changed event and detect mutations related to the  Block\n   */\n  watchBlockMutations() {\n    var e;\n    this.redactorDomChangedCallback = t => {\n      const {\n        mutations: o\n      } = t;\n      o.some(n => Zt(n, this.toolRenderedElement)) && this.didMutated(o);\n    }, (e = this.editorEventBus) == null || e.on(Me, this.redactorDomChangedCallback);\n  }\n  /**\n   * Remove redactor dom change event listener\n   */\n  unwatchBlockMutations() {\n    var e;\n    (e = this.editorEventBus) == null || e.off(Me, this.redactorDomChangedCallback);\n  }\n  /**\n   * Sometimes Tool can replace own main element, for example H2 -> H4 or UL -> OL\n   * We need to detect such changes and update a link to tools main element with the new one\n   *\n   * @param mutations - records of block content mutations\n   */\n  detectToolRootChange(e) {\n    e.forEach(t => {\n      if (Array.from(t.removedNodes).includes(this.toolRenderedElement)) {\n        const i = t.addedNodes[t.addedNodes.length - 1];\n        this.toolRenderedElement = i;\n      }\n    });\n  }\n  /**\n   * Clears inputs cached value\n   */\n  dropInputsCache() {\n    this.cachedInputs = [];\n  }\n}\nclass Qt extends C {\n  constructor() {\n    var _this4;\n    (super(...arguments), _this4 = this), this.insert = function () {\n      let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.config.defaultBlock;\n      let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let i = arguments.length > 3 ? arguments[3] : undefined;\n      let n = arguments.length > 4 ? arguments[4] : undefined;\n      let r = arguments.length > 5 ? arguments[5] : undefined;\n      let a = arguments.length > 6 ? arguments[6] : undefined;\n      const l = _this4.Editor.BlockManager.insert({\n        id: a,\n        tool: e,\n        data: t,\n        index: i,\n        needToFocus: n,\n        replace: r\n      });\n      return new ee(l);\n    }, this.composeBlockData = async e => {\n      const t = this.Editor.Tools.blockTools.get(e);\n      return new F({\n        tool: t,\n        api: this.Editor.API,\n        readOnly: !0,\n        data: {},\n        tunesData: {}\n      }).data;\n    }, this.update = async (e, t) => {\n      const {\n          BlockManager: o\n        } = this.Editor,\n        i = o.getBlockById(e);\n      if (i === void 0) throw new Error(\"Block with id \\\"\".concat(e, \"\\\" not found\"));\n      const n = await o.update(i, t);\n      return new ee(n);\n    }, this.convert = (e, t, o) => {\n      var h, f;\n      const {\n          BlockManager: i,\n          Tools: n\n        } = this.Editor,\n        r = i.getBlockById(e);\n      if (!r) throw new Error(\"Block with id \\\"\".concat(e, \"\\\" not found\"));\n      const a = n.blockTools.get(r.name),\n        l = n.blockTools.get(t);\n      if (!l) throw new Error(\"Block Tool with type \\\"\".concat(t, \"\\\" not found\"));\n      const c = ((h = a == null ? void 0 : a.conversionConfig) == null ? void 0 : h.export) !== void 0,\n        u = ((f = l.conversionConfig) == null ? void 0 : f.import) !== void 0;\n      if (c && u) i.convert(r, t, o);else {\n        const k = [c ? !1 : ae(r.name), u ? !1 : ae(t)].filter(Boolean).join(\" and \");\n        throw new Error(\"Conversion from \\\"\".concat(r.name, \"\\\" to \\\"\").concat(t, \"\\\" is not possible. \").concat(k, \" tool(s) should provide a \\\"conversionConfig\\\"\"));\n      }\n    }, this.insertMany = function (e) {\n      let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this4.Editor.BlockManager.blocks.length - 1;\n      _this4.validateIndex(t);\n      const o = e.map(_ref6 => {\n        let {\n          id: i,\n          type: n,\n          data: r\n        } = _ref6;\n        return _this4.Editor.BlockManager.composeBlock({\n          id: i,\n          tool: n || _this4.config.defaultBlock,\n          data: r\n        });\n      });\n      return _this4.Editor.BlockManager.insertMany(o, t), o.map(i => new ee(i));\n    };\n  }\n  /**\n   * Available methods\n   *\n   * @returns {Blocks}\n   */\n  get methods() {\n    var _this5 = this;\n    return {\n      clear: () => this.clear(),\n      render: e => this.render(e),\n      renderFromHTML: e => this.renderFromHTML(e),\n      delete: e => this.delete(e),\n      swap: (e, t) => this.swap(e, t),\n      move: (e, t) => this.move(e, t),\n      getBlockByIndex: e => this.getBlockByIndex(e),\n      getById: e => this.getById(e),\n      getCurrentBlockIndex: () => this.getCurrentBlockIndex(),\n      getBlockIndex: e => this.getBlockIndex(e),\n      getBlocksCount: () => this.getBlocksCount(),\n      stretchBlock: function (e) {\n        let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n        return _this5.stretchBlock(e, t);\n      },\n      insertNewBlock: () => this.insertNewBlock(),\n      insert: this.insert,\n      insertMany: this.insertMany,\n      update: this.update,\n      composeBlockData: this.composeBlockData,\n      convert: this.convert\n    };\n  }\n  /**\n   * Returns Blocks count\n   *\n   * @returns {number}\n   */\n  getBlocksCount() {\n    return this.Editor.BlockManager.blocks.length;\n  }\n  /**\n   * Returns current block index\n   *\n   * @returns {number}\n   */\n  getCurrentBlockIndex() {\n    return this.Editor.BlockManager.currentBlockIndex;\n  }\n  /**\n   * Returns the index of Block by id;\n   *\n   * @param id - block id\n   */\n  getBlockIndex(e) {\n    const t = this.Editor.BlockManager.getBlockById(e);\n    if (!t) {\n      K(\"There is no block with id `\" + e + \"`\", \"warn\");\n      return;\n    }\n    return this.Editor.BlockManager.getBlockIndex(t);\n  }\n  /**\n   * Returns BlockAPI object by Block index\n   *\n   * @param {number} index - index to get\n   */\n  getBlockByIndex(e) {\n    const t = this.Editor.BlockManager.getBlockByIndex(e);\n    if (t === void 0) {\n      K(\"There is no block at index `\" + e + \"`\", \"warn\");\n      return;\n    }\n    return new ee(t);\n  }\n  /**\n   * Returns BlockAPI object by Block id\n   *\n   * @param id - id of block to get\n   */\n  getById(e) {\n    const t = this.Editor.BlockManager.getBlockById(e);\n    return t === void 0 ? (K(\"There is no block with id `\" + e + \"`\", \"warn\"), null) : new ee(t);\n  }\n  /**\n   * Call Block Manager method that swap Blocks\n   *\n   * @param {number} fromIndex - position of first Block\n   * @param {number} toIndex - position of second Block\n   * @deprecated — use 'move' instead\n   */\n  swap(e, t) {\n    L(\"`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead\", \"info\"), this.Editor.BlockManager.swap(e, t);\n  }\n  /**\n   * Move block from one index to another\n   *\n   * @param {number} toIndex - index to move to\n   * @param {number} fromIndex - index to move from\n   */\n  move(e, t) {\n    this.Editor.BlockManager.move(e, t);\n  }\n  /**\n   * Deletes Block\n   *\n   * @param {number} blockIndex - index of Block to delete\n   */\n  delete() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.Editor.BlockManager.currentBlockIndex;\n    try {\n      const t = this.Editor.BlockManager.getBlockByIndex(e);\n      this.Editor.BlockManager.removeBlock(t);\n    } catch (t) {\n      K(t, \"warn\");\n      return;\n    }\n    this.Editor.BlockManager.blocks.length === 0 && this.Editor.BlockManager.insert(), this.Editor.BlockManager.currentBlock && this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock, this.Editor.Caret.positions.END), this.Editor.Toolbar.close();\n  }\n  /**\n   * Clear Editor's area\n   */\n  async clear() {\n    await this.Editor.BlockManager.clear(!0), this.Editor.InlineToolbar.close();\n  }\n  /**\n   * Fills Editor with Blocks data\n   *\n   * @param {OutputData} data — Saved Editor data\n   */\n  async render(e) {\n    if (e === void 0 || e.blocks === void 0) throw new Error(\"Incorrect data passed to the render() method\");\n    this.Editor.ModificationsObserver.disable(), await this.Editor.BlockManager.clear(), await this.Editor.Renderer.render(e.blocks), this.Editor.ModificationsObserver.enable();\n  }\n  /**\n   * Render passed HTML string\n   *\n   * @param {string} data - HTML string to render\n   * @returns {Promise<void>}\n   */\n  renderFromHTML(e) {\n    return this.Editor.BlockManager.clear(), this.Editor.Paste.processText(e, !0);\n  }\n  /**\n   * Stretch Block's content\n   *\n   * @param {number} index - index of Block to stretch\n   * @param {boolean} status - true to enable, false to disable\n   * @deprecated Use BlockAPI interface to stretch Blocks\n   */\n  stretchBlock(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n    Ie(!0, \"blocks.stretchBlock()\", \"BlockAPI\");\n    const o = this.Editor.BlockManager.getBlockByIndex(e);\n    o && (o.stretched = t);\n  }\n  /**\n   * Insert new Block\n   * After set caret to this Block\n   *\n   * @todo remove in 3.0.0\n   * @deprecated with insert() method\n   */\n  insertNewBlock() {\n    L(\"Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.\", \"warn\"), this.insert();\n  }\n  /**\n   * Validated block index and throws an error if it's invalid\n   *\n   * @param index - index to validate\n   */\n  validateIndex(e) {\n    if (typeof e != \"number\") throw new Error(\"Index should be a number\");\n    if (e < 0) throw new Error(\"Index should be greater than or equal to 0\");\n    if (e === null) throw new Error(\"Index should be greater than or equal to 0\");\n  }\n}\nclass eo extends C {\n  constructor() {\n    var _this6;\n    (super(...arguments), _this6 = this), this.setToFirstBlock = function () {\n      let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this6.Editor.Caret.positions.DEFAULT;\n      let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return _this6.Editor.BlockManager.firstBlock ? (_this6.Editor.Caret.setToBlock(_this6.Editor.BlockManager.firstBlock, e, t), !0) : !1;\n    }, this.setToLastBlock = function () {\n      let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this6.Editor.Caret.positions.DEFAULT;\n      let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return _this6.Editor.BlockManager.lastBlock ? (_this6.Editor.Caret.setToBlock(_this6.Editor.BlockManager.lastBlock, e, t), !0) : !1;\n    }, this.setToPreviousBlock = function () {\n      let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this6.Editor.Caret.positions.DEFAULT;\n      let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return _this6.Editor.BlockManager.previousBlock ? (_this6.Editor.Caret.setToBlock(_this6.Editor.BlockManager.previousBlock, e, t), !0) : !1;\n    }, this.setToNextBlock = function () {\n      let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this6.Editor.Caret.positions.DEFAULT;\n      let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return _this6.Editor.BlockManager.nextBlock ? (_this6.Editor.Caret.setToBlock(_this6.Editor.BlockManager.nextBlock, e, t), !0) : !1;\n    }, this.setToBlock = function (e) {\n      let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this6.Editor.Caret.positions.DEFAULT;\n      let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      return _this6.Editor.BlockManager.blocks[e] ? (_this6.Editor.Caret.setToBlock(_this6.Editor.BlockManager.blocks[e], t, o), !0) : !1;\n    }, this.focus = function () {\n      let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n      return e ? _this6.setToLastBlock(_this6.Editor.Caret.positions.END) : _this6.setToFirstBlock(_this6.Editor.Caret.positions.START);\n    };\n  }\n  /**\n   * Available methods\n   *\n   * @returns {Caret}\n   */\n  get methods() {\n    return {\n      setToFirstBlock: this.setToFirstBlock,\n      setToLastBlock: this.setToLastBlock,\n      setToPreviousBlock: this.setToPreviousBlock,\n      setToNextBlock: this.setToNextBlock,\n      setToBlock: this.setToBlock,\n      focus: this.focus\n    };\n  }\n}\nclass to extends C {\n  /**\n   * Available methods\n   *\n   * @returns {Events}\n   */\n  get methods() {\n    return {\n      emit: (e, t) => this.emit(e, t),\n      off: (e, t) => this.off(e, t),\n      on: (e, t) => this.on(e, t)\n    };\n  }\n  /**\n   * Subscribe on Events\n   *\n   * @param {string} eventName - event name to subscribe\n   * @param {Function} callback - event handler\n   */\n  on(e, t) {\n    this.eventsDispatcher.on(e, t);\n  }\n  /**\n   * Emit event with data\n   *\n   * @param {string} eventName - event to emit\n   * @param {object} data - event's data\n   */\n  emit(e, t) {\n    this.eventsDispatcher.emit(e, t);\n  }\n  /**\n   * Unsubscribe from Event\n   *\n   * @param {string} eventName - event to unsubscribe\n   * @param {Function} callback - event handler\n   */\n  off(e, t) {\n    this.eventsDispatcher.off(e, t);\n  }\n}\nclass Pe extends C {\n  /**\n   * Return namespace section for tool or block tune\n   *\n   * @param tool - tool object\n   */\n  static getNamespace(e) {\n    return e.isTune() ? \"blockTunes.\".concat(e.name) : \"tools.\".concat(e.name);\n  }\n  /**\n   * Return I18n API methods with global dictionary access\n   */\n  get methods() {\n    return {\n      t: () => {\n        K(\"I18n.t() method can be accessed only from Tools\", \"warn\");\n      }\n    };\n  }\n  /**\n   * Return I18n API methods with tool namespaced dictionary\n   *\n   * @param tool - Tool object\n   */\n  getMethodsForTool(e) {\n    return Object.assign(this.methods, {\n      t: t => $.t(Pe.getNamespace(e), t)\n    });\n  }\n}\nclass oo extends C {\n  /**\n   * Editor.js Core API modules\n   */\n  get methods() {\n    return {\n      blocks: this.Editor.BlocksAPI.methods,\n      caret: this.Editor.CaretAPI.methods,\n      events: this.Editor.EventsAPI.methods,\n      listeners: this.Editor.ListenersAPI.methods,\n      notifier: this.Editor.NotifierAPI.methods,\n      sanitizer: this.Editor.SanitizerAPI.methods,\n      saver: this.Editor.SaverAPI.methods,\n      selection: this.Editor.SelectionAPI.methods,\n      styles: this.Editor.StylesAPI.classes,\n      toolbar: this.Editor.ToolbarAPI.methods,\n      inlineToolbar: this.Editor.InlineToolbarAPI.methods,\n      tooltip: this.Editor.TooltipAPI.methods,\n      i18n: this.Editor.I18nAPI.methods,\n      readOnly: this.Editor.ReadOnlyAPI.methods,\n      ui: this.Editor.UiAPI.methods\n    };\n  }\n  /**\n   * Returns Editor.js Core API methods for passed tool\n   *\n   * @param tool - tool object\n   */\n  getMethodsForTool(e) {\n    return Object.assign(this.methods, {\n      i18n: this.Editor.I18nAPI.getMethodsForTool(e)\n    });\n  }\n}\nclass io extends C {\n  /**\n   * Available methods\n   *\n   * @returns {InlineToolbar}\n   */\n  get methods() {\n    return {\n      close: () => this.close(),\n      open: () => this.open()\n    };\n  }\n  /**\n   * Open Inline Toolbar\n   */\n  open() {\n    this.Editor.InlineToolbar.tryToShow();\n  }\n  /**\n   * Close Inline Toolbar\n   */\n  close() {\n    this.Editor.InlineToolbar.close();\n  }\n}\nclass no extends C {\n  /**\n   * Available methods\n   *\n   * @returns {Listeners}\n   */\n  get methods() {\n    return {\n      on: (e, t, o, i) => this.on(e, t, o, i),\n      off: (e, t, o, i) => this.off(e, t, o, i),\n      offById: e => this.offById(e)\n    };\n  }\n  /**\n   * Ads a DOM event listener. Return it's id.\n   *\n   * @param {HTMLElement} element - Element to set handler to\n   * @param {string} eventType - event type\n   * @param {() => void} handler - event handler\n   * @param {boolean} useCapture - capture event or not\n   */\n  on(e, t, o, i) {\n    return this.listeners.on(e, t, o, i);\n  }\n  /**\n   * Removes DOM listener from element\n   *\n   * @param {Element} element - Element to remove handler from\n   * @param eventType - event type\n   * @param handler - event handler\n   * @param {boolean} useCapture - capture event or not\n   */\n  off(e, t, o, i) {\n    this.listeners.off(e, t, o, i);\n  }\n  /**\n   * Removes DOM listener by the listener id\n   *\n   * @param id - id of the listener to remove\n   */\n  offById(e) {\n    this.listeners.offById(e);\n  }\n}\nvar Le = {},\n  so = {\n    get exports() {\n      return Le;\n    },\n    set exports(s) {\n      Le = s;\n    }\n  };\n(function (s, e) {\n  (function (t, o) {\n    s.exports = o();\n  })(window, function () {\n    return function (t) {\n      var o = {};\n      function i(n) {\n        if (o[n]) return o[n].exports;\n        var r = o[n] = {\n          i: n,\n          l: !1,\n          exports: {}\n        };\n        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n      }\n      return i.m = t, i.c = o, i.d = function (n, r, a) {\n        i.o(n, r) || Object.defineProperty(n, r, {\n          enumerable: !0,\n          get: a\n        });\n      }, i.r = function (n) {\n        typeof Symbol < \"u\" && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n      }, i.t = function (n, r) {\n        if (1 & r && (n = i(n)), 8 & r || 4 & r && typeof n == \"object\" && n && n.__esModule) return n;\n        var a = /* @__PURE__ */Object.create(null);\n        if (i.r(a), Object.defineProperty(a, \"default\", {\n          enumerable: !0,\n          value: n\n        }), 2 & r && typeof n != \"string\") for (var l in n) i.d(a, l, function (c) {\n          return n[c];\n        }.bind(null, l));\n        return a;\n      }, i.n = function (n) {\n        var r = n && n.__esModule ? function () {\n          return n.default;\n        } : function () {\n          return n;\n        };\n        return i.d(r, \"a\", r), r;\n      }, i.o = function (n, r) {\n        return Object.prototype.hasOwnProperty.call(n, r);\n      }, i.p = \"/\", i(i.s = 0);\n    }([function (t, o, i) {\n      i(1),\n      /*!\n      * Codex JavaScript Notification module\n      * https://github.com/codex-team/js-notifier\n      */\n      t.exports = function () {\n        var n = i(6),\n          r = \"cdx-notify--bounce-in\",\n          a = null;\n        return {\n          show: function (l) {\n            if (l.message) {\n              (function () {\n                if (a) return !0;\n                a = n.getWrapper(), document.body.appendChild(a);\n              })();\n              var c = null,\n                u = l.time || 8e3;\n              switch (l.type) {\n                case \"confirm\":\n                  c = n.confirm(l);\n                  break;\n                case \"prompt\":\n                  c = n.prompt(l);\n                  break;\n                default:\n                  c = n.alert(l), window.setTimeout(function () {\n                    c.remove();\n                  }, u);\n              }\n              a.appendChild(c), c.classList.add(r);\n            }\n          }\n        };\n      }();\n    }, function (t, o, i) {\n      var n = i(2);\n      typeof n == \"string\" && (n = [[t.i, n, \"\"]]);\n      var r = {\n        hmr: !0,\n        transform: void 0,\n        insertInto: void 0\n      };\n      i(4)(n, r), n.locals && (t.exports = n.locals);\n    }, function (t, o, i) {\n      (t.exports = i(3)(!1)).push([t.i, \".cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,\\\"Segoe UI\\\",Roboto,Oxygen,Ubuntu,Cantarell,\\\"Fira Sans\\\",\\\"Droid Sans\\\",\\\"Helvetica Neue\\\",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}\", \"\"]);\n    }, function (t, o) {\n      t.exports = function (i) {\n        var n = [];\n        return n.toString = function () {\n          return this.map(function (r) {\n            var a = function (l, c) {\n              var u = l[1] || \"\",\n                h = l[3];\n              if (!h) return u;\n              if (c && typeof btoa == \"function\") {\n                var f = (p = h, \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(p)))) + \" */\"),\n                  k = h.sources.map(function (v) {\n                    return \"/*# sourceURL=\" + h.sourceRoot + v + \" */\";\n                  });\n                return [u].concat(k).concat([f]).join(\"\\n\");\n              }\n              var p;\n              return [u].join(\"\\n\");\n            }(r, i);\n            return r[2] ? \"@media \" + r[2] + \"{\" + a + \"}\" : a;\n          }).join(\"\");\n        }, n.i = function (r, a) {\n          typeof r == \"string\" && (r = [[null, r, \"\"]]);\n          for (var l = {}, c = 0; c < this.length; c++) {\n            var u = this[c][0];\n            typeof u == \"number\" && (l[u] = !0);\n          }\n          for (c = 0; c < r.length; c++) {\n            var h = r[c];\n            typeof h[0] == \"number\" && l[h[0]] || (a && !h[2] ? h[2] = a : a && (h[2] = \"(\" + h[2] + \") and (\" + a + \")\"), n.push(h));\n          }\n        }, n;\n      };\n    }, function (t, o, i) {\n      var n,\n        r,\n        a = {},\n        l = (n = function () {\n          return window && document && document.all && !window.atob;\n        }, function () {\n          return r === void 0 && (r = n.apply(this, arguments)), r;\n        }),\n        c = function (b) {\n          var g = {};\n          return function (E) {\n            if (typeof E == \"function\") return E();\n            if (g[E] === void 0) {\n              var T = function (O) {\n                return document.querySelector(O);\n              }.call(this, E);\n              if (window.HTMLIFrameElement && T instanceof window.HTMLIFrameElement) try {\n                T = T.contentDocument.head;\n              } catch {\n                T = null;\n              }\n              g[E] = T;\n            }\n            return g[E];\n          };\n        }(),\n        u = null,\n        h = 0,\n        f = [],\n        k = i(5);\n      function p(b, g) {\n        for (var E = 0; E < b.length; E++) {\n          var T = b[E],\n            O = a[T.id];\n          if (O) {\n            O.refs++;\n            for (var S = 0; S < O.parts.length; S++) O.parts[S](T.parts[S]);\n            for (; S < T.parts.length; S++) O.parts.push(x(T.parts[S], g));\n          } else {\n            var H = [];\n            for (S = 0; S < T.parts.length; S++) H.push(x(T.parts[S], g));\n            a[T.id] = {\n              id: T.id,\n              refs: 1,\n              parts: H\n            };\n          }\n        }\n      }\n      function v(b, g) {\n        for (var E = [], T = {}, O = 0; O < b.length; O++) {\n          var S = b[O],\n            H = g.base ? S[0] + g.base : S[0],\n            M = {\n              css: S[1],\n              media: S[2],\n              sourceMap: S[3]\n            };\n          T[H] ? T[H].parts.push(M) : E.push(T[H] = {\n            id: H,\n            parts: [M]\n          });\n        }\n        return E;\n      }\n      function A(b, g) {\n        var E = c(b.insertInto);\n        if (!E) throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n        var T = f[f.length - 1];\n        if (b.insertAt === \"top\") T ? T.nextSibling ? E.insertBefore(g, T.nextSibling) : E.appendChild(g) : E.insertBefore(g, E.firstChild), f.push(g);else if (b.insertAt === \"bottom\") E.appendChild(g);else {\n          if (typeof b.insertAt != \"object\" || !b.insertAt.before) throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n          var O = c(b.insertInto + \" \" + b.insertAt.before);\n          E.insertBefore(g, O);\n        }\n      }\n      function N(b) {\n        if (b.parentNode === null) return !1;\n        b.parentNode.removeChild(b);\n        var g = f.indexOf(b);\n        g >= 0 && f.splice(g, 1);\n      }\n      function _(b) {\n        var g = document.createElement(\"style\");\n        return b.attrs.type === void 0 && (b.attrs.type = \"text/css\"), y(g, b.attrs), A(b, g), g;\n      }\n      function y(b, g) {\n        Object.keys(g).forEach(function (E) {\n          b.setAttribute(E, g[E]);\n        });\n      }\n      function x(b, g) {\n        var E, T, O, S;\n        if (g.transform && b.css) {\n          if (!(S = g.transform(b.css))) return function () {};\n          b.css = S;\n        }\n        if (g.singleton) {\n          var H = h++;\n          E = u || (u = _(g)), T = R.bind(null, E, H, !1), O = R.bind(null, E, H, !0);\n        } else b.sourceMap && typeof URL == \"function\" && typeof URL.createObjectURL == \"function\" && typeof URL.revokeObjectURL == \"function\" && typeof Blob == \"function\" && typeof btoa == \"function\" ? (E = function (M) {\n          var W = document.createElement(\"link\");\n          return M.attrs.type === void 0 && (M.attrs.type = \"text/css\"), M.attrs.rel = \"stylesheet\", y(W, M.attrs), A(M, W), W;\n        }(g), T = function (M, W, de) {\n          var Q = de.css,\n            Ee = de.sourceMap,\n            Mt = W.convertToAbsoluteUrls === void 0 && Ee;\n          (W.convertToAbsoluteUrls || Mt) && (Q = k(Q)), Ee && (Q += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(Ee)))) + \" */\");\n          var Lt = new Blob([Q], {\n              type: \"text/css\"\n            }),\n            Ve = M.href;\n          M.href = URL.createObjectURL(Lt), Ve && URL.revokeObjectURL(Ve);\n        }.bind(null, E, g), O = function () {\n          N(E), E.href && URL.revokeObjectURL(E.href);\n        }) : (E = _(g), T = function (M, W) {\n          var de = W.css,\n            Q = W.media;\n          if (Q && M.setAttribute(\"media\", Q), M.styleSheet) M.styleSheet.cssText = de;else {\n            for (; M.firstChild;) M.removeChild(M.firstChild);\n            M.appendChild(document.createTextNode(de));\n          }\n        }.bind(null, E), O = function () {\n          N(E);\n        });\n        return T(b), function (M) {\n          if (M) {\n            if (M.css === b.css && M.media === b.media && M.sourceMap === b.sourceMap) return;\n            T(b = M);\n          } else O();\n        };\n      }\n      t.exports = function (b, g) {\n        if (typeof DEBUG < \"u\" && DEBUG && typeof document != \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n        (g = g || {}).attrs = typeof g.attrs == \"object\" ? g.attrs : {}, g.singleton || typeof g.singleton == \"boolean\" || (g.singleton = l()), g.insertInto || (g.insertInto = \"head\"), g.insertAt || (g.insertAt = \"bottom\");\n        var E = v(b, g);\n        return p(E, g), function (T) {\n          for (var O = [], S = 0; S < E.length; S++) {\n            var H = E[S];\n            (M = a[H.id]).refs--, O.push(M);\n          }\n          for (T && p(v(T, g), g), S = 0; S < O.length; S++) {\n            var M;\n            if ((M = O[S]).refs === 0) {\n              for (var W = 0; W < M.parts.length; W++) M.parts[W]();\n              delete a[M.id];\n            }\n          }\n        };\n      };\n      var w,\n        I = (w = [], function (b, g) {\n          return w[b] = g, w.filter(Boolean).join(\"\\n\");\n        });\n      function R(b, g, E, T) {\n        var O = E ? \"\" : T.css;\n        if (b.styleSheet) b.styleSheet.cssText = I(g, O);else {\n          var S = document.createTextNode(O),\n            H = b.childNodes;\n          H[g] && b.removeChild(H[g]), H.length ? b.insertBefore(S, H[g]) : b.appendChild(S);\n        }\n      }\n    }, function (t, o) {\n      t.exports = function (i) {\n        var n = typeof window < \"u\" && window.location;\n        if (!n) throw new Error(\"fixUrls requires window.location\");\n        if (!i || typeof i != \"string\") return i;\n        var r = n.protocol + \"//\" + n.host,\n          a = r + n.pathname.replace(/\\/[^\\/]*$/, \"/\");\n        return i.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function (l, c) {\n          var u,\n            h = c.trim().replace(/^\"(.*)\"$/, function (f, k) {\n              return k;\n            }).replace(/^'(.*)'$/, function (f, k) {\n              return k;\n            });\n          return /^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(h) ? l : (u = h.indexOf(\"//\") === 0 ? h : h.indexOf(\"/\") === 0 ? r + h : a + h.replace(/^\\.\\//, \"\"), \"url(\" + JSON.stringify(u) + \")\");\n        });\n      };\n    }, function (t, o, i) {\n      var n, r, a, l, c, u, h, f, k;\n      t.exports = (n = \"cdx-notifies\", r = \"cdx-notify\", a = \"cdx-notify__cross\", l = \"cdx-notify__button--confirm\", c = \"cdx-notify__button--cancel\", u = \"cdx-notify__input\", h = \"cdx-notify__button\", f = \"cdx-notify__btns-wrapper\", {\n        alert: k = function (p) {\n          var v = document.createElement(\"DIV\"),\n            A = document.createElement(\"DIV\"),\n            N = p.message,\n            _ = p.style;\n          return v.classList.add(r), _ && v.classList.add(r + \"--\" + _), v.innerHTML = N, A.classList.add(a), A.addEventListener(\"click\", v.remove.bind(v)), v.appendChild(A), v;\n        },\n        confirm: function (p) {\n          var v = k(p),\n            A = document.createElement(\"div\"),\n            N = document.createElement(\"button\"),\n            _ = document.createElement(\"button\"),\n            y = v.querySelector(\".\" + a),\n            x = p.cancelHandler,\n            w = p.okHandler;\n          return A.classList.add(f), N.innerHTML = p.okText || \"Confirm\", _.innerHTML = p.cancelText || \"Cancel\", N.classList.add(h), _.classList.add(h), N.classList.add(l), _.classList.add(c), x && typeof x == \"function\" && (_.addEventListener(\"click\", x), y.addEventListener(\"click\", x)), w && typeof w == \"function\" && N.addEventListener(\"click\", w), N.addEventListener(\"click\", v.remove.bind(v)), _.addEventListener(\"click\", v.remove.bind(v)), A.appendChild(N), A.appendChild(_), v.appendChild(A), v;\n        },\n        prompt: function (p) {\n          var v = k(p),\n            A = document.createElement(\"div\"),\n            N = document.createElement(\"button\"),\n            _ = document.createElement(\"input\"),\n            y = v.querySelector(\".\" + a),\n            x = p.cancelHandler,\n            w = p.okHandler;\n          return A.classList.add(f), N.innerHTML = p.okText || \"Ok\", N.classList.add(h), N.classList.add(l), _.classList.add(u), p.placeholder && _.setAttribute(\"placeholder\", p.placeholder), p.default && (_.value = p.default), p.inputType && (_.type = p.inputType), x && typeof x == \"function\" && y.addEventListener(\"click\", x), w && typeof w == \"function\" && N.addEventListener(\"click\", function () {\n            w(_.value);\n          }), N.addEventListener(\"click\", v.remove.bind(v)), A.appendChild(_), A.appendChild(N), v.appendChild(A), v;\n        },\n        getWrapper: function () {\n          var p = document.createElement(\"DIV\");\n          return p.classList.add(n), p;\n        }\n      });\n    }]);\n  });\n})(so);\nconst ro = /* @__PURE__ */xe(Le);\nclass ao {\n  /**\n   * Show web notification\n   *\n   * @param {NotifierOptions | ConfirmNotifierOptions | PromptNotifierOptions} options - notification options\n   */\n  show(e) {\n    ro.show(e);\n  }\n}\nclass lo extends C {\n  /**\n   * @param moduleConfiguration - Module Configuration\n   * @param moduleConfiguration.config - Editor's config\n   * @param moduleConfiguration.eventsDispatcher - Editor's event dispatcher\n   */\n  constructor(_ref7) {\n    let {\n      config: e,\n      eventsDispatcher: t\n    } = _ref7;\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.notifier = new ao();\n  }\n  /**\n   * Available methods\n   */\n  get methods() {\n    return {\n      show: e => this.show(e)\n    };\n  }\n  /**\n   * Show notification\n   *\n   * @param {NotifierOptions} options - message option\n   */\n  show(e) {\n    return this.notifier.show(e);\n  }\n}\nclass co extends C {\n  /**\n   * Available methods\n   */\n  get methods() {\n    const e = () => this.isEnabled;\n    return {\n      toggle: t => this.toggle(t),\n      get isEnabled() {\n        return e();\n      }\n    };\n  }\n  /**\n   * Set or toggle read-only state\n   *\n   * @param {boolean|undefined} state - set or toggle state\n   * @returns {boolean} current value\n   */\n  toggle(e) {\n    return this.Editor.ReadOnly.toggle(e);\n  }\n  /**\n   * Returns current read-only state\n   */\n  get isEnabled() {\n    return this.Editor.ReadOnly.isEnabled;\n  }\n}\nvar Oe = {},\n  ho = {\n    get exports() {\n      return Oe;\n    },\n    set exports(s) {\n      Oe = s;\n    }\n  };\n(function (s, e) {\n  (function (t, o) {\n    s.exports = o();\n  })(Ot, function () {\n    function t(h) {\n      var f = h.tags,\n        k = Object.keys(f),\n        p = k.map(function (v) {\n          return typeof f[v];\n        }).every(function (v) {\n          return v === \"object\" || v === \"boolean\" || v === \"function\";\n        });\n      if (!p) throw new Error(\"The configuration was invalid\");\n      this.config = h;\n    }\n    var o = [\"P\", \"LI\", \"TD\", \"TH\", \"DIV\", \"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"PRE\"];\n    function i(h) {\n      return o.indexOf(h.nodeName) !== -1;\n    }\n    var n = [\"A\", \"B\", \"STRONG\", \"I\", \"EM\", \"SUB\", \"SUP\", \"U\", \"STRIKE\"];\n    function r(h) {\n      return n.indexOf(h.nodeName) !== -1;\n    }\n    t.prototype.clean = function (h) {\n      const f = document.implementation.createHTMLDocument(),\n        k = f.createElement(\"div\");\n      return k.innerHTML = h, this._sanitize(f, k), k.innerHTML;\n    }, t.prototype._sanitize = function (h, f) {\n      var k = a(h, f),\n        p = k.firstChild();\n      if (p) do {\n        if (p.nodeType === Node.TEXT_NODE) if (p.data.trim() === \"\" && (p.previousElementSibling && i(p.previousElementSibling) || p.nextElementSibling && i(p.nextElementSibling))) {\n          f.removeChild(p), this._sanitize(h, f);\n          break;\n        } else continue;\n        if (p.nodeType === Node.COMMENT_NODE) {\n          f.removeChild(p), this._sanitize(h, f);\n          break;\n        }\n        var v = r(p),\n          A;\n        v && (A = Array.prototype.some.call(p.childNodes, i));\n        var N = !!f.parentNode,\n          _ = i(f) && i(p) && N,\n          y = p.nodeName.toLowerCase(),\n          x = l(this.config, y, p),\n          w = v && A;\n        if (w || c(p, x) || !this.config.keepNestedBlockElements && _) {\n          if (!(p.nodeName === \"SCRIPT\" || p.nodeName === \"STYLE\")) for (; p.childNodes.length > 0;) f.insertBefore(p.childNodes[0], p);\n          f.removeChild(p), this._sanitize(h, f);\n          break;\n        }\n        for (var I = 0; I < p.attributes.length; I += 1) {\n          var R = p.attributes[I];\n          u(R, x, p) && (p.removeAttribute(R.name), I = I - 1);\n        }\n        this._sanitize(h, p);\n      } while (p = k.nextSibling());\n    };\n    function a(h, f) {\n      return h.createTreeWalker(f, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT, null, !1);\n    }\n    function l(h, f, k) {\n      return typeof h.tags[f] == \"function\" ? h.tags[f](k) : h.tags[f];\n    }\n    function c(h, f) {\n      return typeof f > \"u\" ? !0 : typeof f == \"boolean\" ? !f : !1;\n    }\n    function u(h, f, k) {\n      var p = h.name.toLowerCase();\n      return f === !0 ? !1 : typeof f[p] == \"function\" ? !f[p](h.value, k) : typeof f[p] > \"u\" || f[p] === !1 ? !0 : typeof f[p] == \"string\" ? f[p] !== h.value : !1;\n    }\n    return t;\n  });\n})(ho);\nconst uo = Oe;\nfunction ut(s, e) {\n  return s.map(t => {\n    const o = D(e) ? e(t.tool) : e;\n    return V(o) || (t.data = Fe(t.data, o)), t;\n  });\n}\nfunction Z(s) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const t = {\n    tags: e\n  };\n  return new uo(t).clean(s);\n}\nfunction Fe(s, e) {\n  return Array.isArray(s) ? po(s, e) : z(s) ? fo(s, e) : J(s) ? go(s, e) : s;\n}\nfunction po(s, e) {\n  return s.map(t => Fe(t, e));\n}\nfunction fo(s, e) {\n  const t = {};\n  for (const o in s) {\n    if (!Object.prototype.hasOwnProperty.call(s, o)) continue;\n    const i = s[o],\n      n = bo(e[o]) ? e[o] : e;\n    t[o] = Fe(i, n);\n  }\n  return t;\n}\nfunction go(s, e) {\n  return z(e) ? Z(s, e) : e === !1 ? Z(s, {}) : s;\n}\nfunction bo(s) {\n  return z(s) || Rt(s) || D(s);\n}\nclass mo extends C {\n  /**\n   * Available methods\n   *\n   * @returns {SanitizerConfig}\n   */\n  get methods() {\n    return {\n      clean: (e, t) => this.clean(e, t)\n    };\n  }\n  /**\n   * Perform sanitizing of a string\n   *\n   * @param {string} taintString - what to sanitize\n   * @param {SanitizerConfig} config - sanitizer config\n   * @returns {string}\n   */\n  clean(e, t) {\n    return Z(e, t);\n  }\n}\nclass ko extends C {\n  /**\n   * Available methods\n   *\n   * @returns {Saver}\n   */\n  get methods() {\n    return {\n      save: () => this.save()\n    };\n  }\n  /**\n   * Return Editor's data\n   *\n   * @returns {OutputData}\n   */\n  save() {\n    const e = \"Editor's content can not be saved in read-only mode\";\n    return this.Editor.ReadOnly.isEnabled ? (K(e, \"warn\"), Promise.reject(new Error(e))) : this.Editor.Saver.save();\n  }\n}\nclass vo extends C {\n  /**\n   * Available methods\n   *\n   * @returns {SelectionAPIInterface}\n   */\n  get methods() {\n    return {\n      findParentTag: (e, t) => this.findParentTag(e, t),\n      expandToTag: e => this.expandToTag(e)\n    };\n  }\n  /**\n   * Looks ahead from selection and find passed tag with class name\n   *\n   * @param {string} tagName - tag to find\n   * @param {string} className - tag's class name\n   * @returns {HTMLElement|null}\n   */\n  findParentTag(e, t) {\n    return new m().findParentTag(e, t);\n  }\n  /**\n   * Expand selection to passed tag\n   *\n   * @param {HTMLElement} node - tag that should contain selection\n   */\n  expandToTag(e) {\n    new m().expandToTag(e);\n  }\n}\nclass xo extends C {\n  /**\n   * Exported classes\n   */\n  get classes() {\n    return {\n      /**\n       * Base Block styles\n       */\n      block: \"cdx-block\",\n      /**\n       * Inline Tools styles\n       */\n      inlineToolButton: \"ce-inline-tool\",\n      inlineToolButtonActive: \"ce-inline-tool--active\",\n      /**\n       * UI elements\n       */\n      input: \"cdx-input\",\n      loader: \"cdx-loader\",\n      button: \"cdx-button\",\n      /**\n       * Settings styles\n       */\n      settingsButton: \"cdx-settings-button\",\n      settingsButtonActive: \"cdx-settings-button--active\"\n    };\n  }\n}\nclass wo extends C {\n  /**\n   * Available methods\n   *\n   * @returns {Toolbar}\n   */\n  get methods() {\n    return {\n      close: () => this.close(),\n      open: () => this.open(),\n      toggleBlockSettings: e => this.toggleBlockSettings(e),\n      toggleToolbox: e => this.toggleToolbox(e)\n    };\n  }\n  /**\n   * Open toolbar\n   */\n  open() {\n    this.Editor.Toolbar.moveAndOpen();\n  }\n  /**\n   * Close toolbar and all included elements\n   */\n  close() {\n    this.Editor.Toolbar.close();\n  }\n  /**\n   * Toggles Block Setting of the current block\n   *\n   * @param {boolean} openingState —  opening state of Block Setting\n   */\n  toggleBlockSettings(e) {\n    if (this.Editor.BlockManager.currentBlockIndex === -1) {\n      K(\"Could't toggle the Toolbar because there is no block selected \", \"warn\");\n      return;\n    }\n    (e !== null && e !== void 0 ? e : !this.Editor.BlockSettings.opened) ? (this.Editor.Toolbar.moveAndOpen(), this.Editor.BlockSettings.open()) : this.Editor.BlockSettings.close();\n  }\n  /**\n   * Open toolbox\n   *\n   * @param {boolean} openingState - Opening state of toolbox\n   */\n  toggleToolbox(e) {\n    if (this.Editor.BlockManager.currentBlockIndex === -1) {\n      K(\"Could't toggle the Toolbox because there is no block selected \", \"warn\");\n      return;\n    }\n    (e !== null && e !== void 0 ? e : !this.Editor.Toolbar.toolbox.opened) ? (this.Editor.Toolbar.moveAndOpen(), this.Editor.Toolbar.toolbox.open()) : this.Editor.Toolbar.toolbox.close();\n  }\n}\nvar Ae = {},\n  yo = {\n    get exports() {\n      return Ae;\n    },\n    set exports(s) {\n      Ae = s;\n    }\n  };\n/*!\n * CodeX.Tooltips\n * \n * @version 1.0.5\n * \n * @licence MIT\n * @author CodeX <https://codex.so>\n * \n * \n */\n(function (s, e) {\n  (function (t, o) {\n    s.exports = o();\n  })(window, function () {\n    return function (t) {\n      var o = {};\n      function i(n) {\n        if (o[n]) return o[n].exports;\n        var r = o[n] = {\n          i: n,\n          l: !1,\n          exports: {}\n        };\n        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n      }\n      return i.m = t, i.c = o, i.d = function (n, r, a) {\n        i.o(n, r) || Object.defineProperty(n, r, {\n          enumerable: !0,\n          get: a\n        });\n      }, i.r = function (n) {\n        typeof Symbol < \"u\" && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n      }, i.t = function (n, r) {\n        if (1 & r && (n = i(n)), 8 & r || 4 & r && typeof n == \"object\" && n && n.__esModule) return n;\n        var a = /* @__PURE__ */Object.create(null);\n        if (i.r(a), Object.defineProperty(a, \"default\", {\n          enumerable: !0,\n          value: n\n        }), 2 & r && typeof n != \"string\") for (var l in n) i.d(a, l, function (c) {\n          return n[c];\n        }.bind(null, l));\n        return a;\n      }, i.n = function (n) {\n        var r = n && n.__esModule ? function () {\n          return n.default;\n        } : function () {\n          return n;\n        };\n        return i.d(r, \"a\", r), r;\n      }, i.o = function (n, r) {\n        return Object.prototype.hasOwnProperty.call(n, r);\n      }, i.p = \"\", i(i.s = 0);\n    }([function (t, o, i) {\n      t.exports = i(1);\n    }, function (t, o, i) {\n      i.r(o), i.d(o, \"default\", function () {\n        return n;\n      });\n      class n {\n        constructor() {\n          this.nodes = {\n            wrapper: null,\n            content: null\n          }, this.showed = !1, this.offsetTop = 10, this.offsetLeft = 10, this.offsetRight = 10, this.hidingDelay = 0, this.handleWindowScroll = () => {\n            this.showed && this.hide(!0);\n          }, this.loadStyles(), this.prepare(), window.addEventListener(\"scroll\", this.handleWindowScroll, {\n            passive: !0\n          });\n        }\n        get CSS() {\n          return {\n            tooltip: \"ct\",\n            tooltipContent: \"ct__content\",\n            tooltipShown: \"ct--shown\",\n            placement: {\n              left: \"ct--left\",\n              bottom: \"ct--bottom\",\n              right: \"ct--right\",\n              top: \"ct--top\"\n            }\n          };\n        }\n        show(a, l, c) {\n          this.nodes.wrapper || this.prepare(), this.hidingTimeout && clearTimeout(this.hidingTimeout);\n          const u = Object.assign({\n            placement: \"bottom\",\n            marginTop: 0,\n            marginLeft: 0,\n            marginRight: 0,\n            marginBottom: 0,\n            delay: 70,\n            hidingDelay: 0\n          }, c);\n          if (u.hidingDelay && (this.hidingDelay = u.hidingDelay), this.nodes.content.innerHTML = \"\", typeof l == \"string\") this.nodes.content.appendChild(document.createTextNode(l));else {\n            if (!(l instanceof Node)) throw Error(\"[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But \" + typeof l + \" given.\");\n            this.nodes.content.appendChild(l);\n          }\n          switch (this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)), u.placement) {\n            case \"top\":\n              this.placeTop(a, u);\n              break;\n            case \"left\":\n              this.placeLeft(a, u);\n              break;\n            case \"right\":\n              this.placeRight(a, u);\n              break;\n            case \"bottom\":\n            default:\n              this.placeBottom(a, u);\n          }\n          u && u.delay ? this.showingTimeout = setTimeout(() => {\n            this.nodes.wrapper.classList.add(this.CSS.tooltipShown), this.showed = !0;\n          }, u.delay) : (this.nodes.wrapper.classList.add(this.CSS.tooltipShown), this.showed = !0);\n        }\n        hide() {\n          let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n          if (this.hidingDelay && !a) return this.hidingTimeout && clearTimeout(this.hidingTimeout), void (this.hidingTimeout = setTimeout(() => {\n            this.hide(!0);\n          }, this.hidingDelay));\n          this.nodes.wrapper.classList.remove(this.CSS.tooltipShown), this.showed = !1, this.showingTimeout && clearTimeout(this.showingTimeout);\n        }\n        onHover(a, l, c) {\n          a.addEventListener(\"mouseenter\", () => {\n            this.show(a, l, c);\n          }), a.addEventListener(\"mouseleave\", () => {\n            this.hide();\n          });\n        }\n        destroy() {\n          this.nodes.wrapper.remove(), window.removeEventListener(\"scroll\", this.handleWindowScroll);\n        }\n        prepare() {\n          this.nodes.wrapper = this.make(\"div\", this.CSS.tooltip), this.nodes.content = this.make(\"div\", this.CSS.tooltipContent), this.append(this.nodes.wrapper, this.nodes.content), this.append(document.body, this.nodes.wrapper);\n        }\n        loadStyles() {\n          const a = \"codex-tooltips-style\";\n          if (document.getElementById(a)) return;\n          const l = i(2),\n            c = this.make(\"style\", null, {\n              textContent: l.toString(),\n              id: a\n            });\n          this.prepend(document.head, c);\n        }\n        placeBottom(a, l) {\n          const c = a.getBoundingClientRect(),\n            u = c.left + a.clientWidth / 2 - this.nodes.wrapper.offsetWidth / 2,\n            h = c.bottom + window.pageYOffset + this.offsetTop + l.marginTop;\n          this.applyPlacement(\"bottom\", u, h);\n        }\n        placeTop(a, l) {\n          const c = a.getBoundingClientRect(),\n            u = c.left + a.clientWidth / 2 - this.nodes.wrapper.offsetWidth / 2,\n            h = c.top + window.pageYOffset - this.nodes.wrapper.clientHeight - this.offsetTop;\n          this.applyPlacement(\"top\", u, h);\n        }\n        placeLeft(a, l) {\n          const c = a.getBoundingClientRect(),\n            u = c.left - this.nodes.wrapper.offsetWidth - this.offsetLeft - l.marginLeft,\n            h = c.top + window.pageYOffset + a.clientHeight / 2 - this.nodes.wrapper.offsetHeight / 2;\n          this.applyPlacement(\"left\", u, h);\n        }\n        placeRight(a, l) {\n          const c = a.getBoundingClientRect(),\n            u = c.right + this.offsetRight + l.marginRight,\n            h = c.top + window.pageYOffset + a.clientHeight / 2 - this.nodes.wrapper.offsetHeight / 2;\n          this.applyPlacement(\"right\", u, h);\n        }\n        applyPlacement(a, l, c) {\n          this.nodes.wrapper.classList.add(this.CSS.placement[a]), this.nodes.wrapper.style.left = l + \"px\", this.nodes.wrapper.style.top = c + \"px\";\n        }\n        make(a) {\n          let l = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          let c = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          const u = document.createElement(a);\n          Array.isArray(l) ? u.classList.add(...l) : l && u.classList.add(l);\n          for (const h in c) c.hasOwnProperty(h) && (u[h] = c[h]);\n          return u;\n        }\n        append(a, l) {\n          Array.isArray(l) ? l.forEach(c => a.appendChild(c)) : a.appendChild(l);\n        }\n        prepend(a, l) {\n          Array.isArray(l) ? (l = l.reverse()).forEach(c => a.prepend(c)) : a.prepend(l);\n        }\n      }\n    }, function (t, o) {\n      t.exports = \".ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:\\\"\\\";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url(\\\"\\\")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\"><path d=\\\"M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z\\\"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:\\\"\\\";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}\";\n    }]).default;\n  });\n})(yo);\nconst Eo = /* @__PURE__ */xe(Ae);\nclass He {\n  constructor() {\n    this.lib = new Eo();\n  }\n  /**\n   * Release the library\n   */\n  destroy() {\n    this.lib.destroy();\n  }\n  /**\n   * Shows tooltip on element with passed HTML content\n   *\n   * @param {HTMLElement} element - any HTML element in DOM\n   * @param content - tooltip's content\n   * @param options - showing settings\n   */\n  show(e, t, o) {\n    this.lib.show(e, t, o);\n  }\n  /**\n   * Hides tooltip\n   *\n   * @param skipHidingDelay — pass true to immediately hide the tooltip\n   */\n  hide() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    this.lib.hide(e);\n  }\n  /**\n   * Binds 'mouseenter' and 'mouseleave' events that shows/hides the Tooltip\n   *\n   * @param {HTMLElement} element - any HTML element in DOM\n   * @param content - tooltip's content\n   * @param options - showing settings\n   */\n  onHover(e, t, o) {\n    this.lib.onHover(e, t, o);\n  }\n}\nclass Bo extends C {\n  /**\n   * @class\n   * @param moduleConfiguration - Module Configuration\n   * @param moduleConfiguration.config - Editor's config\n   * @param moduleConfiguration.eventsDispatcher - Editor's event dispatcher\n   */\n  constructor(_ref8) {\n    let {\n      config: e,\n      eventsDispatcher: t\n    } = _ref8;\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.tooltip = new He();\n  }\n  /**\n   * Destroy Module\n   */\n  destroy() {\n    this.tooltip.destroy();\n  }\n  /**\n   * Available methods\n   */\n  get methods() {\n    return {\n      show: (e, t, o) => this.show(e, t, o),\n      hide: () => this.hide(),\n      onHover: (e, t, o) => this.onHover(e, t, o)\n    };\n  }\n  /**\n   * Method show tooltip on element with passed HTML content\n   *\n   * @param {HTMLElement} element - element on which tooltip should be shown\n   * @param {TooltipContent} content - tooltip content\n   * @param {TooltipOptions} options - tooltip options\n   */\n  show(e, t, o) {\n    this.tooltip.show(e, t, o);\n  }\n  /**\n   * Method hides tooltip on HTML page\n   */\n  hide() {\n    this.tooltip.hide();\n  }\n  /**\n   * Decorator for showing Tooltip by mouseenter/mouseleave\n   *\n   * @param {HTMLElement} element - element on which tooltip should be shown\n   * @param {TooltipContent} content - tooltip content\n   * @param {TooltipOptions} options - tooltip options\n   */\n  onHover(e, t, o) {\n    this.tooltip.onHover(e, t, o);\n  }\n}\nclass To extends C {\n  /**\n   * Available methods / getters\n   */\n  get methods() {\n    return {\n      nodes: this.editorNodes\n      /**\n       * There can be added some UI methods, like toggleThinMode() etc\n       */\n    };\n  }\n  /**\n   * Exported classes\n   */\n  get editorNodes() {\n    return {\n      /**\n       * Top-level editor instance wrapper\n       */\n      wrapper: this.Editor.UI.nodes.wrapper,\n      /**\n       * Element that holds all the Blocks\n       */\n      redactor: this.Editor.UI.nodes.redactor\n    };\n  }\n}\nfunction pt(s, e) {\n  const t = {};\n  return Object.entries(s).forEach(_ref9 => {\n    let [o, i] = _ref9;\n    if (z(i)) {\n      const n = e ? \"\".concat(e, \".\").concat(o) : o;\n      Object.values(i).every(a => J(a)) ? t[o] = n : t[o] = pt(i, n);\n      return;\n    }\n    t[o] = i;\n  }), t;\n}\nconst X = pt(at);\nfunction Co(s, e) {\n  const t = {};\n  return Object.keys(s).forEach(o => {\n    const i = e[o];\n    i !== void 0 ? t[i] = s[o] : t[o] = s[o];\n  }), t;\n}\nconst So = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11\"/></svg>',\n  ft = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10\"/></svg>',\n  Io = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15\"/></svg>',\n  Mo = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16\"/></svg>',\n  Lo = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"4\" stroke=\"currentColor\" stroke-width=\"2\"/></svg>',\n  Oo = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M13.34 10C12.4223 12.7337 11 17 11 17\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M14.21 7H14.2\"/></svg>',\n  Qe = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72\"/></svg>',\n  Ao = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M9.40999 7.29999H9.4\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M14.6 7.29999H14.59\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M9.30999 12H9.3\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M14.6 12H14.59\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M9.40999 16.7H9.4\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M14.6 16.7H14.59\"/></svg>',\n  _o = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M12 7V12M12 17V12M17 12H12M12 12H7\"/></svg>',\n  No = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><circle cx=\"10.5\" cy=\"10.5\" r=\"5.5\" stroke=\"currentColor\" stroke-width=\"2\"/><line x1=\"15.4142\" x2=\"19\" y1=\"15\" y2=\"18.5858\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\"/></svg>',\n  Ro = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397\"/><line x1=\"12.1142\" x2=\"11.7\" y1=\"12.2\" y2=\"11.7858\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\"/></svg>',\n  Do = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><rect width=\"14\" height=\"14\" x=\"5\" y=\"5\" stroke=\"currentColor\" stroke-width=\"2\" rx=\"4\"/><line x1=\"12\" x2=\"12\" y1=\"9\" y2=\"12\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M12 15.02V15.01\"/></svg>';\nclass P {\n  /**\n   * Constructs popover item instance\n   *\n   * @param params - popover item construction params\n   */\n  constructor(e) {\n    this.nodes = {\n      root: null,\n      icon: null\n    }, this.confirmationState = null, this.removeSpecialFocusBehavior = () => {\n      this.nodes.root.classList.remove(P.CSS.noFocus);\n    }, this.removeSpecialHoverBehavior = () => {\n      this.nodes.root.classList.remove(P.CSS.noHover);\n    }, this.onErrorAnimationEnd = () => {\n      this.nodes.icon.classList.remove(P.CSS.wobbleAnimation), this.nodes.icon.removeEventListener(\"animationend\", this.onErrorAnimationEnd);\n    }, this.params = e, this.nodes.root = this.make(e);\n  }\n  /**\n   * True if item is disabled and hence not clickable\n   */\n  get isDisabled() {\n    return this.params.isDisabled;\n  }\n  /**\n   * Exposes popover item toggle parameter\n   */\n  get toggle() {\n    return this.params.toggle;\n  }\n  /**\n   * Item title\n   */\n  get title() {\n    return this.params.title;\n  }\n  /**\n   * True if popover should close once item is activated\n   */\n  get closeOnActivate() {\n    return this.params.closeOnActivate;\n  }\n  /**\n   * True if confirmation state is enabled for popover item\n   */\n  get isConfirmationStateEnabled() {\n    return this.confirmationState !== null;\n  }\n  /**\n   * True if item is focused in keyboard navigation process\n   */\n  get isFocused() {\n    return this.nodes.root.classList.contains(P.CSS.focused);\n  }\n  /**\n   * Popover item CSS classes\n   */\n  static get CSS() {\n    return {\n      container: \"ce-popover-item\",\n      title: \"ce-popover-item__title\",\n      secondaryTitle: \"ce-popover-item__secondary-title\",\n      icon: \"ce-popover-item__icon\",\n      active: \"ce-popover-item--active\",\n      disabled: \"ce-popover-item--disabled\",\n      focused: \"ce-popover-item--focused\",\n      hidden: \"ce-popover-item--hidden\",\n      confirmationState: \"ce-popover-item--confirmation\",\n      noHover: \"ce-popover-item--no-hover\",\n      noFocus: \"ce-popover-item--no-focus\",\n      wobbleAnimation: \"wobble\"\n    };\n  }\n  /**\n   * Returns popover item root element\n   */\n  getElement() {\n    return this.nodes.root;\n  }\n  /**\n   * Called on popover item click\n   */\n  handleClick() {\n    if (this.isConfirmationStateEnabled) {\n      this.activateOrEnableConfirmationMode(this.confirmationState);\n      return;\n    }\n    this.activateOrEnableConfirmationMode(this.params);\n  }\n  /**\n   * Toggles item active state\n   *\n   * @param isActive - true if item should strictly should become active\n   */\n  toggleActive(e) {\n    this.nodes.root.classList.toggle(P.CSS.active, e);\n  }\n  /**\n   * Toggles item hidden state\n   *\n   * @param isHidden - true if item should be hidden\n   */\n  toggleHidden(e) {\n    this.nodes.root.classList.toggle(P.CSS.hidden, e);\n  }\n  /**\n   * Resets popover item to its original state\n   */\n  reset() {\n    this.isConfirmationStateEnabled && this.disableConfirmationMode();\n  }\n  /**\n   * Method called once item becomes focused during keyboard navigation\n   */\n  onFocus() {\n    this.disableSpecialHoverAndFocusBehavior();\n  }\n  /**\n   * Constructs HTML element corresponding to popover item params\n   *\n   * @param params - item construction params\n   */\n  make(e) {\n    const t = d.make(\"div\", P.CSS.container);\n    return e.name && (t.dataset.itemName = e.name), this.nodes.icon = d.make(\"div\", P.CSS.icon, {\n      innerHTML: e.icon || Lo\n    }), t.appendChild(this.nodes.icon), t.appendChild(d.make(\"div\", P.CSS.title, {\n      innerHTML: e.title || \"\"\n    })), e.secondaryLabel && t.appendChild(d.make(\"div\", P.CSS.secondaryTitle, {\n      textContent: e.secondaryLabel\n    })), e.isActive && t.classList.add(P.CSS.active), e.isDisabled && t.classList.add(P.CSS.disabled), t;\n  }\n  /**\n   * Activates confirmation mode for the item.\n   *\n   * @param newState - new popover item params that should be applied\n   */\n  enableConfirmationMode(e) {\n    const t = {\n        ...this.params,\n        ...e,\n        confirmation: e.confirmation\n      },\n      o = this.make(t);\n    this.nodes.root.innerHTML = o.innerHTML, this.nodes.root.classList.add(P.CSS.confirmationState), this.confirmationState = e, this.enableSpecialHoverAndFocusBehavior();\n  }\n  /**\n   * Returns item to its original state\n   */\n  disableConfirmationMode() {\n    const e = this.make(this.params);\n    this.nodes.root.innerHTML = e.innerHTML, this.nodes.root.classList.remove(P.CSS.confirmationState), this.confirmationState = null, this.disableSpecialHoverAndFocusBehavior();\n  }\n  /**\n   * Enables special focus and hover behavior for item in confirmation state.\n   * This is needed to prevent item from being highlighted as hovered/focused just after click.\n   */\n  enableSpecialHoverAndFocusBehavior() {\n    this.nodes.root.classList.add(P.CSS.noHover), this.nodes.root.classList.add(P.CSS.noFocus), this.nodes.root.addEventListener(\"mouseleave\", this.removeSpecialHoverBehavior, {\n      once: !0\n    });\n  }\n  /**\n   * Disables special focus and hover behavior\n   */\n  disableSpecialHoverAndFocusBehavior() {\n    this.removeSpecialFocusBehavior(), this.removeSpecialHoverBehavior(), this.nodes.root.removeEventListener(\"mouseleave\", this.removeSpecialHoverBehavior);\n  }\n  /**\n   * Executes item's onActivate callback if the item has no confirmation configured\n   *\n   * @param item - item to activate or bring to confirmation mode\n   */\n  activateOrEnableConfirmationMode(e) {\n    if (e.confirmation === void 0) try {\n      e.onActivate(e), this.disableConfirmationMode();\n    } catch {\n      this.animateError();\n    } else this.enableConfirmationMode(e.confirmation);\n  }\n  /**\n   * Animates item which symbolizes that error occured while executing 'onActivate()' callback\n   */\n  animateError() {\n    this.nodes.icon.classList.contains(P.CSS.wobbleAnimation) || (this.nodes.icon.classList.add(P.CSS.wobbleAnimation), this.nodes.icon.addEventListener(\"animationend\", this.onErrorAnimationEnd));\n  }\n}\nconst he = class {\n  /**\n   * @param {HTMLElement[]} nodeList — the list of iterable HTML-items\n   * @param {string} focusedCssClass - user-provided CSS-class that will be set in flipping process\n   */\n  constructor(s, e) {\n    this.cursor = -1, this.items = [], this.items = s || [], this.focusedCssClass = e;\n  }\n  /**\n   * Returns Focused button Node\n   *\n   * @returns {HTMLElement}\n   */\n  get currentItem() {\n    return this.cursor === -1 ? null : this.items[this.cursor];\n  }\n  /**\n   * Sets cursor to specified position\n   *\n   * @param cursorPosition - new cursor position\n   */\n  setCursor(s) {\n    s < this.items.length && s >= -1 && (this.dropCursor(), this.cursor = s, this.items[this.cursor].classList.add(this.focusedCssClass));\n  }\n  /**\n   * Sets items. Can be used when iterable items changed dynamically\n   *\n   * @param {HTMLElement[]} nodeList - nodes to iterate\n   */\n  setItems(s) {\n    this.items = s;\n  }\n  /**\n   * Sets cursor next to the current\n   */\n  next() {\n    this.cursor = this.leafNodesAndReturnIndex(he.directions.RIGHT);\n  }\n  /**\n   * Sets cursor before current\n   */\n  previous() {\n    this.cursor = this.leafNodesAndReturnIndex(he.directions.LEFT);\n  }\n  /**\n   * Sets cursor to the default position and removes CSS-class from previously focused item\n   */\n  dropCursor() {\n    this.cursor !== -1 && (this.items[this.cursor].classList.remove(this.focusedCssClass), this.cursor = -1);\n  }\n  /**\n   * Leafs nodes inside the target list from active element\n   *\n   * @param {string} direction - leaf direction. Can be 'left' or 'right'\n   * @returns {number} index of focused node\n   */\n  leafNodesAndReturnIndex(s) {\n    if (this.items.length === 0) return this.cursor;\n    let e = this.cursor;\n    return e === -1 ? e = s === he.directions.RIGHT ? -1 : 0 : this.items[e].classList.remove(this.focusedCssClass), s === he.directions.RIGHT ? e = (e + 1) % this.items.length : e = (this.items.length + e - 1) % this.items.length, d.canSetCaret(this.items[e]) && re(() => m.setCursor(this.items[e]), 50)(), this.items[e].classList.add(this.focusedCssClass), e;\n  }\n};\nlet ne = he;\nne.directions = {\n  RIGHT: \"right\",\n  LEFT: \"left\"\n};\nclass G {\n  /**\n   * @param {FlipperOptions} options - different constructing settings\n   */\n  constructor(e) {\n    this.iterator = null, this.activated = !1, this.flipCallbacks = [], this.onKeyDown = t => {\n      if (this.isEventReadyForHandling(t)) switch (G.usedKeys.includes(t.keyCode) && t.preventDefault(), t.keyCode) {\n        case B.TAB:\n          this.handleTabPress(t);\n          break;\n        case B.LEFT:\n        case B.UP:\n          this.flipLeft();\n          break;\n        case B.RIGHT:\n        case B.DOWN:\n          this.flipRight();\n          break;\n        case B.ENTER:\n          this.handleEnterPress(t);\n          break;\n      }\n    }, this.iterator = new ne(e.items, e.focusedItemClass), this.activateCallback = e.activateCallback, this.allowedKeys = e.allowedKeys || G.usedKeys;\n  }\n  /**\n   * True if flipper is currently activated\n   */\n  get isActivated() {\n    return this.activated;\n  }\n  /**\n   * Array of keys (codes) that is handled by Flipper\n   * Used to:\n   *  - preventDefault only for this keys, not all keydowns (@see constructor)\n   *  - to skip external behaviours only for these keys, when filler is activated (@see BlockEvents@arrowRightAndDown)\n   */\n  static get usedKeys() {\n    return [B.TAB, B.LEFT, B.RIGHT, B.ENTER, B.UP, B.DOWN];\n  }\n  /**\n   * Active tab/arrows handling by flipper\n   *\n   * @param items - Some modules (like, InlineToolbar, BlockSettings) might refresh buttons dynamically\n   * @param cursorPosition - index of the item that should be focused once flipper is activated\n   */\n  activate(e, t) {\n    this.activated = !0, e && this.iterator.setItems(e), t !== void 0 && this.iterator.setCursor(t), document.addEventListener(\"keydown\", this.onKeyDown, !0);\n  }\n  /**\n   * Disable tab/arrows handling by flipper\n   */\n  deactivate() {\n    this.activated = !1, this.dropCursor(), document.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n  /**\n   * Focus first item\n   */\n  focusFirst() {\n    this.dropCursor(), this.flipRight();\n  }\n  /**\n   * Focuses previous flipper iterator item\n   */\n  flipLeft() {\n    this.iterator.previous(), this.flipCallback();\n  }\n  /**\n   * Focuses next flipper iterator item\n   */\n  flipRight() {\n    this.iterator.next(), this.flipCallback();\n  }\n  /**\n   * Return true if some button is focused\n   */\n  hasFocus() {\n    return !!this.iterator.currentItem;\n  }\n  /**\n   * Registeres function that should be executed on each navigation action\n   *\n   * @param cb - function to execute\n   */\n  onFlip(e) {\n    this.flipCallbacks.push(e);\n  }\n  /**\n   * Unregisteres function that is executed on each navigation action\n   *\n   * @param cb - function to stop executing\n   */\n  removeOnFlip(e) {\n    this.flipCallbacks = this.flipCallbacks.filter(t => t !== e);\n  }\n  /**\n   * Drops flipper's iterator cursor\n   *\n   * @see DomIterator#dropCursor\n   */\n  dropCursor() {\n    this.iterator.dropCursor();\n  }\n  /**\n   * This function is fired before handling flipper keycodes\n   * The result of this function defines if it is need to be handled or not\n   *\n   * @param {KeyboardEvent} event - keydown keyboard event\n   * @returns {boolean}\n   */\n  isEventReadyForHandling(e) {\n    return this.activated && this.allowedKeys.includes(e.keyCode);\n  }\n  /**\n   * When flipper is activated tab press will leaf the items\n   *\n   * @param {KeyboardEvent} event - tab keydown event\n   */\n  handleTabPress(e) {\n    switch (e.shiftKey ? ne.directions.LEFT : ne.directions.RIGHT) {\n      case ne.directions.RIGHT:\n        this.flipRight();\n        break;\n      case ne.directions.LEFT:\n        this.flipLeft();\n        break;\n    }\n  }\n  /**\n   * Enter press will click current item if flipper is activated\n   *\n   * @param {KeyboardEvent} event - enter keydown event\n   */\n  handleEnterPress(e) {\n    this.activated && (this.iterator.currentItem && (e.stopPropagation(), e.preventDefault(), this.iterator.currentItem.click()), D(this.activateCallback) && this.activateCallback(this.iterator.currentItem));\n  }\n  /**\n   * Fired after flipping in any direction\n   */\n  flipCallback() {\n    this.iterator.currentItem && this.iterator.currentItem.scrollIntoViewIfNeeded(), this.flipCallbacks.forEach(e => e());\n  }\n}\nclass pe {\n  /**\n   * Styles\n   */\n  static get CSS() {\n    return {\n      wrapper: \"cdx-search-field\",\n      icon: \"cdx-search-field__icon\",\n      input: \"cdx-search-field__input\"\n    };\n  }\n  /**\n   * @param options - available config\n   * @param options.items - searchable items list\n   * @param options.onSearch - search callback\n   * @param options.placeholder - input placeholder\n   */\n  constructor(_ref10) {\n    let {\n      items: e,\n      onSearch: t,\n      placeholder: o\n    } = _ref10;\n    this.listeners = new De(), this.items = e, this.onSearch = t, this.render(o);\n  }\n  /**\n   * Returns search field element\n   */\n  getElement() {\n    return this.wrapper;\n  }\n  /**\n   * Sets focus to the input\n   */\n  focus() {\n    this.input.focus();\n  }\n  /**\n   * Clears search query and results\n   */\n  clear() {\n    this.input.value = \"\", this.searchQuery = \"\", this.onSearch(\"\", this.foundItems);\n  }\n  /**\n   * Clears memory\n   */\n  destroy() {\n    this.listeners.removeAll();\n  }\n  /**\n   * Creates the search field\n   *\n   * @param placeholder - input placeholder\n   */\n  render(e) {\n    this.wrapper = d.make(\"div\", pe.CSS.wrapper);\n    const t = d.make(\"div\", pe.CSS.icon, {\n      innerHTML: No\n    });\n    this.input = d.make(\"input\", pe.CSS.input, {\n      placeholder: e\n    }), this.wrapper.appendChild(t), this.wrapper.appendChild(this.input), this.listeners.on(this.input, \"input\", () => {\n      this.searchQuery = this.input.value, this.onSearch(this.searchQuery, this.foundItems);\n    });\n  }\n  /**\n   * Returns list of found items for the current search query\n   */\n  get foundItems() {\n    return this.items.filter(e => this.checkItem(e));\n  }\n  /**\n   * Contains logic for checking whether passed item conforms the search query\n   *\n   * @param item - item to be checked\n   */\n  checkItem(e) {\n    var i;\n    const t = ((i = e.title) == null ? void 0 : i.toLowerCase()) || \"\",\n      o = this.searchQuery.toLowerCase();\n    return t.includes(o);\n  }\n}\nconst ue = class {\n  /**\n   * Locks body element scroll\n   */\n  lock() {\n    Ge ? this.lockHard() : document.body.classList.add(ue.CSS.scrollLocked);\n  }\n  /**\n   * Unlocks body element scroll\n   */\n  unlock() {\n    Ge ? this.unlockHard() : document.body.classList.remove(ue.CSS.scrollLocked);\n  }\n  /**\n   * Locks scroll in a hard way (via setting fixed position to body element)\n   */\n  lockHard() {\n    this.scrollPosition = window.pageYOffset, document.documentElement.style.setProperty(\"--window-scroll-offset\", \"\".concat(this.scrollPosition, \"px\")), document.body.classList.add(ue.CSS.scrollLockedHard);\n  }\n  /**\n   * Unlocks hard scroll lock\n   */\n  unlockHard() {\n    document.body.classList.remove(ue.CSS.scrollLockedHard), this.scrollPosition !== null && window.scrollTo(0, this.scrollPosition), this.scrollPosition = null;\n  }\n};\nlet gt = ue;\ngt.CSS = {\n  scrollLocked: \"ce-scroll-locked\",\n  scrollLockedHard: \"ce-scroll-locked--hard\"\n};\nvar Po = Object.defineProperty,\n  Fo = Object.getOwnPropertyDescriptor,\n  Ho = (s, e, t, o) => {\n    for (var i = o > 1 ? void 0 : o ? Fo(e, t) : e, n = s.length - 1, r; n >= 0; n--) (r = s[n]) && (i = (o ? r(e, t, i) : r(i)) || i);\n    return o && i && Po(e, t, i), i;\n  },\n  ge = /* @__PURE__ */(s => (s.Close = \"close\", s))(ge || {});\nconst j = class extends we {\n  /**\n   * Constructs the instance\n   *\n   * @param params - popover construction params\n   */\n  constructor(s) {\n    super(), this.scopeElement = document.body, this.listeners = new De(), this.scrollLocker = new gt(), this.nodes = {\n      wrapper: null,\n      popover: null,\n      nothingFoundMessage: null,\n      customContent: null,\n      items: null,\n      overlay: null\n    }, this.messages = {\n      nothingFound: \"Nothing found\",\n      search: \"Search\"\n    }, this.onFlip = () => {\n      this.items.find(t => t.isFocused).onFocus();\n    }, this.items = s.items.map(e => new P(e)), s.scopeElement !== void 0 && (this.scopeElement = s.scopeElement), s.messages && (this.messages = {\n      ...this.messages,\n      ...s.messages\n    }), s.customContentFlippableItems && (this.customContentFlippableItems = s.customContentFlippableItems), this.make(), s.customContent && this.addCustomContent(s.customContent), s.searchable && this.addSearch(), this.initializeFlipper();\n  }\n  /**\n   * Popover CSS classes\n   */\n  static get CSS() {\n    return {\n      popover: \"ce-popover\",\n      popoverOpenTop: \"ce-popover--open-top\",\n      popoverOpened: \"ce-popover--opened\",\n      search: \"ce-popover__search\",\n      nothingFoundMessage: \"ce-popover__nothing-found-message\",\n      nothingFoundMessageDisplayed: \"ce-popover__nothing-found-message--displayed\",\n      customContent: \"ce-popover__custom-content\",\n      customContentHidden: \"ce-popover__custom-content--hidden\",\n      items: \"ce-popover__items\",\n      overlay: \"ce-popover__overlay\",\n      overlayHidden: \"ce-popover__overlay--hidden\"\n    };\n  }\n  /**\n   * Returns HTML element corresponding to the popover\n   */\n  getElement() {\n    return this.nodes.wrapper;\n  }\n  /**\n   * Returns true if some item inside popover is focused\n   */\n  hasFocus() {\n    return this.flipper.hasFocus();\n  }\n  /**\n   * Open popover\n   */\n  show() {\n    this.shouldOpenBottom || (this.nodes.popover.style.setProperty(\"--popover-height\", this.height + \"px\"), this.nodes.popover.classList.add(j.CSS.popoverOpenTop)), this.nodes.overlay.classList.remove(j.CSS.overlayHidden), this.nodes.popover.classList.add(j.CSS.popoverOpened), this.flipper.activate(this.flippableElements), this.search !== void 0 && setTimeout(() => {\n      this.search.focus();\n    }, 100), te() && this.scrollLocker.lock();\n  }\n  /**\n   * Closes popover\n   */\n  hide() {\n    this.nodes.popover.classList.remove(j.CSS.popoverOpened), this.nodes.popover.classList.remove(j.CSS.popoverOpenTop), this.nodes.overlay.classList.add(j.CSS.overlayHidden), this.flipper.deactivate(), this.items.forEach(s => s.reset()), this.search !== void 0 && this.search.clear(), te() && this.scrollLocker.unlock(), this.emit(\"close\"\n    /* Close */);\n  }\n  /**\n   * Clears memory\n   */\n  destroy() {\n    this.flipper.deactivate(), this.listeners.removeAll(), te() && this.scrollLocker.unlock();\n  }\n  /**\n   * Constructs HTML element corresponding to popover\n   */\n  make() {\n    this.nodes.popover = d.make(\"div\", [j.CSS.popover]), this.nodes.nothingFoundMessage = d.make(\"div\", [j.CSS.nothingFoundMessage], {\n      textContent: this.messages.nothingFound\n    }), this.nodes.popover.appendChild(this.nodes.nothingFoundMessage), this.nodes.items = d.make(\"div\", [j.CSS.items]), this.items.forEach(s => {\n      this.nodes.items.appendChild(s.getElement());\n    }), this.nodes.popover.appendChild(this.nodes.items), this.listeners.on(this.nodes.popover, \"click\", s => {\n      const e = this.getTargetItem(s);\n      e !== void 0 && this.handleItemClick(e);\n    }), this.nodes.wrapper = d.make(\"div\"), this.nodes.overlay = d.make(\"div\", [j.CSS.overlay, j.CSS.overlayHidden]), this.listeners.on(this.nodes.overlay, \"click\", () => {\n      this.hide();\n    }), this.nodes.wrapper.appendChild(this.nodes.overlay), this.nodes.wrapper.appendChild(this.nodes.popover);\n  }\n  /**\n   * Adds search to the popover\n   */\n  addSearch() {\n    this.search = new pe({\n      items: this.items,\n      placeholder: this.messages.search,\n      onSearch: (e, t) => {\n        this.items.forEach(i => {\n          const n = !t.includes(i);\n          i.toggleHidden(n);\n        }), this.toggleNothingFoundMessage(t.length === 0), this.toggleCustomContent(e !== \"\");\n        const o = e === \"\" ? this.flippableElements : t.map(i => i.getElement());\n        this.flipper.isActivated && (this.flipper.deactivate(), this.flipper.activate(o));\n      }\n    });\n    const s = this.search.getElement();\n    s.classList.add(j.CSS.search), this.nodes.popover.insertBefore(s, this.nodes.popover.firstChild);\n  }\n  /**\n   * Adds custom html content to the popover\n   *\n   * @param content - html content to append\n   */\n  addCustomContent(s) {\n    this.nodes.customContent = s, this.nodes.customContent.classList.add(j.CSS.customContent), this.nodes.popover.insertBefore(s, this.nodes.popover.firstChild);\n  }\n  /**\n   * Retrieves popover item that is the target of the specified event\n   *\n   * @param event - event to retrieve popover item from\n   */\n  getTargetItem(s) {\n    return this.items.find(e => s.composedPath().includes(e.getElement()));\n  }\n  /**\n   * Handles item clicks\n   *\n   * @param item - item to handle click of\n   */\n  handleItemClick(s) {\n    s.isDisabled || (this.items.filter(e => e !== s).forEach(e => e.reset()), s.handleClick(), this.toggleItemActivenessIfNeeded(s), s.closeOnActivate && this.hide());\n  }\n  /**\n   * Creates Flipper instance which allows to navigate between popover items via keyboard\n   */\n  initializeFlipper() {\n    this.flipper = new G({\n      items: this.flippableElements,\n      focusedItemClass: P.CSS.focused,\n      allowedKeys: [B.TAB, B.UP, B.DOWN, B.ENTER]\n    }), this.flipper.onFlip(this.onFlip);\n  }\n  /**\n   * Returns list of elements available for keyboard navigation.\n   * Contains both usual popover items elements and custom html content.\n   */\n  get flippableElements() {\n    const s = this.items.map(t => t.getElement());\n    return (this.customContentFlippableItems || []).concat(s);\n  }\n  get height() {\n    let s = 0;\n    if (this.nodes.popover === null) return s;\n    const e = this.nodes.popover.cloneNode(!0);\n    return e.style.visibility = \"hidden\", e.style.position = \"absolute\", e.style.top = \"-1000px\", e.classList.add(j.CSS.popoverOpened), document.body.appendChild(e), s = e.offsetHeight, e.remove(), s;\n  }\n  /**\n   * Checks if popover should be opened bottom.\n   * It should happen when there is enough space below or not enough space above\n   */\n  get shouldOpenBottom() {\n    const s = this.nodes.popover.getBoundingClientRect(),\n      e = this.scopeElement.getBoundingClientRect(),\n      t = this.height,\n      o = s.top + t,\n      i = s.top - t,\n      n = Math.min(window.innerHeight, e.bottom);\n    return i < e.top || o <= n;\n  }\n  /**\n   * Toggles nothing found message visibility\n   *\n   * @param isDisplayed - true if the message should be displayed\n   */\n  toggleNothingFoundMessage(s) {\n    this.nodes.nothingFoundMessage.classList.toggle(j.CSS.nothingFoundMessageDisplayed, s);\n  }\n  /**\n   * Toggles custom content visibility\n   *\n   * @param isDisplayed - true if custom content should be displayed\n   */\n  toggleCustomContent(s) {\n    var e;\n    (e = this.nodes.customContent) == null || e.classList.toggle(j.CSS.customContentHidden, s);\n  }\n  /**\n   * - Toggles item active state, if clicked popover item has property 'toggle' set to true.\n   *\n   * - Performs radiobutton-like behavior if the item has property 'toggle' set to string key.\n   * (All the other items with the same key get inactive, and the item gets active)\n   *\n   * @param clickedItem - popover item that was clicked\n   */\n  toggleItemActivenessIfNeeded(s) {\n    if (s.toggle === !0 && s.toggleActive(), typeof s.toggle == \"string\") {\n      const e = this.items.filter(t => t.toggle === s.toggle);\n      if (e.length === 1) {\n        s.toggleActive();\n        return;\n      }\n      e.forEach(t => {\n        t.toggleActive(t === s);\n      });\n    }\n  }\n};\nlet je = j;\nHo([ce], je.prototype, \"height\", 1);\nclass jo extends C {\n  constructor() {\n    super(...arguments), this.opened = !1, this.selection = new m(), this.onPopoverClose = () => {\n      this.close();\n    };\n  }\n  /**\n   * Module Events\n   *\n   * @returns {{opened: string, closed: string}}\n   */\n  get events() {\n    return {\n      opened: \"block-settings-opened\",\n      closed: \"block-settings-closed\"\n    };\n  }\n  /**\n   * Block Settings CSS\n   */\n  get CSS() {\n    return {\n      settings: \"ce-settings\"\n    };\n  }\n  /**\n   * Getter for inner popover's flipper instance\n   *\n   * @todo remove once BlockSettings becomes standalone non-module class\n   */\n  get flipper() {\n    var e;\n    return (e = this.popover) == null ? void 0 : e.flipper;\n  }\n  /**\n   * Panel with block settings with 2 sections:\n   *  - Tool's Settings\n   *  - Default Settings [Move, Remove, etc]\n   */\n  make() {\n    this.nodes.wrapper = d.make(\"div\", [this.CSS.settings]);\n  }\n  /**\n   * Destroys module\n   */\n  destroy() {\n    this.removeAllNodes();\n  }\n  /**\n   * Open Block Settings pane\n   *\n   * @param targetBlock - near which Block we should open BlockSettings\n   */\n  open() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.Editor.BlockManager.currentBlock;\n    this.opened = !0, this.selection.save(), e.selected = !0, this.Editor.BlockSelection.clearCache();\n    const [t, o] = e.getTunes();\n    this.eventsDispatcher.emit(this.events.opened), this.popover = new je({\n      searchable: !0,\n      items: t.map(i => this.resolveTuneAliases(i)),\n      customContent: o,\n      customContentFlippableItems: this.getControls(o),\n      scopeElement: this.Editor.API.methods.ui.nodes.redactor,\n      messages: {\n        nothingFound: $.ui(X.ui.popover, \"Nothing found\"),\n        search: $.ui(X.ui.popover, \"Filter\")\n      }\n    }), this.popover.on(ge.Close, this.onPopoverClose), this.nodes.wrapper.append(this.popover.getElement()), this.popover.show();\n  }\n  /**\n   * Returns root block settings element\n   */\n  getElement() {\n    return this.nodes.wrapper;\n  }\n  /**\n   * Close Block Settings pane\n   */\n  close() {\n    this.opened = !1, m.isAtEditor || this.selection.restore(), this.selection.clearSaved(), !this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted && this.Editor.BlockManager.currentBlock && (this.Editor.BlockManager.currentBlock.selected = !1), this.eventsDispatcher.emit(this.events.closed), this.popover && (this.popover.off(ge.Close, this.onPopoverClose), this.popover.destroy(), this.popover.getElement().remove(), this.popover = null);\n  }\n  /**\n   * Returns list of buttons and inputs inside specified container\n   *\n   * @param container - container to query controls inside of\n   */\n  getControls(e) {\n    const {\n        StylesAPI: t\n      } = this.Editor,\n      o = e.querySelectorAll(\".\".concat(t.classes.settingsButton, \", \").concat(d.allInputsSelector));\n    return Array.from(o);\n  }\n  /**\n   * Resolves aliases in tunes menu items\n   *\n   * @param item - item with resolved aliases\n   */\n  resolveTuneAliases(e) {\n    const t = Co(e, {\n      label: \"title\"\n    });\n    return e.confirmation && (t.confirmation = this.resolveTuneAliases(e.confirmation)), t;\n  }\n}\nclass Y extends C {\n  constructor() {\n    super(...arguments), this.opened = !1, this.tools = [], this.flipper = null, this.togglingCallback = null;\n  }\n  /**\n   * CSS getter\n   */\n  static get CSS() {\n    return {\n      conversionToolbarWrapper: \"ce-conversion-toolbar\",\n      conversionToolbarShowed: \"ce-conversion-toolbar--showed\",\n      conversionToolbarTools: \"ce-conversion-toolbar__tools\",\n      conversionToolbarLabel: \"ce-conversion-toolbar__label\",\n      conversionTool: \"ce-conversion-tool\",\n      conversionToolHidden: \"ce-conversion-tool--hidden\",\n      conversionToolIcon: \"ce-conversion-tool__icon\",\n      conversionToolSecondaryLabel: \"ce-conversion-tool__secondary-label\",\n      conversionToolFocused: \"ce-conversion-tool--focused\",\n      conversionToolActive: \"ce-conversion-tool--active\"\n    };\n  }\n  /**\n   * Create UI of Conversion Toolbar\n   */\n  make() {\n    this.nodes.wrapper = d.make(\"div\", [Y.CSS.conversionToolbarWrapper, ...(this.isRtl ? [this.Editor.UI.CSS.editorRtlFix] : [])]), this.nodes.tools = d.make(\"div\", Y.CSS.conversionToolbarTools);\n    const e = d.make(\"div\", Y.CSS.conversionToolbarLabel, {\n      textContent: $.ui(X.ui.inlineToolbar.converter, \"Convert to\")\n    });\n    return this.addTools(), this.enableFlipper(), d.append(this.nodes.wrapper, e), d.append(this.nodes.wrapper, this.nodes.tools), this.nodes.wrapper;\n  }\n  /**\n   * Deactivates flipper and removes all nodes\n   */\n  destroy() {\n    this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes();\n  }\n  /**\n   * Toggle conversion dropdown visibility\n   *\n   * @param {Function} [togglingCallback] — callback that will accept opening state\n   */\n  toggle(e) {\n    this.opened ? this.close() : this.open(), D(e) && (this.togglingCallback = e);\n  }\n  /**\n   * Shows Conversion Toolbar\n   */\n  open() {\n    this.filterTools(), this.opened = !0, this.nodes.wrapper.classList.add(Y.CSS.conversionToolbarShowed), window.requestAnimationFrame(() => {\n      this.flipper.activate(this.tools.map(e => e.button).filter(e => !e.classList.contains(Y.CSS.conversionToolHidden))), this.flipper.focusFirst(), D(this.togglingCallback) && this.togglingCallback(!0);\n    });\n  }\n  /**\n   * Closes Conversion Toolbar\n   */\n  close() {\n    this.opened = !1, this.flipper.deactivate(), this.nodes.wrapper.classList.remove(Y.CSS.conversionToolbarShowed), D(this.togglingCallback) && this.togglingCallback(!1);\n  }\n  /**\n   * Returns true if it has more than one tool available for convert in\n   */\n  hasTools() {\n    return this.tools.length === 1 ? this.tools[0].name !== this.config.defaultBlock : !0;\n  }\n  /**\n   * Replaces one Block with another\n   * For that Tools must provide import/export methods\n   *\n   * @param {string} replacingToolName - name of Tool which replaces current\n   * @param blockDataOverrides - If this conversion fired by the one of multiple Toolbox items, extend converted data with this item's \"data\" overrides\n   */\n  async replaceWithBlock(e, t) {\n    const {\n      BlockManager: o,\n      BlockSelection: i,\n      InlineToolbar: n,\n      Caret: r\n    } = this.Editor;\n    o.convert(this.Editor.BlockManager.currentBlock, e, t), i.clearSelection(), this.close(), n.close(), window.requestAnimationFrame(() => {\n      r.setToBlock(this.Editor.BlockManager.currentBlock, r.positions.END);\n    });\n  }\n  /**\n   * Iterates existing Tools and inserts to the ConversionToolbar\n   * if tools have ability to import\n   */\n  addTools() {\n    const e = this.Editor.Tools.blockTools;\n    Array.from(e.entries()).forEach(_ref11 => {\n      let [t, o] = _ref11;\n      var n;\n      const i = o.conversionConfig;\n      !i || !i.import || (n = o.toolbox) == null || n.forEach(r => this.addToolIfValid(t, r));\n    });\n  }\n  /**\n   * Inserts a tool to the ConversionToolbar if the tool's toolbox config is valid\n   *\n   * @param name - tool's name\n   * @param toolboxSettings - tool's single toolbox setting\n   */\n  addToolIfValid(e, t) {\n    V(t) || !t.icon || this.addTool(e, t);\n  }\n  /**\n   * Add tool to the Conversion Toolbar\n   *\n   * @param toolName - name of Tool to add\n   * @param toolboxItem - tool's toolbox item data\n   */\n  addTool(e, t) {\n    var r;\n    const o = d.make(\"div\", [Y.CSS.conversionTool]),\n      i = d.make(\"div\", [Y.CSS.conversionToolIcon]);\n    o.dataset.tool = e, i.innerHTML = t.icon, d.append(o, i), d.append(o, d.text($.t(X.toolNames, t.title || ae(e))));\n    const n = (r = this.Editor.Tools.blockTools.get(e)) == null ? void 0 : r.shortcut;\n    if (n) {\n      const a = d.make(\"span\", Y.CSS.conversionToolSecondaryLabel, {\n        innerText: Re(n)\n      });\n      d.append(o, a);\n    }\n    d.append(this.nodes.tools, o), this.tools.push({\n      name: e,\n      button: o,\n      toolboxItem: t\n    }), this.listeners.on(o, \"click\", async () => {\n      await this.replaceWithBlock(e, t.data);\n    });\n  }\n  /**\n   * Hide current Tool and show others\n   */\n  async filterTools() {\n    const {\n        currentBlock: e\n      } = this.Editor.BlockManager,\n      t = await e.getActiveToolboxEntry();\n    function o(i, n) {\n      return i.icon === n.icon && i.title === n.title;\n    }\n    this.tools.forEach(i => {\n      let n = !1;\n      if (t) {\n        const r = o(t, i.toolboxItem);\n        n = i.button.dataset.tool === e.name && r;\n      }\n      i.button.hidden = n, i.button.classList.toggle(Y.CSS.conversionToolHidden, n);\n    });\n  }\n  /**\n   * Prepare Flipper to be able to leaf tools by arrows/tab\n   */\n  enableFlipper() {\n    this.flipper = new G({\n      focusedItemClass: Y.CSS.conversionToolFocused\n    });\n  }\n}\nvar _e = {},\n  zo = {\n    get exports() {\n      return _e;\n    },\n    set exports(s) {\n      _e = s;\n    }\n  };\n/*!\n * Library for handling keyboard shortcuts\n * @copyright CodeX (https://codex.so)\n * @license MIT\n * @author CodeX (https://codex.so)\n * @version 1.2.0\n */\n(function (s, e) {\n  (function (t, o) {\n    s.exports = o();\n  })(window, function () {\n    return function (t) {\n      var o = {};\n      function i(n) {\n        if (o[n]) return o[n].exports;\n        var r = o[n] = {\n          i: n,\n          l: !1,\n          exports: {}\n        };\n        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n      }\n      return i.m = t, i.c = o, i.d = function (n, r, a) {\n        i.o(n, r) || Object.defineProperty(n, r, {\n          enumerable: !0,\n          get: a\n        });\n      }, i.r = function (n) {\n        typeof Symbol < \"u\" && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n      }, i.t = function (n, r) {\n        if (1 & r && (n = i(n)), 8 & r || 4 & r && typeof n == \"object\" && n && n.__esModule) return n;\n        var a = /* @__PURE__ */Object.create(null);\n        if (i.r(a), Object.defineProperty(a, \"default\", {\n          enumerable: !0,\n          value: n\n        }), 2 & r && typeof n != \"string\") for (var l in n) i.d(a, l, function (c) {\n          return n[c];\n        }.bind(null, l));\n        return a;\n      }, i.n = function (n) {\n        var r = n && n.__esModule ? function () {\n          return n.default;\n        } : function () {\n          return n;\n        };\n        return i.d(r, \"a\", r), r;\n      }, i.o = function (n, r) {\n        return Object.prototype.hasOwnProperty.call(n, r);\n      }, i.p = \"\", i(i.s = 0);\n    }([function (t, o, i) {\n      function n(l, c) {\n        for (var u = 0; u < c.length; u++) {\n          var h = c[u];\n          h.enumerable = h.enumerable || !1, h.configurable = !0, \"value\" in h && (h.writable = !0), Object.defineProperty(l, h.key, h);\n        }\n      }\n      function r(l, c, u) {\n        return c && n(l.prototype, c), u && n(l, u), l;\n      }\n      i.r(o);\n      var a = function () {\n        function l(c) {\n          var u = this;\n          (function (h, f) {\n            if (!(h instanceof f)) throw new TypeError(\"Cannot call a class as a function\");\n          })(this, l), this.commands = {}, this.keys = {}, this.name = c.name, this.parseShortcutName(c.name), this.element = c.on, this.callback = c.callback, this.executeShortcut = function (h) {\n            u.execute(h);\n          }, this.element.addEventListener(\"keydown\", this.executeShortcut, !1);\n        }\n        return r(l, null, [{\n          key: \"supportedCommands\",\n          get: function () {\n            return {\n              SHIFT: [\"SHIFT\"],\n              CMD: [\"CMD\", \"CONTROL\", \"COMMAND\", \"WINDOWS\", \"CTRL\"],\n              ALT: [\"ALT\", \"OPTION\"]\n            };\n          }\n        }, {\n          key: \"keyCodes\",\n          get: function () {\n            return {\n              0: 48,\n              1: 49,\n              2: 50,\n              3: 51,\n              4: 52,\n              5: 53,\n              6: 54,\n              7: 55,\n              8: 56,\n              9: 57,\n              A: 65,\n              B: 66,\n              C: 67,\n              D: 68,\n              E: 69,\n              F: 70,\n              G: 71,\n              H: 72,\n              I: 73,\n              J: 74,\n              K: 75,\n              L: 76,\n              M: 77,\n              N: 78,\n              O: 79,\n              P: 80,\n              Q: 81,\n              R: 82,\n              S: 83,\n              T: 84,\n              U: 85,\n              V: 86,\n              W: 87,\n              X: 88,\n              Y: 89,\n              Z: 90,\n              BACKSPACE: 8,\n              ENTER: 13,\n              ESCAPE: 27,\n              LEFT: 37,\n              UP: 38,\n              RIGHT: 39,\n              DOWN: 40,\n              INSERT: 45,\n              DELETE: 46,\n              \".\": 190\n            };\n          }\n        }]), r(l, [{\n          key: \"parseShortcutName\",\n          value: function (c) {\n            c = c.split(\"+\");\n            for (var u = 0; u < c.length; u++) {\n              c[u] = c[u].toUpperCase();\n              var h = !1;\n              for (var f in l.supportedCommands) if (l.supportedCommands[f].includes(c[u])) {\n                h = this.commands[f] = !0;\n                break;\n              }\n              h || (this.keys[c[u]] = !0);\n            }\n            for (var k in l.supportedCommands) this.commands[k] || (this.commands[k] = !1);\n          }\n        }, {\n          key: \"execute\",\n          value: function (c) {\n            var u,\n              h = {\n                CMD: c.ctrlKey || c.metaKey,\n                SHIFT: c.shiftKey,\n                ALT: c.altKey\n              },\n              f = !0;\n            for (u in this.commands) this.commands[u] !== h[u] && (f = !1);\n            var k,\n              p = !0;\n            for (k in this.keys) p = p && c.keyCode === l.keyCodes[k];\n            f && p && this.callback(c);\n          }\n        }, {\n          key: \"remove\",\n          value: function () {\n            this.element.removeEventListener(\"keydown\", this.executeShortcut);\n          }\n        }]), l;\n      }();\n      o.default = a;\n    }]).default;\n  });\n})(zo);\nconst Uo = /* @__PURE__ */xe(_e);\nclass $o {\n  constructor() {\n    this.registeredShortcuts = /* @__PURE__ */new Map();\n  }\n  /**\n   * Register shortcut\n   *\n   * @param shortcut - shortcut options\n   */\n  add(e) {\n    if (this.findShortcut(e.on, e.name)) throw Error(\"Shortcut \".concat(e.name, \" is already registered for \").concat(e.on, \". Please remove it before add a new handler.\"));\n    const o = new Uo({\n        name: e.name,\n        on: e.on,\n        callback: e.handler\n      }),\n      i = this.registeredShortcuts.get(e.on) || [];\n    this.registeredShortcuts.set(e.on, [...i, o]);\n  }\n  /**\n   * Remove shortcut\n   *\n   * @param element - Element shortcut is set for\n   * @param name - shortcut name\n   */\n  remove(e, t) {\n    const o = this.findShortcut(e, t);\n    if (!o) return;\n    o.remove();\n    const i = this.registeredShortcuts.get(e);\n    this.registeredShortcuts.set(e, i.filter(n => n !== o));\n  }\n  /**\n   * Get Shortcut instance if exist\n   *\n   * @param element - Element shorcut is set for\n   * @param shortcut - shortcut name\n   * @returns {number} index - shortcut index if exist\n   */\n  findShortcut(e, t) {\n    return (this.registeredShortcuts.get(e) || []).find(_ref12 => {\n      let {\n        name: i\n      } = _ref12;\n      return i === t;\n    });\n  }\n}\nconst le = new $o();\nvar Wo = Object.defineProperty,\n  Yo = Object.getOwnPropertyDescriptor,\n  bt = (s, e, t, o) => {\n    for (var i = o > 1 ? void 0 : o ? Yo(e, t) : e, n = s.length - 1, r; n >= 0; n--) (r = s[n]) && (i = (o ? r(e, t, i) : r(i)) || i);\n    return o && i && Wo(e, t, i), i;\n  },\n  me = /* @__PURE__ */(s => (s.Opened = \"toolbox-opened\", s.Closed = \"toolbox-closed\", s.BlockAdded = \"toolbox-block-added\", s))(me || {});\nconst mt = class extends we {\n  /**\n   * Toolbox constructor\n   *\n   * @param options - available parameters\n   * @param options.api - Editor API methods\n   * @param options.tools - Tools available to check whether some of them should be displayed at the Toolbox or not\n   */\n  constructor(_ref13) {\n    let {\n      api: s,\n      tools: e,\n      i18nLabels: t\n    } = _ref13;\n    super(), this.opened = !1, this.nodes = {\n      toolbox: null\n    }, this.onPopoverClose = () => {\n      this.opened = !1, this.emit(\"toolbox-closed\"\n      /* Closed */);\n    }, this.api = s, this.tools = e, this.i18nLabels = t;\n  }\n  /**\n   * Returns True if Toolbox is Empty and nothing to show\n   *\n   * @returns {boolean}\n   */\n  get isEmpty() {\n    return this.toolsToBeDisplayed.length === 0;\n  }\n  /**\n   * CSS styles\n   *\n   * @returns {Object<string, string>}\n   */\n  static get CSS() {\n    return {\n      toolbox: \"ce-toolbox\"\n    };\n  }\n  /**\n   * Makes the Toolbox\n   */\n  make() {\n    return this.popover = new je({\n      scopeElement: this.api.ui.nodes.redactor,\n      searchable: !0,\n      messages: {\n        nothingFound: this.i18nLabels.nothingFound,\n        search: this.i18nLabels.filter\n      },\n      items: this.toolboxItemsToBeDisplayed\n    }), this.popover.on(ge.Close, this.onPopoverClose), this.enableShortcuts(), this.nodes.toolbox = this.popover.getElement(), this.nodes.toolbox.classList.add(mt.CSS.toolbox), this.nodes.toolbox;\n  }\n  /**\n   * Returns true if the Toolbox has the Flipper activated and the Flipper has selected button\n   */\n  hasFocus() {\n    var s;\n    return (s = this.popover) == null ? void 0 : s.hasFocus();\n  }\n  /**\n   * Destroy Module\n   */\n  destroy() {\n    var s;\n    super.destroy(), this.nodes && this.nodes.toolbox && (this.nodes.toolbox.remove(), this.nodes.toolbox = null), this.removeAllShortcuts(), (s = this.popover) == null || s.off(ge.Close, this.onPopoverClose);\n  }\n  /**\n   * Toolbox Tool's button click handler\n   *\n   * @param toolName - tool type to be activated\n   * @param blockDataOverrides - Block data predefined by the activated Toolbox item\n   */\n  toolButtonActivated(s, e) {\n    this.insertNewBlock(s, e);\n  }\n  /**\n   * Open Toolbox with Tools\n   */\n  open() {\n    var s;\n    this.isEmpty || ((s = this.popover) == null || s.show(), this.opened = !0, this.emit(\"toolbox-opened\"\n    /* Opened */));\n  }\n  /**\n   * Close Toolbox\n   */\n  close() {\n    var s;\n    (s = this.popover) == null || s.hide(), this.opened = !1, this.emit(\"toolbox-closed\"\n    /* Closed */);\n  }\n  /**\n   * Close Toolbox\n   */\n  toggle() {\n    this.opened ? this.close() : this.open();\n  }\n  get toolsToBeDisplayed() {\n    const s = [];\n    return this.tools.forEach(e => {\n      e.toolbox && s.push(e);\n    }), s;\n  }\n  get toolboxItemsToBeDisplayed() {\n    const s = (e, t) => ({\n      icon: e.icon,\n      title: $.t(X.toolNames, e.title || ae(t.name)),\n      name: t.name,\n      onActivate: () => {\n        this.toolButtonActivated(t.name, e.data);\n      },\n      secondaryLabel: t.shortcut ? Re(t.shortcut) : \"\"\n    });\n    return this.toolsToBeDisplayed.reduce((e, t) => (Array.isArray(t.toolbox) ? t.toolbox.forEach(o => {\n      e.push(s(o, t));\n    }) : t.toolbox !== void 0 && e.push(s(t.toolbox, t)), e), []);\n  }\n  /**\n   * Iterate all tools and enable theirs shortcuts if specified\n   */\n  enableShortcuts() {\n    this.toolsToBeDisplayed.forEach(s => {\n      const e = s.shortcut;\n      e && this.enableShortcutForTool(s.name, e);\n    });\n  }\n  /**\n   * Enable shortcut Block Tool implemented shortcut\n   *\n   * @param {string} toolName - Tool name\n   * @param {string} shortcut - shortcut according to the ShortcutData Module format\n   */\n  enableShortcutForTool(s, e) {\n    le.add({\n      name: e,\n      on: this.api.ui.nodes.redactor,\n      handler: t => {\n        t.preventDefault();\n        const o = this.api.blocks.getCurrentBlockIndex(),\n          i = this.api.blocks.getBlockByIndex(o);\n        if (i) try {\n          this.api.blocks.convert(i.id, s), window.requestAnimationFrame(() => {\n            this.api.caret.setToBlock(o, \"end\");\n          });\n          return;\n        } catch {}\n        this.insertNewBlock(s);\n      }\n    });\n  }\n  /**\n   * Removes all added shortcuts\n   * Fired when the Read-Only mode is activated\n   */\n  removeAllShortcuts() {\n    this.toolsToBeDisplayed.forEach(s => {\n      const e = s.shortcut;\n      e && le.remove(this.api.ui.nodes.redactor, e);\n    });\n  }\n  /**\n   * Inserts new block\n   * Can be called when button clicked on Toolbox or by ShortcutData\n   *\n   * @param {string} toolName - Tool name\n   * @param blockDataOverrides - predefined Block data\n   */\n  async insertNewBlock(s, e) {\n    const t = this.api.blocks.getCurrentBlockIndex(),\n      o = this.api.blocks.getBlockByIndex(t);\n    if (!o) return;\n    const i = o.isEmpty ? t : t + 1;\n    let n;\n    if (e) {\n      const a = await this.api.blocks.composeBlockData(s);\n      n = Object.assign(a, e);\n    }\n    const r = this.api.blocks.insert(s, n, void 0, i, void 0, o.isEmpty);\n    r.call(q.APPEND_CALLBACK), this.api.caret.setToBlock(i), this.emit(\"toolbox-block-added\", {\n      block: r\n    }), this.api.toolbar.close();\n  }\n};\nlet ze = mt;\nbt([ce], ze.prototype, \"toolsToBeDisplayed\", 1);\nbt([ce], ze.prototype, \"toolboxItemsToBeDisplayed\", 1);\nconst kt = \"block hovered\";\nclass Ko extends C {\n  /**\n   * @class\n   * @param moduleConfiguration - Module Configuration\n   * @param moduleConfiguration.config - Editor's config\n   * @param moduleConfiguration.eventsDispatcher - Editor's event dispatcher\n   */\n  constructor(_ref14) {\n    let {\n      config: e,\n      eventsDispatcher: t\n    } = _ref14;\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.toolboxInstance = null, this.tooltip = new He();\n  }\n  /**\n   * CSS styles\n   *\n   * @returns {object}\n   */\n  get CSS() {\n    return {\n      toolbar: \"ce-toolbar\",\n      content: \"ce-toolbar__content\",\n      actions: \"ce-toolbar__actions\",\n      actionsOpened: \"ce-toolbar__actions--opened\",\n      toolbarOpened: \"ce-toolbar--opened\",\n      openedToolboxHolderModifier: \"codex-editor--toolbox-opened\",\n      plusButton: \"ce-toolbar__plus\",\n      plusButtonShortcut: \"ce-toolbar__plus-shortcut\",\n      settingsToggler: \"ce-toolbar__settings-btn\",\n      settingsTogglerHidden: \"ce-toolbar__settings-btn--hidden\"\n    };\n  }\n  /**\n   * Returns the Toolbar opening state\n   *\n   * @returns {boolean}\n   */\n  get opened() {\n    return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened);\n  }\n  /**\n   * Public interface for accessing the Toolbox\n   */\n  get toolbox() {\n    var e;\n    return {\n      opened: (e = this.toolboxInstance) == null ? void 0 : e.opened,\n      close: () => {\n        var t;\n        (t = this.toolboxInstance) == null || t.close();\n      },\n      open: () => {\n        if (this.toolboxInstance === null) {\n          L(\"toolbox.open() called before initialization is finished\", \"warn\");\n          return;\n        }\n        this.Editor.BlockManager.currentBlock = this.hoveredBlock, this.toolboxInstance.open();\n      },\n      toggle: () => {\n        if (this.toolboxInstance === null) {\n          L(\"toolbox.toggle() called before initialization is finished\", \"warn\");\n          return;\n        }\n        this.toolboxInstance.toggle();\n      },\n      hasFocus: () => {\n        var t;\n        return (t = this.toolboxInstance) == null ? void 0 : t.hasFocus();\n      }\n    };\n  }\n  /**\n   * Block actions appearance manipulations\n   */\n  get blockActions() {\n    return {\n      hide: () => {\n        this.nodes.actions.classList.remove(this.CSS.actionsOpened);\n      },\n      show: () => {\n        this.nodes.actions.classList.add(this.CSS.actionsOpened);\n      }\n    };\n  }\n  /**\n   * Methods for working with Block Tunes toggler\n   */\n  get blockTunesToggler() {\n    return {\n      hide: () => this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),\n      show: () => this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)\n    };\n  }\n  /**\n   * Toggles read-only mode\n   *\n   * @param {boolean} readOnlyEnabled - read-only mode\n   */\n  toggleReadOnly(e) {\n    e ? (this.destroy(), this.Editor.BlockSettings.destroy(), this.disableModuleBindings()) : window.requestIdleCallback(() => {\n      this.drawUI(), this.enableModuleBindings();\n    }, {\n      timeout: 2e3\n    });\n  }\n  /**\n   * Move Toolbar to the passed (or current) Block\n   *\n   * @param block - block to move Toolbar near it\n   */\n  moveAndOpen() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.Editor.BlockManager.currentBlock;\n    if (this.toolboxInstance === null) {\n      L(\"Can't open Toolbar since Editor initialization is not finished yet\", \"warn\");\n      return;\n    }\n    if (this.toolboxInstance.opened && this.toolboxInstance.close(), this.Editor.BlockSettings.opened && this.Editor.BlockSettings.close(), !e) return;\n    this.hoveredBlock = e;\n    const t = e.holder,\n      {\n        isMobile: o\n      } = this.Editor.UI,\n      i = e.pluginsContent,\n      n = window.getComputedStyle(i),\n      r = parseInt(n.paddingTop, 10),\n      a = t.offsetHeight;\n    let l;\n    o ? l = t.offsetTop + a : l = t.offsetTop + r, this.nodes.wrapper.style.top = \"\".concat(Math.floor(l), \"px\"), this.Editor.BlockManager.blocks.length === 1 && e.isEmpty ? this.blockTunesToggler.hide() : this.blockTunesToggler.show(), this.open();\n  }\n  /**\n   * Close the Toolbar\n   */\n  close() {\n    var e;\n    this.Editor.ReadOnly.isEnabled || (this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened), this.blockActions.hide(), (e = this.toolboxInstance) == null || e.close(), this.Editor.BlockSettings.close());\n  }\n  /**\n   * Open Toolbar with Plus Button and Actions\n   *\n   * @param {boolean} withBlockActions - by default, Toolbar opens with Block Actions.\n   *                                     This flag allows to open Toolbar without Actions.\n   */\n  open() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;\n    re(() => {\n      this.nodes.wrapper.classList.add(this.CSS.toolbarOpened), e ? this.blockActions.show() : this.blockActions.hide();\n    }, 50)();\n  }\n  /**\n   * Draws Toolbar elements\n   */\n  make() {\n    this.nodes.wrapper = d.make(\"div\", this.CSS.toolbar), [\"content\", \"actions\"].forEach(t => {\n      this.nodes[t] = d.make(\"div\", this.CSS[t]);\n    }), d.append(this.nodes.wrapper, this.nodes.content), d.append(this.nodes.content, this.nodes.actions), this.nodes.plusButton = d.make(\"div\", this.CSS.plusButton, {\n      innerHTML: _o\n    }), d.append(this.nodes.actions, this.nodes.plusButton), this.readOnlyMutableListeners.on(this.nodes.plusButton, \"click\", () => {\n      this.tooltip.hide(!0), this.plusButtonClicked();\n    }, !1);\n    const e = d.make(\"div\");\n    e.appendChild(document.createTextNode($.ui(X.ui.toolbar.toolbox, \"Add\"))), e.appendChild(d.make(\"div\", this.CSS.plusButtonShortcut, {\n      textContent: \"⇥ Tab\"\n    })), this.tooltip.onHover(this.nodes.plusButton, e, {\n      hidingDelay: 400\n    }), this.nodes.settingsToggler = d.make(\"span\", this.CSS.settingsToggler, {\n      innerHTML: Ao\n    }), d.append(this.nodes.actions, this.nodes.settingsToggler), this.tooltip.onHover(this.nodes.settingsToggler, $.ui(X.ui.blockTunes.toggler, \"Click to tune\"), {\n      hidingDelay: 400\n    }), d.append(this.nodes.actions, this.makeToolbox()), d.append(this.nodes.actions, this.Editor.BlockSettings.getElement()), d.append(this.Editor.UI.nodes.wrapper, this.nodes.wrapper);\n  }\n  /**\n   * Creates the Toolbox instance and return it's rendered element\n   */\n  makeToolbox() {\n    return this.toolboxInstance = new ze({\n      api: this.Editor.API.methods,\n      tools: this.Editor.Tools.blockTools,\n      i18nLabels: {\n        filter: $.ui(X.ui.popover, \"Filter\"),\n        nothingFound: $.ui(X.ui.popover, \"Nothing found\")\n      }\n    }), this.toolboxInstance.on(me.Opened, () => {\n      this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier);\n    }), this.toolboxInstance.on(me.Closed, () => {\n      this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier);\n    }), this.toolboxInstance.on(me.BlockAdded, _ref15 => {\n      let {\n        block: e\n      } = _ref15;\n      const {\n          BlockManager: t,\n          Caret: o\n        } = this.Editor,\n        i = t.getBlockById(e.id);\n      i.inputs.length === 0 && (i === t.lastBlock ? (t.insertAtEnd(), o.setToBlock(t.lastBlock)) : o.setToBlock(t.nextBlock));\n    }), this.toolboxInstance.make();\n  }\n  /**\n   * Handler for Plus Button\n   */\n  plusButtonClicked() {\n    var e;\n    this.Editor.BlockManager.currentBlock = this.hoveredBlock, (e = this.toolboxInstance) == null || e.toggle();\n  }\n  /**\n   * Enable bindings\n   */\n  enableModuleBindings() {\n    this.readOnlyMutableListeners.on(this.nodes.settingsToggler, \"mousedown\", e => {\n      var t;\n      e.stopPropagation(), this.settingsTogglerClicked(), (t = this.toolboxInstance) != null && t.opened && this.toolboxInstance.close(), this.tooltip.hide(!0);\n    }, !0), te() || this.eventsDispatcher.on(kt, e => {\n      var t;\n      this.Editor.BlockSettings.opened || (t = this.toolboxInstance) != null && t.opened || this.moveAndOpen(e.block);\n    });\n  }\n  /**\n   * Disable bindings\n   */\n  disableModuleBindings() {\n    this.readOnlyMutableListeners.clearAll();\n  }\n  /**\n   * Clicks on the Block Settings toggler\n   */\n  settingsTogglerClicked() {\n    this.Editor.BlockManager.currentBlock = this.hoveredBlock, this.Editor.BlockSettings.opened ? this.Editor.BlockSettings.close() : this.Editor.BlockSettings.open(this.hoveredBlock);\n  }\n  /**\n   * Draws Toolbar UI\n   *\n   * Toolbar contains BlockSettings and Toolbox.\n   * That's why at first we draw its components and then Toolbar itself\n   *\n   * Steps:\n   *  - Make Toolbar dependent components like BlockSettings, Toolbox and so on\n   *  - Make itself and append dependent nodes to itself\n   *\n   */\n  drawUI() {\n    this.Editor.BlockSettings.make(), this.make();\n  }\n  /**\n   * Removes all created and saved HTMLElements\n   * It is used in Read-Only mode\n   */\n  destroy() {\n    this.removeAllNodes(), this.toolboxInstance && this.toolboxInstance.destroy(), this.tooltip.destroy();\n  }\n}\nvar ye = /* @__PURE__ */(s => (s[s.Block = 0] = \"Block\", s[s.Inline = 1] = \"Inline\", s[s.Tune = 2] = \"Tune\", s))(ye || {}),\n  ke = /* @__PURE__ */(s => (s.Shortcut = \"shortcut\", s.Toolbox = \"toolbox\", s.EnabledInlineTools = \"inlineToolbar\", s.EnabledBlockTunes = \"tunes\", s.Config = \"config\", s))(ke || {}),\n  vt = /* @__PURE__ */(s => (s.Shortcut = \"shortcut\", s.SanitizeConfig = \"sanitize\", s))(vt || {}),\n  se = /* @__PURE__ */(s => (s.IsEnabledLineBreaks = \"enableLineBreaks\", s.Toolbox = \"toolbox\", s.ConversionConfig = \"conversionConfig\", s.IsReadOnlySupported = \"isReadOnlySupported\", s.PasteConfig = \"pasteConfig\", s))(se || {}),\n  Ue = /* @__PURE__ */(s => (s.IsInline = \"isInline\", s.Title = \"title\", s))(Ue || {}),\n  xt = /* @__PURE__ */(s => (s.IsTune = \"isTune\", s))(xt || {});\nclass $e {\n  /**\n   * @class\n   * @param {ConstructorOptions} options - Constructor options\n   */\n  constructor(_ref16) {\n    let {\n      name: e,\n      constructable: t,\n      config: o,\n      api: i,\n      isDefault: n,\n      isInternal: r = !1,\n      defaultPlaceholder: a\n    } = _ref16;\n    this.api = i, this.name = e, this.constructable = t, this.config = o, this.isDefault = n, this.isInternal = r, this.defaultPlaceholder = a;\n  }\n  /**\n   * Returns Tool user configuration\n   */\n  get settings() {\n    const e = this.config.config || {};\n    return this.isDefault && !(\"placeholder\" in e) && this.defaultPlaceholder && (e.placeholder = this.defaultPlaceholder), e;\n  }\n  /**\n   * Calls Tool's reset method\n   */\n  reset() {\n    if (D(this.constructable.reset)) return this.constructable.reset();\n  }\n  /**\n   * Calls Tool's prepare method\n   */\n  prepare() {\n    if (D(this.constructable.prepare)) return this.constructable.prepare({\n      toolName: this.name,\n      config: this.settings\n    });\n  }\n  /**\n   * Returns shortcut for Tool (internal or specified by user)\n   */\n  get shortcut() {\n    const e = this.constructable.shortcut;\n    return this.config.shortcut || e;\n  }\n  /**\n   * Returns Tool's sanitizer configuration\n   */\n  get sanitizeConfig() {\n    return this.constructable.sanitize || {};\n  }\n  /**\n   * Returns true if Tools is inline\n   */\n  isInline() {\n    return this.type === 1;\n  }\n  /**\n   * Returns true if Tools is block\n   */\n  isBlock() {\n    return this.type === 0;\n  }\n  /**\n   * Returns true if Tools is tune\n   */\n  isTune() {\n    return this.type === 2;\n  }\n}\nclass Xo extends C {\n  /**\n   * @class\n   * @param moduleConfiguration - Module Configuration\n   * @param moduleConfiguration.config - Editor's config\n   * @param moduleConfiguration.eventsDispatcher - Editor's event dispatcher\n   */\n  constructor(_ref17) {\n    let {\n      config: e,\n      eventsDispatcher: t\n    } = _ref17;\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.CSS = {\n      inlineToolbar: \"ce-inline-toolbar\",\n      inlineToolbarShowed: \"ce-inline-toolbar--showed\",\n      inlineToolbarLeftOriented: \"ce-inline-toolbar--left-oriented\",\n      inlineToolbarRightOriented: \"ce-inline-toolbar--right-oriented\",\n      inlineToolbarShortcut: \"ce-inline-toolbar__shortcut\",\n      buttonsWrapper: \"ce-inline-toolbar__buttons\",\n      actionsWrapper: \"ce-inline-toolbar__actions\",\n      inlineToolButton: \"ce-inline-tool\",\n      inputField: \"cdx-input\",\n      focusedButton: \"ce-inline-tool--focused\",\n      conversionToggler: \"ce-inline-toolbar__dropdown\",\n      conversionTogglerArrow: \"ce-inline-toolbar__dropdown-arrow\",\n      conversionTogglerHidden: \"ce-inline-toolbar__dropdown--hidden\",\n      conversionTogglerContent: \"ce-inline-toolbar__dropdown-content\",\n      togglerAndButtonsWrapper: \"ce-inline-toolbar__toggler-and-button-wrapper\"\n    }, this.opened = !1, this.toolbarVerticalMargin = te() ? 20 : 6, this.buttonsList = null, this.width = 0, this.flipper = null, this.tooltip = new He();\n  }\n  /**\n   * Toggles read-only mode\n   *\n   * @param {boolean} readOnlyEnabled - read-only mode\n   */\n  toggleReadOnly(e) {\n    e ? (this.destroy(), this.Editor.ConversionToolbar.destroy()) : window.requestIdleCallback(() => {\n      this.make();\n    }, {\n      timeout: 2e3\n    });\n  }\n  /**\n   *  Moving / appearance\n   *  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n   */\n  /**\n   * Shows Inline Toolbar if something is selected\n   *\n   * @param [needToClose] - pass true to close toolbar if it is not allowed.\n   *                                  Avoid to use it just for closing IT, better call .close() clearly.\n   * @param [needToShowConversionToolbar] - pass false to not to show Conversion Toolbar\n   */\n  tryToShow() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n    if (!this.allowedToShow()) {\n      e && this.close();\n      return;\n    }\n    this.move(), this.open(t), this.Editor.Toolbar.close();\n  }\n  /**\n   * Move Toolbar to the selected text\n   */\n  move() {\n    const e = m.rect,\n      t = this.Editor.UI.nodes.wrapper.getBoundingClientRect(),\n      o = {\n        x: e.x - t.left,\n        y: e.y + e.height -\n        // + window.scrollY\n        t.top + this.toolbarVerticalMargin\n      };\n    e.width && (o.x += Math.floor(e.width / 2));\n    const i = o.x - this.width / 2,\n      n = o.x + this.width / 2;\n    this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented, i < this.Editor.UI.contentRect.left), this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented, n > this.Editor.UI.contentRect.right), this.nodes.wrapper.style.left = Math.floor(o.x) + \"px\", this.nodes.wrapper.style.top = Math.floor(o.y) + \"px\";\n  }\n  /**\n   * Hides Inline Toolbar\n   */\n  close() {\n    this.opened && (this.Editor.ReadOnly.isEnabled || (this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed), Array.from(this.toolsInstances.entries()).forEach(_ref18 => {\n      let [e, t] = _ref18;\n      const o = this.getToolShortcut(e);\n      o && le.remove(this.Editor.UI.nodes.redactor, o), D(t.clear) && t.clear();\n    }), this.opened = !1, this.flipper.deactivate(), this.Editor.ConversionToolbar.close()));\n  }\n  /**\n   * Shows Inline Toolbar\n   *\n   * @param [needToShowConversionToolbar] - pass false to not to show Conversion Toolbar\n   */\n  open() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;\n    if (this.opened) return;\n    this.addToolsFiltered(), this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed), this.buttonsList = this.nodes.buttons.querySelectorAll(\".\".concat(this.CSS.inlineToolButton)), this.opened = !0, e && this.Editor.ConversionToolbar.hasTools() ? this.setConversionTogglerContent() : this.nodes.conversionToggler.hidden = !0;\n    let t = Array.from(this.buttonsList);\n    t.unshift(this.nodes.conversionToggler), t = t.filter(o => !o.hidden), this.flipper.activate(t);\n  }\n  /**\n   * Check if node is contained by Inline Toolbar\n   *\n   * @param {Node} node — node to check\n   */\n  containsNode(e) {\n    return this.nodes.wrapper.contains(e);\n  }\n  /**\n   * Removes UI and its components\n   */\n  destroy() {\n    this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes(), this.tooltip.destroy();\n  }\n  /**\n   * Making DOM\n   */\n  make() {\n    this.nodes.wrapper = d.make(\"div\", [this.CSS.inlineToolbar, ...(this.isRtl ? [this.Editor.UI.CSS.editorRtlFix] : [])]), this.nodes.togglerAndButtonsWrapper = d.make(\"div\", this.CSS.togglerAndButtonsWrapper), this.nodes.buttons = d.make(\"div\", this.CSS.buttonsWrapper), this.nodes.actions = d.make(\"div\", this.CSS.actionsWrapper), this.listeners.on(this.nodes.wrapper, \"mousedown\", e => {\n      e.target.closest(\".\".concat(this.CSS.actionsWrapper)) || e.preventDefault();\n    }), d.append(this.nodes.wrapper, [this.nodes.togglerAndButtonsWrapper, this.nodes.actions]), d.append(this.Editor.UI.nodes.wrapper, this.nodes.wrapper), this.addConversionToggler(), d.append(this.nodes.togglerAndButtonsWrapper, this.nodes.buttons), this.prepareConversionToolbar(), window.requestAnimationFrame(() => {\n      this.recalculateWidth();\n    }), this.enableFlipper();\n  }\n  /**\n   * Need to show Inline Toolbar or not\n   */\n  allowedToShow() {\n    const e = [\"IMG\", \"INPUT\"],\n      t = m.get(),\n      o = m.text;\n    if (!t || !t.anchorNode || t.isCollapsed || o.length < 1) return !1;\n    const i = d.isElement(t.anchorNode) ? t.anchorNode : t.anchorNode.parentElement;\n    if (t && e.includes(i.tagName) || i.closest('[contenteditable=\"true\"]') === null) return !1;\n    const r = this.Editor.BlockManager.getBlock(t.anchorNode);\n    return r ? r.tool.inlineTools.size !== 0 : !1;\n  }\n  /**\n   * Recalculate inline toolbar width\n   */\n  recalculateWidth() {\n    this.width = this.nodes.wrapper.offsetWidth;\n  }\n  /**\n   * Create a toggler for Conversion Dropdown\n   * and prepend it to the buttons list\n   */\n  addConversionToggler() {\n    this.nodes.conversionToggler = d.make(\"div\", this.CSS.conversionToggler), this.nodes.conversionTogglerContent = d.make(\"div\", this.CSS.conversionTogglerContent);\n    const e = d.make(\"div\", this.CSS.conversionTogglerArrow, {\n      innerHTML: ft\n    });\n    this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent), this.nodes.conversionToggler.appendChild(e), this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler), this.listeners.on(this.nodes.conversionToggler, \"click\", () => {\n      this.Editor.ConversionToolbar.toggle(t => {\n        !t && this.opened ? this.flipper.activate() : this.opened && this.flipper.deactivate();\n      });\n    }), te() === !1 && this.tooltip.onHover(this.nodes.conversionToggler, $.ui(X.ui.inlineToolbar.converter, \"Convert to\"), {\n      placement: \"top\",\n      hidingDelay: 100\n    });\n  }\n  /**\n   * Changes Conversion Dropdown content for current block's Tool\n   */\n  async setConversionTogglerContent() {\n    const {\n        BlockManager: e\n      } = this.Editor,\n      {\n        currentBlock: t\n      } = e,\n      o = t.name,\n      i = t.tool.conversionConfig,\n      n = i && i.export;\n    this.nodes.conversionToggler.hidden = !n, this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden, !n);\n    const r = (await t.getActiveToolboxEntry()) || {};\n    this.nodes.conversionTogglerContent.innerHTML = r.icon || r.title || ae(o);\n  }\n  /**\n   * Makes the Conversion Dropdown\n   */\n  prepareConversionToolbar() {\n    const e = this.Editor.ConversionToolbar.make();\n    d.append(this.nodes.wrapper, e);\n  }\n  /**\n   *  Working with Tools\n   *  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n   */\n  /**\n   * Append only allowed Tools\n   */\n  addToolsFiltered() {\n    const e = m.get(),\n      t = this.Editor.BlockManager.getBlock(e.anchorNode);\n    this.nodes.buttons.innerHTML = \"\", this.nodes.actions.innerHTML = \"\", this.toolsInstances = /* @__PURE__ */new Map(), Array.from(t.tool.inlineTools.values()).forEach(o => {\n      this.addTool(o);\n    }), this.recalculateWidth();\n  }\n  /**\n   * Add tool button and activate clicks\n   *\n   * @param {InlineTool} tool - InlineTool object\n   */\n  addTool(e) {\n    const t = e.create(),\n      o = t.render();\n    if (!o) {\n      L(\"Render method must return an instance of Node\", \"warn\", e.name);\n      return;\n    }\n    if (o.dataset.tool = e.name, this.nodes.buttons.appendChild(o), this.toolsInstances.set(e.name, t), D(t.renderActions)) {\n      const a = t.renderActions();\n      this.nodes.actions.appendChild(a);\n    }\n    this.listeners.on(o, \"click\", a => {\n      this.toolClicked(t), a.preventDefault();\n    });\n    const i = this.getToolShortcut(e.name);\n    if (i) try {\n      this.enableShortcuts(t, i);\n    } catch {}\n    const n = d.make(\"div\"),\n      r = $.t(X.toolNames, e.title || ae(e.name));\n    n.appendChild(d.text(r)), i && n.appendChild(d.make(\"div\", this.CSS.inlineToolbarShortcut, {\n      textContent: Re(i)\n    })), te() === !1 && this.tooltip.onHover(o, n, {\n      placement: \"top\",\n      hidingDelay: 100\n    }), t.checkState(m.get());\n  }\n  /**\n   * Get shortcut name for tool\n   *\n   * @param toolName — Tool name\n   */\n  getToolShortcut(e) {\n    const {\n        Tools: t\n      } = this.Editor,\n      o = t.inlineTools.get(e),\n      i = t.internal.inlineTools;\n    return Array.from(i.keys()).includes(e) ? this.inlineTools[e][vt.Shortcut] : o.shortcut;\n  }\n  /**\n   * Enable Tool shortcut with Editor Shortcuts Module\n   *\n   * @param {InlineTool} tool - Tool instance\n   * @param {string} shortcut - shortcut according to the ShortcutData Module format\n   */\n  enableShortcuts(e, t) {\n    le.add({\n      name: t,\n      handler: o => {\n        const {\n          currentBlock: i\n        } = this.Editor.BlockManager;\n        i && i.tool.enabledInlineTools && (o.preventDefault(), this.toolClicked(e));\n      },\n      on: this.Editor.UI.nodes.redactor\n    });\n  }\n  /**\n   * Inline Tool button clicks\n   *\n   * @param {InlineTool} tool - Tool's instance\n   */\n  toolClicked(e) {\n    const t = m.range;\n    e.surround(t), this.checkToolsState(), e.renderActions !== void 0 && this.flipper.deactivate();\n  }\n  /**\n   * Check Tools` state by selection\n   */\n  checkToolsState() {\n    this.toolsInstances.forEach(e => {\n      e.checkState(m.get());\n    });\n  }\n  /**\n   * Get inline tools tools\n   * Tools that has isInline is true\n   */\n  get inlineTools() {\n    const e = {};\n    return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(_ref19 => {\n      let [t, o] = _ref19;\n      e[t] = o.create();\n    }), e;\n  }\n  /**\n   * Allow to leaf buttons by arrows / tab\n   * Buttons will be filled on opening\n   */\n  enableFlipper() {\n    this.flipper = new G({\n      focusedItemClass: this.CSS.focusedButton,\n      allowedKeys: [B.ENTER, B.TAB]\n    });\n  }\n}\nclass Vo extends C {\n  /**\n   * All keydowns on Block\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  keydown(e) {\n    switch (this.beforeKeydownProcessing(e), e.keyCode) {\n      case B.BACKSPACE:\n        this.backspace(e);\n        break;\n      case B.DELETE:\n        this.delete(e);\n        break;\n      case B.ENTER:\n        this.enter(e);\n        break;\n      case B.DOWN:\n      case B.RIGHT:\n        this.arrowRightAndDown(e);\n        break;\n      case B.UP:\n      case B.LEFT:\n        this.arrowLeftAndUp(e);\n        break;\n      case B.TAB:\n        this.tabPressed(e);\n        break;\n    }\n  }\n  /**\n   * Fires on keydown before event processing\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  beforeKeydownProcessing(e) {\n    this.needToolbarClosing(e) && nt(e.keyCode) && (this.Editor.Toolbar.close(), this.Editor.ConversionToolbar.close(), e.ctrlKey || e.metaKey || e.altKey || e.shiftKey || (this.Editor.BlockManager.clearFocused(), this.Editor.BlockSelection.clearSelection(e)));\n  }\n  /**\n   * Key up on Block:\n   * - shows Inline Toolbar if something selected\n   * - shows conversion toolbar with 85% of block selection\n   *\n   * @param {KeyboardEvent} event - keyup event\n   */\n  keyup(e) {\n    e.shiftKey || this.Editor.UI.checkEmptiness();\n  }\n  /**\n   * Open Toolbox to leaf Tools\n   *\n   * @param {KeyboardEvent} event - tab keydown event\n   */\n  tabPressed(e) {\n    this.Editor.BlockSelection.clearSelection(e);\n    const {\n        BlockManager: t,\n        InlineToolbar: o,\n        ConversionToolbar: i\n      } = this.Editor,\n      n = t.currentBlock;\n    if (!n) return;\n    const r = n.isEmpty,\n      a = n.tool.isDefault && r,\n      l = !r && i.opened,\n      c = !r && !m.isCollapsed && o.opened;\n    a ? this.activateToolbox() : !l && !c && this.activateBlockSettings();\n  }\n  /**\n   * Add drop target styles\n   *\n   * @param {DragEvent} event - drag over event\n   */\n  dragOver(e) {\n    const t = this.Editor.BlockManager.getBlockByChildNode(e.target);\n    t.dropTarget = !0;\n  }\n  /**\n   * Remove drop target style\n   *\n   * @param {DragEvent} event - drag leave event\n   */\n  dragLeave(e) {\n    const t = this.Editor.BlockManager.getBlockByChildNode(e.target);\n    t.dropTarget = !1;\n  }\n  /**\n   * Copying selected blocks\n   * Before putting to the clipboard we sanitize all blocks and then copy to the clipboard\n   *\n   * @param {ClipboardEvent} event - clipboard event\n   */\n  handleCommandC(e) {\n    const {\n      BlockSelection: t\n    } = this.Editor;\n    t.anyBlockSelected && t.copySelectedBlocks(e);\n  }\n  /**\n   * Copy and Delete selected Blocks\n   *\n   * @param {ClipboardEvent} event - clipboard event\n   */\n  handleCommandX(e) {\n    const {\n      BlockSelection: t,\n      BlockManager: o,\n      Caret: i\n    } = this.Editor;\n    t.anyBlockSelected && t.copySelectedBlocks(e).then(() => {\n      const n = o.removeSelectedBlocks(),\n        r = o.insertDefaultBlockAtIndex(n, !0);\n      i.setToBlock(r, i.positions.START), t.clearSelection(e);\n    });\n  }\n  /**\n   * ENTER pressed on block\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  enter(e) {\n    const {\n      BlockManager: t,\n      UI: o\n    } = this.Editor;\n    if (t.currentBlock.tool.isLineBreaksEnabled || o.someToolbarOpened && o.someFlipperButtonFocused || e.shiftKey) return;\n    let n = this.Editor.BlockManager.currentBlock;\n    this.Editor.Caret.isAtStart && !this.Editor.BlockManager.currentBlock.hasMedia ? this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex) : this.Editor.Caret.isAtEnd ? n = this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex + 1) : n = this.Editor.BlockManager.split(), this.Editor.Caret.setToBlock(n), this.Editor.Toolbar.moveAndOpen(n), e.preventDefault();\n  }\n  /**\n   * Handle backspace keydown on Block\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  backspace(e) {\n    const {\n        BlockManager: t,\n        Caret: o\n      } = this.Editor,\n      {\n        currentBlock: i,\n        previousBlock: n\n      } = t;\n    if (!m.isCollapsed || !o.isAtStart) return;\n    if (e.preventDefault(), this.Editor.Toolbar.close(), !(i.currentInput === i.firstInput)) {\n      o.navigatePrevious();\n      return;\n    }\n    if (n === null) return;\n    if (n.isEmpty) {\n      t.removeBlock(n);\n      return;\n    }\n    if (i.isEmpty) {\n      t.removeBlock(i);\n      const l = t.currentBlock;\n      o.setToBlock(l, o.positions.END);\n      return;\n    }\n    Je(i, n) ? this.mergeBlocks(n, i) : o.setToBlock(n, o.positions.END);\n  }\n  /**\n   * Handles delete keydown on Block\n   * Removes char after the caret.\n   * If caret is at the end of the block, merge next block with current\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  delete(e) {\n    const {\n        BlockManager: t,\n        Caret: o\n      } = this.Editor,\n      {\n        currentBlock: i,\n        nextBlock: n\n      } = t;\n    if (!m.isCollapsed || !o.isAtEnd) return;\n    if (e.preventDefault(), this.Editor.Toolbar.close(), !(i.currentInput === i.lastInput)) {\n      o.navigateNext();\n      return;\n    }\n    if (n === null) return;\n    if (n.isEmpty) {\n      t.removeBlock(n);\n      return;\n    }\n    if (i.isEmpty) {\n      t.removeBlock(i), o.setToBlock(n, o.positions.START);\n      return;\n    }\n    Je(i, n) ? this.mergeBlocks(i, n) : o.setToBlock(n, o.positions.START);\n  }\n  /**\n   * Merge passed Blocks\n   *\n   * @param targetBlock - to which Block we want to merge\n   * @param blockToMerge - what Block we want to merge\n   */\n  mergeBlocks(e, t) {\n    const {\n      BlockManager: o,\n      Caret: i,\n      Toolbar: n\n    } = this.Editor;\n    i.createShadow(e.pluginsContent), o.mergeBlocks(e, t).then(() => {\n      window.requestAnimationFrame(() => {\n        i.restoreCaret(e.pluginsContent), e.pluginsContent.normalize(), n.close();\n      });\n    });\n  }\n  /**\n   * Handle right and down keyboard keys\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  arrowRightAndDown(e) {\n    const t = G.usedKeys.includes(e.keyCode) && (!e.shiftKey || e.keyCode === B.TAB);\n    if (this.Editor.UI.someToolbarOpened && t) return;\n    this.Editor.BlockManager.clearFocused(), this.Editor.Toolbar.close();\n    const o = this.Editor.Caret.isAtEnd || this.Editor.BlockSelection.anyBlockSelected;\n    if (e.shiftKey && e.keyCode === B.DOWN && o) {\n      this.Editor.CrossBlockSelection.toggleBlockSelectedState();\n      return;\n    }\n    (e.keyCode === B.DOWN || e.keyCode === B.RIGHT && !this.isRtl ? this.Editor.Caret.navigateNext() : this.Editor.Caret.navigatePrevious()) ? e.preventDefault() : re(() => {\n      this.Editor.BlockManager.currentBlock && this.Editor.BlockManager.currentBlock.updateCurrentInput();\n    }, 20)(), this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * Handle left and up keyboard keys\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  arrowLeftAndUp(e) {\n    if (this.Editor.UI.someToolbarOpened) {\n      if (G.usedKeys.includes(e.keyCode) && (!e.shiftKey || e.keyCode === B.TAB)) return;\n      this.Editor.UI.closeAllToolbars();\n    }\n    this.Editor.BlockManager.clearFocused(), this.Editor.Toolbar.close();\n    const t = this.Editor.Caret.isAtStart || this.Editor.BlockSelection.anyBlockSelected;\n    if (e.shiftKey && e.keyCode === B.UP && t) {\n      this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);\n      return;\n    }\n    (e.keyCode === B.UP || e.keyCode === B.LEFT && !this.isRtl ? this.Editor.Caret.navigatePrevious() : this.Editor.Caret.navigateNext()) ? e.preventDefault() : re(() => {\n      this.Editor.BlockManager.currentBlock && this.Editor.BlockManager.currentBlock.updateCurrentInput();\n    }, 20)(), this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * Cases when we need to close Toolbar\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  needToolbarClosing(e) {\n    const t = e.keyCode === B.ENTER && this.Editor.Toolbar.toolbox.opened,\n      o = e.keyCode === B.ENTER && this.Editor.BlockSettings.opened,\n      i = e.keyCode === B.ENTER && this.Editor.InlineToolbar.opened,\n      n = e.keyCode === B.ENTER && this.Editor.ConversionToolbar.opened,\n      r = e.keyCode === B.TAB;\n    return !(e.shiftKey || r || t || o || i || n);\n  }\n  /**\n   * If Toolbox is not open, then just open it and show plus button\n   */\n  activateToolbox() {\n    this.Editor.Toolbar.opened || this.Editor.Toolbar.moveAndOpen(), this.Editor.Toolbar.toolbox.open();\n  }\n  /**\n   * Open Toolbar and show BlockSettings before flipping Tools\n   */\n  activateBlockSettings() {\n    this.Editor.Toolbar.opened || (this.Editor.BlockManager.currentBlock.focused = !0, this.Editor.Toolbar.moveAndOpen()), this.Editor.BlockSettings.opened || this.Editor.BlockSettings.open();\n  }\n}\nclass Te {\n  /**\n   * @class\n   * @param {HTMLElement} workingArea — editor`s working node\n   */\n  constructor(e) {\n    this.blocks = [], this.workingArea = e;\n  }\n  /**\n   * Get length of Block instances array\n   *\n   * @returns {number}\n   */\n  get length() {\n    return this.blocks.length;\n  }\n  /**\n   * Get Block instances array\n   *\n   * @returns {Block[]}\n   */\n  get array() {\n    return this.blocks;\n  }\n  /**\n   * Get blocks html elements array\n   *\n   * @returns {HTMLElement[]}\n   */\n  get nodes() {\n    return st(this.workingArea.children);\n  }\n  /**\n   * Proxy trap to implement array-like setter\n   *\n   * @example\n   * blocks[0] = new Block(...)\n   * @param {Blocks} instance — Blocks instance\n   * @param {PropertyKey} property — block index or any Blocks class property key to set\n   * @param {Block} value — value to set\n   * @returns {boolean}\n   */\n  static set(e, t, o) {\n    return isNaN(Number(t)) ? (Reflect.set(e, t, o), !0) : (e.insert(+t, o), !0);\n  }\n  /**\n   * Proxy trap to implement array-like getter\n   *\n   * @param {Blocks} instance — Blocks instance\n   * @param {PropertyKey} property — Blocks class property key\n   * @returns {Block|*}\n   */\n  static get(e, t) {\n    return isNaN(Number(t)) ? Reflect.get(e, t) : e.get(+t);\n  }\n  /**\n   * Push new Block to the blocks array and append it to working area\n   *\n   * @param {Block} block - Block to add\n   */\n  push(e) {\n    this.blocks.push(e), this.insertToDOM(e);\n  }\n  /**\n   * Swaps blocks with indexes first and second\n   *\n   * @param {number} first - first block index\n   * @param {number} second - second block index\n   * @deprecated — use 'move' instead\n   */\n  swap(e, t) {\n    const o = this.blocks[t];\n    d.swap(this.blocks[e].holder, o.holder), this.blocks[t] = this.blocks[e], this.blocks[e] = o;\n  }\n  /**\n   * Move a block from one to another index\n   *\n   * @param {number} toIndex - new index of the block\n   * @param {number} fromIndex - block to move\n   */\n  move(e, t) {\n    const o = this.blocks.splice(t, 1)[0],\n      i = e - 1,\n      n = Math.max(0, i),\n      r = this.blocks[n];\n    e > 0 ? this.insertToDOM(o, \"afterend\", r) : this.insertToDOM(o, \"beforebegin\", r), this.blocks.splice(e, 0, o);\n    const a = this.composeBlockEvent(\"move\", {\n      fromIndex: t,\n      toIndex: e\n    });\n    o.call(q.MOVED, a);\n  }\n  /**\n   * Insert new Block at passed index\n   *\n   * @param {number} index — index to insert Block\n   * @param {Block} block — Block to insert\n   * @param {boolean} replace — it true, replace block on given index\n   */\n  insert(e, t) {\n    let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    if (!this.length) {\n      this.push(t);\n      return;\n    }\n    e > this.length && (e = this.length), o && (this.blocks[e].holder.remove(), this.blocks[e].call(q.REMOVED));\n    const i = o ? 1 : 0;\n    if (this.blocks.splice(e, i, t), e > 0) {\n      const n = this.blocks[e - 1];\n      this.insertToDOM(t, \"afterend\", n);\n    } else {\n      const n = this.blocks[e + 1];\n      n ? this.insertToDOM(t, \"beforebegin\", n) : this.insertToDOM(t);\n    }\n  }\n  /**\n   * Replaces block under passed index with passed block\n   *\n   * @param index - index of existed block\n   * @param block - new block\n   */\n  replace(e, t) {\n    if (this.blocks[e] === void 0) throw Error(\"Incorrect index\");\n    this.blocks[e].holder.replaceWith(t.holder), this.blocks[e] = t;\n  }\n  /**\n   * Inserts several blocks at once\n   *\n   * @param blocks - blocks to insert\n   * @param index - index to insert blocks at\n   */\n  insertMany(e, t) {\n    const o = new DocumentFragment();\n    for (const i of e) o.appendChild(i.holder);\n    if (this.length > 0) {\n      if (t > 0) {\n        const i = Math.min(t - 1, this.length - 1);\n        this.blocks[i].holder.after(o);\n      } else t === 0 && this.workingArea.prepend(o);\n      this.blocks.splice(t, 0, ...e);\n    } else this.blocks.push(...e), this.workingArea.appendChild(o);\n    e.forEach(i => i.call(q.RENDERED));\n  }\n  /**\n   * Remove block\n   *\n   * @param {number} index - index of Block to remove\n   */\n  remove(e) {\n    isNaN(e) && (e = this.length - 1), this.blocks[e].holder.remove(), this.blocks[e].call(q.REMOVED), this.blocks.splice(e, 1);\n  }\n  /**\n   * Remove all blocks\n   */\n  removeAll() {\n    this.workingArea.innerHTML = \"\", this.blocks.forEach(e => e.call(q.REMOVED)), this.blocks.length = 0;\n  }\n  /**\n   * Insert Block after passed target\n   *\n   * @todo decide if this method is necessary\n   * @param {Block} targetBlock — target after which Block should be inserted\n   * @param {Block} newBlock — Block to insert\n   */\n  insertAfter(e, t) {\n    const o = this.blocks.indexOf(e);\n    this.insert(o + 1, t);\n  }\n  /**\n   * Get Block by index\n   *\n   * @param {number} index — Block index\n   * @returns {Block}\n   */\n  get(e) {\n    return this.blocks[e];\n  }\n  /**\n   * Return index of passed Block\n   *\n   * @param {Block} block - Block to find\n   * @returns {number}\n   */\n  indexOf(e) {\n    return this.blocks.indexOf(e);\n  }\n  /**\n   * Insert new Block into DOM\n   *\n   * @param {Block} block - Block to insert\n   * @param {InsertPosition} position — insert position (if set, will use insertAdjacentElement)\n   * @param {Block} target — Block related to position\n   */\n  insertToDOM(e, t, o) {\n    t ? o.holder.insertAdjacentElement(t, e.holder) : this.workingArea.appendChild(e.holder), e.call(q.RENDERED);\n  }\n  /**\n   * Composes Block event with passed type and details\n   *\n   * @param {string} type - event type\n   * @param {object} detail - event detail\n   */\n  composeBlockEvent(e, t) {\n    return new CustomEvent(e, {\n      detail: t\n    });\n  }\n}\nconst et = \"block-removed\",\n  tt = \"block-added\",\n  qo = \"block-moved\",\n  ot = \"block-changed\";\nclass Zo {\n  constructor() {\n    this.completed = Promise.resolve();\n  }\n  /**\n   * Add new promise to queue\n   *\n   * @param operation - promise should be added to queue\n   */\n  add(e) {\n    return new Promise((t, o) => {\n      this.completed = this.completed.then(e).then(t).catch(o);\n    });\n  }\n}\nclass Go extends C {\n  constructor() {\n    super(...arguments), this._currentBlockIndex = -1, this._blocks = null;\n  }\n  /**\n   * Returns current Block index\n   *\n   * @returns {number}\n   */\n  get currentBlockIndex() {\n    return this._currentBlockIndex;\n  }\n  /**\n   * Set current Block index and fire Block lifecycle callbacks\n   *\n   * @param {number} newIndex - index of Block to set as current\n   */\n  set currentBlockIndex(e) {\n    this._currentBlockIndex = e;\n  }\n  /**\n   * returns first Block\n   *\n   * @returns {Block}\n   */\n  get firstBlock() {\n    return this._blocks[0];\n  }\n  /**\n   * returns last Block\n   *\n   * @returns {Block}\n   */\n  get lastBlock() {\n    return this._blocks[this._blocks.length - 1];\n  }\n  /**\n   * Get current Block instance\n   *\n   * @returns {Block}\n   */\n  get currentBlock() {\n    return this._blocks[this.currentBlockIndex];\n  }\n  /**\n   * Set passed Block as a current\n   *\n   * @param block - block to set as a current\n   */\n  set currentBlock(e) {\n    this.currentBlockIndex = this.getBlockIndex(e);\n  }\n  /**\n   * Returns next Block instance\n   *\n   * @returns {Block|null}\n   */\n  get nextBlock() {\n    return this.currentBlockIndex === this._blocks.length - 1 ? null : this._blocks[this.currentBlockIndex + 1];\n  }\n  /**\n   * Return first Block with inputs after current Block\n   *\n   * @returns {Block | undefined}\n   */\n  get nextContentfulBlock() {\n    return this.blocks.slice(this.currentBlockIndex + 1).find(t => !!t.inputs.length);\n  }\n  /**\n   * Return first Block with inputs before current Block\n   *\n   * @returns {Block | undefined}\n   */\n  get previousContentfulBlock() {\n    return this.blocks.slice(0, this.currentBlockIndex).reverse().find(t => !!t.inputs.length);\n  }\n  /**\n   * Returns previous Block instance\n   *\n   * @returns {Block|null}\n   */\n  get previousBlock() {\n    return this.currentBlockIndex === 0 ? null : this._blocks[this.currentBlockIndex - 1];\n  }\n  /**\n   * Get array of Block instances\n   *\n   * @returns {Block[]} {@link Blocks#array}\n   */\n  get blocks() {\n    return this._blocks.array;\n  }\n  /**\n   * Check if each Block is empty\n   *\n   * @returns {boolean}\n   */\n  get isEditorEmpty() {\n    return this.blocks.every(e => e.isEmpty);\n  }\n  /**\n   * Should be called after Editor.UI preparation\n   * Define this._blocks property\n   */\n  prepare() {\n    const e = new Te(this.Editor.UI.nodes.redactor);\n    this._blocks = new Proxy(e, {\n      set: Te.set,\n      get: Te.get\n    }), this.listeners.on(document, \"copy\", t => this.Editor.BlockEvents.handleCommandC(t));\n  }\n  /**\n   * Toggle read-only state\n   *\n   * If readOnly is true:\n   *  - Unbind event handlers from created Blocks\n   *\n   * if readOnly is false:\n   *  - Bind event handlers to all existing Blocks\n   *\n   * @param {boolean} readOnlyEnabled - \"read only\" state\n   */\n  toggleReadOnly(e) {\n    e ? this.disableModuleBindings() : this.enableModuleBindings();\n  }\n  /**\n   * Creates Block instance by tool name\n   *\n   * @param {object} options - block creation options\n   * @param {string} options.tool - tools passed in editor config {@link EditorConfig#tools}\n   * @param {string} [options.id] - unique id for this block\n   * @param {BlockToolData} [options.data] - constructor params\n   * @returns {Block}\n   */\n  composeBlock(_ref20) {\n    let {\n      tool: e,\n      data: t = {},\n      id: o = void 0,\n      tunes: i = {}\n    } = _ref20;\n    const n = this.Editor.ReadOnly.isEnabled,\n      r = this.Editor.Tools.blockTools.get(e),\n      a = new F({\n        id: o,\n        data: t,\n        tool: r,\n        api: this.Editor.API,\n        readOnly: n,\n        tunesData: i\n      }, this.eventsDispatcher);\n    return n || window.requestIdleCallback(() => {\n      this.bindBlockEvents(a);\n    }, {\n      timeout: 2e3\n    }), a;\n  }\n  /**\n   * Insert new block into _blocks\n   *\n   * @param {object} options - insert options\n   * @param {string} [options.id] - block's unique id\n   * @param {string} [options.tool] - plugin name, by default method inserts the default block type\n   * @param {object} [options.data] - plugin data\n   * @param {number} [options.index] - index where to insert new Block\n   * @param {boolean} [options.needToFocus] - flag shows if needed to update current Block index\n   * @param {boolean} [options.replace] - flag shows if block by passed index should be replaced with inserted one\n   * @returns {Block}\n   */\n  insert() {\n    let {\n      id: e = void 0,\n      tool: t = this.config.defaultBlock,\n      data: o = {},\n      index: i,\n      needToFocus: n = !0,\n      replace: r = !1,\n      tunes: a = {}\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let l = i;\n    l === void 0 && (l = this.currentBlockIndex + (r ? 0 : 1));\n    const c = this.composeBlock({\n      id: e,\n      tool: t,\n      data: o,\n      tunes: a\n    });\n    return r && this.blockDidMutated(et, this.getBlockByIndex(l), {\n      index: l\n    }), this._blocks.insert(l, c, r), this.blockDidMutated(tt, c, {\n      index: l\n    }), n ? this.currentBlockIndex = l : l <= this.currentBlockIndex && this.currentBlockIndex++, c;\n  }\n  /**\n   * Inserts several blocks at once\n   *\n   * @param blocks - blocks to insert\n   * @param index - index where to insert\n   */\n  insertMany(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._blocks.insertMany(e, t);\n  }\n  /**\n   * Update Block data.\n   *\n   * Currently we don't have an 'update' method in the Tools API, so we just create a new block with the same id and type\n   * Should not trigger 'block-removed' or 'block-added' events\n   *\n   * @param block - block to update\n   * @param data - new data\n   */\n  async update(e, t) {\n    const o = await e.data,\n      i = this.composeBlock({\n        id: e.id,\n        tool: e.name,\n        data: Object.assign({}, o, t),\n        tunes: e.tunes\n      }),\n      n = this.getBlockIndex(e);\n    return this._blocks.replace(n, i), this.blockDidMutated(ot, i, {\n      index: n\n    }), i;\n  }\n  /**\n   * Replace passed Block with the new one with specified Tool and data\n   *\n   * @param block - block to replace\n   * @param newTool - new Tool name\n   * @param data - new Tool data\n   */\n  replace(e, t, o) {\n    const i = this.getBlockIndex(e);\n    this.insert({\n      tool: t,\n      data: o,\n      index: i,\n      replace: !0\n    });\n  }\n  /**\n   * Insert pasted content. Call onPaste callback after insert.\n   *\n   * @param {string} toolName - name of Tool to insert\n   * @param {PasteEvent} pasteEvent - pasted data\n   * @param {boolean} replace - should replace current block\n   */\n  paste(e, t) {\n    let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    const i = this.insert({\n      tool: e,\n      replace: o\n    });\n    try {\n      window.requestIdleCallback(() => {\n        i.call(q.ON_PASTE, t);\n      });\n    } catch (n) {\n      L(\"\".concat(e, \": onPaste callback call is failed\"), \"error\", n);\n    }\n    return i;\n  }\n  /**\n   * Insert new default block at passed index\n   *\n   * @param {number} index - index where Block should be inserted\n   * @param {boolean} needToFocus - if true, updates current Block index\n   *\n   * TODO: Remove method and use insert() with index instead (?)\n   * @returns {Block} inserted Block\n   */\n  insertDefaultBlockAtIndex(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const o = this.composeBlock({\n      tool: this.config.defaultBlock\n    });\n    return this._blocks[e] = o, this.blockDidMutated(tt, o, {\n      index: e\n    }), t ? this.currentBlockIndex = e : e <= this.currentBlockIndex && this.currentBlockIndex++, o;\n  }\n  /**\n   * Always inserts at the end\n   *\n   * @returns {Block}\n   */\n  insertAtEnd() {\n    return this.currentBlockIndex = this.blocks.length - 1, this.insert();\n  }\n  /**\n   * Merge two blocks\n   *\n   * @param {Block} targetBlock - previous block will be append to this block\n   * @param {Block} blockToMerge - block that will be merged with target block\n   * @returns {Promise} - the sequence that can be continued\n   */\n  async mergeBlocks(e, t) {\n    const o = await t.data;\n    V(o) || (await e.mergeWith(o)), this.removeBlock(t), this.currentBlockIndex = this._blocks.indexOf(e);\n  }\n  /**\n   * Remove passed Block\n   *\n   * @param block - Block to remove\n   * @param addLastBlock - if true, adds new default block at the end. @todo remove this logic and use event-bus instead\n   */\n  removeBlock(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n    return new Promise(o => {\n      const i = this._blocks.indexOf(e);\n      if (!this.validateIndex(i)) throw new Error(\"Can't find a Block to remove\");\n      e.destroy(), this._blocks.remove(i), this.blockDidMutated(et, e, {\n        index: i\n      }), this.currentBlockIndex >= i && this.currentBlockIndex--, this.blocks.length ? i === 0 && (this.currentBlockIndex = 0) : (this.currentBlockIndex = -1, t && this.insert()), o();\n    });\n  }\n  /**\n   * Remove only selected Blocks\n   * and returns first Block index where started removing...\n   *\n   * @returns {number|undefined}\n   */\n  removeSelectedBlocks() {\n    let e;\n    for (let t = this.blocks.length - 1; t >= 0; t--) this.blocks[t].selected && (this.removeBlock(this.blocks[t]), e = t);\n    return e;\n  }\n  /**\n   * Attention!\n   * After removing insert the new default typed Block and focus on it\n   * Removes all blocks\n   */\n  removeAllBlocks() {\n    for (let e = this.blocks.length - 1; e >= 0; e--) this._blocks.remove(e);\n    this.currentBlockIndex = -1, this.insert(), this.currentBlock.firstInput.focus();\n  }\n  /**\n   * Split current Block\n   * 1. Extract content from Caret position to the Block`s end\n   * 2. Insert a new Block below current one with extracted content\n   *\n   * @returns {Block}\n   */\n  split() {\n    const e = this.Editor.Caret.extractFragmentFromCaretPosition(),\n      t = d.make(\"div\");\n    t.appendChild(e);\n    const o = {\n      text: d.isEmpty(t) ? \"\" : t.innerHTML\n    };\n    return this.insert({\n      data: o\n    });\n  }\n  /**\n   * Returns Block by passed index\n   *\n   * @param {number} index - index to get. -1 to get last\n   * @returns {Block}\n   */\n  getBlockByIndex(e) {\n    return e === -1 && (e = this._blocks.length - 1), this._blocks[e];\n  }\n  /**\n   * Returns an index for passed Block\n   *\n   * @param block - block to find index\n   */\n  getBlockIndex(e) {\n    return this._blocks.indexOf(e);\n  }\n  /**\n   * Returns the Block by passed id\n   *\n   * @param id - id of block to get\n   * @returns {Block}\n   */\n  getBlockById(e) {\n    return this._blocks.array.find(t => t.id === e);\n  }\n  /**\n   * Get Block instance by html element\n   *\n   * @param {Node} element - html element to get Block by\n   */\n  getBlock(e) {\n    d.isElement(e) || (e = e.parentNode);\n    const t = this._blocks.nodes,\n      o = e.closest(\".\".concat(F.CSS.wrapper)),\n      i = t.indexOf(o);\n    if (i >= 0) return this._blocks[i];\n  }\n  /**\n   * Remove selection from all Blocks then highlight only Current Block\n   */\n  highlightCurrentNode() {\n    this.clearFocused(), this.currentBlock.focused = !0;\n  }\n  /**\n   * Remove selection from all Blocks\n   */\n  clearFocused() {\n    this.blocks.forEach(e => {\n      e.focused = !1;\n    });\n  }\n  /**\n   * 1) Find first-level Block from passed child Node\n   * 2) Mark it as current\n   *\n   * @param {Node} childNode - look ahead from this node.\n   * @returns {Block | undefined} can return undefined in case when the passed child note is not a part of the current editor instance\n   */\n  setCurrentBlockByChildNode(e) {\n    d.isElement(e) || (e = e.parentNode);\n    const t = e.closest(\".\".concat(F.CSS.wrapper));\n    if (!t) return;\n    const o = t.closest(\".\".concat(this.Editor.UI.CSS.editorWrapper));\n    if (o != null && o.isEqualNode(this.Editor.UI.nodes.wrapper)) return this.currentBlockIndex = this._blocks.nodes.indexOf(t), this.currentBlock.updateCurrentInput(), this.currentBlock;\n  }\n  /**\n   * Return block which contents passed node\n   *\n   * @param {Node} childNode - node to get Block by\n   * @returns {Block}\n   */\n  getBlockByChildNode(e) {\n    d.isElement(e) || (e = e.parentNode);\n    const t = e.closest(\".\".concat(F.CSS.wrapper));\n    return this.blocks.find(o => o.holder === t);\n  }\n  /**\n   * Swap Blocks Position\n   *\n   * @param {number} fromIndex - index of first block\n   * @param {number} toIndex - index of second block\n   * @deprecated — use 'move' instead\n   */\n  swap(e, t) {\n    this._blocks.swap(e, t), this.currentBlockIndex = t;\n  }\n  /**\n   * Move a block to a new index\n   *\n   * @param {number} toIndex - index where to move Block\n   * @param {number} fromIndex - index of Block to move\n   */\n  move(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.currentBlockIndex;\n    if (isNaN(e) || isNaN(t)) {\n      L(\"Warning during 'move' call: incorrect indices provided.\", \"warn\");\n      return;\n    }\n    if (!this.validateIndex(e) || !this.validateIndex(t)) {\n      L(\"Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.\", \"warn\");\n      return;\n    }\n    this._blocks.move(e, t), this.currentBlockIndex = e, this.blockDidMutated(qo, this.currentBlock, {\n      fromIndex: t,\n      toIndex: e\n    });\n  }\n  /**\n   * Converts passed Block to the new Tool\n   * Uses Conversion Config\n   *\n   * @param blockToConvert - Block that should be converted\n   * @param targetToolName - name of the Tool to convert to\n   * @param blockDataOverrides - optional new Block data overrides\n   */\n  async convert(e, t, o) {\n    if (!(await e.save())) throw new Error(\"Could not convert Block. Failed to extract original Block data.\");\n    const n = this.Editor.Tools.blockTools.get(t);\n    if (!n) throw new Error(\"Could not convert Block. Tool \\xAB\".concat(t, \"\\xBB not found.\"));\n    const r = await e.exportDataAsString(),\n      a = Z(r, n.sanitizeConfig);\n    let l = Jt(a, n.conversionConfig);\n    o && (l = Object.assign(l, o)), this.replace(e, n.name, l);\n  }\n  /**\n   * Sets current Block Index -1 which means unknown\n   * and clear highlights\n   */\n  dropPointer() {\n    this.currentBlockIndex = -1, this.clearFocused();\n  }\n  /**\n   * Clears Editor\n   *\n   * @param {boolean} needToAddDefaultBlock - 1) in internal calls (for example, in api.blocks.render)\n   *                                             we don't need to add an empty default block\n   *                                        2) in api.blocks.clear we should add empty block\n   */\n  async clear() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    const t = new Zo();\n    this.blocks.forEach(o => {\n      t.add(async () => {\n        await this.removeBlock(o, !1);\n      });\n    }), await t.completed, this.dropPointer(), e && this.insert(), this.Editor.UI.checkEmptiness();\n  }\n  /**\n   * Cleans up all the block tools' resources\n   * This is called when editor is destroyed\n   */\n  async destroy() {\n    await Promise.all(this.blocks.map(e => e.destroy()));\n  }\n  /**\n   * Bind Block events\n   *\n   * @param {Block} block - Block to which event should be bound\n   */\n  bindBlockEvents(e) {\n    const {\n      BlockEvents: t\n    } = this.Editor;\n    this.readOnlyMutableListeners.on(e.holder, \"keydown\", o => {\n      t.keydown(o);\n    }), this.readOnlyMutableListeners.on(e.holder, \"keyup\", o => {\n      t.keyup(o);\n    }), this.readOnlyMutableListeners.on(e.holder, \"dragover\", o => {\n      t.dragOver(o);\n    }), this.readOnlyMutableListeners.on(e.holder, \"dragleave\", o => {\n      t.dragLeave(o);\n    }), e.on(\"didMutated\", o => this.blockDidMutated(ot, o, {\n      index: this.getBlockIndex(o)\n    }));\n  }\n  /**\n   * Disable mutable handlers and bindings\n   */\n  disableModuleBindings() {\n    this.readOnlyMutableListeners.clearAll();\n  }\n  /**\n   * Enables all module handlers and bindings for all Blocks\n   */\n  enableModuleBindings() {\n    this.readOnlyMutableListeners.on(document, \"cut\", e => this.Editor.BlockEvents.handleCommandX(e)), this.blocks.forEach(e => {\n      this.bindBlockEvents(e);\n    });\n  }\n  /**\n   * Validates that the given index is not lower than 0 or higher than the amount of blocks\n   *\n   * @param {number} index - index of blocks array to validate\n   * @returns {boolean}\n   */\n  validateIndex(e) {\n    return !(e < 0 || e >= this._blocks.length);\n  }\n  /**\n   * Block mutation callback\n   *\n   * @param mutationType - what happened with block\n   * @param block - mutated block\n   * @param detailData - additional data to pass with change event\n   */\n  blockDidMutated(e, t, o) {\n    const i = new CustomEvent(e, {\n      detail: {\n        target: new ee(t),\n        ...o\n      }\n    });\n    return this.eventsDispatcher.emit(ct, {\n      event: i\n    }), t;\n  }\n}\nclass Jo extends C {\n  constructor() {\n    super(...arguments), this.anyBlockSelectedCache = null, this.needToSelectAll = !1, this.nativeInputSelected = !1, this.readyToBlockSelection = !1;\n  }\n  /**\n   * Sanitizer Config\n   *\n   * @returns {SanitizerConfig}\n   */\n  get sanitizerConfig() {\n    return {\n      p: {},\n      h1: {},\n      h2: {},\n      h3: {},\n      h4: {},\n      h5: {},\n      h6: {},\n      ol: {},\n      ul: {},\n      li: {},\n      br: !0,\n      img: {\n        src: !0,\n        width: !0,\n        height: !0\n      },\n      a: {\n        href: !0\n      },\n      b: {},\n      i: {},\n      u: {}\n    };\n  }\n  /**\n   * Flag that identifies all Blocks selection\n   *\n   * @returns {boolean}\n   */\n  get allBlocksSelected() {\n    const {\n      BlockManager: e\n    } = this.Editor;\n    return e.blocks.every(t => t.selected === !0);\n  }\n  /**\n   * Set selected all blocks\n   *\n   * @param {boolean} state - state to set\n   */\n  set allBlocksSelected(e) {\n    const {\n      BlockManager: t\n    } = this.Editor;\n    t.blocks.forEach(o => {\n      o.selected = e;\n    }), this.clearCache();\n  }\n  /**\n   * Flag that identifies any Block selection\n   *\n   * @returns {boolean}\n   */\n  get anyBlockSelected() {\n    const {\n      BlockManager: e\n    } = this.Editor;\n    return this.anyBlockSelectedCache === null && (this.anyBlockSelectedCache = e.blocks.some(t => t.selected === !0)), this.anyBlockSelectedCache;\n  }\n  /**\n   * Return selected Blocks array\n   *\n   * @returns {Block[]}\n   */\n  get selectedBlocks() {\n    return this.Editor.BlockManager.blocks.filter(e => e.selected);\n  }\n  /**\n   * Module Preparation\n   * Registers Shortcuts CMD+A and CMD+C\n   * to select all and copy them\n   */\n  prepare() {\n    this.selection = new m(), le.add({\n      name: \"CMD+A\",\n      handler: e => {\n        const {\n          BlockManager: t,\n          ReadOnly: o\n        } = this.Editor;\n        if (o.isEnabled) {\n          e.preventDefault(), this.selectAllBlocks();\n          return;\n        }\n        t.currentBlock && this.handleCommandA(e);\n      },\n      on: this.Editor.UI.nodes.redactor\n    });\n  }\n  /**\n   * Toggle read-only state\n   *\n   *  - Remove all ranges\n   *  - Unselect all Blocks\n   */\n  toggleReadOnly() {\n    m.get().removeAllRanges(), this.allBlocksSelected = !1;\n  }\n  /**\n   * Remove selection of Block\n   *\n   * @param {number?} index - Block index according to the BlockManager's indexes\n   */\n  unSelectBlockByIndex(e) {\n    const {\n      BlockManager: t\n    } = this.Editor;\n    let o;\n    isNaN(e) ? o = t.currentBlock : o = t.getBlockByIndex(e), o.selected = !1, this.clearCache();\n  }\n  /**\n   * Clear selection from Blocks\n   *\n   * @param {Event} reason - event caused clear of selection\n   * @param {boolean} restoreSelection - if true, restore saved selection\n   */\n  clearSelection(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const {\n      BlockManager: o,\n      Caret: i,\n      RectangleSelection: n\n    } = this.Editor;\n    this.needToSelectAll = !1, this.nativeInputSelected = !1, this.readyToBlockSelection = !1;\n    const r = e && e instanceof KeyboardEvent,\n      a = r && nt(e.keyCode);\n    if (this.anyBlockSelected && r && a && !m.isSelectionExists) {\n      const l = o.removeSelectedBlocks();\n      o.insertDefaultBlockAtIndex(l, !0), i.setToBlock(o.currentBlock), re(() => {\n        const c = e.key;\n        i.insertContentAtCaretPosition(c.length > 1 ? \"\" : c);\n      }, 20)();\n    }\n    if (this.Editor.CrossBlockSelection.clear(e), !this.anyBlockSelected || n.isRectActivated()) {\n      this.Editor.RectangleSelection.clearSelection();\n      return;\n    }\n    t && this.selection.restore(), this.allBlocksSelected = !1;\n  }\n  /**\n   * Reduce each Block and copy its content\n   *\n   * @param {ClipboardEvent} e - copy/cut event\n   * @returns {Promise<void>}\n   */\n  copySelectedBlocks(e) {\n    e.preventDefault();\n    const t = d.make(\"div\");\n    this.selectedBlocks.forEach(n => {\n      const r = Z(n.holder.innerHTML, this.sanitizerConfig),\n        a = d.make(\"p\");\n      a.innerHTML = r, t.appendChild(a);\n    });\n    const o = Array.from(t.childNodes).map(n => n.textContent).join(\"\\n\\n\"),\n      i = t.innerHTML;\n    return e.clipboardData.setData(\"text/plain\", o), e.clipboardData.setData(\"text/html\", i), Promise.all(this.selectedBlocks.map(n => n.save())).then(n => {\n      try {\n        e.clipboardData.setData(this.Editor.Paste.MIME_TYPE, JSON.stringify(n));\n      } catch {}\n    });\n  }\n  /**\n   * select Block\n   *\n   * @param {number?} index - Block index according to the BlockManager's indexes\n   */\n  selectBlockByIndex(e) {\n    const {\n      BlockManager: t\n    } = this.Editor;\n    t.clearFocused();\n    let o;\n    isNaN(e) ? o = t.currentBlock : o = t.getBlockByIndex(e), this.selection.save(), m.get().removeAllRanges(), o.selected = !0, this.clearCache(), this.Editor.InlineToolbar.close();\n  }\n  /**\n   * Clear anyBlockSelected cache\n   */\n  clearCache() {\n    this.anyBlockSelectedCache = null;\n  }\n  /**\n   * Module destruction\n   * De-registers Shortcut CMD+A\n   */\n  destroy() {\n    le.remove(this.Editor.UI.nodes.redactor, \"CMD+A\");\n  }\n  /**\n   * First CMD+A selects all input content by native behaviour,\n   * next CMD+A keypress selects all blocks\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  handleCommandA(e) {\n    if (this.Editor.RectangleSelection.clearSelection(), d.isNativeInput(e.target) && !this.readyToBlockSelection) {\n      this.readyToBlockSelection = !0;\n      return;\n    }\n    const o = this.Editor.BlockManager.getBlock(e.target).inputs;\n    if (o.length > 1 && !this.readyToBlockSelection) {\n      this.readyToBlockSelection = !0;\n      return;\n    }\n    if (o.length === 1 && !this.needToSelectAll) {\n      this.needToSelectAll = !0;\n      return;\n    }\n    this.needToSelectAll ? (e.preventDefault(), this.selectAllBlocks(), this.needToSelectAll = !1, this.readyToBlockSelection = !1, this.Editor.ConversionToolbar.close()) : this.readyToBlockSelection && (e.preventDefault(), this.selectBlockByIndex(), this.needToSelectAll = !0);\n  }\n  /**\n   * Select All Blocks\n   * Each Block has selected setter that makes Block copyable\n   */\n  selectAllBlocks() {\n    this.selection.save(), m.get().removeAllRanges(), this.allBlocksSelected = !0, this.Editor.InlineToolbar.close();\n  }\n}\nclass ve extends C {\n  /**\n   * Allowed caret positions in input\n   *\n   * @static\n   * @returns {{START: string, END: string, DEFAULT: string}}\n   */\n  get positions() {\n    return {\n      START: \"start\",\n      END: \"end\",\n      DEFAULT: \"default\"\n    };\n  }\n  /**\n   * Elements styles that can be useful for Caret Module\n   */\n  static get CSS() {\n    return {\n      shadowCaret: \"cdx-shadow-caret\"\n    };\n  }\n  /**\n   * Get's deepest first node and checks if offset is zero\n   *\n   * @returns {boolean}\n   */\n  get isAtStart() {\n    const e = m.get(),\n      t = d.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput);\n    let o = e.focusNode;\n    if (d.isNativeInput(t)) return t.selectionEnd === 0;\n    if (!e.anchorNode) return !1;\n    let i = o.textContent.search(/\\S/);\n    i === -1 && (i = 0);\n    let n = e.focusOffset;\n    return o.nodeType !== Node.TEXT_NODE && o.childNodes.length && (o.childNodes[n] ? (o = o.childNodes[n], n = 0) : (o = o.childNodes[n - 1], n = o.textContent.length)), (d.isLineBreakTag(t) || d.isEmpty(t)) && this.getHigherLevelSiblings(o, \"left\").every(l => {\n      const c = d.isLineBreakTag(l),\n        u = l.children.length === 1 && d.isLineBreakTag(l.children[0]),\n        h = c || u;\n      return d.isEmpty(l) && !h;\n    }) && n === i ? !0 : t === null || o === t && n <= i;\n  }\n  /**\n   * Get's deepest last node and checks if offset is last node text length\n   *\n   * @returns {boolean}\n   */\n  get isAtEnd() {\n    const e = m.get();\n    let t = e.focusNode;\n    const o = d.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput, !0);\n    if (d.isNativeInput(o)) return o.selectionEnd === o.value.length;\n    if (!e.focusNode) return !1;\n    let i = e.focusOffset;\n    if (t.nodeType !== Node.TEXT_NODE && t.childNodes.length && (t.childNodes[i - 1] ? (t = t.childNodes[i - 1], i = t.textContent.length) : (t = t.childNodes[0], i = 0)), d.isLineBreakTag(o) || d.isEmpty(o)) {\n      const r = this.getHigherLevelSiblings(t, \"right\");\n      if (r.every((l, c) => c === r.length - 1 && d.isLineBreakTag(l) || d.isEmpty(l) && !d.isLineBreakTag(l)) && i === t.textContent.length) return !0;\n    }\n    const n = o.textContent.replace(/\\s+$/, \"\");\n    return t === o && i >= n.length;\n  }\n  /**\n   * Method gets Block instance and puts caret to the text node with offset\n   * There two ways that method applies caret position:\n   *   - first found text node: sets at the beginning, but you can pass an offset\n   *   - last found text node: sets at the end of the node. Also, you can customize the behaviour\n   *\n   * @param {Block} block - Block class\n   * @param {string} position - position where to set caret.\n   *                            If default - leave default behaviour and apply offset if it's passed\n   * @param {number} offset - caret offset regarding to the text node\n   */\n  setToBlock(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.positions.DEFAULT;\n    let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    const {\n      BlockManager: i\n    } = this.Editor;\n    let n;\n    switch (t) {\n      case this.positions.START:\n        n = e.firstInput;\n        break;\n      case this.positions.END:\n        n = e.lastInput;\n        break;\n      default:\n        n = e.currentInput;\n    }\n    if (!n) return;\n    const r = d.getDeepestNode(n, t === this.positions.END),\n      a = d.getContentLength(r);\n    switch (!0) {\n      case t === this.positions.START:\n        o = 0;\n        break;\n      case t === this.positions.END:\n      case o > a:\n        o = a;\n        break;\n    }\n    re(() => {\n      this.set(r, o);\n    }, 20)(), i.setCurrentBlockByChildNode(e.holder), i.currentBlock.currentInput = n;\n  }\n  /**\n   * Set caret to the current input of current Block.\n   *\n   * @param {HTMLElement} input - input where caret should be set\n   * @param {string} position - position of the caret.\n   *                            If default - leave default behaviour and apply offset if it's passed\n   * @param {number} offset - caret offset regarding to the text node\n   */\n  setToInput(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.positions.DEFAULT;\n    let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    const {\n        currentBlock: i\n      } = this.Editor.BlockManager,\n      n = d.getDeepestNode(e);\n    switch (t) {\n      case this.positions.START:\n        this.set(n, 0);\n        break;\n      case this.positions.END:\n        this.set(n, d.getContentLength(n));\n        break;\n      default:\n        o && this.set(n, o);\n    }\n    i.currentInput = e;\n  }\n  /**\n   * Creates Document Range and sets caret to the element with offset\n   *\n   * @param {HTMLElement} element - target node.\n   * @param {number} offset - offset\n   */\n  set(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const {\n        top: o,\n        bottom: i\n      } = m.setCursor(e, t),\n      {\n        innerHeight: n\n      } = window;\n    o < 0 && window.scrollBy(0, o), i > n && window.scrollBy(0, i - n);\n  }\n  /**\n   * Set Caret to the last Block\n   * If last block is not empty, append another empty block\n   */\n  setToTheLastBlock() {\n    const e = this.Editor.BlockManager.lastBlock;\n    if (e) if (e.tool.isDefault && e.isEmpty) this.setToBlock(e);else {\n      const t = this.Editor.BlockManager.insertAtEnd();\n      this.setToBlock(t);\n    }\n  }\n  /**\n   * Extract content fragment of current Block from Caret position to the end of the Block\n   */\n  extractFragmentFromCaretPosition() {\n    const e = m.get();\n    if (e.rangeCount) {\n      const t = e.getRangeAt(0),\n        o = this.Editor.BlockManager.currentBlock.currentInput;\n      if (t.deleteContents(), o) if (d.isNativeInput(o)) {\n        const i = o,\n          n = document.createDocumentFragment(),\n          r = i.value.substring(0, i.selectionStart),\n          a = i.value.substring(i.selectionStart);\n        return n.textContent = a, i.value = r, n;\n      } else {\n        const i = t.cloneRange();\n        return i.selectNodeContents(o), i.setStart(t.endContainer, t.endOffset), i.extractContents();\n      }\n    }\n  }\n  /**\n   * Set's caret to the next Block or Tool`s input\n   * Before moving caret, we should check if caret position is at the end of Plugins node\n   * Using {@link Dom#getDeepestNode} to get a last node and match with current selection\n   *\n   * @returns {boolean}\n   */\n  navigateNext() {\n    const {\n        BlockManager: e\n      } = this.Editor,\n      {\n        currentBlock: t,\n        nextContentfulBlock: o\n      } = e,\n      {\n        nextInput: i\n      } = t,\n      n = this.isAtEnd;\n    let r = o;\n    if (!r && !i) {\n      if (t.tool.isDefault || !n) return !1;\n      r = e.insertAtEnd();\n    }\n    return n ? (i ? this.setToInput(i, this.positions.START) : this.setToBlock(r, this.positions.START), !0) : !1;\n  }\n  /**\n   * Set's caret to the previous Tool`s input or Block\n   * Before moving caret, we should check if caret position is start of the Plugins node\n   * Using {@link Dom#getDeepestNode} to get a last node and match with current selection\n   *\n   * @returns {boolean}\n   */\n  navigatePrevious() {\n    const {\n      currentBlock: e,\n      previousContentfulBlock: t\n    } = this.Editor.BlockManager;\n    if (!e) return !1;\n    const {\n      previousInput: o\n    } = e;\n    return !t && !o ? !1 : this.isAtStart ? (o ? this.setToInput(o, this.positions.END) : this.setToBlock(t, this.positions.END), !0) : !1;\n  }\n  /**\n   * Inserts shadow element after passed element where caret can be placed\n   *\n   * @param {Element} element - element after which shadow caret should be inserted\n   */\n  createShadow(e) {\n    const t = document.createElement(\"span\");\n    t.classList.add(ve.CSS.shadowCaret), e.insertAdjacentElement(\"beforeend\", t);\n  }\n  /**\n   * Restores caret position\n   *\n   * @param {HTMLElement} element - element where caret should be restored\n   */\n  restoreCaret(e) {\n    const t = e.querySelector(\".\".concat(ve.CSS.shadowCaret));\n    if (!t) return;\n    new m().expandToTag(t);\n    const i = document.createRange();\n    i.selectNode(t), i.extractContents();\n  }\n  /**\n   * Inserts passed content at caret position\n   *\n   * @param {string} content - content to insert\n   */\n  insertContentAtCaretPosition(e) {\n    const t = document.createDocumentFragment(),\n      o = document.createElement(\"div\"),\n      i = m.get(),\n      n = m.range;\n    o.innerHTML = e, Array.from(o.childNodes).forEach(c => t.appendChild(c)), t.childNodes.length === 0 && t.appendChild(new Text());\n    const r = t.lastChild;\n    n.deleteContents(), n.insertNode(t);\n    const a = document.createRange(),\n      l = r.nodeType === Node.TEXT_NODE ? r : r.firstChild;\n    l !== null && l.textContent !== null && a.setStart(l, l.textContent.length), i.removeAllRanges(), i.addRange(a);\n  }\n  /**\n   * Get all first-level (first child of [contenteditable]) siblings from passed node\n   * Then you can check it for emptiness\n   *\n   * @example\n   * <div contenteditable>\n   * <p></p>                            |\n   * <p></p>                            | left first-level siblings\n   * <p></p>                            |\n   * <blockquote><a><b>adaddad</b><a><blockquote>       <-- passed node for example <b>\n   * <p></p>                            |\n   * <p></p>                            | right first-level siblings\n   * <p></p>                            |\n   * </div>\n   * @param {HTMLElement} from - element from which siblings should be searched\n   * @param {'left' | 'right'} direction - direction of search\n   * @returns {HTMLElement[]}\n   */\n  getHigherLevelSiblings(e, t) {\n    let o = e;\n    const i = [];\n    for (; o.parentNode && o.parentNode.contentEditable !== \"true\";) o = o.parentNode;\n    const n = t === \"left\" ? \"previousSibling\" : \"nextSibling\";\n    for (; o[n];) o = o[n], i.push(o);\n    return i;\n  }\n}\nclass Qo extends C {\n  constructor() {\n    super(...arguments), this.onMouseUp = () => {\n      this.listeners.off(document, \"mouseover\", this.onMouseOver), this.listeners.off(document, \"mouseup\", this.onMouseUp);\n    }, this.onMouseOver = e => {\n      const {\n          BlockManager: t,\n          BlockSelection: o\n        } = this.Editor,\n        i = t.getBlockByChildNode(e.relatedTarget) || this.lastSelectedBlock,\n        n = t.getBlockByChildNode(e.target);\n      if (!(!i || !n) && n !== i) {\n        if (i === this.firstSelectedBlock) {\n          m.get().removeAllRanges(), i.selected = !0, n.selected = !0, o.clearCache();\n          return;\n        }\n        if (n === this.firstSelectedBlock) {\n          i.selected = !1, n.selected = !1, o.clearCache();\n          return;\n        }\n        this.Editor.InlineToolbar.close(), this.toggleBlocksSelectedState(i, n), this.lastSelectedBlock = n;\n      }\n    };\n  }\n  /**\n   * Module preparation\n   *\n   * @returns {Promise}\n   */\n  async prepare() {\n    this.listeners.on(document, \"mousedown\", e => {\n      this.enableCrossBlockSelection(e);\n    });\n  }\n  /**\n   * Sets up listeners\n   *\n   * @param {MouseEvent} event - mouse down event\n   */\n  watchSelection(e) {\n    if (e.button !== _t.LEFT) return;\n    const {\n      BlockManager: t\n    } = this.Editor;\n    this.firstSelectedBlock = t.getBlock(e.target), this.lastSelectedBlock = this.firstSelectedBlock, this.listeners.on(document, \"mouseover\", this.onMouseOver), this.listeners.on(document, \"mouseup\", this.onMouseUp);\n  }\n  /**\n   * return boolean is cross block selection started\n   */\n  get isCrossBlockSelectionStarted() {\n    return !!this.firstSelectedBlock && !!this.lastSelectedBlock;\n  }\n  /**\n   * Change selection state of the next Block\n   * Used for CBS via Shift + arrow keys\n   *\n   * @param {boolean} next - if true, toggle next block. Previous otherwise\n   */\n  toggleBlockSelectedState() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;\n    const {\n      BlockManager: t,\n      BlockSelection: o\n    } = this.Editor;\n    this.lastSelectedBlock || (this.lastSelectedBlock = this.firstSelectedBlock = t.currentBlock), this.firstSelectedBlock === this.lastSelectedBlock && (this.firstSelectedBlock.selected = !0, o.clearCache(), m.get().removeAllRanges());\n    const i = t.blocks.indexOf(this.lastSelectedBlock) + (e ? 1 : -1),\n      n = t.blocks[i];\n    n && (this.lastSelectedBlock.selected !== n.selected ? (n.selected = !0, o.clearCache()) : (this.lastSelectedBlock.selected = !1, o.clearCache()), this.lastSelectedBlock = n, this.Editor.InlineToolbar.close(), n.holder.scrollIntoView({\n      block: \"nearest\"\n    }));\n  }\n  /**\n   * Clear saved state\n   *\n   * @param {Event} reason - event caused clear of selection\n   */\n  clear(e) {\n    const {\n        BlockManager: t,\n        BlockSelection: o,\n        Caret: i\n      } = this.Editor,\n      n = t.blocks.indexOf(this.firstSelectedBlock),\n      r = t.blocks.indexOf(this.lastSelectedBlock);\n    if (o.anyBlockSelected && n > -1 && r > -1) if (e && e instanceof KeyboardEvent) switch (e.keyCode) {\n      case B.DOWN:\n      case B.RIGHT:\n        i.setToBlock(t.blocks[Math.max(n, r)], i.positions.END);\n        break;\n      case B.UP:\n      case B.LEFT:\n        i.setToBlock(t.blocks[Math.min(n, r)], i.positions.START);\n        break;\n      default:\n        i.setToBlock(t.blocks[Math.max(n, r)], i.positions.END);\n    } else i.setToBlock(t.blocks[Math.max(n, r)], i.positions.END);\n    this.firstSelectedBlock = this.lastSelectedBlock = null;\n  }\n  /**\n   * Enables Cross Block Selection\n   *\n   * @param {MouseEvent} event - mouse down event\n   */\n  enableCrossBlockSelection(e) {\n    const {\n      UI: t\n    } = this.Editor;\n    m.isCollapsed || this.Editor.BlockSelection.clearSelection(e), t.nodes.redactor.contains(e.target) ? this.watchSelection(e) : this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * Change blocks selection state between passed two blocks.\n   *\n   * @param {Block} firstBlock - first block in range\n   * @param {Block} lastBlock - last block in range\n   */\n  toggleBlocksSelectedState(e, t) {\n    const {\n        BlockManager: o,\n        BlockSelection: i\n      } = this.Editor,\n      n = o.blocks.indexOf(e),\n      r = o.blocks.indexOf(t),\n      a = e.selected !== t.selected;\n    for (let l = Math.min(n, r); l <= Math.max(n, r); l++) {\n      const c = o.blocks[l];\n      c !== this.firstSelectedBlock && c !== (a ? e : t) && (o.blocks[l].selected = !o.blocks[l].selected, i.clearCache());\n    }\n  }\n}\nclass ei extends C {\n  constructor() {\n    super(...arguments), this.isStartedAtEditor = !1;\n  }\n  /**\n   * Toggle read-only state\n   *\n   * if state is true:\n   *  - disable all drag-n-drop event handlers\n   *\n   * if state is false:\n   *  - restore drag-n-drop event handlers\n   *\n   * @param {boolean} readOnlyEnabled - \"read only\" state\n   */\n  toggleReadOnly(e) {\n    e ? this.disableModuleBindings() : this.enableModuleBindings();\n  }\n  /**\n   * Add drag events listeners to editor zone\n   */\n  enableModuleBindings() {\n    const {\n      UI: e\n    } = this.Editor;\n    this.readOnlyMutableListeners.on(e.nodes.holder, \"drop\", async t => {\n      await this.processDrop(t);\n    }, !0), this.readOnlyMutableListeners.on(e.nodes.holder, \"dragstart\", () => {\n      this.processDragStart();\n    }), this.readOnlyMutableListeners.on(e.nodes.holder, \"dragover\", t => {\n      this.processDragOver(t);\n    }, !0);\n  }\n  /**\n   * Unbind drag-n-drop event handlers\n   */\n  disableModuleBindings() {\n    this.readOnlyMutableListeners.clearAll();\n  }\n  /**\n   * Handle drop event\n   *\n   * @param {DragEvent} dropEvent - drop event\n   */\n  async processDrop(e) {\n    const {\n      BlockManager: t,\n      Caret: o,\n      Paste: i\n    } = this.Editor;\n    e.preventDefault(), t.blocks.forEach(r => {\n      r.dropTarget = !1;\n    }), m.isAtEditor && !m.isCollapsed && this.isStartedAtEditor && document.execCommand(\"delete\"), this.isStartedAtEditor = !1;\n    const n = t.setCurrentBlockByChildNode(e.target);\n    if (n) this.Editor.Caret.setToBlock(n, o.positions.END);else {\n      const r = t.setCurrentBlockByChildNode(t.lastBlock.holder);\n      this.Editor.Caret.setToBlock(r, o.positions.END);\n    }\n    await i.processDataTransfer(e.dataTransfer, !0);\n  }\n  /**\n   * Handle drag start event\n   */\n  processDragStart() {\n    m.isAtEditor && !m.isCollapsed && (this.isStartedAtEditor = !0), this.Editor.InlineToolbar.close();\n  }\n  /**\n   * @param {DragEvent} dragEvent - drag event\n   */\n  processDragOver(e) {\n    e.preventDefault();\n  }\n}\nclass ti extends C {\n  /**\n   * Prepare the module\n   *\n   * @param options - options used by the modification observer module\n   * @param options.config - Editor configuration object\n   * @param options.eventsDispatcher - common Editor event bus\n   */\n  constructor(_ref21) {\n    let {\n      config: e,\n      eventsDispatcher: t\n    } = _ref21;\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.disabled = !1, this.batchingTimeout = null, this.batchingOnChangeQueue = /* @__PURE__ */new Map(), this.batchTime = 400, this.mutationObserver = new MutationObserver(o => {\n      this.redactorChanged(o);\n    }), this.eventsDispatcher.on(ct, o => {\n      this.particularBlockChanged(o.event);\n    }), this.eventsDispatcher.on(dt, () => {\n      this.disable();\n    }), this.eventsDispatcher.on(ht, () => {\n      this.enable();\n    });\n  }\n  /**\n   * Enables onChange event\n   */\n  enable() {\n    this.mutationObserver.observe(this.Editor.UI.nodes.redactor, {\n      childList: !0,\n      subtree: !0,\n      characterData: !0,\n      attributes: !0\n    }), this.disabled = !1;\n  }\n  /**\n   * Disables onChange event\n   */\n  disable() {\n    this.mutationObserver.disconnect(), this.disabled = !0;\n  }\n  /**\n   * Call onChange event passed to Editor.js configuration\n   *\n   * @param event - some of our custom change events\n   */\n  particularBlockChanged(e) {\n    this.disabled || !D(this.config.onChange) || (this.batchingOnChangeQueue.set(\"block:\".concat(e.detail.target.id, \":event:\").concat(e.type), e), this.batchingTimeout && clearTimeout(this.batchingTimeout), this.batchingTimeout = setTimeout(() => {\n      let t;\n      this.batchingOnChangeQueue.size === 1 ? t = this.batchingOnChangeQueue.values().next().value : t = Array.from(this.batchingOnChangeQueue.values()), this.config.onChange && this.config.onChange(this.Editor.API.methods, t), this.batchingOnChangeQueue.clear();\n    }, this.batchTime));\n  }\n  /**\n   * Fired on every blocks wrapper dom change\n   *\n   * @param mutations - mutations happened\n   */\n  redactorChanged(e) {\n    this.eventsDispatcher.emit(Me, {\n      mutations: e\n    });\n  }\n}\nconst wt = class extends C {\n  constructor() {\n    super(...arguments), this.MIME_TYPE = \"application/x-editor-js\", this.toolsTags = {}, this.tagsByTool = {}, this.toolsPatterns = [], this.toolsFiles = {}, this.exceptionList = [], this.processTool = s => {\n      try {\n        const e = s.create({}, {}, !1);\n        if (s.pasteConfig === !1) {\n          this.exceptionList.push(s.name);\n          return;\n        }\n        if (!D(e.onPaste)) return;\n        this.getTagsConfig(s), this.getFilesConfig(s), this.getPatternsConfig(s);\n      } catch (e) {\n        L(\"Paste handling for \\xAB\".concat(s.name, \"\\xBB Tool hasn't been set up because of the error\"), \"warn\", e);\n      }\n    }, this.handlePasteEvent = async s => {\n      const {\n          BlockManager: e,\n          Toolbar: t\n        } = this.Editor,\n        o = e.setCurrentBlockByChildNode(s.target);\n      !o || this.isNativeBehaviour(s.target) && !s.clipboardData.types.includes(\"Files\") || o && this.exceptionList.includes(o.name) || (s.preventDefault(), this.processDataTransfer(s.clipboardData), e.clearFocused(), t.close());\n    };\n  }\n  /**\n   * Set onPaste callback and collect tools` paste configurations\n   */\n  async prepare() {\n    this.processTools();\n  }\n  /**\n   * Set read-only state\n   *\n   * @param {boolean} readOnlyEnabled - read only flag value\n   */\n  toggleReadOnly(s) {\n    s ? this.unsetCallback() : this.setCallback();\n  }\n  /**\n   * Handle pasted or dropped data transfer object\n   *\n   * @param {DataTransfer} dataTransfer - pasted or dropped data transfer object\n   * @param {boolean} isDragNDrop - true if data transfer comes from drag'n'drop events\n   */\n  async processDataTransfer(s) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const {\n        Tools: t\n      } = this.Editor,\n      o = s.types;\n    if ((o.includes ? o.includes(\"Files\") : o.contains(\"Files\")) && !V(this.toolsFiles)) {\n      await this.processFiles(s.files);\n      return;\n    }\n    const n = s.getData(this.MIME_TYPE),\n      r = s.getData(\"text/plain\");\n    let a = s.getData(\"text/html\");\n    if (n) try {\n      this.insertEditorJSData(JSON.parse(n));\n      return;\n    } catch {}\n    e && r.trim() && a.trim() && (a = \"<p>\" + (a.trim() ? a : r) + \"</p>\");\n    const l = Object.keys(this.toolsTags).reduce((h, f) => {\n        var _this$toolsTags$f$san;\n        return h[f.toLowerCase()] = (_this$toolsTags$f$san = this.toolsTags[f].sanitizationConfig) !== null && _this$toolsTags$f$san !== void 0 ? _this$toolsTags$f$san : {}, h;\n      }, {}),\n      c = Object.assign({}, l, t.getAllInlineToolsSanitizeConfig(), {\n        br: {}\n      }),\n      u = Z(a, c);\n    !u.trim() || u.trim() === r || !d.isHTMLString(u) ? await this.processText(r) : await this.processText(u, !0);\n  }\n  /**\n   * Process pasted text and divide them into Blocks\n   *\n   * @param {string} data - text to process. Can be HTML or plain.\n   * @param {boolean} isHTML - if passed string is HTML, this parameter should be true\n   */\n  async processText(s) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const {\n        Caret: t,\n        BlockManager: o\n      } = this.Editor,\n      i = e ? this.processHTML(s) : this.processPlain(s);\n    if (!i.length) return;\n    if (i.length === 1) {\n      i[0].isBlock ? this.processSingleBlock(i.pop()) : this.processInlinePaste(i.pop());\n      return;\n    }\n    const r = o.currentBlock && o.currentBlock.tool.isDefault && o.currentBlock.isEmpty;\n    i.map(async (a, l) => this.insertBlock(a, l === 0 && r)), o.currentBlock && t.setToBlock(o.currentBlock, t.positions.END);\n  }\n  /**\n   * Set onPaste callback handler\n   */\n  setCallback() {\n    this.listeners.on(this.Editor.UI.nodes.holder, \"paste\", this.handlePasteEvent);\n  }\n  /**\n   * Unset onPaste callback handler\n   */\n  unsetCallback() {\n    this.listeners.off(this.Editor.UI.nodes.holder, \"paste\", this.handlePasteEvent);\n  }\n  /**\n   * Get and process tool`s paste configs\n   */\n  processTools() {\n    const s = this.Editor.Tools.blockTools;\n    Array.from(s.values()).forEach(this.processTool);\n  }\n  /**\n   * Get tags name list from either tag name or sanitization config.\n   *\n   * @param {string | object} tagOrSanitizeConfig - tag name or sanitize config object.\n   * @returns {string[]} array of tags.\n   */\n  collectTagNames(s) {\n    return J(s) ? [s] : z(s) ? Object.keys(s) : [];\n  }\n  /**\n   * Get tags to substitute by Tool\n   *\n   * @param tool - BlockTool object\n   */\n  getTagsConfig(s) {\n    if (s.pasteConfig === !1) return;\n    const e = s.pasteConfig.tags || [],\n      t = [];\n    e.forEach(o => {\n      const i = this.collectTagNames(o);\n      t.push(...i), i.forEach(n => {\n        if (Object.prototype.hasOwnProperty.call(this.toolsTags, n)) {\n          L(\"Paste handler for \\xAB\".concat(s.name, \"\\xBB Tool on \\xAB\").concat(n, \"\\xBB tag is skipped because it is already used by \\xAB\").concat(this.toolsTags[n].tool.name, \"\\xBB Tool.\"), \"warn\");\n          return;\n        }\n        const r = z(o) ? o[n] : null;\n        this.toolsTags[n.toUpperCase()] = {\n          tool: s,\n          sanitizationConfig: r\n        };\n      });\n    }), this.tagsByTool[s.name] = t.map(o => o.toUpperCase());\n  }\n  /**\n   * Get files` types and extensions to substitute by Tool\n   *\n   * @param tool - BlockTool object\n   */\n  getFilesConfig(s) {\n    if (s.pasteConfig === !1) return;\n    const {\n      files: e = {}\n    } = s.pasteConfig;\n    let {\n      extensions: t,\n      mimeTypes: o\n    } = e;\n    !t && !o || (t && !Array.isArray(t) && (L(\"\\xABextensions\\xBB property of the onDrop config for \\xAB\".concat(s.name, \"\\xBB Tool should be an array\")), t = []), o && !Array.isArray(o) && (L(\"\\xABmimeTypes\\xBB property of the onDrop config for \\xAB\".concat(s.name, \"\\xBB Tool should be an array\")), o = []), o && (o = o.filter(i => Ft(i) ? !0 : (L(\"MIME type value \\xAB\".concat(i, \"\\xBB for the \\xAB\").concat(s.name, \"\\xBB Tool is not a valid MIME type\"), \"warn\"), !1))), this.toolsFiles[s.name] = {\n      extensions: t || [],\n      mimeTypes: o || []\n    });\n  }\n  /**\n   * Get RegExp patterns to substitute by Tool\n   *\n   * @param tool - BlockTool object\n   */\n  getPatternsConfig(s) {\n    s.pasteConfig === !1 || !s.pasteConfig.patterns || V(s.pasteConfig.patterns) || Object.entries(s.pasteConfig.patterns).forEach(_ref22 => {\n      let [e, t] = _ref22;\n      t instanceof RegExp || L(\"Pattern \".concat(t, \" for \\xAB\").concat(s.name, \"\\xBB Tool is skipped because it should be a Regexp instance.\"), \"warn\"), this.toolsPatterns.push({\n        key: e,\n        pattern: t,\n        tool: s\n      });\n    });\n  }\n  /**\n   * Check if browser behavior suits better\n   *\n   * @param {EventTarget} element - element where content has been pasted\n   * @returns {boolean}\n   */\n  isNativeBehaviour(s) {\n    return d.isNativeInput(s);\n  }\n  /**\n   * Get files from data transfer object and insert related Tools\n   *\n   * @param {FileList} items - pasted or dropped items\n   */\n  async processFiles(s) {\n    const {\n      BlockManager: e\n    } = this.Editor;\n    let t;\n    t = await Promise.all(Array.from(s).map(n => this.processFile(n))), t = t.filter(n => !!n);\n    const i = e.currentBlock.tool.isDefault && e.currentBlock.isEmpty;\n    t.forEach((n, r) => {\n      e.paste(n.type, n.event, r === 0 && i);\n    });\n  }\n  /**\n   * Get information about file and find Tool to handle it\n   *\n   * @param {File} file - file to process\n   */\n  async processFile(s) {\n    const e = Pt(s),\n      t = Object.entries(this.toolsFiles).find(_ref23 => {\n        let [n, {\n          mimeTypes: r,\n          extensions: a\n        }] = _ref23;\n        const [l, c] = s.type.split(\"/\"),\n          u = a.find(f => f.toLowerCase() === e.toLowerCase()),\n          h = r.find(f => {\n            const [k, p] = f.split(\"/\");\n            return k === l && (p === c || p === \"*\");\n          });\n        return !!u || !!h;\n      });\n    if (!t) return;\n    const [o] = t;\n    return {\n      event: this.composePasteEvent(\"file\", {\n        file: s\n      }),\n      type: o\n    };\n  }\n  /**\n   * Split HTML string to blocks and return it as array of Block data\n   *\n   * @param {string} innerHTML - html string to process\n   * @returns {PasteData[]}\n   */\n  processHTML(s) {\n    const {\n        Tools: e\n      } = this.Editor,\n      t = d.make(\"DIV\");\n    return t.innerHTML = s, this.getNodes(t).map(i => {\n      let n,\n        r = e.defaultTool,\n        a = !1;\n      switch (i.nodeType) {\n        case Node.DOCUMENT_FRAGMENT_NODE:\n          n = d.make(\"div\"), n.appendChild(i);\n          break;\n        case Node.ELEMENT_NODE:\n          n = i, a = !0, this.toolsTags[n.tagName] && (r = this.toolsTags[n.tagName].tool);\n          break;\n      }\n      const {\n          tags: l\n        } = r.pasteConfig || {\n          tags: []\n        },\n        c = l.reduce((f, k) => (this.collectTagNames(k).forEach(v => {\n          const A = z(k) ? k[v] : null;\n          f[v.toLowerCase()] = A || {};\n        }), f), {}),\n        u = Object.assign({}, c, r.baseSanitizeConfig);\n      if (n.tagName.toLowerCase() === \"table\") {\n        const f = Z(n.outerHTML, u);\n        n = d.make(\"div\", void 0, {\n          innerHTML: f\n        }).firstChild;\n      } else n.innerHTML = Z(n.innerHTML, u);\n      const h = this.composePasteEvent(\"tag\", {\n        data: n\n      });\n      return {\n        content: n,\n        isBlock: a,\n        tool: r.name,\n        event: h\n      };\n    }).filter(i => {\n      const n = d.isEmpty(i.content),\n        r = d.isSingleTag(i.content);\n      return !n || r;\n    });\n  }\n  /**\n   * Split plain text by new line symbols and return it as array of Block data\n   *\n   * @param {string} plain - string to process\n   * @returns {PasteData[]}\n   */\n  processPlain(s) {\n    const {\n      defaultBlock: e\n    } = this.config;\n    if (!s) return [];\n    const t = e;\n    return s.split(/\\r?\\n/).filter(o => o.trim()).map(o => {\n      const i = d.make(\"div\");\n      i.textContent = o;\n      const n = this.composePasteEvent(\"tag\", {\n        data: i\n      });\n      return {\n        content: i,\n        tool: t,\n        isBlock: !1,\n        event: n\n      };\n    });\n  }\n  /**\n   * Process paste of single Block tool content\n   *\n   * @param {PasteData} dataToInsert - data of Block to insert\n   */\n  async processSingleBlock(s) {\n    const {\n        Caret: e,\n        BlockManager: t\n      } = this.Editor,\n      {\n        currentBlock: o\n      } = t;\n    if (!o || s.tool !== o.name || !d.containsOnlyInlineElements(s.content.innerHTML)) {\n      this.insertBlock(s, (o == null ? void 0 : o.tool.isDefault) && o.isEmpty);\n      return;\n    }\n    e.insertContentAtCaretPosition(s.content.innerHTML);\n  }\n  /**\n   * Process paste to single Block:\n   * 1. Find patterns` matches\n   * 2. Insert new block if it is not the same type as current one\n   * 3. Just insert text if there is no substitutions\n   *\n   * @param {PasteData} dataToInsert - data of Block to insert\n   */\n  async processInlinePaste(s) {\n    const {\n        BlockManager: e,\n        Caret: t\n      } = this.Editor,\n      {\n        content: o\n      } = s;\n    if (e.currentBlock && e.currentBlock.tool.isDefault && o.textContent.length < wt.PATTERN_PROCESSING_MAX_LENGTH) {\n      const n = await this.processPattern(o.textContent);\n      if (n) {\n        const r = e.currentBlock && e.currentBlock.tool.isDefault && e.currentBlock.isEmpty,\n          a = e.paste(n.tool, n.event, r);\n        t.setToBlock(a, t.positions.END);\n        return;\n      }\n    }\n    if (e.currentBlock && e.currentBlock.currentInput) {\n      const n = e.currentBlock.tool.baseSanitizeConfig;\n      document.execCommand(\"insertHTML\", !1, Z(o.innerHTML, n));\n    } else this.insertBlock(s);\n  }\n  /**\n   * Get patterns` matches\n   *\n   * @param {string} text - text to process\n   * @returns {Promise<{event: PasteEvent, tool: string}>}\n   */\n  async processPattern(s) {\n    const e = this.toolsPatterns.find(o => {\n      const i = o.pattern.exec(s);\n      return i ? s === i.shift() : !1;\n    });\n    return e ? {\n      event: this.composePasteEvent(\"pattern\", {\n        key: e.key,\n        data: s\n      }),\n      tool: e.tool.name\n    } : void 0;\n  }\n  /**\n   * Insert pasted Block content to Editor\n   *\n   * @param {PasteData} data - data to insert\n   * @param {boolean} canReplaceCurrentBlock - if true and is current Block is empty, will replace current Block\n   * @returns {void}\n   */\n  insertBlock(s) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const {\n        BlockManager: t,\n        Caret: o\n      } = this.Editor,\n      {\n        currentBlock: i\n      } = t;\n    let n;\n    if (e && i && i.isEmpty) {\n      n = t.paste(s.tool, s.event, !0), o.setToBlock(n, o.positions.END);\n      return;\n    }\n    n = t.paste(s.tool, s.event), o.setToBlock(n, o.positions.END);\n  }\n  /**\n   * Insert data passed as application/x-editor-js JSON\n   *\n   * @param {Array} blocks — Blocks' data to insert\n   * @returns {void}\n   */\n  insertEditorJSData(s) {\n    const {\n      BlockManager: e,\n      Caret: t,\n      Tools: o\n    } = this.Editor;\n    ut(s, n => o.blockTools.get(n).sanitizeConfig).forEach((_ref24, a) => {\n      let {\n        tool: n,\n        data: r\n      } = _ref24;\n      let l = !1;\n      a === 0 && (l = e.currentBlock && e.currentBlock.tool.isDefault && e.currentBlock.isEmpty);\n      const c = e.insert({\n        tool: n,\n        data: r,\n        replace: l\n      });\n      t.setToBlock(c, t.positions.END);\n    });\n  }\n  /**\n   * Fetch nodes from Element node\n   *\n   * @param {Node} node - current node\n   * @param {Node[]} nodes - processed nodes\n   * @param {Node} destNode - destination node\n   */\n  processElementNode(s, e, t) {\n    const o = Object.keys(this.toolsTags),\n      i = s,\n      {\n        tool: n\n      } = this.toolsTags[i.tagName] || {},\n      r = this.tagsByTool[n == null ? void 0 : n.name] || [],\n      a = o.includes(i.tagName),\n      l = d.blockElements.includes(i.tagName.toLowerCase()),\n      c = Array.from(i.children).some(_ref25 => {\n        let {\n          tagName: h\n        } = _ref25;\n        return o.includes(h) && !r.includes(h);\n      }),\n      u = Array.from(i.children).some(_ref26 => {\n        let {\n          tagName: h\n        } = _ref26;\n        return d.blockElements.includes(h.toLowerCase());\n      });\n    if (!l && !a && !c) return t.appendChild(i), [...e, t];\n    if (a && !c || l && !u && !c) return [...e, t, i];\n  }\n  /**\n   * Recursively divide HTML string to two types of nodes:\n   * 1. Block element\n   * 2. Document Fragments contained text and markup tags like a, b, i etc.\n   *\n   * @param {Node} wrapper - wrapper of paster HTML content\n   * @returns {Node[]}\n   */\n  getNodes(s) {\n    const e = Array.from(s.childNodes);\n    let t;\n    const o = (i, n) => {\n      if (d.isEmpty(n) && !d.isSingleTag(n)) return i;\n      const r = i[i.length - 1];\n      let a = new DocumentFragment();\n      switch (r && d.isFragment(r) && (a = i.pop()), n.nodeType) {\n        case Node.ELEMENT_NODE:\n          if (t = this.processElementNode(n, i, a), t) return t;\n          break;\n        case Node.TEXT_NODE:\n          return a.appendChild(n), [...i, a];\n        default:\n          return [...i, a];\n      }\n      return [...i, ...Array.from(n.childNodes).reduce(o, [])];\n    };\n    return e.reduce(o, []);\n  }\n  /**\n   * Compose paste event with passed type and detail\n   *\n   * @param {string} type - event type\n   * @param {PasteEventDetail} detail - event detail\n   */\n  composePasteEvent(s, e) {\n    return new CustomEvent(s, {\n      detail: e\n    });\n  }\n};\nlet yt = wt;\nyt.PATTERN_PROCESSING_MAX_LENGTH = 450;\nclass oi extends C {\n  constructor() {\n    super(...arguments), this.toolsDontSupportReadOnly = [], this.readOnlyEnabled = !1;\n  }\n  /**\n   * Returns state of read only mode\n   */\n  get isEnabled() {\n    return this.readOnlyEnabled;\n  }\n  /**\n   * Set initial state\n   */\n  async prepare() {\n    const {\n        Tools: e\n      } = this.Editor,\n      {\n        blockTools: t\n      } = e,\n      o = [];\n    Array.from(t.entries()).forEach(_ref27 => {\n      let [i, n] = _ref27;\n      n.isReadOnlySupported || o.push(i);\n    }), this.toolsDontSupportReadOnly = o, this.config.readOnly && o.length > 0 && this.throwCriticalError(), this.toggle(this.config.readOnly);\n  }\n  /**\n   * Set read-only mode or toggle current state\n   * Call all Modules `toggleReadOnly` method and re-render Editor\n   *\n   * @param {boolean} state - (optional) read-only state or toggle\n   */\n  async toggle() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !this.readOnlyEnabled;\n    e && this.toolsDontSupportReadOnly.length > 0 && this.throwCriticalError();\n    const t = this.readOnlyEnabled;\n    this.readOnlyEnabled = e;\n    for (const i in this.Editor) this.Editor[i].toggleReadOnly && this.Editor[i].toggleReadOnly(e);\n    if (t === e) return this.readOnlyEnabled;\n    const o = await this.Editor.Saver.save();\n    return await this.Editor.BlockManager.clear(), await this.Editor.Renderer.render(o.blocks), this.readOnlyEnabled;\n  }\n  /**\n   * Throws an error about tools which don't support read-only mode\n   */\n  throwCriticalError() {\n    throw new lt(\"To enable read-only mode all connected tools should support it. Tools \".concat(this.toolsDontSupportReadOnly.join(\", \"), \" don't support read-only mode.\"));\n  }\n}\nclass fe extends C {\n  constructor() {\n    super(...arguments), this.isRectSelectionActivated = !1, this.SCROLL_SPEED = 3, this.HEIGHT_OF_SCROLL_ZONE = 40, this.BOTTOM_SCROLL_ZONE = 1, this.TOP_SCROLL_ZONE = 2, this.MAIN_MOUSE_BUTTON = 0, this.mousedown = !1, this.isScrolling = !1, this.inScrollZone = null, this.startX = 0, this.startY = 0, this.mouseX = 0, this.mouseY = 0, this.stackOfSelected = [], this.listenerIds = [];\n  }\n  /**\n   * CSS classes for the Block\n   *\n   * @returns {{wrapper: string, content: string}}\n   */\n  static get CSS() {\n    return {\n      overlay: \"codex-editor-overlay\",\n      overlayContainer: \"codex-editor-overlay__container\",\n      rect: \"codex-editor-overlay__rectangle\",\n      topScrollZone: \"codex-editor-overlay__scroll-zone--top\",\n      bottomScrollZone: \"codex-editor-overlay__scroll-zone--bottom\"\n    };\n  }\n  /**\n   * Module Preparation\n   * Creating rect and hang handlers\n   */\n  prepare() {\n    this.enableModuleBindings();\n  }\n  /**\n   * Init rect params\n   *\n   * @param {number} pageX - X coord of mouse\n   * @param {number} pageY - Y coord of mouse\n   */\n  startSelection(e, t) {\n    const o = document.elementFromPoint(e - window.pageXOffset, t - window.pageYOffset);\n    o.closest(\".\".concat(this.Editor.Toolbar.CSS.toolbar)) || (this.Editor.BlockSelection.allBlocksSelected = !1, this.clearSelection(), this.stackOfSelected = []);\n    const n = [\".\".concat(F.CSS.content), \".\".concat(this.Editor.Toolbar.CSS.toolbar), \".\".concat(this.Editor.InlineToolbar.CSS.inlineToolbar)],\n      r = o.closest(\".\" + this.Editor.UI.CSS.editorWrapper),\n      a = n.some(l => !!o.closest(l));\n    !r || a || (this.mousedown = !0, this.startX = e, this.startY = t);\n  }\n  /**\n   * Clear all params to end selection\n   */\n  endSelection() {\n    this.mousedown = !1, this.startX = 0, this.startY = 0, this.overlayRectangle.style.display = \"none\";\n  }\n  /**\n   * is RectSelection Activated\n   */\n  isRectActivated() {\n    return this.isRectSelectionActivated;\n  }\n  /**\n   * Mark that selection is end\n   */\n  clearSelection() {\n    this.isRectSelectionActivated = !1;\n  }\n  /**\n   * Sets Module necessary event handlers\n   */\n  enableModuleBindings() {\n    const {\n      container: e\n    } = this.genHTML();\n    this.listeners.on(e, \"mousedown\", t => {\n      this.processMouseDown(t);\n    }, !1), this.listeners.on(document.body, \"mousemove\", Ce(t => {\n      this.processMouseMove(t);\n    }, 10), {\n      passive: !0\n    }), this.listeners.on(document.body, \"mouseleave\", () => {\n      this.processMouseLeave();\n    }), this.listeners.on(window, \"scroll\", Ce(t => {\n      this.processScroll(t);\n    }, 10), {\n      passive: !0\n    }), this.listeners.on(document.body, \"mouseup\", () => {\n      this.processMouseUp();\n    }, !1);\n  }\n  /**\n   * Handle mouse down events\n   *\n   * @param {MouseEvent} mouseEvent - mouse event payload\n   */\n  processMouseDown(e) {\n    if (e.button !== this.MAIN_MOUSE_BUTTON) return;\n    e.target.closest(d.allInputsSelector) !== null || this.startSelection(e.pageX, e.pageY);\n  }\n  /**\n   * Handle mouse move events\n   *\n   * @param {MouseEvent} mouseEvent - mouse event payload\n   */\n  processMouseMove(e) {\n    this.changingRectangle(e), this.scrollByZones(e.clientY);\n  }\n  /**\n   * Handle mouse leave\n   */\n  processMouseLeave() {\n    this.clearSelection(), this.endSelection();\n  }\n  /**\n   * @param {MouseEvent} mouseEvent - mouse event payload\n   */\n  processScroll(e) {\n    this.changingRectangle(e);\n  }\n  /**\n   * Handle mouse up\n   */\n  processMouseUp() {\n    this.clearSelection(), this.endSelection();\n  }\n  /**\n   * Scroll If mouse in scroll zone\n   *\n   * @param {number} clientY - Y coord of mouse\n   */\n  scrollByZones(e) {\n    if (this.inScrollZone = null, e <= this.HEIGHT_OF_SCROLL_ZONE && (this.inScrollZone = this.TOP_SCROLL_ZONE), document.documentElement.clientHeight - e <= this.HEIGHT_OF_SCROLL_ZONE && (this.inScrollZone = this.BOTTOM_SCROLL_ZONE), !this.inScrollZone) {\n      this.isScrolling = !1;\n      return;\n    }\n    this.isScrolling || (this.scrollVertical(this.inScrollZone === this.TOP_SCROLL_ZONE ? -this.SCROLL_SPEED : this.SCROLL_SPEED), this.isScrolling = !0);\n  }\n  /**\n   * Generates required HTML elements\n   *\n   * @returns {Object<string, Element>}\n   */\n  genHTML() {\n    const {\n        UI: e\n      } = this.Editor,\n      t = e.nodes.holder.querySelector(\".\" + e.CSS.editorWrapper),\n      o = d.make(\"div\", fe.CSS.overlay, {}),\n      i = d.make(\"div\", fe.CSS.overlayContainer, {}),\n      n = d.make(\"div\", fe.CSS.rect, {});\n    return i.appendChild(n), o.appendChild(i), t.appendChild(o), this.overlayRectangle = n, {\n      container: t,\n      overlay: o\n    };\n  }\n  /**\n   * Activates scrolling if blockSelection is active and mouse is in scroll zone\n   *\n   * @param {number} speed - speed of scrolling\n   */\n  scrollVertical(e) {\n    if (!(this.inScrollZone && this.mousedown)) return;\n    const t = window.pageYOffset;\n    window.scrollBy(0, e), this.mouseY += window.pageYOffset - t, setTimeout(() => {\n      this.scrollVertical(e);\n    }, 0);\n  }\n  /**\n   * Handles the change in the rectangle and its effect\n   *\n   * @param {MouseEvent} event - mouse event\n   */\n  changingRectangle(e) {\n    if (!this.mousedown) return;\n    e.pageY !== void 0 && (this.mouseX = e.pageX, this.mouseY = e.pageY);\n    const {\n        rightPos: t,\n        leftPos: o,\n        index: i\n      } = this.genInfoForMouseSelection(),\n      n = this.startX > t && this.mouseX > t,\n      r = this.startX < o && this.mouseX < o;\n    this.rectCrossesBlocks = !(n || r), this.isRectSelectionActivated || (this.rectCrossesBlocks = !1, this.isRectSelectionActivated = !0, this.shrinkRectangleToPoint(), this.overlayRectangle.style.display = \"block\"), this.updateRectangleSize(), this.Editor.Toolbar.close(), i !== void 0 && (this.trySelectNextBlock(i), this.inverseSelection(), m.get().removeAllRanges());\n  }\n  /**\n   * Shrink rect to singular point\n   */\n  shrinkRectangleToPoint() {\n    this.overlayRectangle.style.left = \"\".concat(this.startX - window.pageXOffset, \"px\"), this.overlayRectangle.style.top = \"\".concat(this.startY - window.pageYOffset, \"px\"), this.overlayRectangle.style.bottom = \"calc(100% - \".concat(this.startY - window.pageYOffset, \"px\"), this.overlayRectangle.style.right = \"calc(100% - \".concat(this.startX - window.pageXOffset, \"px\");\n  }\n  /**\n   * Select or unselect all of blocks in array if rect is out or in selectable area\n   */\n  inverseSelection() {\n    const t = this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;\n    if (this.rectCrossesBlocks && !t) for (const o of this.stackOfSelected) this.Editor.BlockSelection.selectBlockByIndex(o);\n    if (!this.rectCrossesBlocks && t) for (const o of this.stackOfSelected) this.Editor.BlockSelection.unSelectBlockByIndex(o);\n  }\n  /**\n   * Updates size of rectangle\n   */\n  updateRectangleSize() {\n    this.mouseY >= this.startY ? (this.overlayRectangle.style.top = \"\".concat(this.startY - window.pageYOffset, \"px\"), this.overlayRectangle.style.bottom = \"calc(100% - \".concat(this.mouseY - window.pageYOffset, \"px\")) : (this.overlayRectangle.style.bottom = \"calc(100% - \".concat(this.startY - window.pageYOffset, \"px\"), this.overlayRectangle.style.top = \"\".concat(this.mouseY - window.pageYOffset, \"px\")), this.mouseX >= this.startX ? (this.overlayRectangle.style.left = \"\".concat(this.startX - window.pageXOffset, \"px\"), this.overlayRectangle.style.right = \"calc(100% - \".concat(this.mouseX - window.pageXOffset, \"px\")) : (this.overlayRectangle.style.right = \"calc(100% - \".concat(this.startX - window.pageXOffset, \"px\"), this.overlayRectangle.style.left = \"\".concat(this.mouseX - window.pageXOffset, \"px\"));\n  }\n  /**\n   * Collects information needed to determine the behavior of the rectangle\n   *\n   * @returns {object} index - index next Block, leftPos - start of left border of Block, rightPos - right border\n   */\n  genInfoForMouseSelection() {\n    const t = document.body.offsetWidth / 2,\n      o = this.mouseY - window.pageYOffset,\n      i = document.elementFromPoint(t, o),\n      n = this.Editor.BlockManager.getBlockByChildNode(i);\n    let r;\n    n !== void 0 && (r = this.Editor.BlockManager.blocks.findIndex(h => h.holder === n.holder));\n    const a = this.Editor.BlockManager.lastBlock.holder.querySelector(\".\" + F.CSS.content),\n      l = Number.parseInt(window.getComputedStyle(a).width, 10) / 2,\n      c = t - l,\n      u = t + l;\n    return {\n      index: r,\n      leftPos: c,\n      rightPos: u\n    };\n  }\n  /**\n   * Select block with index index\n   *\n   * @param index - index of block in redactor\n   */\n  addBlockInSelection(e) {\n    this.rectCrossesBlocks && this.Editor.BlockSelection.selectBlockByIndex(e), this.stackOfSelected.push(e);\n  }\n  /**\n   * Adds a block to the selection and determines which blocks should be selected\n   *\n   * @param {object} index - index of new block in the reactor\n   */\n  trySelectNextBlock(e) {\n    const t = this.stackOfSelected[this.stackOfSelected.length - 1] === e,\n      o = this.stackOfSelected.length,\n      i = 1,\n      n = -1,\n      r = 0;\n    if (t) return;\n    const a = this.stackOfSelected[o - 1] - this.stackOfSelected[o - 2] > 0;\n    let l = r;\n    o > 1 && (l = a ? i : n);\n    const c = e > this.stackOfSelected[o - 1] && l === i,\n      u = e < this.stackOfSelected[o - 1] && l === n,\n      f = !(c || u || l === r);\n    if (!f && (e > this.stackOfSelected[o - 1] || this.stackOfSelected[o - 1] === void 0)) {\n      let v = this.stackOfSelected[o - 1] + 1 || e;\n      for (v; v <= e; v++) this.addBlockInSelection(v);\n      return;\n    }\n    if (!f && e < this.stackOfSelected[o - 1]) {\n      for (let v = this.stackOfSelected[o - 1] - 1; v >= e; v--) this.addBlockInSelection(v);\n      return;\n    }\n    if (!f) return;\n    let k = o - 1,\n      p;\n    for (e > this.stackOfSelected[o - 1] ? p = () => e > this.stackOfSelected[k] : p = () => e < this.stackOfSelected[k]; p();) this.rectCrossesBlocks && this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[k]), this.stackOfSelected.pop(), k--;\n  }\n}\nclass ii extends C {\n  /**\n   * Renders passed blocks as one batch\n   *\n   * @param blocksData - blocks to render\n   */\n  async render(e) {\n    return new Promise(t => {\n      const {\n          Tools: o,\n          BlockManager: i\n        } = this.Editor,\n        n = e.map(_ref28 => {\n          let {\n            type: r,\n            data: a,\n            tunes: l,\n            id: c\n          } = _ref28;\n          o.available.has(r) === !1 && (K(\"Tool \\xAB\".concat(r, \"\\xBB is not found. Check 'tools' property at the Editor.js config.\"), \"warn\"), a = this.composeStubDataForTool(r, a, c), r = o.stubTool);\n          let u;\n          try {\n            u = i.composeBlock({\n              id: c,\n              tool: r,\n              data: a,\n              tunes: l\n            });\n          } catch (h) {\n            L(\"Block \\xAB\".concat(r, \"\\xBB skipped because of plugins error\"), \"error\", {\n              data: a,\n              error: h\n            }), a = this.composeStubDataForTool(r, a, c), r = o.stubTool, u = i.composeBlock({\n              id: c,\n              tool: r,\n              data: a,\n              tunes: l\n            });\n          }\n          return u;\n        });\n      i.insertMany(n), window.requestIdleCallback(() => {\n        t();\n      }, {\n        timeout: 2e3\n      });\n    });\n  }\n  /**\n   * Create data for the Stub Tool that will be used instead of unavailable tool\n   *\n   * @param tool - unavailable tool name to stub\n   * @param data - data of unavailable block\n   * @param [id] - id of unavailable block\n   */\n  composeStubDataForTool(e, t, o) {\n    const {\n      Tools: i\n    } = this.Editor;\n    let n = e;\n    if (i.unavailable.has(e)) {\n      const r = i.unavailable.get(e).toolbox;\n      r !== void 0 && r[0].title !== void 0 && (n = r[0].title);\n    }\n    return {\n      savedData: {\n        id: o,\n        type: e,\n        data: t\n      },\n      title: n\n    };\n  }\n}\nclass ni extends C {\n  /**\n   * Composes new chain of Promises to fire them alternatelly\n   *\n   * @returns {OutputData}\n   */\n  async save() {\n    const {\n        BlockManager: e,\n        Tools: t\n      } = this.Editor,\n      o = e.blocks,\n      i = [];\n    try {\n      o.forEach(a => {\n        i.push(this.getSavedData(a));\n      });\n      const n = await Promise.all(i),\n        r = await ut(n, a => t.blockTools.get(a).sanitizeConfig);\n      return this.makeOutput(r);\n    } catch (n) {\n      K(\"Saving failed due to the Error %o\", \"error\", n);\n    }\n  }\n  /**\n   * Saves and validates\n   *\n   * @param {Block} block - Editor's Tool\n   * @returns {ValidatedData} - Tool's validated data\n   */\n  async getSavedData(e) {\n    const t = await e.save(),\n      o = t && (await e.validate(t.data));\n    return {\n      ...t,\n      isValid: o\n    };\n  }\n  /**\n   * Creates output object with saved data, time and version of editor\n   *\n   * @param {ValidatedData} allExtractedData - data extracted from Blocks\n   * @returns {OutputData}\n   */\n  makeOutput(e) {\n    const t = [];\n    return e.forEach(_ref29 => {\n      let {\n        id: o,\n        tool: i,\n        data: n,\n        tunes: r,\n        isValid: a\n      } = _ref29;\n      if (!a) {\n        L(\"Block \\xAB\".concat(i, \"\\xBB skipped because saved data is invalid\"));\n        return;\n      }\n      if (i === this.Editor.Tools.stubTool) {\n        t.push(n);\n        return;\n      }\n      const l = {\n        id: o,\n        type: i,\n        data: n,\n        ...(!V(r) && {\n          tunes: r\n        })\n      };\n      t.push(l);\n    }), {\n      time: + /* @__PURE__ */new Date(),\n      blocks: t,\n      version: \"2.28.2\"\n    };\n  }\n}\nvar Ne = {},\n  si = {\n    get exports() {\n      return Ne;\n    },\n    set exports(s) {\n      Ne = s;\n    }\n  };\n(function (s, e) {\n  (function (t, o) {\n    s.exports = o();\n  })(window, function () {\n    return function (t) {\n      var o = {};\n      function i(n) {\n        if (o[n]) return o[n].exports;\n        var r = o[n] = {\n          i: n,\n          l: !1,\n          exports: {}\n        };\n        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n      }\n      return i.m = t, i.c = o, i.d = function (n, r, a) {\n        i.o(n, r) || Object.defineProperty(n, r, {\n          enumerable: !0,\n          get: a\n        });\n      }, i.r = function (n) {\n        typeof Symbol < \"u\" && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(n, \"__esModule\", {\n          value: !0\n        });\n      }, i.t = function (n, r) {\n        if (1 & r && (n = i(n)), 8 & r || 4 & r && typeof n == \"object\" && n && n.__esModule) return n;\n        var a = /* @__PURE__ */Object.create(null);\n        if (i.r(a), Object.defineProperty(a, \"default\", {\n          enumerable: !0,\n          value: n\n        }), 2 & r && typeof n != \"string\") for (var l in n) i.d(a, l, function (c) {\n          return n[c];\n        }.bind(null, l));\n        return a;\n      }, i.n = function (n) {\n        var r = n && n.__esModule ? function () {\n          return n.default;\n        } : function () {\n          return n;\n        };\n        return i.d(r, \"a\", r), r;\n      }, i.o = function (n, r) {\n        return Object.prototype.hasOwnProperty.call(n, r);\n      }, i.p = \"/\", i(i.s = 4);\n    }([function (t, o, i) {\n      var n = i(1),\n        r = i(2);\n      typeof (r = r.__esModule ? r.default : r) == \"string\" && (r = [[t.i, r, \"\"]]);\n      var a = {\n        insert: \"head\",\n        singleton: !1\n      };\n      n(r, a), t.exports = r.locals || {};\n    }, function (t, o, i) {\n      var n,\n        r = function () {\n          return n === void 0 && (n = !!(window && document && document.all && !window.atob)), n;\n        },\n        a = function () {\n          var y = {};\n          return function (x) {\n            if (y[x] === void 0) {\n              var w = document.querySelector(x);\n              if (window.HTMLIFrameElement && w instanceof window.HTMLIFrameElement) try {\n                w = w.contentDocument.head;\n              } catch {\n                w = null;\n              }\n              y[x] = w;\n            }\n            return y[x];\n          };\n        }(),\n        l = [];\n      function c(y) {\n        for (var x = -1, w = 0; w < l.length; w++) if (l[w].identifier === y) {\n          x = w;\n          break;\n        }\n        return x;\n      }\n      function u(y, x) {\n        for (var w = {}, I = [], R = 0; R < y.length; R++) {\n          var b = y[R],\n            g = x.base ? b[0] + x.base : b[0],\n            E = w[g] || 0,\n            T = \"\".concat(g, \" \").concat(E);\n          w[g] = E + 1;\n          var O = c(T),\n            S = {\n              css: b[1],\n              media: b[2],\n              sourceMap: b[3]\n            };\n          O !== -1 ? (l[O].references++, l[O].updater(S)) : l.push({\n            identifier: T,\n            updater: _(S, x),\n            references: 1\n          }), I.push(T);\n        }\n        return I;\n      }\n      function h(y) {\n        var x = document.createElement(\"style\"),\n          w = y.attributes || {};\n        if (w.nonce === void 0) {\n          var I = i.nc;\n          I && (w.nonce = I);\n        }\n        if (Object.keys(w).forEach(function (b) {\n          x.setAttribute(b, w[b]);\n        }), typeof y.insert == \"function\") y.insert(x);else {\n          var R = a(y.insert || \"head\");\n          if (!R) throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n          R.appendChild(x);\n        }\n        return x;\n      }\n      var f,\n        k = (f = [], function (y, x) {\n          return f[y] = x, f.filter(Boolean).join(\"\\n\");\n        });\n      function p(y, x, w, I) {\n        var R = w ? \"\" : I.media ? \"@media \".concat(I.media, \" {\").concat(I.css, \"}\") : I.css;\n        if (y.styleSheet) y.styleSheet.cssText = k(x, R);else {\n          var b = document.createTextNode(R),\n            g = y.childNodes;\n          g[x] && y.removeChild(g[x]), g.length ? y.insertBefore(b, g[x]) : y.appendChild(b);\n        }\n      }\n      function v(y, x, w) {\n        var I = w.css,\n          R = w.media,\n          b = w.sourceMap;\n        if (R ? y.setAttribute(\"media\", R) : y.removeAttribute(\"media\"), b && btoa && (I += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(b)))), \" */\")), y.styleSheet) y.styleSheet.cssText = I;else {\n          for (; y.firstChild;) y.removeChild(y.firstChild);\n          y.appendChild(document.createTextNode(I));\n        }\n      }\n      var A = null,\n        N = 0;\n      function _(y, x) {\n        var w, I, R;\n        if (x.singleton) {\n          var b = N++;\n          w = A || (A = h(x)), I = p.bind(null, w, b, !1), R = p.bind(null, w, b, !0);\n        } else w = h(x), I = v.bind(null, w, x), R = function () {\n          (function (g) {\n            if (g.parentNode === null) return !1;\n            g.parentNode.removeChild(g);\n          })(w);\n        };\n        return I(y), function (g) {\n          if (g) {\n            if (g.css === y.css && g.media === y.media && g.sourceMap === y.sourceMap) return;\n            I(y = g);\n          } else R();\n        };\n      }\n      t.exports = function (y, x) {\n        (x = x || {}).singleton || typeof x.singleton == \"boolean\" || (x.singleton = r());\n        var w = u(y = y || [], x);\n        return function (I) {\n          if (I = I || [], Object.prototype.toString.call(I) === \"[object Array]\") {\n            for (var R = 0; R < w.length; R++) {\n              var b = c(w[R]);\n              l[b].references--;\n            }\n            for (var g = u(I, x), E = 0; E < w.length; E++) {\n              var T = c(w[E]);\n              l[T].references === 0 && (l[T].updater(), l.splice(T, 1));\n            }\n            w = g;\n          }\n        };\n      };\n    }, function (t, o, i) {\n      (o = i(3)(!1)).push([t.i, \".ce-paragraph {\\n    line-height: 1.6em;\\n    outline: none;\\n}\\n\\n.ce-paragraph[data-placeholder]:empty::before{\\n  content: attr(data-placeholder);\\n  color: #707684;\\n  font-weight: normal;\\n  opacity: 0;\\n}\\n\\n/** Show placeholder at the first paragraph if Editor is empty */\\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {\\n  opacity: 1;\\n}\\n\\n.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,\\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {\\n  opacity: 0;\\n}\\n\\n.ce-paragraph p:first-of-type{\\n    margin-top: 0;\\n}\\n\\n.ce-paragraph p:last-of-type{\\n    margin-bottom: 0;\\n}\\n\", \"\"]), t.exports = o;\n    }, function (t, o, i) {\n      t.exports = function (n) {\n        var r = [];\n        return r.toString = function () {\n          return this.map(function (a) {\n            var l = function (c, u) {\n              var h = c[1] || \"\",\n                f = c[3];\n              if (!f) return h;\n              if (u && typeof btoa == \"function\") {\n                var k = (v = f, A = btoa(unescape(encodeURIComponent(JSON.stringify(v)))), N = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(A), \"/*# \".concat(N, \" */\")),\n                  p = f.sources.map(function (_) {\n                    return \"/*# sourceURL=\".concat(f.sourceRoot || \"\").concat(_, \" */\");\n                  });\n                return [h].concat(p).concat([k]).join(\"\\n\");\n              }\n              var v, A, N;\n              return [h].join(\"\\n\");\n            }(a, n);\n            return a[2] ? \"@media \".concat(a[2], \" {\").concat(l, \"}\") : l;\n          }).join(\"\");\n        }, r.i = function (a, l, c) {\n          typeof a == \"string\" && (a = [[null, a, \"\"]]);\n          var u = {};\n          if (c) for (var h = 0; h < this.length; h++) {\n            var f = this[h][0];\n            f != null && (u[f] = !0);\n          }\n          for (var k = 0; k < a.length; k++) {\n            var p = [].concat(a[k]);\n            c && u[p[0]] || (l && (p[2] ? p[2] = \"\".concat(l, \" and \").concat(p[2]) : p[2] = l), r.push(p));\n          }\n        }, r;\n      };\n    }, function (t, o, i) {\n      i.r(o), i.d(o, \"default\", function () {\n        return a;\n      }), i(0);\n      function n(l, c) {\n        for (var u = 0; u < c.length; u++) {\n          var h = c[u];\n          h.enumerable = h.enumerable || !1, h.configurable = !0, \"value\" in h && (h.writable = !0), Object.defineProperty(l, h.key, h);\n        }\n      }\n      function r(l, c, u) {\n        return c && n(l.prototype, c), u && n(l, u), l;\n      }\n      /**\n       * Base Paragraph Block for the Editor.js.\n       * Represents a regular text block\n       *\n       * @author CodeX (team@codex.so)\n       * @copyright CodeX 2018\n       * @license The MIT License (MIT)\n       */\n      var a = function () {\n        function l(c) {\n          var u = c.data,\n            h = c.config,\n            f = c.api,\n            k = c.readOnly;\n          (function (p, v) {\n            if (!(p instanceof v)) throw new TypeError(\"Cannot call a class as a function\");\n          })(this, l), this.api = f, this.readOnly = k, this._CSS = {\n            block: this.api.styles.block,\n            wrapper: \"ce-paragraph\"\n          }, this.readOnly || (this.onKeyUp = this.onKeyUp.bind(this)), this._placeholder = h.placeholder ? h.placeholder : l.DEFAULT_PLACEHOLDER, this._data = {}, this._element = null, this._preserveBlank = h.preserveBlank !== void 0 && h.preserveBlank, this.data = u;\n        }\n        return r(l, null, [{\n          key: \"DEFAULT_PLACEHOLDER\",\n          get: function () {\n            return \"\";\n          }\n        }]), r(l, [{\n          key: \"onKeyUp\",\n          value: function (c) {\n            c.code !== \"Backspace\" && c.code !== \"Delete\" || this._element.textContent === \"\" && (this._element.innerHTML = \"\");\n          }\n        }, {\n          key: \"drawView\",\n          value: function () {\n            var c = document.createElement(\"DIV\");\n            return c.classList.add(this._CSS.wrapper, this._CSS.block), c.contentEditable = !1, c.dataset.placeholder = this.api.i18n.t(this._placeholder), this.readOnly || (c.contentEditable = !0, c.addEventListener(\"keyup\", this.onKeyUp)), c;\n          }\n        }, {\n          key: \"render\",\n          value: function () {\n            return this._element === null && (this._element = this.drawView()), this.hydrate(), this._element;\n          }\n        }, {\n          key: \"merge\",\n          value: function (c) {\n            var u = {\n              text: this.data.text + c.text\n            };\n            this.data = u;\n          }\n        }, {\n          key: \"validate\",\n          value: function (c) {\n            return !(c.text.trim() === \"\" && !this._preserveBlank);\n          }\n        }, {\n          key: \"save\",\n          value: function (c) {\n            return {\n              text: c.innerHTML\n            };\n          }\n        }, {\n          key: \"onPaste\",\n          value: function (c) {\n            var u = {\n              text: c.detail.data.innerHTML\n            };\n            this.data = u;\n          }\n        }, {\n          key: \"hydrate\",\n          value: function () {\n            var c = this;\n            window.requestAnimationFrame(function () {\n              c._element.innerHTML = c._data.text || \"\";\n            });\n          }\n        }, {\n          key: \"data\",\n          get: function () {\n            if (this._element !== null) {\n              var c = this._element.innerHTML;\n              this._data.text = c;\n            }\n            return this._data;\n          },\n          set: function (c) {\n            this._data = c || {}, this._element !== null && this.hydrate();\n          }\n        }], [{\n          key: \"conversionConfig\",\n          get: function () {\n            return {\n              export: \"text\",\n              import: \"text\"\n            };\n          }\n        }, {\n          key: \"sanitize\",\n          get: function () {\n            return {\n              text: {\n                br: !0\n              }\n            };\n          }\n        }, {\n          key: \"isReadOnlySupported\",\n          get: function () {\n            return !0;\n          }\n        }, {\n          key: \"pasteConfig\",\n          get: function () {\n            return {\n              tags: [\"P\"]\n            };\n          }\n        }, {\n          key: \"toolbox\",\n          get: function () {\n            return {\n              icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14\"/></svg>',\n              title: \"Text\"\n            };\n          }\n        }]), l;\n      }();\n    }]).default;\n  });\n})(si);\nconst ri = /* @__PURE__ */xe(Ne);\nclass We {\n  constructor() {\n    this.commandName = \"bold\", this.CSS = {\n      button: \"ce-inline-tool\",\n      buttonActive: \"ce-inline-tool--active\",\n      buttonModifier: \"ce-inline-tool--bold\"\n    }, this.nodes = {\n      button: void 0\n    };\n  }\n  /**\n   * Sanitizer Rule\n   * Leave <b> tags\n   *\n   * @returns {object}\n   */\n  static get sanitize() {\n    return {\n      b: {}\n    };\n  }\n  /**\n   * Create button for Inline Toolbar\n   */\n  render() {\n    return this.nodes.button = document.createElement(\"button\"), this.nodes.button.type = \"button\", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.innerHTML = So, this.nodes.button;\n  }\n  /**\n   * Wrap range with <b> tag\n   */\n  surround() {\n    document.execCommand(this.commandName);\n  }\n  /**\n   * Check selection and set activated state to button if there are <b> tag\n   *\n   * @returns {boolean}\n   */\n  checkState() {\n    const e = document.queryCommandState(this.commandName);\n    return this.nodes.button.classList.toggle(this.CSS.buttonActive, e), e;\n  }\n  /**\n   * Set a shortcut\n   *\n   * @returns {boolean}\n   */\n  get shortcut() {\n    return \"CMD+B\";\n  }\n}\nWe.isInline = !0;\nWe.title = \"Bold\";\nclass Ye {\n  constructor() {\n    this.commandName = \"italic\", this.CSS = {\n      button: \"ce-inline-tool\",\n      buttonActive: \"ce-inline-tool--active\",\n      buttonModifier: \"ce-inline-tool--italic\"\n    }, this.nodes = {\n      button: null\n    };\n  }\n  /**\n   * Sanitizer Rule\n   * Leave <i> tags\n   *\n   * @returns {object}\n   */\n  static get sanitize() {\n    return {\n      i: {}\n    };\n  }\n  /**\n   * Create button for Inline Toolbar\n   */\n  render() {\n    return this.nodes.button = document.createElement(\"button\"), this.nodes.button.type = \"button\", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.innerHTML = Oo, this.nodes.button;\n  }\n  /**\n   * Wrap range with <i> tag\n   */\n  surround() {\n    document.execCommand(this.commandName);\n  }\n  /**\n   * Check selection and set activated state to button if there are <i> tag\n   */\n  checkState() {\n    const e = document.queryCommandState(this.commandName);\n    return this.nodes.button.classList.toggle(this.CSS.buttonActive, e), e;\n  }\n  /**\n   * Set a shortcut\n   */\n  get shortcut() {\n    return \"CMD+I\";\n  }\n}\nYe.isInline = !0;\nYe.title = \"Italic\";\nclass Ke {\n  /**\n   * @param api - Editor.js API\n   */\n  constructor(_ref30) {\n    let {\n      api: e\n    } = _ref30;\n    this.commandLink = \"createLink\", this.commandUnlink = \"unlink\", this.ENTER_KEY = 13, this.CSS = {\n      button: \"ce-inline-tool\",\n      buttonActive: \"ce-inline-tool--active\",\n      buttonModifier: \"ce-inline-tool--link\",\n      buttonUnlink: \"ce-inline-tool--unlink\",\n      input: \"ce-inline-tool-input\",\n      inputShowed: \"ce-inline-tool-input--showed\"\n    }, this.nodes = {\n      button: null,\n      input: null\n    }, this.inputOpened = !1, this.toolbar = e.toolbar, this.inlineToolbar = e.inlineToolbar, this.notifier = e.notifier, this.i18n = e.i18n, this.selection = new m();\n  }\n  /**\n   * Sanitizer Rule\n   * Leave <a> tags\n   *\n   * @returns {object}\n   */\n  static get sanitize() {\n    return {\n      a: {\n        href: !0,\n        target: \"_blank\",\n        rel: \"nofollow\"\n      }\n    };\n  }\n  /**\n   * Create button for Inline Toolbar\n   */\n  render() {\n    return this.nodes.button = document.createElement(\"button\"), this.nodes.button.type = \"button\", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.innerHTML = Qe, this.nodes.button;\n  }\n  /**\n   * Input for the link\n   */\n  renderActions() {\n    return this.nodes.input = document.createElement(\"input\"), this.nodes.input.placeholder = this.i18n.t(\"Add a link\"), this.nodes.input.classList.add(this.CSS.input), this.nodes.input.addEventListener(\"keydown\", e => {\n      e.keyCode === this.ENTER_KEY && this.enterPressed(e);\n    }), this.nodes.input;\n  }\n  /**\n   * Handle clicks on the Inline Toolbar icon\n   *\n   * @param {Range} range - range to wrap with link\n   */\n  surround(e) {\n    if (e) {\n      this.inputOpened ? (this.selection.restore(), this.selection.removeFakeBackground()) : (this.selection.setFakeBackground(), this.selection.save());\n      const t = this.selection.findParentTag(\"A\");\n      if (t) {\n        this.selection.expandToTag(t), this.unlink(), this.closeActions(), this.checkState(), this.toolbar.close();\n        return;\n      }\n    }\n    this.toggleActions();\n  }\n  /**\n   * Check selection and set activated state to button if there are <a> tag\n   */\n  checkState() {\n    const e = this.selection.findParentTag(\"A\");\n    if (e) {\n      this.nodes.button.innerHTML = Ro, this.nodes.button.classList.add(this.CSS.buttonUnlink), this.nodes.button.classList.add(this.CSS.buttonActive), this.openActions();\n      const t = e.getAttribute(\"href\");\n      this.nodes.input.value = t !== \"null\" ? t : \"\", this.selection.save();\n    } else this.nodes.button.innerHTML = Qe, this.nodes.button.classList.remove(this.CSS.buttonUnlink), this.nodes.button.classList.remove(this.CSS.buttonActive);\n    return !!e;\n  }\n  /**\n   * Function called with Inline Toolbar closing\n   */\n  clear() {\n    this.closeActions();\n  }\n  /**\n   * Set a shortcut\n   */\n  get shortcut() {\n    return \"CMD+K\";\n  }\n  /**\n   * Show/close link input\n   */\n  toggleActions() {\n    this.inputOpened ? this.closeActions(!1) : this.openActions(!0);\n  }\n  /**\n   * @param {boolean} needFocus - on link creation we need to focus input. On editing - nope.\n   */\n  openActions() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    this.nodes.input.classList.add(this.CSS.inputShowed), e && this.nodes.input.focus(), this.inputOpened = !0;\n  }\n  /**\n   * Close input\n   *\n   * @param {boolean} clearSavedSelection — we don't need to clear saved selection\n   *                                        on toggle-clicks on the icon of opened Toolbar\n   */\n  closeActions() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;\n    if (this.selection.isFakeBackgroundEnabled) {\n      const t = new m();\n      t.save(), this.selection.restore(), this.selection.removeFakeBackground(), t.restore();\n    }\n    this.nodes.input.classList.remove(this.CSS.inputShowed), this.nodes.input.value = \"\", e && this.selection.clearSaved(), this.inputOpened = !1;\n  }\n  /**\n   * Enter pressed on input\n   *\n   * @param {KeyboardEvent} event - enter keydown event\n   */\n  enterPressed(e) {\n    let t = this.nodes.input.value || \"\";\n    if (!t.trim()) {\n      this.selection.restore(), this.unlink(), e.preventDefault(), this.closeActions();\n      return;\n    }\n    if (!this.validateURL(t)) {\n      this.notifier.show({\n        message: \"Pasted link is not valid.\",\n        style: \"error\"\n      }), L(\"Incorrect Link pasted\", \"warn\", t);\n      return;\n    }\n    t = this.prepareLink(t), this.selection.restore(), this.selection.removeFakeBackground(), this.insertLink(t), e.preventDefault(), e.stopPropagation(), e.stopImmediatePropagation(), this.selection.collapseToEnd(), this.inlineToolbar.close();\n  }\n  /**\n   * Detects if passed string is URL\n   *\n   * @param {string} str - string to validate\n   * @returns {boolean}\n   */\n  validateURL(e) {\n    return !/\\s/.test(e);\n  }\n  /**\n   * Process link before injection\n   * - sanitize\n   * - add protocol for links like 'google.com'\n   *\n   * @param {string} link - raw user input\n   */\n  prepareLink(e) {\n    return e = e.trim(), e = this.addProtocol(e), e;\n  }\n  /**\n   * Add 'http' protocol to the links like 'vc.ru', 'google.com'\n   *\n   * @param {string} link - string to process\n   */\n  addProtocol(e) {\n    if (/^(\\w+):(\\/\\/)?/.test(e)) return e;\n    const t = /^\\/[^/\\s]/.test(e),\n      o = e.substring(0, 1) === \"#\",\n      i = /^\\/\\/[^/\\s]/.test(e);\n    return !t && !o && !i && (e = \"http://\" + e), e;\n  }\n  /**\n   * Inserts <a> tag with \"href\"\n   *\n   * @param {string} link - \"href\" value\n   */\n  insertLink(e) {\n    const t = this.selection.findParentTag(\"A\");\n    t && this.selection.expandToTag(t), document.execCommand(this.commandLink, !1, e);\n  }\n  /**\n   * Removes <a> tag\n   */\n  unlink() {\n    document.execCommand(this.commandUnlink);\n  }\n}\nKe.isInline = !0;\nKe.title = \"Link\";\nclass Et {\n  /**\n   * @param options - constructor options\n   * @param options.data - stub tool data\n   * @param options.api - Editor.js API\n   */\n  constructor(_ref31) {\n    let {\n      data: e,\n      api: t\n    } = _ref31;\n    this.CSS = {\n      wrapper: \"ce-stub\",\n      info: \"ce-stub__info\",\n      title: \"ce-stub__title\",\n      subtitle: \"ce-stub__subtitle\"\n    }, this.api = t, this.title = e.title || this.api.i18n.t(\"Error\"), this.subtitle = this.api.i18n.t(\"The block can not be displayed correctly.\"), this.savedData = e.savedData, this.wrapper = this.make();\n  }\n  /**\n   * Returns stub holder\n   *\n   * @returns {HTMLElement}\n   */\n  render() {\n    return this.wrapper;\n  }\n  /**\n   * Return original Tool data\n   *\n   * @returns {BlockToolData}\n   */\n  save() {\n    return this.savedData;\n  }\n  /**\n   * Create Tool html markup\n   *\n   * @returns {HTMLElement}\n   */\n  make() {\n    const e = d.make(\"div\", this.CSS.wrapper),\n      t = Do,\n      o = d.make(\"div\", this.CSS.info),\n      i = d.make(\"div\", this.CSS.title, {\n        textContent: this.title\n      }),\n      n = d.make(\"div\", this.CSS.subtitle, {\n        textContent: this.subtitle\n      });\n    return e.innerHTML = t, o.appendChild(i), o.appendChild(n), e.appendChild(o), e;\n  }\n}\nEt.isReadOnlySupported = !0;\nclass ai extends $e {\n  constructor() {\n    super(...arguments), this.type = ye.Inline;\n  }\n  /**\n   * Returns title for Inline Tool if specified by user\n   */\n  get title() {\n    return this.constructable[Ue.Title];\n  }\n  /**\n   * Constructs new InlineTool instance from constructable\n   */\n  create() {\n    return new this.constructable({\n      api: this.api.getMethodsForTool(this),\n      config: this.settings\n    });\n  }\n}\nclass li extends $e {\n  constructor() {\n    super(...arguments), this.type = ye.Tune;\n  }\n  /**\n   * Constructs new BlockTune instance from constructable\n   *\n   * @param data - Tune data\n   * @param block - Block API object\n   */\n  create(e, t) {\n    return new this.constructable({\n      api: this.api.getMethodsForTool(this),\n      config: this.settings,\n      block: t,\n      data: e\n    });\n  }\n}\nclass U extends Map {\n  /**\n   * Returns Block Tools collection\n   */\n  get blockTools() {\n    const e = Array.from(this.entries()).filter(_ref32 => {\n      let [, t] = _ref32;\n      return t.isBlock();\n    });\n    return new U(e);\n  }\n  /**\n   * Returns Inline Tools collection\n   */\n  get inlineTools() {\n    const e = Array.from(this.entries()).filter(_ref33 => {\n      let [, t] = _ref33;\n      return t.isInline();\n    });\n    return new U(e);\n  }\n  /**\n   * Returns Block Tunes collection\n   */\n  get blockTunes() {\n    const e = Array.from(this.entries()).filter(_ref34 => {\n      let [, t] = _ref34;\n      return t.isTune();\n    });\n    return new U(e);\n  }\n  /**\n   * Returns internal Tools collection\n   */\n  get internalTools() {\n    const e = Array.from(this.entries()).filter(_ref35 => {\n      let [, t] = _ref35;\n      return t.isInternal;\n    });\n    return new U(e);\n  }\n  /**\n   * Returns Tools collection provided by user\n   */\n  get externalTools() {\n    const e = Array.from(this.entries()).filter(_ref36 => {\n      let [, t] = _ref36;\n      return !t.isInternal;\n    });\n    return new U(e);\n  }\n}\nvar ci = Object.defineProperty,\n  di = Object.getOwnPropertyDescriptor,\n  Bt = (s, e, t, o) => {\n    for (var i = o > 1 ? void 0 : o ? di(e, t) : e, n = s.length - 1, r; n >= 0; n--) (r = s[n]) && (i = (o ? r(e, t, i) : r(i)) || i);\n    return o && i && ci(e, t, i), i;\n  };\nclass Xe extends $e {\n  constructor() {\n    super(...arguments), this.type = ye.Block, this.inlineTools = new U(), this.tunes = new U();\n  }\n  /**\n   * Creates new Tool instance\n   *\n   * @param data - Tool data\n   * @param block - BlockAPI for current Block\n   * @param readOnly - True if Editor is in read-only mode\n   */\n  create(e, t, o) {\n    return new this.constructable({\n      data: e,\n      block: t,\n      readOnly: o,\n      api: this.api.getMethodsForTool(this),\n      config: this.settings\n    });\n  }\n  /**\n   * Returns true if read-only mode is supported by Tool\n   */\n  get isReadOnlySupported() {\n    return this.constructable[se.IsReadOnlySupported] === !0;\n  }\n  /**\n   * Returns true if Tool supports linebreaks\n   */\n  get isLineBreaksEnabled() {\n    return this.constructable[se.IsEnabledLineBreaks];\n  }\n  /**\n   * Returns Tool toolbox configuration (internal or user-specified).\n   *\n   * Merges internal and user-defined toolbox configs based on the following rules:\n   *\n   * - If both internal and user-defined toolbox configs are arrays their items are merged.\n   * Length of the second one is kept.\n   *\n   * - If both are objects their properties are merged.\n   *\n   * - If one is an object and another is an array than internal config is replaced with user-defined\n   * config. This is made to allow user to override default tool's toolbox representation (single/multiple entries)\n   */\n  get toolbox() {\n    const e = this.constructable[se.Toolbox],\n      t = this.config[ke.Toolbox];\n    if (!V(e) && t !== !1) return t ? Array.isArray(e) ? Array.isArray(t) ? t.map((o, i) => {\n      const n = e[i];\n      return n ? {\n        ...n,\n        ...o\n      } : o;\n    }) : [t] : Array.isArray(t) ? t : [{\n      ...e,\n      ...t\n    }] : Array.isArray(e) ? e : [e];\n  }\n  /**\n   * Returns Tool conversion configuration\n   */\n  get conversionConfig() {\n    return this.constructable[se.ConversionConfig];\n  }\n  /**\n   * Returns enabled inline tools for Tool\n   */\n  get enabledInlineTools() {\n    return this.config[ke.EnabledInlineTools] || !1;\n  }\n  /**\n   * Returns enabled tunes for Tool\n   */\n  get enabledBlockTunes() {\n    return this.config[ke.EnabledBlockTunes];\n  }\n  /**\n   * Returns Tool paste configuration\n   */\n  get pasteConfig() {\n    var _this$constructable$s;\n    return (_this$constructable$s = this.constructable[se.PasteConfig]) !== null && _this$constructable$s !== void 0 ? _this$constructable$s : {};\n  }\n  get sanitizeConfig() {\n    const e = super.sanitizeConfig,\n      t = this.baseSanitizeConfig;\n    if (V(e)) return t;\n    const o = {};\n    for (const i in e) if (Object.prototype.hasOwnProperty.call(e, i)) {\n      const n = e[i];\n      z(n) ? o[i] = Object.assign({}, t, n) : o[i] = n;\n    }\n    return o;\n  }\n  get baseSanitizeConfig() {\n    const e = {};\n    return Array.from(this.inlineTools.values()).forEach(t => Object.assign(e, t.sanitizeConfig)), Array.from(this.tunes.values()).forEach(t => Object.assign(e, t.sanitizeConfig)), e;\n  }\n}\nBt([ce], Xe.prototype, \"sanitizeConfig\", 1);\nBt([ce], Xe.prototype, \"baseSanitizeConfig\", 1);\nclass hi {\n  /**\n   * @class\n   * @param config - tools config\n   * @param editorConfig - EditorJS config\n   * @param api - EditorJS API module\n   */\n  constructor(e, t, o) {\n    this.api = o, this.config = e, this.editorConfig = t;\n  }\n  /**\n   * Returns Tool object based on it's type\n   *\n   * @param name - tool name\n   */\n  get(e) {\n    const {\n        class: t,\n        isInternal: o = !1,\n        ...i\n      } = this.config[e],\n      n = this.getConstructor(t);\n    return new n({\n      name: e,\n      constructable: t,\n      config: i,\n      api: this.api,\n      isDefault: e === this.editorConfig.defaultBlock,\n      defaultPlaceholder: this.editorConfig.placeholder,\n      isInternal: o\n    });\n  }\n  /**\n   * Find appropriate Tool object constructor for Tool constructable\n   *\n   * @param constructable - Tools constructable\n   */\n  getConstructor(e) {\n    switch (!0) {\n      case e[Ue.IsInline]:\n        return ai;\n      case e[xt.IsTune]:\n        return li;\n      default:\n        return Xe;\n    }\n  }\n}\nclass Tt {\n  /**\n   * MoveDownTune constructor\n   *\n   * @param {API} api — Editor's API\n   */\n  constructor(_ref37) {\n    let {\n      api: e\n    } = _ref37;\n    this.CSS = {\n      animation: \"wobble\"\n    }, this.api = e;\n  }\n  /**\n   * Tune's appearance in block settings menu\n   */\n  render() {\n    return {\n      icon: ft,\n      title: this.api.i18n.t(\"Move down\"),\n      onActivate: () => this.handleClick(),\n      name: \"move-down\"\n    };\n  }\n  /**\n   * Handle clicks on 'move down' button\n   */\n  handleClick() {\n    const e = this.api.blocks.getCurrentBlockIndex(),\n      t = this.api.blocks.getBlockByIndex(e + 1);\n    if (!t) throw new Error(\"Unable to move Block down since it is already the last\");\n    const o = t.holder,\n      i = o.getBoundingClientRect();\n    let n = Math.abs(window.innerHeight - o.offsetHeight);\n    i.top < window.innerHeight && (n = window.scrollY + o.offsetHeight), window.scrollTo(0, n), this.api.blocks.move(e + 1), this.api.toolbar.toggleBlockSettings(!0);\n  }\n}\nTt.isTune = !0;\nclass Ct {\n  /**\n   * DeleteTune constructor\n   *\n   * @param {API} api - Editor's API\n   */\n  constructor(_ref38) {\n    let {\n      api: e\n    } = _ref38;\n    this.api = e;\n  }\n  /**\n   * Tune's appearance in block settings menu\n   */\n  render() {\n    return {\n      icon: Mo,\n      title: this.api.i18n.t(\"Delete\"),\n      name: \"delete\",\n      confirmation: {\n        title: this.api.i18n.t(\"Click to delete\"),\n        onActivate: () => this.handleClick()\n      }\n    };\n  }\n  /**\n   * Delete block conditions passed\n   */\n  handleClick() {\n    this.api.blocks.delete();\n  }\n}\nCt.isTune = !0;\nclass St {\n  /**\n   * MoveUpTune constructor\n   *\n   * @param {API} api - Editor's API\n   */\n  constructor(_ref39) {\n    let {\n      api: e\n    } = _ref39;\n    this.CSS = {\n      animation: \"wobble\"\n    }, this.api = e;\n  }\n  /**\n   * Tune's appearance in block settings menu\n   */\n  render() {\n    return {\n      icon: Io,\n      title: this.api.i18n.t(\"Move up\"),\n      onActivate: () => this.handleClick(),\n      name: \"move-up\"\n    };\n  }\n  /**\n   * Move current block up\n   */\n  handleClick() {\n    const e = this.api.blocks.getCurrentBlockIndex(),\n      t = this.api.blocks.getBlockByIndex(e),\n      o = this.api.blocks.getBlockByIndex(e - 1);\n    if (e === 0 || !t || !o) throw new Error(\"Unable to move Block up since it is already the first\");\n    const i = t.holder,\n      n = o.holder,\n      r = i.getBoundingClientRect(),\n      a = n.getBoundingClientRect();\n    let l;\n    a.top > 0 ? l = Math.abs(r.top) - Math.abs(a.top) : l = Math.abs(r.top) + a.height, window.scrollBy(0, -1 * l), this.api.blocks.move(e - 1), this.api.toolbar.toggleBlockSettings(!0);\n  }\n}\nSt.isTune = !0;\nvar ui = Object.defineProperty,\n  pi = Object.getOwnPropertyDescriptor,\n  fi = (s, e, t, o) => {\n    for (var i = o > 1 ? void 0 : o ? pi(e, t) : e, n = s.length - 1, r; n >= 0; n--) (r = s[n]) && (i = (o ? r(e, t, i) : r(i)) || i);\n    return o && i && ui(e, t, i), i;\n  };\nclass It extends C {\n  constructor() {\n    super(...arguments), this.stubTool = \"stub\", this.toolsAvailable = new U(), this.toolsUnavailable = new U();\n  }\n  /**\n   * Returns available Tools\n   */\n  get available() {\n    return this.toolsAvailable;\n  }\n  /**\n   * Returns unavailable Tools\n   */\n  get unavailable() {\n    return this.toolsUnavailable;\n  }\n  /**\n   * Return Tools for the Inline Toolbar\n   */\n  get inlineTools() {\n    return this.available.inlineTools;\n  }\n  /**\n   * Return editor block tools\n   */\n  get blockTools() {\n    return this.available.blockTools;\n  }\n  /**\n   * Return available Block Tunes\n   *\n   * @returns {object} - object of Inline Tool's classes\n   */\n  get blockTunes() {\n    return this.available.blockTunes;\n  }\n  /**\n   * Returns default Tool object\n   */\n  get defaultTool() {\n    return this.blockTools.get(this.config.defaultBlock);\n  }\n  /**\n   * Returns internal tools\n   */\n  get internal() {\n    return this.available.internalTools;\n  }\n  /**\n   * Creates instances via passed or default configuration\n   *\n   * @returns {Promise<void>}\n   */\n  async prepare() {\n    if (this.validateTools(), this.config.tools = Se({}, this.internalTools, this.config.tools), !Object.prototype.hasOwnProperty.call(this.config, \"tools\") || Object.keys(this.config.tools).length === 0) throw Error(\"Can't start without tools\");\n    const e = this.prepareConfig();\n    this.factory = new hi(e, this.config, this.Editor.API);\n    const t = this.getListOfPrepareFunctions(e);\n    if (t.length === 0) return Promise.resolve();\n    await Dt(t, o => {\n      this.toolPrepareMethodSuccess(o);\n    }, o => {\n      this.toolPrepareMethodFallback(o);\n    }), this.prepareBlockTools();\n  }\n  getAllInlineToolsSanitizeConfig() {\n    const e = {};\n    return Array.from(this.inlineTools.values()).forEach(t => {\n      Object.assign(e, t.sanitizeConfig);\n    }), e;\n  }\n  /**\n   * Calls each Tool reset method to clean up anything set by Tool\n   */\n  destroy() {\n    Object.values(this.available).forEach(async e => {\n      D(e.reset) && (await e.reset());\n    });\n  }\n  /**\n   * Returns internal tools\n   * Includes Bold, Italic, Link and Paragraph\n   */\n  get internalTools() {\n    return {\n      bold: {\n        class: We,\n        isInternal: !0\n      },\n      italic: {\n        class: Ye,\n        isInternal: !0\n      },\n      link: {\n        class: Ke,\n        isInternal: !0\n      },\n      paragraph: {\n        class: ri,\n        inlineToolbar: !0,\n        isInternal: !0\n      },\n      stub: {\n        class: Et,\n        isInternal: !0\n      },\n      moveUp: {\n        class: St,\n        isInternal: !0\n      },\n      delete: {\n        class: Ct,\n        isInternal: !0\n      },\n      moveDown: {\n        class: Tt,\n        isInternal: !0\n      }\n    };\n  }\n  /**\n   * Tool prepare method success callback\n   *\n   * @param {object} data - append tool to available list\n   */\n  toolPrepareMethodSuccess(e) {\n    const t = this.factory.get(e.toolName);\n    if (t.isInline()) {\n      const i = [\"render\", \"surround\", \"checkState\"].filter(n => !t.create()[n]);\n      if (i.length) {\n        L(\"Incorrect Inline Tool: \".concat(t.name, \". Some of required methods is not implemented %o\"), \"warn\", i), this.toolsUnavailable.set(t.name, t);\n        return;\n      }\n    }\n    this.toolsAvailable.set(t.name, t);\n  }\n  /**\n   * Tool prepare method fail callback\n   *\n   * @param {object} data - append tool to unavailable list\n   */\n  toolPrepareMethodFallback(e) {\n    this.toolsUnavailable.set(e.toolName, this.factory.get(e.toolName));\n  }\n  /**\n   * Binds prepare function of plugins with user or default config\n   *\n   * @returns {Array} list of functions that needs to be fired sequentially\n   * @param config - tools config\n   */\n  getListOfPrepareFunctions(e) {\n    const t = [];\n    return Object.entries(e).forEach(_ref40 => {\n      let [o, i] = _ref40;\n      t.push({\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        function: D(i.class.prepare) ? i.class.prepare : () => {},\n        data: {\n          toolName: o,\n          config: i.config\n        }\n      });\n    }), t;\n  }\n  /**\n   * Assign enabled Inline Tools and Block Tunes for Block Tool\n   */\n  prepareBlockTools() {\n    Array.from(this.blockTools.values()).forEach(e => {\n      this.assignInlineToolsToBlockTool(e), this.assignBlockTunesToBlockTool(e);\n    });\n  }\n  /**\n   * Assign enabled Inline Tools for Block Tool\n   *\n   * @param tool - Block Tool\n   */\n  assignInlineToolsToBlockTool(e) {\n    if (this.config.inlineToolbar !== !1) {\n      if (e.enabledInlineTools === !0) {\n        e.inlineTools = new U(Array.isArray(this.config.inlineToolbar) ? this.config.inlineToolbar.map(t => [t, this.inlineTools.get(t)]) : Array.from(this.inlineTools.entries()));\n        return;\n      }\n      Array.isArray(e.enabledInlineTools) && (e.inlineTools = new U(e.enabledInlineTools.map(t => [t, this.inlineTools.get(t)])));\n    }\n  }\n  /**\n   * Assign enabled Block Tunes for Block Tool\n   *\n   * @param tool — Block Tool\n   */\n  assignBlockTunesToBlockTool(e) {\n    if (e.enabledBlockTunes !== !1) {\n      if (Array.isArray(e.enabledBlockTunes)) {\n        const t = new U(e.enabledBlockTunes.map(o => [o, this.blockTunes.get(o)]));\n        e.tunes = new U([...t, ...this.blockTunes.internalTools]);\n        return;\n      }\n      if (Array.isArray(this.config.tunes)) {\n        const t = new U(this.config.tunes.map(o => [o, this.blockTunes.get(o)]));\n        e.tunes = new U([...t, ...this.blockTunes.internalTools]);\n        return;\n      }\n      e.tunes = this.blockTunes.internalTools;\n    }\n  }\n  /**\n   * Validate Tools configuration objects and throw Error for user if it is invalid\n   */\n  validateTools() {\n    for (const e in this.config.tools) if (Object.prototype.hasOwnProperty.call(this.config.tools, e)) {\n      if (e in this.internalTools) return;\n      const t = this.config.tools[e];\n      if (!D(t) && !D(t.class)) throw Error(\"Tool \\xAB\".concat(e, \"\\xBB must be a constructor function or an object with function in the \\xABclass\\xBB property\"));\n    }\n  }\n  /**\n   * Unify tools config\n   */\n  prepareConfig() {\n    const e = {};\n    for (const t in this.config.tools) z(this.config.tools[t]) ? e[t] = this.config.tools[t] : e[t] = {\n      class: this.config.tools[t]\n    };\n    return e;\n  }\n}\nfi([ce], It.prototype, \"getAllInlineToolsSanitizeConfig\", 1);\nconst gi = \":root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:\\\"\\\\feff\\\"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;-webkit-transform:translateX(-50%) translateY(8px) scale(.94);transform:translate(-50%) translateY(8px) scale(.94);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translate(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.94);transform:translate(-23px) translateY(8px) scale(.94)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translate(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.94);transform:translate(-100%) translateY(8px) scale(.94);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translate(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:\\\"\\\";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:\\\"\\\";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width: 651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:\\\"\\\";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}\\n\";\nclass bi extends C {\n  constructor() {\n    super(...arguments), this.isMobile = !1, this.contentRectCache = void 0, this.resizeDebouncer = Ht(() => {\n      this.windowResize();\n    }, 200);\n  }\n  /**\n   * Editor.js UI CSS class names\n   *\n   * @returns {{editorWrapper: string, editorZone: string}}\n   */\n  get CSS() {\n    return {\n      editorWrapper: \"codex-editor\",\n      editorWrapperNarrow: \"codex-editor--narrow\",\n      editorZone: \"codex-editor__redactor\",\n      editorZoneHidden: \"codex-editor__redactor--hidden\",\n      editorEmpty: \"codex-editor--empty\",\n      editorRtlFix: \"codex-editor--rtl\"\n    };\n  }\n  /**\n   * Return Width of center column of Editor\n   *\n   * @returns {DOMRect}\n   */\n  get contentRect() {\n    if (this.contentRectCache) return this.contentRectCache;\n    const e = this.nodes.wrapper.querySelector(\".\".concat(F.CSS.content));\n    return e ? (this.contentRectCache = e.getBoundingClientRect(), this.contentRectCache) : {\n      width: 650,\n      left: 0,\n      right: 0\n    };\n  }\n  /**\n   * Making main interface\n   */\n  async prepare() {\n    this.checkIsMobile(), this.make(), this.loadStyles();\n  }\n  /**\n   * Toggle read-only state\n   *\n   * If readOnly is true:\n   *  - removes all listeners from main UI module elements\n   *\n   * if readOnly is false:\n   *  - enables all listeners to UI module elements\n   *\n   * @param {boolean} readOnlyEnabled - \"read only\" state\n   */\n  toggleReadOnly(e) {\n    e ? this.disableModuleBindings() : this.enableModuleBindings();\n  }\n  /**\n   * Check if Editor is empty and set CSS class to wrapper\n   */\n  checkEmptiness() {\n    const {\n      BlockManager: e\n    } = this.Editor;\n    this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty, e.isEditorEmpty);\n  }\n  /**\n   * Check if one of Toolbar is opened\n   * Used to prevent global keydowns (for example, Enter) conflicts with Enter-on-toolbar\n   *\n   * @returns {boolean}\n   */\n  get someToolbarOpened() {\n    const {\n      Toolbar: e,\n      BlockSettings: t,\n      InlineToolbar: o,\n      ConversionToolbar: i\n    } = this.Editor;\n    return t.opened || o.opened || i.opened || e.toolbox.opened;\n  }\n  /**\n   * Check for some Flipper-buttons is under focus\n   */\n  get someFlipperButtonFocused() {\n    return this.Editor.Toolbar.toolbox.hasFocus() ? !0 : Object.entries(this.Editor).filter(_ref41 => {\n      let [e, t] = _ref41;\n      return t.flipper instanceof G;\n    }).some(_ref42 => {\n      let [e, t] = _ref42;\n      return t.flipper.hasFocus();\n    });\n  }\n  /**\n   * Clean editor`s UI\n   */\n  destroy() {\n    this.nodes.holder.innerHTML = \"\";\n  }\n  /**\n   * Close all Editor's toolbars\n   */\n  closeAllToolbars() {\n    const {\n      Toolbar: e,\n      BlockSettings: t,\n      InlineToolbar: o,\n      ConversionToolbar: i\n    } = this.Editor;\n    t.close(), o.close(), i.close(), e.toolbox.close();\n  }\n  /**\n   * Check for mobile mode and cache a result\n   */\n  checkIsMobile() {\n    this.isMobile = window.innerWidth < rt;\n  }\n  /**\n   * Makes Editor.js interface\n   */\n  make() {\n    this.nodes.holder = d.getHolder(this.config.holder), this.nodes.wrapper = d.make(\"div\", [this.CSS.editorWrapper, ...(this.isRtl ? [this.CSS.editorRtlFix] : [])]), this.nodes.redactor = d.make(\"div\", this.CSS.editorZone), this.nodes.holder.offsetWidth < this.contentRect.width && this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow), this.nodes.redactor.style.paddingBottom = this.config.minHeight + \"px\", this.nodes.wrapper.appendChild(this.nodes.redactor), this.nodes.holder.appendChild(this.nodes.wrapper);\n  }\n  /**\n   * Appends CSS\n   */\n  loadStyles() {\n    const e = \"editor-js-styles\";\n    if (d.get(e)) return;\n    const t = d.make(\"style\", null, {\n      id: e,\n      textContent: gi.toString()\n    });\n    d.prepend(document.head, t);\n  }\n  /**\n   * Bind events on the Editor.js interface\n   */\n  enableModuleBindings() {\n    this.readOnlyMutableListeners.on(this.nodes.redactor, \"click\", e => {\n      this.redactorClicked(e);\n    }, !1), this.readOnlyMutableListeners.on(this.nodes.redactor, \"mousedown\", e => {\n      this.documentTouched(e);\n    }, !0), this.readOnlyMutableListeners.on(this.nodes.redactor, \"touchstart\", e => {\n      this.documentTouched(e);\n    }, !0), this.readOnlyMutableListeners.on(document, \"keydown\", e => {\n      this.documentKeydown(e);\n    }, !0), this.readOnlyMutableListeners.on(document, \"mousedown\", e => {\n      this.documentClicked(e);\n    }, !0), this.readOnlyMutableListeners.on(document, \"selectionchange\", () => {\n      this.selectionChanged();\n    }, !0), this.readOnlyMutableListeners.on(window, \"resize\", () => {\n      this.resizeDebouncer();\n    }, {\n      passive: !0\n    }), this.watchBlockHoveredEvents();\n  }\n  /**\n   * Listen redactor mousemove to emit 'block-hovered' event\n   */\n  watchBlockHoveredEvents() {\n    let e;\n    this.readOnlyMutableListeners.on(this.nodes.redactor, \"mousemove\", Ce(t => {\n      const o = t.target.closest(\".ce-block\");\n      this.Editor.BlockSelection.anyBlockSelected || o && e !== o && (e = o, this.eventsDispatcher.emit(kt, {\n        block: this.Editor.BlockManager.getBlockByChildNode(o)\n      }));\n    }, 20), {\n      passive: !0\n    });\n  }\n  /**\n   * Unbind events on the Editor.js interface\n   */\n  disableModuleBindings() {\n    this.readOnlyMutableListeners.clearAll();\n  }\n  /**\n   * Resize window handler\n   */\n  windowResize() {\n    this.contentRectCache = null, this.checkIsMobile();\n  }\n  /**\n   * All keydowns on document\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  documentKeydown(e) {\n    switch (e.keyCode) {\n      case B.ENTER:\n        this.enterPressed(e);\n        break;\n      case B.BACKSPACE:\n      case B.DELETE:\n        this.backspacePressed(e);\n        break;\n      case B.ESC:\n        this.escapePressed(e);\n        break;\n      default:\n        this.defaultBehaviour(e);\n        break;\n    }\n  }\n  /**\n   * Ignore all other document's keydown events\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  defaultBehaviour(e) {\n    const {\n        currentBlock: t\n      } = this.Editor.BlockManager,\n      o = e.target.closest(\".\".concat(this.CSS.editorWrapper)),\n      i = e.altKey || e.ctrlKey || e.metaKey || e.shiftKey;\n    if (t !== void 0 && o === null) {\n      this.Editor.BlockEvents.keydown(e);\n      return;\n    }\n    o || t && i || (this.Editor.BlockManager.dropPointer(), this.Editor.Toolbar.close());\n  }\n  /**\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  backspacePressed(e) {\n    const {\n      BlockManager: t,\n      BlockSelection: o,\n      Caret: i\n    } = this.Editor;\n    if (o.anyBlockSelected && !m.isSelectionExists) {\n      const n = t.removeSelectedBlocks();\n      i.setToBlock(t.insertDefaultBlockAtIndex(n, !0), i.positions.START), o.clearSelection(e), e.preventDefault(), e.stopPropagation(), e.stopImmediatePropagation();\n    }\n  }\n  /**\n   * Escape pressed\n   * If some of Toolbar components are opened, then close it otherwise close Toolbar\n   *\n   * @param {Event} event - escape keydown event\n   */\n  escapePressed(e) {\n    this.Editor.BlockSelection.clearSelection(e), this.Editor.Toolbar.toolbox.opened ? (this.Editor.Toolbar.toolbox.close(), this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock)) : this.Editor.BlockSettings.opened ? this.Editor.BlockSettings.close() : this.Editor.ConversionToolbar.opened ? this.Editor.ConversionToolbar.close() : this.Editor.InlineToolbar.opened ? this.Editor.InlineToolbar.close() : this.Editor.Toolbar.close();\n  }\n  /**\n   * Enter pressed on document\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  enterPressed(e) {\n    const {\n        BlockManager: t,\n        BlockSelection: o\n      } = this.Editor,\n      i = t.currentBlockIndex >= 0;\n    if (o.anyBlockSelected && !m.isSelectionExists) {\n      o.clearSelection(e), e.preventDefault(), e.stopImmediatePropagation(), e.stopPropagation();\n      return;\n    }\n    if (!this.someToolbarOpened && i && e.target.tagName === \"BODY\") {\n      const n = this.Editor.BlockManager.insert();\n      this.Editor.Caret.setToBlock(n), this.Editor.BlockManager.highlightCurrentNode(), this.Editor.Toolbar.moveAndOpen(n);\n    }\n    this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * All clicks on document\n   *\n   * @param {MouseEvent} event - Click event\n   */\n  documentClicked(e) {\n    if (!e.isTrusted) return;\n    const t = e.target;\n    this.nodes.holder.contains(t) || m.isAtEditor || (this.Editor.BlockManager.dropPointer(), this.Editor.Toolbar.close());\n    const i = this.Editor.BlockSettings.nodes.wrapper.contains(t),\n      n = this.Editor.Toolbar.nodes.settingsToggler.contains(t),\n      r = i || n;\n    if (this.Editor.BlockSettings.opened && !r) {\n      this.Editor.BlockSettings.close();\n      const a = this.Editor.BlockManager.getBlockByChildNode(t);\n      this.Editor.Toolbar.moveAndOpen(a);\n    }\n    this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * First touch on editor\n   * Fired before click\n   *\n   * Used to change current block — we need to do it before 'selectionChange' event.\n   * Also:\n   * - Move and show the Toolbar\n   * - Set a Caret\n   *\n   * @param {MouseEvent | TouchEvent} event - touch or mouse event\n   */\n  documentTouched(e) {\n    let t = e.target;\n    if (t === this.nodes.redactor) {\n      const o = e instanceof MouseEvent ? e.clientX : e.touches[0].clientX,\n        i = e instanceof MouseEvent ? e.clientY : e.touches[0].clientY;\n      t = document.elementFromPoint(o, i);\n    }\n    try {\n      this.Editor.BlockManager.setCurrentBlockByChildNode(t), this.Editor.BlockManager.highlightCurrentNode();\n    } catch {\n      this.Editor.RectangleSelection.isRectActivated() || this.Editor.Caret.setToTheLastBlock();\n    }\n    this.Editor.Toolbar.moveAndOpen();\n  }\n  /**\n   * All clicks on the redactor zone\n   *\n   * @param {MouseEvent} event - click event\n   * @description\n   * - By clicks on the Editor's bottom zone:\n   *      - if last Block is empty, set a Caret to this\n   *      - otherwise, add a new empty Block and set a Caret to that\n   */\n  redactorClicked(e) {\n    const {\n      BlockSelection: t\n    } = this.Editor;\n    if (!m.isCollapsed) return;\n    const o = () => {\n        e.stopImmediatePropagation(), e.stopPropagation();\n      },\n      i = e.target,\n      n = e.metaKey || e.ctrlKey;\n    if (d.isAnchor(i) && n) {\n      o();\n      const u = i.getAttribute(\"href\"),\n        h = zt(u);\n      $t(h);\n      return;\n    }\n    const r = this.Editor.BlockManager.getBlockByIndex(-1),\n      a = d.offset(r.holder).bottom,\n      l = e.pageY;\n    if (e.target instanceof Element && e.target.isEqualNode(this.nodes.redactor) &&\n    /**\n    * If there is cross block selection started, target will be equal to redactor so we need additional check\n    */\n    !t.anyBlockSelected &&\n    /**\n    * Prevent caret jumping (to last block) when clicking between blocks\n    */\n    a < l) {\n      o();\n      const {\n        BlockManager: u,\n        Caret: h,\n        Toolbar: f\n      } = this.Editor;\n      (!u.lastBlock.tool.isDefault || !u.lastBlock.isEmpty) && u.insertAtEnd(), h.setToTheLastBlock(), f.moveAndOpen(u.lastBlock);\n    }\n  }\n  /**\n   * Handle selection changes on mobile devices\n   * Uses for showing the Inline Toolbar\n   */\n  selectionChanged() {\n    const {\n        CrossBlockSelection: e,\n        BlockSelection: t\n      } = this.Editor,\n      o = m.anchorElement;\n    if (e.isCrossBlockSelectionStarted && t.anyBlockSelected && m.get().removeAllRanges(), !o) {\n      m.range || this.Editor.InlineToolbar.close();\n      return;\n    }\n    const i = o.closest(\".\".concat(F.CSS.content)) === null;\n    if (i && (this.Editor.InlineToolbar.containsNode(o) || this.Editor.InlineToolbar.close(), !(o.dataset.inlineToolbar === \"true\"))) return;\n    this.Editor.BlockManager.currentBlock || this.Editor.BlockManager.setCurrentBlockByChildNode(o);\n    const n = i !== !0;\n    this.Editor.InlineToolbar.tryToShow(!0, n);\n  }\n}\nconst mi = {\n  // API Modules\n  BlocksAPI: Qt,\n  CaretAPI: eo,\n  EventsAPI: to,\n  I18nAPI: Pe,\n  API: oo,\n  InlineToolbarAPI: io,\n  ListenersAPI: no,\n  NotifierAPI: lo,\n  ReadOnlyAPI: co,\n  SanitizerAPI: mo,\n  SaverAPI: ko,\n  SelectionAPI: vo,\n  StylesAPI: xo,\n  ToolbarAPI: wo,\n  TooltipAPI: Bo,\n  UiAPI: To,\n  // Toolbar Modules\n  BlockSettings: jo,\n  ConversionToolbar: Y,\n  Toolbar: Ko,\n  InlineToolbar: Xo,\n  // Modules\n  BlockEvents: Vo,\n  BlockManager: Go,\n  BlockSelection: Jo,\n  Caret: ve,\n  CrossBlockSelection: Qo,\n  DragNDrop: ei,\n  ModificationsObserver: ti,\n  Paste: yt,\n  ReadOnly: oi,\n  RectangleSelection: fe,\n  Renderer: ii,\n  Saver: ni,\n  Tools: It,\n  UI: bi\n};\nclass ki {\n  /**\n   * @param {EditorConfig} config - user configuration\n   */\n  constructor(e) {\n    this.moduleInstances = {}, this.eventsDispatcher = new we();\n    let t, o;\n    this.isReady = new Promise((i, n) => {\n      t = i, o = n;\n    }), Promise.resolve().then(async () => {\n      this.configuration = e, this.validate(), this.init(), await this.start(), await this.render();\n      const {\n        BlockManager: i,\n        Caret: n,\n        UI: r,\n        ModificationsObserver: a\n      } = this.moduleInstances;\n      r.checkEmptiness(), a.enable(), this.configuration.autofocus && (n.setToBlock(i.blocks[0], n.positions.START), i.highlightCurrentNode()), t();\n    }).catch(i => {\n      L(\"Editor.js is not ready because of \".concat(i), \"error\"), o(i);\n    });\n  }\n  /**\n   * Setting for configuration\n   *\n   * @param {EditorConfig|string} config - Editor's config to set\n   */\n  set configuration(e) {\n    var o, i;\n    z(e) ? this.config = {\n      ...e\n    } : this.config = {\n      holder: e\n    }, Ie(!!this.config.holderId, \"config.holderId\", \"config.holder\"), this.config.holderId && !this.config.holder && (this.config.holder = this.config.holderId, this.config.holderId = null), this.config.holder == null && (this.config.holder = \"editorjs\"), this.config.logLevel || (this.config.logLevel = it.VERBOSE), Nt(this.config.logLevel), Ie(!!this.config.initialBlock, \"config.initialBlock\", \"config.defaultBlock\"), this.config.defaultBlock = this.config.defaultBlock || this.config.initialBlock || \"paragraph\", this.config.minHeight = this.config.minHeight !== void 0 ? this.config.minHeight : 300;\n    const t = {\n      type: this.config.defaultBlock,\n      data: {}\n    };\n    this.config.placeholder = this.config.placeholder || !1, this.config.sanitizer = this.config.sanitizer || {\n      p: !0,\n      b: !0,\n      a: !0\n    }, this.config.hideToolbar = this.config.hideToolbar ? this.config.hideToolbar : !1, this.config.tools = this.config.tools || {}, this.config.i18n = this.config.i18n || {}, this.config.data = this.config.data || {\n      blocks: []\n    }, this.config.onReady = this.config.onReady || (() => {}), this.config.onChange = this.config.onChange || (() => {}), this.config.inlineToolbar = this.config.inlineToolbar !== void 0 ? this.config.inlineToolbar : !0, (V(this.config.data) || !this.config.data.blocks || this.config.data.blocks.length === 0) && (this.config.data = {\n      blocks: [t]\n    }), this.config.readOnly = this.config.readOnly || !1, (o = this.config.i18n) != null && o.messages && $.setDictionary(this.config.i18n.messages), this.config.i18n.direction = ((i = this.config.i18n) == null ? void 0 : i.direction) || \"ltr\";\n  }\n  /**\n   * Returns private property\n   *\n   * @returns {EditorConfig}\n   */\n  get configuration() {\n    return this.config;\n  }\n  /**\n   * Checks for required fields in Editor's config\n   */\n  validate() {\n    const {\n      holderId: e,\n      holder: t\n    } = this.config;\n    if (e && t) throw Error(\"«holderId» and «holder» param can't assign at the same time.\");\n    if (J(t) && !d.get(t)) throw Error(\"element with ID \\xAB\".concat(t, \"\\xBB is missing. Pass correct holder's ID.\"));\n    if (t && z(t) && !d.isElement(t)) throw Error(\"«holder» value must be an Element node\");\n  }\n  /**\n   * Initializes modules:\n   *  - make and save instances\n   *  - configure\n   */\n  init() {\n    this.constructModules(), this.configureModules();\n  }\n  /**\n   * Start Editor!\n   *\n   * Get list of modules that needs to be prepared and return a sequence (Promise)\n   *\n   * @returns {Promise<void>}\n   */\n  async start() {\n    await [\"Tools\", \"UI\", \"BlockManager\", \"Paste\", \"BlockSelection\", \"RectangleSelection\", \"CrossBlockSelection\", \"ReadOnly\"].reduce((t, o) => t.then(async () => {\n      try {\n        await this.moduleInstances[o].prepare();\n      } catch (i) {\n        if (i instanceof lt) throw new Error(i.message);\n        L(\"Module \".concat(o, \" was skipped because of %o\"), \"warn\", i);\n      }\n    }), Promise.resolve());\n  }\n  /**\n   * Render initial data\n   */\n  render() {\n    return this.moduleInstances.Renderer.render(this.config.data.blocks);\n  }\n  /**\n   * Make modules instances and save it to the @property this.moduleInstances\n   */\n  constructModules() {\n    Object.entries(mi).forEach(_ref43 => {\n      let [e, t] = _ref43;\n      try {\n        this.moduleInstances[e] = new t({\n          config: this.configuration,\n          eventsDispatcher: this.eventsDispatcher\n        });\n      } catch (o) {\n        L(\"[constructModules]\", \"Module \".concat(e, \" skipped because\"), \"error\", o);\n      }\n    });\n  }\n  /**\n   * Modules instances configuration:\n   *  - pass other modules to the 'state' property\n   *  - ...\n   */\n  configureModules() {\n    for (const e in this.moduleInstances) Object.prototype.hasOwnProperty.call(this.moduleInstances, e) && (this.moduleInstances[e].state = this.getModulesDiff(e));\n  }\n  /**\n   * Return modules without passed name\n   *\n   * @param {string} name - module for witch modules difference should be calculated\n   */\n  getModulesDiff(e) {\n    const t = {};\n    for (const o in this.moduleInstances) o !== e && (t[o] = this.moduleInstances[o]);\n    return t;\n  }\n}\n/**\n * Editor.js\n *\n * @license Apache-2.0\n * @see Editor.js <https://editorjs.io>\n * @author CodeX Team <https://codex.so>\n */\nclass vi {\n  /** Editor version */\n  static get version() {\n    return \"2.28.2\";\n  }\n  /**\n   * @param {EditorConfig|string|undefined} [configuration] - user configuration\n   */\n  constructor(e) {\n    let t = () => {};\n    z(e) && D(e.onReady) && (t = e.onReady);\n    const o = new ki(e);\n    this.isReady = o.isReady.then(() => {\n      this.exportAPI(o), t();\n    });\n  }\n  /**\n   * Export external API methods\n   *\n   * @param {Core} editor — Editor's instance\n   */\n  exportAPI(e) {\n    const t = [\"configuration\"],\n      o = () => {\n        Object.values(e.moduleInstances).forEach(n => {\n          D(n.destroy) && n.destroy(), n.listeners.removeAll();\n        }), e = null;\n        for (const n in this) Object.prototype.hasOwnProperty.call(this, n) && delete this[n];\n        Object.setPrototypeOf(this, null);\n      };\n    t.forEach(n => {\n      this[n] = e[n];\n    }), this.destroy = o, Object.setPrototypeOf(this, e.moduleInstances.API.methods), delete this.exportAPI, Object.entries({\n      blocks: {\n        clear: \"clear\",\n        render: \"render\"\n      },\n      caret: {\n        focus: \"focus\"\n      },\n      events: {\n        on: \"on\",\n        off: \"off\",\n        emit: \"emit\"\n      },\n      saver: {\n        save: \"save\"\n      }\n    }).forEach(_ref44 => {\n      let [n, r] = _ref44;\n      Object.entries(r).forEach(_ref45 => {\n        let [a, l] = _ref45;\n        this[l] = e.moduleInstances.API.methods[n][a];\n      });\n    });\n  }\n}\nexport { vi as default };","map":{"version":3,"names":["Ot","globalThis","window","global","self","xe","s","__esModule","Object","prototype","hasOwnProperty","call","default","Be","assign","register","revert","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","e","document","ownerDocument","querySelectorAll","t","length","item","closest","documentElement","contains","parentElement","parentNode","prepend","createDocumentFragment","Array","isArray","forEach","o","i","Node","appendChild","createTextNode","insertBefore","firstChild","scrollIntoViewIfNeeded","arguments","getComputedStyle","parseInt","getPropertyValue","n","offsetTop","scrollTop","r","clientHeight","a","offsetLeft","scrollLeft","l","clientWidth","c","scrollIntoView","requestIdleCallback","Date","now","setTimeout","didTimeout","timeRemaining","Math","max","cancelIdleCallback","clearTimeout","At","undefined","crypto","getRandomValues","Uint8Array","reduce","toString","toUpperCase","it","VERBOSE","INFO","WARN","ERROR","B","BACKSPACE","TAB","ENTER","SHIFT","CTRL","ALT","ESC","SPACE","LEFT","UP","DOWN","RIGHT","DELETE","META","_t","WHEEL","BACKWARD","FORWARD","be","console","includes","logLevel","push","unshift","concat","Nt","L","bind","K","oe","match","toLowerCase","D","z","J","Rt","qe","Ze","V","keys","constructor","nt","Dt","function","data","Promise","resolve","st","slice","re","apply","Pt","name","split","pop","Ft","test","Ht","_this","_len","_key","Ce","leading","u","trailing","jt","win","mac","x11","linux","find","navigator","appVersion","indexOf","ae","Se","_len2","_key2","shift","Re","replace","zt","URL","href","substring","location","protocol","origin","Ut","$t","open","Wt","floor","random","Ie","ce","value","_len3","_key3","set","rt","te","matchMedia","Ge","platform","maxTouchPoints","Yt","JSON","stringify","d","isSingleTag","tagName","isLineBreakTag","make","createElement","classList","add","text","append","reverse","swap","removeChild","querySelector","get","getElementById","findAll","allInputsSelector","map","join","findAllInputs","isNativeInput","containsOnlyInlineElements","getDeepestBlockElements","getDeepestNode","nodeType","ELEMENT_NODE","isElement","isFragment","DOCUMENT_FRAGMENT_NODE","isContentEditable","contentEditable","canSetCaret","type","isNodeEmpty","textContent","trim","isLeaf","childNodes","isEmpty","normalize","from","isHTMLString","innerHTML","childElementCount","getContentLength","TEXT_NODE","blockElements","children","every","getHolder","isAnchor","offset","getBoundingClientRect","pageXOffset","pageYOffset","top","left","bottom","height","right","width","Kt","blockTunes","toggler","inlineToolbar","converter","toolbar","toolbox","Add","popover","Filter","Xt","Text","Link","Bold","Italic","Vt","link","stub","qt","delete","Delete","moveUp","moveDown","at","ui","toolNames","tools","ie","setDictionary","currentDictionary","getNamespace","$","lt","Error","we","subscribers","on","once","splice","emit","off","warn","destroy","ee","setPrototypeOf","id","config","holder","selected","stretched","save","validate","dispatchChange","De","allListeners","element","eventType","handler","options","findOne","addEventListener","removeEventListener","offById","findById","findByEventTarget","filter","removeAll","findByType","findByHandler","C","_ref","_this2","eventsDispatcher","nodes","listeners","readOnlyMutableListeners","mutableListenerIds","clearAll","new","target","TypeError","state","Editor","removeAllNodes","HTMLElement","remove","isRtl","i18n","direction","m","instance","selection","savedSelectionRange","isFakeBackgroundEnabled","commandBackground","commandRemoveFormat","CSS","editorWrapper","editorZone","anchorNode","getSelection","anchorElement","anchorOffset","isCollapsed","isAtEditor","isSelectionAtEditor","focusNode","isRangeAtEditor","startContainer","isSelectionExists","range","getRangeFromSelection","rangeCount","getRangeAt","rect","x","y","createRange","boundingLeft","boundingTop","boundingWidth","boundingHeight","isNaN","cloneRange","insertNode","setCursor","focus","selectionStart","selectionEnd","setStart","setEnd","removeAllRanges","addRange","isRangeInsideContainer","addFakeCursor","dataset","mutationFree","collapse","isFakeCursorInsideContainer","removeFakeCursor","body","removeFakeBackground","execCommand","setFakeBackground","restore","clearSaved","collapseToEnd","selectNodeContents","findParentTag","expandToTag","Zt","addedNodes","removedNodes","some","Me","ct","dt","ht","Je","mergeable","Gt","export","Jt","import","q","APPEND_CALLBACK","RENDERED","MOVED","UPDATED","REMOVED","ON_PASTE","F","_ref2","_this3","tool","api","readOnly","tunesData","this","cachedInputs","toolRenderedElement","tunesInstances","Map","defaultTunesInstances","unavailableTunesData","inputIndex","editorEventBus","handleFocus","dropInputsCache","updateCurrentInput","didMutated","InputEvent","detectToolRootChange","h","k","p","v","A","_","settings","blockAPI","toolInstance","create","tunes","composeTunes","compose","watchBlockMutations","addInputEvents","wrapper","wrapperStretched","content","focused","dropTarget","inputs","currentInput","findIndex","firstInput","lastInput","nextInput","previousInput","then","sanitize","sanitizeConfig","merge","pluginsContent","hasMedia","toggle","message","mergeWith","entries","_ref3","performance","time","catch","Function","getTunes","renderSettings","values","render","flat","activeElement","unwatchBlockMutations","removeInputEvents","getActiveToolboxEntry","_ref4","exportDataAsString","conversionConfig","wrap","isInternal","_ref5","has","redactorDomChangedCallback","mutations","Qt","_this4","insert","defaultBlock","BlockManager","index","needToFocus","composeBlockData","Tools","blockTools","API","update","getBlockById","convert","f","Boolean","insertMany","blocks","validateIndex","_ref6","composeBlock","methods","_this5","clear","renderFromHTML","move","getBlockByIndex","getById","getCurrentBlockIndex","getBlockIndex","getBlocksCount","stretchBlock","insertNewBlock","currentBlockIndex","removeBlock","currentBlock","Caret","setToBlock","positions","END","Toolbar","close","InlineToolbar","ModificationsObserver","disable","Renderer","enable","Paste","processText","eo","_this6","setToFirstBlock","DEFAULT","firstBlock","setToLastBlock","lastBlock","setToPreviousBlock","previousBlock","setToNextBlock","nextBlock","START","to","Pe","isTune","getMethodsForTool","oo","BlocksAPI","caret","CaretAPI","events","EventsAPI","ListenersAPI","notifier","NotifierAPI","sanitizer","SanitizerAPI","saver","SaverAPI","SelectionAPI","styles","StylesAPI","classes","ToolbarAPI","InlineToolbarAPI","tooltip","TooltipAPI","I18nAPI","ReadOnlyAPI","UiAPI","io","tryToShow","no","Le","so","exports","defineProperty","enumerable","Symbol","toStringTag","show","getWrapper","confirm","prompt","alert","hmr","transform","insertInto","locals","btoa","unescape","encodeURIComponent","sources","sourceRoot","all","atob","b","g","E","T","O","HTMLIFrameElement","contentDocument","head","refs","S","parts","H","base","M","css","media","sourceMap","insertAt","nextSibling","before","N","attrs","setAttribute","singleton","R","createObjectURL","revokeObjectURL","Blob","W","rel","de","Q","Ee","Mt","convertToAbsoluteUrls","Lt","Ve","styleSheet","cssText","DEBUG","w","I","host","pathname","style","cancelHandler","okHandler","okText","cancelText","placeholder","inputType","ro","ao","lo","_ref7","co","isEnabled","ReadOnly","Oe","ho","tags","nodeName","clean","implementation","createHTMLDocument","_sanitize","previousElementSibling","nextElementSibling","COMMENT_NODE","keepNestedBlockElements","attributes","removeAttribute","createTreeWalker","NodeFilter","SHOW_TEXT","SHOW_ELEMENT","SHOW_COMMENT","uo","ut","Fe","Z","po","fo","go","bo","mo","ko","reject","Saver","vo","xo","block","inlineToolButton","inlineToolButtonActive","input","loader","button","settingsButton","settingsButtonActive","wo","toggleBlockSettings","toggleToolbox","moveAndOpen","BlockSettings","opened","Ae","yo","showed","offsetRight","hidingDelay","handleWindowScroll","hide","loadStyles","prepare","passive","tooltipContent","tooltipShown","placement","hidingTimeout","marginTop","marginLeft","marginRight","marginBottom","delay","placeTop","placeLeft","placeRight","placeBottom","showingTimeout","onHover","offsetWidth","applyPlacement","offsetHeight","Eo","He","lib","Bo","_ref8","To","editorNodes","UI","redactor","pt","_ref9","X","Co","So","ft","Io","Mo","Lo","Oo","Qe","Ao","_o","No","Ro","Do","P","root","icon","confirmationState","removeSpecialFocusBehavior","noFocus","removeSpecialHoverBehavior","noHover","onErrorAnimationEnd","wobbleAnimation","params","isDisabled","title","closeOnActivate","isConfirmationStateEnabled","isFocused","container","secondaryTitle","active","disabled","hidden","getElement","handleClick","activateOrEnableConfirmationMode","toggleActive","toggleHidden","reset","disableConfirmationMode","onFocus","disableSpecialHoverAndFocusBehavior","itemName","secondaryLabel","isActive","enableConfirmationMode","confirmation","enableSpecialHoverAndFocusBehavior","onActivate","animateError","he","cursor","items","focusedCssClass","currentItem","dropCursor","setItems","next","leafNodesAndReturnIndex","directions","previous","ne","G","iterator","activated","flipCallbacks","onKeyDown","isEventReadyForHandling","usedKeys","keyCode","preventDefault","handleTabPress","flipLeft","flipRight","handleEnterPress","focusedItemClass","activateCallback","allowedKeys","isActivated","activate","deactivate","focusFirst","flipCallback","hasFocus","onFlip","removeOnFlip","shiftKey","stopPropagation","click","pe","_ref10","onSearch","searchQuery","foundItems","checkItem","ue","lock","lockHard","scrollLocked","unlock","unlockHard","scrollPosition","setProperty","scrollLockedHard","scrollTo","gt","Po","Fo","getOwnPropertyDescriptor","Ho","ge","Close","j","scopeElement","scrollLocker","nothingFoundMessage","customContent","overlay","messages","nothingFound","search","customContentFlippableItems","addCustomContent","searchable","addSearch","initializeFlipper","popoverOpenTop","popoverOpened","nothingFoundMessageDisplayed","customContentHidden","overlayHidden","flipper","shouldOpenBottom","flippableElements","getTargetItem","handleItemClick","toggleNothingFoundMessage","toggleCustomContent","composedPath","toggleItemActivenessIfNeeded","cloneNode","visibility","position","min","innerHeight","je","jo","onPopoverClose","closed","BlockSelection","clearCache","resolveTuneAliases","getControls","CrossBlockSelection","isCrossBlockSelectionStarted","label","Y","togglingCallback","conversionToolbarWrapper","conversionToolbarShowed","conversionToolbarTools","conversionToolbarLabel","conversionTool","conversionToolHidden","conversionToolIcon","conversionToolSecondaryLabel","conversionToolFocused","conversionToolActive","editorRtlFix","addTools","enableFlipper","filterTools","requestAnimationFrame","hasTools","replaceWithBlock","clearSelection","_ref11","addToolIfValid","addTool","shortcut","innerText","toolboxItem","_e","zo","configurable","writable","key","commands","parseShortcutName","callback","executeShortcut","execute","CMD","U","ESCAPE","INSERT","supportedCommands","ctrlKey","metaKey","altKey","keyCodes","Uo","$o","registeredShortcuts","findShortcut","_ref12","le","Wo","Yo","bt","me","Opened","Closed","BlockAdded","mt","_ref13","i18nLabels","toolsToBeDisplayed","toolboxItemsToBeDisplayed","enableShortcuts","removeAllShortcuts","toolButtonActivated","enableShortcutForTool","ze","kt","Ko","_ref14","toolboxInstance","actions","actionsOpened","toolbarOpened","openedToolboxHolderModifier","plusButton","plusButtonShortcut","settingsToggler","settingsTogglerHidden","hoveredBlock","blockActions","blockTunesToggler","toggleReadOnly","disableModuleBindings","drawUI","enableModuleBindings","timeout","isMobile","paddingTop","plusButtonClicked","makeToolbox","_ref15","insertAtEnd","settingsTogglerClicked","ye","Block","Inline","Tune","ke","Shortcut","Toolbox","EnabledInlineTools","EnabledBlockTunes","Config","vt","SanitizeConfig","se","IsEnabledLineBreaks","ConversionConfig","IsReadOnlySupported","PasteConfig","Ue","IsInline","Title","xt","IsTune","$e","_ref16","constructable","isDefault","defaultPlaceholder","toolName","isInline","isBlock","Xo","_ref17","inlineToolbarShowed","inlineToolbarLeftOriented","inlineToolbarRightOriented","inlineToolbarShortcut","buttonsWrapper","actionsWrapper","inputField","focusedButton","conversionToggler","conversionTogglerArrow","conversionTogglerHidden","conversionTogglerContent","togglerAndButtonsWrapper","toolbarVerticalMargin","buttonsList","ConversionToolbar","allowedToShow","contentRect","toolsInstances","_ref18","getToolShortcut","addToolsFiltered","buttons","setConversionTogglerContent","containsNode","addConversionToggler","prepareConversionToolbar","recalculateWidth","getBlock","inlineTools","size","renderActions","toolClicked","checkState","internal","enabledInlineTools","surround","checkToolsState","_ref19","Vo","keydown","beforeKeydownProcessing","backspace","enter","arrowRightAndDown","arrowLeftAndUp","tabPressed","needToolbarClosing","clearFocused","keyup","checkEmptiness","activateToolbox","activateBlockSettings","dragOver","getBlockByChildNode","dragLeave","handleCommandC","anyBlockSelected","copySelectedBlocks","handleCommandX","removeSelectedBlocks","insertDefaultBlockAtIndex","isLineBreaksEnabled","someToolbarOpened","someFlipperButtonFocused","isAtStart","isAtEnd","navigatePrevious","mergeBlocks","navigateNext","createShadow","restoreCaret","toggleBlockSelectedState","closeAllToolbars","Te","workingArea","array","Number","Reflect","insertToDOM","composeBlockEvent","fromIndex","toIndex","replaceWith","DocumentFragment","after","insertAfter","insertAdjacentElement","CustomEvent","detail","et","tt","qo","ot","Zo","completed","Go","_currentBlockIndex","_blocks","nextContentfulBlock","previousContentfulBlock","isEditorEmpty","Proxy","BlockEvents","_ref20","bindBlockEvents","blockDidMutated","paste","removeAllBlocks","extractFragmentFromCaretPosition","highlightCurrentNode","setCurrentBlockByChildNode","isEqualNode","dropPointer","event","Jo","anyBlockSelectedCache","needToSelectAll","nativeInputSelected","readyToBlockSelection","sanitizerConfig","h1","h2","h3","h4","h5","h6","ol","ul","li","br","img","src","allBlocksSelected","selectedBlocks","selectAllBlocks","handleCommandA","unSelectBlockByIndex","RectangleSelection","KeyboardEvent","insertContentAtCaretPosition","isRectActivated","clipboardData","setData","MIME_TYPE","selectBlockByIndex","ve","shadowCaret","focusOffset","getHigherLevelSiblings","setToInput","scrollBy","setToTheLastBlock","deleteContents","endContainer","endOffset","extractContents","selectNode","lastChild","Qo","onMouseUp","onMouseOver","relatedTarget","lastSelectedBlock","firstSelectedBlock","toggleBlocksSelectedState","enableCrossBlockSelection","watchSelection","ei","isStartedAtEditor","processDrop","processDragStart","processDragOver","processDataTransfer","dataTransfer","ti","_ref21","batchingTimeout","batchingOnChangeQueue","batchTime","mutationObserver","MutationObserver","redactorChanged","particularBlockChanged","observe","childList","subtree","characterData","disconnect","onChange","wt","toolsTags","tagsByTool","toolsPatterns","toolsFiles","exceptionList","processTool","pasteConfig","onPaste","getTagsConfig","getFilesConfig","getPatternsConfig","handlePasteEvent","isNativeBehaviour","types","processTools","unsetCallback","setCallback","processFiles","files","getData","insertEditorJSData","parse","_this$toolsTags$f$san","sanitizationConfig","getAllInlineToolsSanitizeConfig","processHTML","processPlain","processSingleBlock","processInlinePaste","insertBlock","collectTagNames","extensions","mimeTypes","patterns","_ref22","RegExp","pattern","processFile","_ref23","composePasteEvent","file","getNodes","defaultTool","baseSanitizeConfig","outerHTML","PATTERN_PROCESSING_MAX_LENGTH","processPattern","exec","_ref24","processElementNode","_ref25","_ref26","yt","oi","toolsDontSupportReadOnly","readOnlyEnabled","_ref27","isReadOnlySupported","throwCriticalError","fe","isRectSelectionActivated","SCROLL_SPEED","HEIGHT_OF_SCROLL_ZONE","BOTTOM_SCROLL_ZONE","TOP_SCROLL_ZONE","MAIN_MOUSE_BUTTON","mousedown","isScrolling","inScrollZone","startX","startY","mouseX","mouseY","stackOfSelected","listenerIds","overlayContainer","topScrollZone","bottomScrollZone","startSelection","elementFromPoint","endSelection","overlayRectangle","display","genHTML","processMouseDown","processMouseMove","processMouseLeave","processScroll","processMouseUp","pageX","pageY","changingRectangle","scrollByZones","clientY","scrollVertical","rightPos","leftPos","genInfoForMouseSelection","rectCrossesBlocks","shrinkRectangleToPoint","updateRectangleSize","trySelectNextBlock","inverseSelection","addBlockInSelection","ii","_ref28","available","composeStubDataForTool","stubTool","error","unavailable","savedData","ni","getSavedData","makeOutput","isValid","_ref29","version","Ne","si","identifier","references","updater","nonce","nc","_CSS","onKeyUp","_placeholder","DEFAULT_PLACEHOLDER","_data","_element","_preserveBlank","preserveBlank","code","drawView","hydrate","ri","We","commandName","buttonActive","buttonModifier","queryCommandState","Ye","Ke","_ref30","commandLink","commandUnlink","ENTER_KEY","buttonUnlink","inputShowed","inputOpened","enterPressed","unlink","closeActions","toggleActions","openActions","getAttribute","validateURL","prepareLink","insertLink","stopImmediatePropagation","addProtocol","Et","_ref31","info","subtitle","ai","_ref32","_ref33","_ref34","internalTools","_ref35","externalTools","_ref36","ci","di","Bt","Xe","enabledBlockTunes","_this$constructable$s","hi","editorConfig","class","getConstructor","Tt","_ref37","animation","abs","scrollY","Ct","_ref38","St","_ref39","pi","fi","It","toolsAvailable","toolsUnavailable","validateTools","prepareConfig","factory","getListOfPrepareFunctions","toolPrepareMethodSuccess","toolPrepareMethodFallback","prepareBlockTools","bold","italic","paragraph","_ref40","assignInlineToolsToBlockTool","assignBlockTunesToBlockTool","gi","bi","contentRectCache","resizeDebouncer","windowResize","editorWrapperNarrow","editorZoneHidden","editorEmpty","checkIsMobile","_ref41","_ref42","innerWidth","paddingBottom","minHeight","redactorClicked","documentTouched","documentKeydown","documentClicked","selectionChanged","watchBlockHoveredEvents","backspacePressed","escapePressed","defaultBehaviour","isTrusted","MouseEvent","clientX","touches","mi","DragNDrop","ki","moduleInstances","isReady","configuration","init","start","autofocus","holderId","initialBlock","hideToolbar","onReady","constructModules","configureModules","_ref43","getModulesDiff","vi","exportAPI","_ref44","_ref45"],"sources":["F:/Github/magiqpad/client/node_modules/@editorjs/editorjs/dist/editorjs.mjs"],"sourcesContent":["var Ot = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {};\nfunction xe(s) {\n  return s && s.__esModule && Object.prototype.hasOwnProperty.call(s, \"default\") ? s.default : s;\n}\nfunction Be() {\n}\nObject.assign(Be, {\n  default: Be,\n  register: Be,\n  revert: function() {\n  },\n  __esModule: !0\n});\nElement.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function(s) {\n  const e = (this.document || this.ownerDocument).querySelectorAll(s);\n  let t = e.length;\n  for (; --t >= 0 && e.item(t) !== this; )\n    ;\n  return t > -1;\n});\nElement.prototype.closest || (Element.prototype.closest = function(s) {\n  let e = this;\n  if (!document.documentElement.contains(e))\n    return null;\n  do {\n    if (e.matches(s))\n      return e;\n    e = e.parentElement || e.parentNode;\n  } while (e !== null);\n  return null;\n});\nElement.prototype.prepend || (Element.prototype.prepend = function(e) {\n  const t = document.createDocumentFragment();\n  Array.isArray(e) || (e = [e]), e.forEach((o) => {\n    const i = o instanceof Node;\n    t.appendChild(i ? o : document.createTextNode(o));\n  }), this.insertBefore(t, this.firstChild);\n});\nElement.prototype.scrollIntoViewIfNeeded || (Element.prototype.scrollIntoViewIfNeeded = function(s) {\n  s = arguments.length === 0 ? !0 : !!s;\n  const e = this.parentNode, t = window.getComputedStyle(e, null), o = parseInt(t.getPropertyValue(\"border-top-width\")), i = parseInt(t.getPropertyValue(\"border-left-width\")), n = this.offsetTop - e.offsetTop < e.scrollTop, r = this.offsetTop - e.offsetTop + this.clientHeight - o > e.scrollTop + e.clientHeight, a = this.offsetLeft - e.offsetLeft < e.scrollLeft, l = this.offsetLeft - e.offsetLeft + this.clientWidth - i > e.scrollLeft + e.clientWidth, c = n && !r;\n  (n || r) && s && (e.scrollTop = this.offsetTop - e.offsetTop - e.clientHeight / 2 - o + this.clientHeight / 2), (a || l) && s && (e.scrollLeft = this.offsetLeft - e.offsetLeft - e.clientWidth / 2 - i + this.clientWidth / 2), (n || r || a || l) && !s && this.scrollIntoView(c);\n});\nwindow.requestIdleCallback = window.requestIdleCallback || function(s) {\n  const e = Date.now();\n  return setTimeout(function() {\n    s({\n      didTimeout: !1,\n      timeRemaining: function() {\n        return Math.max(0, 50 - (Date.now() - e));\n      }\n    });\n  }, 1);\n};\nwindow.cancelIdleCallback = window.cancelIdleCallback || function(s) {\n  clearTimeout(s);\n};\nlet At = (s = 21) => crypto.getRandomValues(new Uint8Array(s)).reduce((e, t) => (t &= 63, t < 36 ? e += t.toString(36) : t < 62 ? e += (t - 26).toString(36).toUpperCase() : t > 62 ? e += \"-\" : e += \"_\", e), \"\");\nvar it = /* @__PURE__ */ ((s) => (s.VERBOSE = \"VERBOSE\", s.INFO = \"INFO\", s.WARN = \"WARN\", s.ERROR = \"ERROR\", s))(it || {});\nconst B = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  ESC: 27,\n  SPACE: 32,\n  LEFT: 37,\n  UP: 38,\n  DOWN: 40,\n  RIGHT: 39,\n  DELETE: 46,\n  META: 91\n}, _t = {\n  LEFT: 0,\n  WHEEL: 1,\n  RIGHT: 2,\n  BACKWARD: 3,\n  FORWARD: 4\n};\nfunction be(s, e, t = \"log\", o, i = \"color: inherit\") {\n  if (!(\"console\" in window) || !window.console[t])\n    return;\n  const n = [\"info\", \"log\", \"warn\", \"error\"].includes(t), r = [];\n  switch (be.logLevel) {\n    case \"ERROR\":\n      if (t !== \"error\")\n        return;\n      break;\n    case \"WARN\":\n      if (![\"error\", \"warn\"].includes(t))\n        return;\n      break;\n    case \"INFO\":\n      if (!n || s)\n        return;\n      break;\n  }\n  o && r.push(o);\n  const a = \"Editor.js 2.28.2\", l = `line-height: 1em;\n            color: #006FEA;\n            display: inline-block;\n            font-size: 11px;\n            line-height: 1em;\n            background-color: #fff;\n            padding: 4px 9px;\n            border-radius: 30px;\n            border: 1px solid rgba(56, 138, 229, 0.16);\n            margin: 4px 5px 4px 0;`;\n  s && (n ? (r.unshift(l, i), e = `%c${a}%c ${e}`) : e = `( ${a} )${e}`);\n  try {\n    n ? o ? console[t](`${e} %o`, ...r) : console[t](e, ...r) : console[t](e);\n  } catch {\n  }\n}\nbe.logLevel = \"VERBOSE\";\nfunction Nt(s) {\n  be.logLevel = s;\n}\nconst L = be.bind(window, !1), K = be.bind(window, !0);\nfunction oe(s) {\n  return Object.prototype.toString.call(s).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n}\nfunction D(s) {\n  return oe(s) === \"function\" || oe(s) === \"asyncfunction\";\n}\nfunction z(s) {\n  return oe(s) === \"object\";\n}\nfunction J(s) {\n  return oe(s) === \"string\";\n}\nfunction Rt(s) {\n  return oe(s) === \"boolean\";\n}\nfunction qe(s) {\n  return oe(s) === \"number\";\n}\nfunction Ze(s) {\n  return oe(s) === \"undefined\";\n}\nfunction V(s) {\n  return s ? Object.keys(s).length === 0 && s.constructor === Object : !0;\n}\nfunction nt(s) {\n  return s > 47 && s < 58 || // number keys\n  s === 32 || s === 13 || // Space bar & return key(s)\n  s === 229 || // processing key input for certain languages — Chinese, Japanese, etc.\n  s > 64 && s < 91 || // letter keys\n  s > 95 && s < 112 || // Numpad keys\n  s > 185 && s < 193 || // ;=,-./` (in order)\n  s > 218 && s < 223;\n}\nasync function Dt(s, e = () => {\n}, t = () => {\n}) {\n  async function o(i, n, r) {\n    try {\n      await i.function(i.data), await n(Ze(i.data) ? {} : i.data);\n    } catch {\n      r(Ze(i.data) ? {} : i.data);\n    }\n  }\n  return s.reduce(async (i, n) => (await i, o(n, e, t)), Promise.resolve());\n}\nfunction st(s) {\n  return Array.prototype.slice.call(s);\n}\nfunction re(s, e) {\n  return function() {\n    const t = this, o = arguments;\n    window.setTimeout(() => s.apply(t, o), e);\n  };\n}\nfunction Pt(s) {\n  return s.name.split(\".\").pop();\n}\nfunction Ft(s) {\n  return /^[-\\w]+\\/([-+\\w]+|\\*)$/.test(s);\n}\nfunction Ht(s, e, t) {\n  let o;\n  return (...i) => {\n    const n = this, r = () => {\n      o = null, t || s.apply(n, i);\n    }, a = t && !o;\n    window.clearTimeout(o), o = window.setTimeout(r, e), a && s.apply(n, i);\n  };\n}\nfunction Ce(s, e, t = void 0) {\n  let o, i, n, r = null, a = 0;\n  t || (t = {});\n  const l = function() {\n    a = t.leading === !1 ? 0 : Date.now(), r = null, n = s.apply(o, i), r || (o = i = null);\n  };\n  return function() {\n    const c = Date.now();\n    !a && t.leading === !1 && (a = c);\n    const u = e - (c - a);\n    return o = this, i = arguments, u <= 0 || u > e ? (r && (clearTimeout(r), r = null), a = c, n = s.apply(o, i), r || (o = i = null)) : !r && t.trailing !== !1 && (r = setTimeout(l, u)), n;\n  };\n}\nfunction jt() {\n  const s = {\n    win: !1,\n    mac: !1,\n    x11: !1,\n    linux: !1\n  }, e = Object.keys(s).find((t) => window.navigator.appVersion.toLowerCase().indexOf(t) !== -1);\n  return e && (s[e] = !0), s;\n}\nfunction ae(s) {\n  return s[0].toUpperCase() + s.slice(1);\n}\nfunction Se(s, ...e) {\n  if (!e.length)\n    return s;\n  const t = e.shift();\n  if (z(s) && z(t))\n    for (const o in t)\n      z(t[o]) ? (s[o] || Object.assign(s, { [o]: {} }), Se(s[o], t[o])) : Object.assign(s, { [o]: t[o] });\n  return Se(s, ...e);\n}\nfunction Re(s) {\n  const e = jt();\n  return s = s.replace(/shift/gi, \"⇧\").replace(/backspace/gi, \"⌫\").replace(/enter/gi, \"⏎\").replace(/up/gi, \"↑\").replace(/left/gi, \"→\").replace(/down/gi, \"↓\").replace(/right/gi, \"←\").replace(/escape/gi, \"⎋\").replace(/insert/gi, \"Ins\").replace(/delete/gi, \"␡\").replace(/\\+/gi, \" + \"), e.mac ? s = s.replace(/ctrl|cmd/gi, \"⌘\").replace(/alt/gi, \"⌥\") : s = s.replace(/cmd/gi, \"Ctrl\").replace(/windows/gi, \"WIN\"), s;\n}\nfunction zt(s) {\n  try {\n    return new URL(s).href;\n  } catch {\n  }\n  return s.substring(0, 2) === \"//\" ? window.location.protocol + s : window.location.origin + s;\n}\nfunction Ut() {\n  return At(10);\n}\nfunction $t(s) {\n  window.open(s, \"_blank\");\n}\nfunction Wt(s = \"\") {\n  return `${s}${Math.floor(Math.random() * 1e8).toString(16)}`;\n}\nfunction Ie(s, e, t) {\n  const o = `«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;\n  s && K(o, \"warn\");\n}\nfunction ce(s, e, t) {\n  const o = t.value ? \"value\" : \"get\", i = t[o], n = `#${e}Cache`;\n  if (t[o] = function(...r) {\n    return this[n] === void 0 && (this[n] = i.apply(this, ...r)), this[n];\n  }, o === \"get\" && t.set) {\n    const r = t.set;\n    t.set = function(a) {\n      delete s[n], r.apply(this, a);\n    };\n  }\n  return t;\n}\nconst rt = 650;\nfunction te() {\n  return window.matchMedia(`(max-width: ${rt}px)`).matches;\n}\nconst Ge = typeof window < \"u\" && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === \"MacIntel\" && window.navigator.maxTouchPoints > 1);\nfunction Yt(s, e) {\n  const t = Array.isArray(s) || z(s), o = Array.isArray(e) || z(e);\n  return t || o ? JSON.stringify(s) === JSON.stringify(e) : s === e;\n}\nclass d {\n  /**\n   * Check if passed tag has no closed tag\n   *\n   * @param {HTMLElement} tag - element to check\n   * @returns {boolean}\n   */\n  static isSingleTag(e) {\n    return e.tagName && [\n      \"AREA\",\n      \"BASE\",\n      \"BR\",\n      \"COL\",\n      \"COMMAND\",\n      \"EMBED\",\n      \"HR\",\n      \"IMG\",\n      \"INPUT\",\n      \"KEYGEN\",\n      \"LINK\",\n      \"META\",\n      \"PARAM\",\n      \"SOURCE\",\n      \"TRACK\",\n      \"WBR\"\n    ].includes(e.tagName);\n  }\n  /**\n   * Check if element is BR or WBR\n   *\n   * @param {HTMLElement} element - element to check\n   * @returns {boolean}\n   */\n  static isLineBreakTag(e) {\n    return e && e.tagName && [\n      \"BR\",\n      \"WBR\"\n    ].includes(e.tagName);\n  }\n  /**\n   * Helper for making Elements with class name and attributes\n   *\n   * @param  {string} tagName - new Element tag name\n   * @param  {string[]|string} [classNames] - list or name of CSS class name(s)\n   * @param  {object} [attributes] - any attributes\n   * @returns {HTMLElement}\n   */\n  static make(e, t = null, o = {}) {\n    const i = document.createElement(e);\n    Array.isArray(t) ? i.classList.add(...t) : t && i.classList.add(t);\n    for (const n in o)\n      Object.prototype.hasOwnProperty.call(o, n) && (i[n] = o[n]);\n    return i;\n  }\n  /**\n   * Creates Text Node with the passed content\n   *\n   * @param {string} content - text content\n   * @returns {Text}\n   */\n  static text(e) {\n    return document.createTextNode(e);\n  }\n  /**\n   * Append one or several elements to the parent\n   *\n   * @param  {Element|DocumentFragment} parent - where to append\n   * @param  {Element|Element[]|DocumentFragment|Text|Text[]} elements - element or elements list\n   */\n  static append(e, t) {\n    Array.isArray(t) ? t.forEach((o) => e.appendChild(o)) : e.appendChild(t);\n  }\n  /**\n   * Append element or a couple to the beginning of the parent elements\n   *\n   * @param {Element} parent - where to append\n   * @param {Element|Element[]} elements - element or elements list\n   */\n  static prepend(e, t) {\n    Array.isArray(t) ? (t = t.reverse(), t.forEach((o) => e.prepend(o))) : e.prepend(t);\n  }\n  /**\n   * Swap two elements in parent\n   *\n   * @param {HTMLElement} el1 - from\n   * @param {HTMLElement} el2 - to\n   * @deprecated\n   */\n  static swap(e, t) {\n    const o = document.createElement(\"div\"), i = e.parentNode;\n    i.insertBefore(o, e), i.insertBefore(e, t), i.insertBefore(t, o), i.removeChild(o);\n  }\n  /**\n   * Selector Decorator\n   *\n   * Returns first match\n   *\n   * @param {Element} el - element we searching inside. Default - DOM Document\n   * @param {string} selector - searching string\n   * @returns {Element}\n   */\n  static find(e = document, t) {\n    return e.querySelector(t);\n  }\n  /**\n   * Get Element by Id\n   *\n   * @param {string} id - id to find\n   * @returns {HTMLElement | null}\n   */\n  static get(e) {\n    return document.getElementById(e);\n  }\n  /**\n   * Selector Decorator.\n   *\n   * Returns all matches\n   *\n   * @param {Element|Document} el - element we searching inside. Default - DOM Document\n   * @param {string} selector - searching string\n   * @returns {NodeList}\n   */\n  static findAll(e = document, t) {\n    return e.querySelectorAll(t);\n  }\n  /**\n   * Returns CSS selector for all text inputs\n   */\n  static get allInputsSelector() {\n    return \"[contenteditable=true], textarea, input:not([type]), \" + [\"text\", \"password\", \"email\", \"number\", \"search\", \"tel\", \"url\"].map((t) => `input[type=\"${t}\"]`).join(\", \");\n  }\n  /**\n   * Find all contenteditable, textarea and editable input elements passed holder contains\n   *\n   * @param holder - element where to find inputs\n   */\n  static findAllInputs(e) {\n    return st(e.querySelectorAll(d.allInputsSelector)).reduce((t, o) => d.isNativeInput(o) || d.containsOnlyInlineElements(o) ? [...t, o] : [...t, ...d.getDeepestBlockElements(o)], []);\n  }\n  /**\n   * Search for deepest node which is Leaf.\n   * Leaf is the vertex that doesn't have any child nodes\n   *\n   * @description Method recursively goes throw the all Node until it finds the Leaf\n   * @param {Node} node - root Node. From this vertex we start Deep-first search\n   *                      {@link https://en.wikipedia.org/wiki/Depth-first_search}\n   * @param {boolean} [atLast] - find last text node\n   * @returns {Node} - it can be text Node or Element Node, so that caret will able to work with it\n   */\n  static getDeepestNode(e, t = !1) {\n    const o = t ? \"lastChild\" : \"firstChild\", i = t ? \"previousSibling\" : \"nextSibling\";\n    if (e && e.nodeType === Node.ELEMENT_NODE && e[o]) {\n      let n = e[o];\n      if (d.isSingleTag(n) && !d.isNativeInput(n) && !d.isLineBreakTag(n))\n        if (n[i])\n          n = n[i];\n        else if (n.parentNode[i])\n          n = n.parentNode[i];\n        else\n          return n.parentNode;\n      return this.getDeepestNode(n, t);\n    }\n    return e;\n  }\n  /**\n   * Check if object is DOM node\n   *\n   * @param {*} node - object to check\n   * @returns {boolean}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static isElement(e) {\n    return qe(e) ? !1 : e && e.nodeType && e.nodeType === Node.ELEMENT_NODE;\n  }\n  /**\n   * Check if object is DocumentFragment node\n   *\n   * @param {object} node - object to check\n   * @returns {boolean}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static isFragment(e) {\n    return qe(e) ? !1 : e && e.nodeType && e.nodeType === Node.DOCUMENT_FRAGMENT_NODE;\n  }\n  /**\n   * Check if passed element is contenteditable\n   *\n   * @param {HTMLElement} element - html element to check\n   * @returns {boolean}\n   */\n  static isContentEditable(e) {\n    return e.contentEditable === \"true\";\n  }\n  /**\n   * Checks target if it is native input\n   *\n   * @param {*} target - HTML element or string\n   * @returns {boolean}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static isNativeInput(e) {\n    const t = [\n      \"INPUT\",\n      \"TEXTAREA\"\n    ];\n    return e && e.tagName ? t.includes(e.tagName) : !1;\n  }\n  /**\n   * Checks if we can set caret\n   *\n   * @param {HTMLElement} target - target to check\n   * @returns {boolean}\n   */\n  static canSetCaret(e) {\n    let t = !0;\n    if (d.isNativeInput(e))\n      switch (e.type) {\n        case \"file\":\n        case \"checkbox\":\n        case \"radio\":\n        case \"hidden\":\n        case \"submit\":\n        case \"button\":\n        case \"image\":\n        case \"reset\":\n          t = !1;\n          break;\n      }\n    else\n      t = d.isContentEditable(e);\n    return t;\n  }\n  /**\n   * Checks node if it is empty\n   *\n   * @description Method checks simple Node without any childs for emptiness\n   * If you have Node with 2 or more children id depth, you better use {@link Dom#isEmpty} method\n   * @param {Node} node - node to check\n   * @returns {boolean} true if it is empty\n   */\n  static isNodeEmpty(e) {\n    let t;\n    return this.isSingleTag(e) && !this.isLineBreakTag(e) ? !1 : (this.isElement(e) && this.isNativeInput(e) ? t = e.value : t = e.textContent.replace(\"​\", \"\"), t.trim().length === 0);\n  }\n  /**\n   * checks node if it is doesn't have any child nodes\n   *\n   * @param {Node} node - node to check\n   * @returns {boolean}\n   */\n  static isLeaf(e) {\n    return e ? e.childNodes.length === 0 : !1;\n  }\n  /**\n   * breadth-first search (BFS)\n   * {@link https://en.wikipedia.org/wiki/Breadth-first_search}\n   *\n   * @description Pushes to stack all DOM leafs and checks for emptiness\n   * @param {Node} node - node to check\n   * @returns {boolean}\n   */\n  static isEmpty(e) {\n    e.normalize();\n    const t = [e];\n    for (; t.length > 0; )\n      if (e = t.shift(), !!e) {\n        if (this.isLeaf(e) && !this.isNodeEmpty(e))\n          return !1;\n        e.childNodes && t.push(...Array.from(e.childNodes));\n      }\n    return !0;\n  }\n  /**\n   * Check if string contains html elements\n   *\n   * @param {string} str - string to check\n   * @returns {boolean}\n   */\n  static isHTMLString(e) {\n    const t = d.make(\"div\");\n    return t.innerHTML = e, t.childElementCount > 0;\n  }\n  /**\n   * Return length of node`s text content\n   *\n   * @param {Node} node - node with content\n   * @returns {number}\n   */\n  static getContentLength(e) {\n    return d.isNativeInput(e) ? e.value.length : e.nodeType === Node.TEXT_NODE ? e.length : e.textContent.length;\n  }\n  /**\n   * Return array of names of block html elements\n   *\n   * @returns {string[]}\n   */\n  static get blockElements() {\n    return [\n      \"address\",\n      \"article\",\n      \"aside\",\n      \"blockquote\",\n      \"canvas\",\n      \"div\",\n      \"dl\",\n      \"dt\",\n      \"fieldset\",\n      \"figcaption\",\n      \"figure\",\n      \"footer\",\n      \"form\",\n      \"h1\",\n      \"h2\",\n      \"h3\",\n      \"h4\",\n      \"h5\",\n      \"h6\",\n      \"header\",\n      \"hgroup\",\n      \"hr\",\n      \"li\",\n      \"main\",\n      \"nav\",\n      \"noscript\",\n      \"ol\",\n      \"output\",\n      \"p\",\n      \"pre\",\n      \"ruby\",\n      \"section\",\n      \"table\",\n      \"tbody\",\n      \"thead\",\n      \"tr\",\n      \"tfoot\",\n      \"ul\",\n      \"video\"\n    ];\n  }\n  /**\n   * Check if passed content includes only inline elements\n   *\n   * @param {string|HTMLElement} data - element or html string\n   * @returns {boolean}\n   */\n  static containsOnlyInlineElements(e) {\n    let t;\n    J(e) ? (t = document.createElement(\"div\"), t.innerHTML = e) : t = e;\n    const o = (i) => !d.blockElements.includes(i.tagName.toLowerCase()) && Array.from(i.children).every(o);\n    return Array.from(t.children).every(o);\n  }\n  /**\n   * Find and return all block elements in the passed parent (including subtree)\n   *\n   * @param {HTMLElement} parent - root element\n   * @returns {HTMLElement[]}\n   */\n  static getDeepestBlockElements(e) {\n    return d.containsOnlyInlineElements(e) ? [e] : Array.from(e.children).reduce((t, o) => [...t, ...d.getDeepestBlockElements(o)], []);\n  }\n  /**\n   * Helper for get holder from {string} or return HTMLElement\n   *\n   * @param {string | HTMLElement} element - holder's id or holder's HTML Element\n   * @returns {HTMLElement}\n   */\n  static getHolder(e) {\n    return J(e) ? document.getElementById(e) : e;\n  }\n  /**\n   * Returns true if element is anchor (is A tag)\n   *\n   * @param {Element} element - element to check\n   * @returns {boolean}\n   */\n  static isAnchor(e) {\n    return e.tagName.toLowerCase() === \"a\";\n  }\n  /**\n   * Return element's offset related to the document\n   *\n   * @todo handle case when editor initialized in scrollable popup\n   * @param el - element to compute offset\n   */\n  static offset(e) {\n    const t = e.getBoundingClientRect(), o = window.pageXOffset || document.documentElement.scrollLeft, i = window.pageYOffset || document.documentElement.scrollTop, n = t.top + i, r = t.left + o;\n    return {\n      top: n,\n      left: r,\n      bottom: n + t.height,\n      right: r + t.width\n    };\n  }\n}\nconst Kt = {\n  blockTunes: {\n    toggler: {\n      \"Click to tune\": \"\",\n      \"or drag to move\": \"\"\n    }\n  },\n  inlineToolbar: {\n    converter: {\n      \"Convert to\": \"\"\n    }\n  },\n  toolbar: {\n    toolbox: {\n      Add: \"\"\n    }\n  },\n  popover: {\n    Filter: \"\",\n    \"Nothing found\": \"\"\n  }\n}, Xt = {\n  Text: \"\",\n  Link: \"\",\n  Bold: \"\",\n  Italic: \"\"\n}, Vt = {\n  link: {\n    \"Add a link\": \"\"\n  },\n  stub: {\n    \"The block can not be displayed correctly.\": \"\"\n  }\n}, qt = {\n  delete: {\n    Delete: \"\",\n    \"Click to delete\": \"\"\n  },\n  moveUp: {\n    \"Move up\": \"\"\n  },\n  moveDown: {\n    \"Move down\": \"\"\n  }\n}, at = {\n  ui: Kt,\n  toolNames: Xt,\n  tools: Vt,\n  blockTunes: qt\n}, ie = class {\n  /**\n   * Type-safe translation for internal UI texts:\n   * Perform translation of the string by namespace and a key\n   *\n   * @example I18n.ui(I18nInternalNS.ui.blockTunes.toggler, 'Click to tune')\n   * @param internalNamespace - path to translated string in dictionary\n   * @param dictKey - dictionary key. Better to use default locale original text\n   */\n  static ui(s, e) {\n    return ie._t(s, e);\n  }\n  /**\n   * Translate for external strings that is not presented in default dictionary.\n   * For example, for user-specified tool names\n   *\n   * @param namespace - path to translated string in dictionary\n   * @param dictKey - dictionary key. Better to use default locale original text\n   */\n  static t(s, e) {\n    return ie._t(s, e);\n  }\n  /**\n   * Adjust module for using external dictionary\n   *\n   * @param dictionary - new messages list to override default\n   */\n  static setDictionary(s) {\n    ie.currentDictionary = s;\n  }\n  /**\n   * Perform translation both for internal and external namespaces\n   * If there is no translation found, returns passed key as a translated message\n   *\n   * @param namespace - path to translated string in dictionary\n   * @param dictKey - dictionary key. Better to use default locale original text\n   */\n  static _t(s, e) {\n    const t = ie.getNamespace(s);\n    return !t || !t[e] ? e : t[e];\n  }\n  /**\n   * Find messages section by namespace path\n   *\n   * @param namespace - path to section\n   */\n  static getNamespace(s) {\n    return s.split(\".\").reduce((t, o) => !t || !Object.keys(t).length ? {} : t[o], ie.currentDictionary);\n  }\n};\nlet $ = ie;\n$.currentDictionary = at;\nclass lt extends Error {\n}\nclass we {\n  constructor() {\n    this.subscribers = {};\n  }\n  /**\n   * Subscribe any event on callback\n   *\n   * @param eventName - event name\n   * @param callback - subscriber\n   */\n  on(e, t) {\n    e in this.subscribers || (this.subscribers[e] = []), this.subscribers[e].push(t);\n  }\n  /**\n   * Subscribe any event on callback. Callback will be called once and be removed from subscribers array after call.\n   *\n   * @param eventName - event name\n   * @param callback - subscriber\n   */\n  once(e, t) {\n    e in this.subscribers || (this.subscribers[e] = []);\n    const o = (i) => {\n      const n = t(i), r = this.subscribers[e].indexOf(o);\n      return r !== -1 && this.subscribers[e].splice(r, 1), n;\n    };\n    this.subscribers[e].push(o);\n  }\n  /**\n   * Emit callbacks with passed data\n   *\n   * @param eventName - event name\n   * @param data - subscribers get this data when they were fired\n   */\n  emit(e, t) {\n    V(this.subscribers) || !this.subscribers[e] || this.subscribers[e].reduce((o, i) => {\n      const n = i(o);\n      return n !== void 0 ? n : o;\n    }, t);\n  }\n  /**\n   * Unsubscribe callback from event\n   *\n   * @param eventName - event name\n   * @param callback - event handler\n   */\n  off(e, t) {\n    if (this.subscribers[e] === void 0) {\n      console.warn(`EventDispatcher .off(): there is no subscribers for event \"${e.toString()}\". Probably, .off() called before .on()`);\n      return;\n    }\n    for (let o = 0; o < this.subscribers[e].length; o++)\n      if (this.subscribers[e][o] === t) {\n        delete this.subscribers[e][o];\n        break;\n      }\n  }\n  /**\n   * Destroyer\n   * clears subscribers list\n   */\n  destroy() {\n    this.subscribers = {};\n  }\n}\nfunction ee(s) {\n  Object.setPrototypeOf(this, {\n    /**\n     * Block id\n     *\n     * @returns {string}\n     */\n    get id() {\n      return s.id;\n    },\n    /**\n     * Tool name\n     *\n     * @returns {string}\n     */\n    get name() {\n      return s.name;\n    },\n    /**\n     * Tool config passed on Editor's initialization\n     *\n     * @returns {ToolConfig}\n     */\n    get config() {\n      return s.config;\n    },\n    /**\n     * .ce-block element, that wraps plugin contents\n     *\n     * @returns {HTMLElement}\n     */\n    get holder() {\n      return s.holder;\n    },\n    /**\n     * True if Block content is empty\n     *\n     * @returns {boolean}\n     */\n    get isEmpty() {\n      return s.isEmpty;\n    },\n    /**\n     * True if Block is selected with Cross-Block selection\n     *\n     * @returns {boolean}\n     */\n    get selected() {\n      return s.selected;\n    },\n    /**\n     * Set Block's stretch state\n     *\n     * @param {boolean} state — state to set\n     */\n    set stretched(t) {\n      s.stretched = t;\n    },\n    /**\n     * True if Block is stretched\n     *\n     * @returns {boolean}\n     */\n    get stretched() {\n      return s.stretched;\n    },\n    /**\n     * Call Tool method with errors handler under-the-hood\n     *\n     * @param {string} methodName - method to call\n     * @param {object} param - object with parameters\n     * @returns {unknown}\n     */\n    call(t, o) {\n      return s.call(t, o);\n    },\n    /**\n     * Save Block content\n     *\n     * @returns {Promise<void|SavedData>}\n     */\n    save() {\n      return s.save();\n    },\n    /**\n     * Validate Block data\n     *\n     * @param {BlockToolData} data - data to validate\n     * @returns {Promise<boolean>}\n     */\n    validate(t) {\n      return s.validate(t);\n    },\n    /**\n     * Allows to say Editor that Block was changed. Used to manually trigger Editor's 'onChange' callback\n     * Can be useful for block changes invisible for editor core.\n     */\n    dispatchChange() {\n      s.dispatchChange();\n    }\n  });\n}\nclass De {\n  constructor() {\n    this.allListeners = [];\n  }\n  /**\n   * Assigns event listener on element and returns unique identifier\n   *\n   * @param {EventTarget} element - DOM element that needs to be listened\n   * @param {string} eventType - event type\n   * @param {Function} handler - method that will be fired on event\n   * @param {boolean|AddEventListenerOptions} options - useCapture or {capture, passive, once}\n   */\n  on(e, t, o, i = !1) {\n    const n = Wt(\"l\"), r = {\n      id: n,\n      element: e,\n      eventType: t,\n      handler: o,\n      options: i\n    };\n    if (!this.findOne(e, t, o))\n      return this.allListeners.push(r), e.addEventListener(t, o, i), n;\n  }\n  /**\n   * Removes event listener from element\n   *\n   * @param {EventTarget} element - DOM element that we removing listener\n   * @param {string} eventType - event type\n   * @param {Function} handler - remove handler, if element listens several handlers on the same event type\n   * @param {boolean|AddEventListenerOptions} options - useCapture or {capture, passive, once}\n   */\n  off(e, t, o, i) {\n    const n = this.findAll(e, t, o);\n    n.forEach((r, a) => {\n      const l = this.allListeners.indexOf(n[a]);\n      l > -1 && (this.allListeners.splice(l, 1), r.element.removeEventListener(r.eventType, r.handler, r.options));\n    });\n  }\n  /**\n   * Removes listener by id\n   *\n   * @param {string} id - listener identifier\n   */\n  offById(e) {\n    const t = this.findById(e);\n    t && t.element.removeEventListener(t.eventType, t.handler, t.options);\n  }\n  /**\n   * Finds and returns first listener by passed params\n   *\n   * @param {EventTarget} element - event target\n   * @param {string} [eventType] - event type\n   * @param {Function} [handler] - event handler\n   * @returns {ListenerData|null}\n   */\n  findOne(e, t, o) {\n    const i = this.findAll(e, t, o);\n    return i.length > 0 ? i[0] : null;\n  }\n  /**\n   * Return all stored listeners by passed params\n   *\n   * @param {EventTarget} element - event target\n   * @param {string} eventType - event type\n   * @param {Function} handler - event handler\n   * @returns {ListenerData[]}\n   */\n  findAll(e, t, o) {\n    let i;\n    const n = e ? this.findByEventTarget(e) : [];\n    return e && t && o ? i = n.filter((r) => r.eventType === t && r.handler === o) : e && t ? i = n.filter((r) => r.eventType === t) : i = n, i;\n  }\n  /**\n   * Removes all listeners\n   */\n  removeAll() {\n    this.allListeners.map((e) => {\n      e.element.removeEventListener(e.eventType, e.handler, e.options);\n    }), this.allListeners = [];\n  }\n  /**\n   * Module cleanup on destruction\n   */\n  destroy() {\n    this.removeAll();\n  }\n  /**\n   * Search method: looks for listener by passed element\n   *\n   * @param {EventTarget} element - searching element\n   * @returns {Array} listeners that found on element\n   */\n  findByEventTarget(e) {\n    return this.allListeners.filter((t) => {\n      if (t.element === e)\n        return t;\n    });\n  }\n  /**\n   * Search method: looks for listener by passed event type\n   *\n   * @param {string} eventType - event type\n   * @returns {ListenerData[]} listeners that found on element\n   */\n  findByType(e) {\n    return this.allListeners.filter((t) => {\n      if (t.eventType === e)\n        return t;\n    });\n  }\n  /**\n   * Search method: looks for listener by passed handler\n   *\n   * @param {Function} handler - event handler\n   * @returns {ListenerData[]} listeners that found on element\n   */\n  findByHandler(e) {\n    return this.allListeners.filter((t) => {\n      if (t.handler === e)\n        return t;\n    });\n  }\n  /**\n   * Returns listener data found by id\n   *\n   * @param {string} id - listener identifier\n   * @returns {ListenerData}\n   */\n  findById(e) {\n    return this.allListeners.find((t) => t.id === e);\n  }\n}\nclass C {\n  /**\n   * @class\n   * @param options - Module options\n   * @param options.config - Module config\n   * @param options.eventsDispatcher - Common event bus\n   */\n  constructor({ config: e, eventsDispatcher: t }) {\n    if (this.nodes = {}, this.listeners = new De(), this.readOnlyMutableListeners = {\n      /**\n       * Assigns event listener on DOM element and pushes into special array that might be removed\n       *\n       * @param {EventTarget} element - DOM Element\n       * @param {string} eventType - Event name\n       * @param {Function} handler - Event handler\n       * @param {boolean|AddEventListenerOptions} options - Listening options\n       */\n      on: (o, i, n, r = !1) => {\n        this.mutableListenerIds.push(\n          this.listeners.on(o, i, n, r)\n        );\n      },\n      /**\n       * Clears all mutable listeners\n       */\n      clearAll: () => {\n        for (const o of this.mutableListenerIds)\n          this.listeners.offById(o);\n        this.mutableListenerIds = [];\n      }\n    }, this.mutableListenerIds = [], new.target === C)\n      throw new TypeError(\"Constructors for abstract class Module are not allowed.\");\n    this.config = e, this.eventsDispatcher = t;\n  }\n  /**\n   * Editor modules setter\n   *\n   * @param {EditorModules} Editor - Editor's Modules\n   */\n  set state(e) {\n    this.Editor = e;\n  }\n  /**\n   * Remove memorized nodes\n   */\n  removeAllNodes() {\n    for (const e in this.nodes) {\n      const t = this.nodes[e];\n      t instanceof HTMLElement && t.remove();\n    }\n  }\n  /**\n   * Returns true if current direction is RTL (Right-To-Left)\n   */\n  get isRtl() {\n    return this.config.i18n.direction === \"rtl\";\n  }\n}\nclass m {\n  constructor() {\n    this.instance = null, this.selection = null, this.savedSelectionRange = null, this.isFakeBackgroundEnabled = !1, this.commandBackground = \"backColor\", this.commandRemoveFormat = \"removeFormat\";\n  }\n  /**\n   * Editor styles\n   *\n   * @returns {{editorWrapper: string, editorZone: string}}\n   */\n  static get CSS() {\n    return {\n      editorWrapper: \"codex-editor\",\n      editorZone: \"codex-editor__redactor\"\n    };\n  }\n  /**\n   * Returns selected anchor\n   * {@link https://developer.mozilla.org/ru/docs/Web/API/Selection/anchorNode}\n   *\n   * @returns {Node|null}\n   */\n  static get anchorNode() {\n    const e = window.getSelection();\n    return e ? e.anchorNode : null;\n  }\n  /**\n   * Returns selected anchor element\n   *\n   * @returns {Element|null}\n   */\n  static get anchorElement() {\n    const e = window.getSelection();\n    if (!e)\n      return null;\n    const t = e.anchorNode;\n    return t ? d.isElement(t) ? t : t.parentElement : null;\n  }\n  /**\n   * Returns selection offset according to the anchor node\n   * {@link https://developer.mozilla.org/ru/docs/Web/API/Selection/anchorOffset}\n   *\n   * @returns {number|null}\n   */\n  static get anchorOffset() {\n    const e = window.getSelection();\n    return e ? e.anchorOffset : null;\n  }\n  /**\n   * Is current selection range collapsed\n   *\n   * @returns {boolean|null}\n   */\n  static get isCollapsed() {\n    const e = window.getSelection();\n    return e ? e.isCollapsed : null;\n  }\n  /**\n   * Check current selection if it is at Editor's zone\n   *\n   * @returns {boolean}\n   */\n  static get isAtEditor() {\n    return this.isSelectionAtEditor(m.get());\n  }\n  /**\n   * Check if passed selection is at Editor's zone\n   *\n   * @param selection - Selection object to check\n   */\n  static isSelectionAtEditor(e) {\n    if (!e)\n      return !1;\n    let t = e.anchorNode || e.focusNode;\n    t && t.nodeType === Node.TEXT_NODE && (t = t.parentNode);\n    let o = null;\n    return t && t instanceof Element && (o = t.closest(`.${m.CSS.editorZone}`)), o ? o.nodeType === Node.ELEMENT_NODE : !1;\n  }\n  /**\n   * Check if passed range at Editor zone\n   *\n   * @param range - range to check\n   */\n  static isRangeAtEditor(e) {\n    if (!e)\n      return;\n    let t = e.startContainer;\n    t && t.nodeType === Node.TEXT_NODE && (t = t.parentNode);\n    let o = null;\n    return t && t instanceof Element && (o = t.closest(`.${m.CSS.editorZone}`)), o ? o.nodeType === Node.ELEMENT_NODE : !1;\n  }\n  /**\n   * Methods return boolean that true if selection exists on the page\n   */\n  static get isSelectionExists() {\n    return !!m.get().anchorNode;\n  }\n  /**\n   * Return first range\n   *\n   * @returns {Range|null}\n   */\n  static get range() {\n    return this.getRangeFromSelection(this.get());\n  }\n  /**\n   * Returns range from passed Selection object\n   *\n   * @param selection - Selection object to get Range from\n   */\n  static getRangeFromSelection(e) {\n    return e && e.rangeCount ? e.getRangeAt(0) : null;\n  }\n  /**\n   * Calculates position and size of selected text\n   *\n   * @returns {DOMRect | ClientRect}\n   */\n  static get rect() {\n    let e = document.selection, t, o = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n    if (e && e.type !== \"Control\")\n      return e = e, t = e.createRange(), o.x = t.boundingLeft, o.y = t.boundingTop, o.width = t.boundingWidth, o.height = t.boundingHeight, o;\n    if (!window.getSelection)\n      return L(\"Method window.getSelection is not supported\", \"warn\"), o;\n    if (e = window.getSelection(), e.rangeCount === null || isNaN(e.rangeCount))\n      return L(\"Method SelectionUtils.rangeCount is not supported\", \"warn\"), o;\n    if (e.rangeCount === 0)\n      return o;\n    if (t = e.getRangeAt(0).cloneRange(), t.getBoundingClientRect && (o = t.getBoundingClientRect()), o.x === 0 && o.y === 0) {\n      const i = document.createElement(\"span\");\n      if (i.getBoundingClientRect) {\n        i.appendChild(document.createTextNode(\"​\")), t.insertNode(i), o = i.getBoundingClientRect();\n        const n = i.parentNode;\n        n.removeChild(i), n.normalize();\n      }\n    }\n    return o;\n  }\n  /**\n   * Returns selected text as String\n   *\n   * @returns {string}\n   */\n  static get text() {\n    return window.getSelection ? window.getSelection().toString() : \"\";\n  }\n  /**\n   * Returns window SelectionUtils\n   * {@link https://developer.mozilla.org/ru/docs/Web/API/Window/getSelection}\n   *\n   * @returns {Selection}\n   */\n  static get() {\n    return window.getSelection();\n  }\n  /**\n   * Set focus to contenteditable or native input element\n   *\n   * @param element - element where to set focus\n   * @param offset - offset of cursor\n   */\n  static setCursor(e, t = 0) {\n    const o = document.createRange(), i = window.getSelection();\n    return d.isNativeInput(e) ? d.canSetCaret(e) ? (e.focus(), e.selectionStart = e.selectionEnd = t, e.getBoundingClientRect()) : void 0 : (o.setStart(e, t), o.setEnd(e, t), i.removeAllRanges(), i.addRange(o), o.getBoundingClientRect());\n  }\n  /**\n   * Check if current range exists and belongs to container\n   *\n   * @param container - where range should be\n   */\n  static isRangeInsideContainer(e) {\n    const t = m.range;\n    return t === null ? !1 : e.contains(t.startContainer);\n  }\n  /**\n   * Adds fake cursor to the current range\n   */\n  static addFakeCursor() {\n    const e = m.range;\n    if (e === null)\n      return;\n    const t = d.make(\"span\", \"codex-editor__fake-cursor\");\n    t.dataset.mutationFree = \"true\", e.collapse(), e.insertNode(t);\n  }\n  /**\n   * Check if passed element contains a fake cursor\n   *\n   * @param el - where to check\n   */\n  static isFakeCursorInsideContainer(e) {\n    return d.find(e, \".codex-editor__fake-cursor\") !== null;\n  }\n  /**\n   * Removes fake cursor from a container\n   *\n   * @param container - container to look for\n   */\n  static removeFakeCursor(e = document.body) {\n    const t = d.find(e, \".codex-editor__fake-cursor\");\n    t && t.remove();\n  }\n  /**\n   * Removes fake background\n   */\n  removeFakeBackground() {\n    this.isFakeBackgroundEnabled && (this.isFakeBackgroundEnabled = !1, document.execCommand(this.commandRemoveFormat));\n  }\n  /**\n   * Sets fake background\n   */\n  setFakeBackground() {\n    document.execCommand(this.commandBackground, !1, \"#a8d6ff\"), this.isFakeBackgroundEnabled = !0;\n  }\n  /**\n   * Save SelectionUtils's range\n   */\n  save() {\n    this.savedSelectionRange = m.range;\n  }\n  /**\n   * Restore saved SelectionUtils's range\n   */\n  restore() {\n    if (!this.savedSelectionRange)\n      return;\n    const e = window.getSelection();\n    e.removeAllRanges(), e.addRange(this.savedSelectionRange);\n  }\n  /**\n   * Clears saved selection\n   */\n  clearSaved() {\n    this.savedSelectionRange = null;\n  }\n  /**\n   * Collapse current selection\n   */\n  collapseToEnd() {\n    const e = window.getSelection(), t = document.createRange();\n    t.selectNodeContents(e.focusNode), t.collapse(!1), e.removeAllRanges(), e.addRange(t);\n  }\n  /**\n   * Looks ahead to find passed tag from current selection\n   *\n   * @param  {string} tagName       - tag to found\n   * @param  {string} [className]   - tag's class name\n   * @param  {number} [searchDepth] - count of tags that can be included. For better performance.\n   * @returns {HTMLElement|null}\n   */\n  findParentTag(e, t, o = 10) {\n    const i = window.getSelection();\n    let n = null;\n    return !i || !i.anchorNode || !i.focusNode ? null : ([\n      /** the Node in which the selection begins */\n      i.anchorNode,\n      /** the Node in which the selection ends */\n      i.focusNode\n    ].forEach((a) => {\n      let l = o;\n      for (; l > 0 && a.parentNode && !(a.tagName === e && (n = a, t && a.classList && !a.classList.contains(t) && (n = null), n)); )\n        a = a.parentNode, l--;\n    }), n);\n  }\n  /**\n   * Expands selection range to the passed parent node\n   *\n   * @param {HTMLElement} element - element which contents should be selected\n   */\n  expandToTag(e) {\n    const t = window.getSelection();\n    t.removeAllRanges();\n    const o = document.createRange();\n    o.selectNodeContents(e), t.addRange(o);\n  }\n}\nfunction Zt(s, e) {\n  const { type: t, target: o, addedNodes: i, removedNodes: n } = s;\n  if (o === e)\n    return !0;\n  if ([\"characterData\", \"attributes\"].includes(t)) {\n    const l = o.nodeType === Node.TEXT_NODE ? o.parentNode : o;\n    return e.contains(l);\n  }\n  const r = Array.from(i).some((l) => e.contains(l)), a = Array.from(n).some((l) => e.contains(l));\n  return r || a;\n}\nconst Me = \"redactor dom changed\", ct = \"block changed\", dt = \"fake cursor is about to be toggled\", ht = \"fake cursor have been set\";\nfunction Je(s, e) {\n  return s.mergeable && s.name === e.name;\n}\nfunction Gt(s, e) {\n  const t = e == null ? void 0 : e.export;\n  return D(t) ? t(s) : J(t) ? s[t] : (t !== void 0 && L(\"Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export.\"), \"\");\n}\nfunction Jt(s, e) {\n  const t = e == null ? void 0 : e.import;\n  return D(t) ? t(s) : J(t) ? {\n    [t]: s\n  } : (t !== void 0 && L(\"Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data.\"), {});\n}\nvar q = /* @__PURE__ */ ((s) => (s.APPEND_CALLBACK = \"appendCallback\", s.RENDERED = \"rendered\", s.MOVED = \"moved\", s.UPDATED = \"updated\", s.REMOVED = \"removed\", s.ON_PASTE = \"onPaste\", s))(q || {});\nclass F extends we {\n  /**\n   * @param options - block constructor options\n   * @param [options.id] - block's id. Will be generated if omitted.\n   * @param options.data - Tool's initial data\n   * @param options.tool — block's tool\n   * @param options.api - Editor API module for pass it to the Block Tunes\n   * @param options.readOnly - Read-Only flag\n   * @param [eventBus] - Editor common event bus. Allows to subscribe on some Editor events. Could be omitted when \"virtual\" Block is created. See BlocksAPI@composeBlockData.\n   */\n  constructor({\n    id: e = Ut(),\n    data: t,\n    tool: o,\n    api: i,\n    readOnly: n,\n    tunesData: r\n  }, a) {\n    super(), this.cachedInputs = [], this.toolRenderedElement = null, this.tunesInstances = /* @__PURE__ */ new Map(), this.defaultTunesInstances = /* @__PURE__ */ new Map(), this.unavailableTunesData = {}, this.inputIndex = 0, this.editorEventBus = null, this.handleFocus = () => {\n      this.dropInputsCache(), this.updateCurrentInput();\n    }, this.didMutated = (l = void 0) => {\n      const c = l === void 0, u = l instanceof InputEvent;\n      !c && !u && this.detectToolRootChange(l);\n      let h;\n      c || u ? h = !0 : h = !(l.length > 0 && l.every((k) => {\n        const { addedNodes: p, removedNodes: v, target: A } = k;\n        return [\n          ...Array.from(p),\n          ...Array.from(v),\n          A\n        ].some((_) => d.isElement(_) ? _.dataset.mutationFree === \"true\" : !1);\n      })), h && (this.dropInputsCache(), this.updateCurrentInput(), this.call(\n        \"updated\"\n        /* UPDATED */\n      ), this.emit(\"didMutated\", this));\n    }, this.name = o.name, this.id = e, this.settings = o.settings, this.config = o.settings.config || {}, this.api = i, this.editorEventBus = a || null, this.blockAPI = new ee(this), this.tool = o, this.toolInstance = o.create(t, this.blockAPI, n), this.tunes = o.tunes, this.composeTunes(r), this.holder = this.compose(), window.requestIdleCallback(() => {\n      this.watchBlockMutations(), this.addInputEvents();\n    });\n  }\n  /**\n   * CSS classes for the Block\n   *\n   * @returns {{wrapper: string, content: string}}\n   */\n  static get CSS() {\n    return {\n      wrapper: \"ce-block\",\n      wrapperStretched: \"ce-block--stretched\",\n      content: \"ce-block__content\",\n      focused: \"ce-block--focused\",\n      selected: \"ce-block--selected\",\n      dropTarget: \"ce-block--drop-target\"\n    };\n  }\n  /**\n   * Find and return all editable elements (contenteditable and native inputs) in the Tool HTML\n   *\n   * @returns {HTMLElement[]}\n   */\n  get inputs() {\n    if (this.cachedInputs.length !== 0)\n      return this.cachedInputs;\n    const e = d.findAllInputs(this.holder);\n    return this.inputIndex > e.length - 1 && (this.inputIndex = e.length - 1), this.cachedInputs = e, e;\n  }\n  /**\n   * Return current Tool`s input\n   *\n   * @returns {HTMLElement}\n   */\n  get currentInput() {\n    return this.inputs[this.inputIndex];\n  }\n  /**\n   * Set input index to the passed element\n   *\n   * @param {HTMLElement | Node} element - HTML Element to set as current input\n   */\n  set currentInput(e) {\n    const t = this.inputs.findIndex((o) => o === e || o.contains(e));\n    t !== -1 && (this.inputIndex = t);\n  }\n  /**\n   * Return first Tool`s input\n   *\n   * @returns {HTMLElement}\n   */\n  get firstInput() {\n    return this.inputs[0];\n  }\n  /**\n   * Return first Tool`s input\n   *\n   * @returns {HTMLElement}\n   */\n  get lastInput() {\n    const e = this.inputs;\n    return e[e.length - 1];\n  }\n  /**\n   * Return next Tool`s input or undefined if it doesn't exist\n   *\n   * @returns {HTMLElement}\n   */\n  get nextInput() {\n    return this.inputs[this.inputIndex + 1];\n  }\n  /**\n   * Return previous Tool`s input or undefined if it doesn't exist\n   *\n   * @returns {HTMLElement}\n   */\n  get previousInput() {\n    return this.inputs[this.inputIndex - 1];\n  }\n  /**\n   * Get Block's JSON data\n   *\n   * @returns {object}\n   */\n  get data() {\n    return this.save().then((e) => e && !V(e.data) ? e.data : {});\n  }\n  /**\n   * Returns tool's sanitizer config\n   *\n   * @returns {object}\n   */\n  get sanitize() {\n    return this.tool.sanitizeConfig;\n  }\n  /**\n   * is block mergeable\n   * We plugin have merge function then we call it mergeable\n   *\n   * @returns {boolean}\n   */\n  get mergeable() {\n    return D(this.toolInstance.merge);\n  }\n  /**\n   * Check block for emptiness\n   *\n   * @returns {boolean}\n   */\n  get isEmpty() {\n    const e = d.isEmpty(this.pluginsContent), t = !this.hasMedia;\n    return e && t;\n  }\n  /**\n   * Check if block has a media content such as images, iframe and other\n   *\n   * @returns {boolean}\n   */\n  get hasMedia() {\n    const e = [\n      \"img\",\n      \"iframe\",\n      \"video\",\n      \"audio\",\n      \"source\",\n      \"input\",\n      \"textarea\",\n      \"twitterwidget\"\n    ];\n    return !!this.holder.querySelector(e.join(\",\"));\n  }\n  /**\n   * Set focused state\n   *\n   * @param {boolean} state - 'true' to select, 'false' to remove selection\n   */\n  set focused(e) {\n    this.holder.classList.toggle(F.CSS.focused, e);\n  }\n  /**\n   * Get Block's focused state\n   */\n  get focused() {\n    return this.holder.classList.contains(F.CSS.focused);\n  }\n  /**\n   * Set selected state\n   * We don't need to mark Block as Selected when it is empty\n   *\n   * @param {boolean} state - 'true' to select, 'false' to remove selection\n   */\n  set selected(e) {\n    var i, n;\n    this.holder.classList.toggle(F.CSS.selected, e);\n    const t = e === !0 && m.isRangeInsideContainer(this.holder), o = e === !1 && m.isFakeCursorInsideContainer(this.holder);\n    (t || o) && ((i = this.editorEventBus) == null || i.emit(dt, { state: e }), t ? m.addFakeCursor() : m.removeFakeCursor(this.holder), (n = this.editorEventBus) == null || n.emit(ht, { state: e }));\n  }\n  /**\n   * Returns True if it is Selected\n   *\n   * @returns {boolean}\n   */\n  get selected() {\n    return this.holder.classList.contains(F.CSS.selected);\n  }\n  /**\n   * Set stretched state\n   *\n   * @param {boolean} state - 'true' to enable, 'false' to disable stretched state\n   */\n  set stretched(e) {\n    this.holder.classList.toggle(F.CSS.wrapperStretched, e);\n  }\n  /**\n   * Return Block's stretched state\n   *\n   * @returns {boolean}\n   */\n  get stretched() {\n    return this.holder.classList.contains(F.CSS.wrapperStretched);\n  }\n  /**\n   * Toggle drop target state\n   *\n   * @param {boolean} state - 'true' if block is drop target, false otherwise\n   */\n  set dropTarget(e) {\n    this.holder.classList.toggle(F.CSS.dropTarget, e);\n  }\n  /**\n   * Returns Plugins content\n   *\n   * @returns {HTMLElement}\n   */\n  get pluginsContent() {\n    return this.toolRenderedElement;\n  }\n  /**\n   * Calls Tool's method\n   *\n   * Method checks tool property {MethodName}. Fires method with passes params If it is instance of Function\n   *\n   * @param {string} methodName - method to call\n   * @param {object} params - method argument\n   */\n  call(e, t) {\n    if (D(this.toolInstance[e])) {\n      e === \"appendCallback\" && L(\n        \"`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead\",\n        \"warn\"\n      );\n      try {\n        this.toolInstance[e].call(this.toolInstance, t);\n      } catch (o) {\n        L(`Error during '${e}' call: ${o.message}`, \"error\");\n      }\n    }\n  }\n  /**\n   * Call plugins merge method\n   *\n   * @param {BlockToolData} data - data to merge\n   */\n  async mergeWith(e) {\n    await this.toolInstance.merge(e);\n  }\n  /**\n   * Extracts data from Block\n   * Groups Tool's save processing time\n   *\n   * @returns {object}\n   */\n  async save() {\n    const e = await this.toolInstance.save(this.pluginsContent), t = this.unavailableTunesData;\n    [\n      ...this.tunesInstances.entries(),\n      ...this.defaultTunesInstances.entries()\n    ].forEach(([n, r]) => {\n      if (D(r.save))\n        try {\n          t[n] = r.save();\n        } catch (a) {\n          L(`Tune ${r.constructor.name} save method throws an Error %o`, \"warn\", a);\n        }\n    });\n    const o = window.performance.now();\n    let i;\n    return Promise.resolve(e).then((n) => (i = window.performance.now(), {\n      id: this.id,\n      tool: this.name,\n      data: n,\n      tunes: t,\n      time: i - o\n    })).catch((n) => {\n      L(`Saving process for ${this.name} tool failed due to the ${n}`, \"log\", \"red\");\n    });\n  }\n  /**\n   * Uses Tool's validation method to check the correctness of output data\n   * Tool's validation method is optional\n   *\n   * @description Method returns true|false whether data passed the validation or not\n   * @param {BlockToolData} data - data to validate\n   * @returns {Promise<boolean>} valid\n   */\n  async validate(e) {\n    let t = !0;\n    return this.toolInstance.validate instanceof Function && (t = await this.toolInstance.validate(e)), t;\n  }\n  /**\n   * Returns data to render in tunes menu.\n   * Splits block tunes settings into 2 groups: popover items and custom html.\n   */\n  getTunes() {\n    const e = document.createElement(\"div\"), t = [], o = typeof this.toolInstance.renderSettings == \"function\" ? this.toolInstance.renderSettings() : [], i = [\n      ...this.tunesInstances.values(),\n      ...this.defaultTunesInstances.values()\n    ].map((n) => n.render());\n    return [o, i].flat().forEach((n) => {\n      d.isElement(n) ? e.appendChild(n) : Array.isArray(n) ? t.push(...n) : t.push(n);\n    }), [t, e];\n  }\n  /**\n   * Update current input index with selection anchor node\n   */\n  updateCurrentInput() {\n    this.currentInput = d.isNativeInput(document.activeElement) || !m.anchorNode ? document.activeElement : m.anchorNode;\n  }\n  /**\n   * Allows to say Editor that Block was changed. Used to manually trigger Editor's 'onChange' callback\n   * Can be useful for block changes invisible for editor core.\n   */\n  dispatchChange() {\n    this.didMutated();\n  }\n  /**\n   * Call Tool instance destroy method\n   */\n  destroy() {\n    this.unwatchBlockMutations(), this.removeInputEvents(), super.destroy(), D(this.toolInstance.destroy) && this.toolInstance.destroy();\n  }\n  /**\n   * Tool could specify several entries to be displayed at the Toolbox (for example, \"Heading 1\", \"Heading 2\", \"Heading 3\")\n   * This method returns the entry that is related to the Block (depended on the Block data)\n   */\n  async getActiveToolboxEntry() {\n    const e = this.tool.toolbox;\n    if (e.length === 1)\n      return Promise.resolve(this.tool.toolbox[0]);\n    const t = await this.data;\n    return e.find((i) => Object.entries(i.data).some(([n, r]) => t[n] && Yt(t[n], r)));\n  }\n  /**\n   * Exports Block data as string using conversion config\n   */\n  async exportDataAsString() {\n    const e = await this.data;\n    return Gt(e, this.tool.conversionConfig);\n  }\n  /**\n   * Make default Block wrappers and put Tool`s content there\n   *\n   * @returns {HTMLDivElement}\n   */\n  compose() {\n    const e = d.make(\"div\", F.CSS.wrapper), t = d.make(\"div\", F.CSS.content), o = this.toolInstance.render();\n    e.dataset.id = this.id, this.toolRenderedElement = o, t.appendChild(this.toolRenderedElement);\n    let i = t;\n    return [...this.tunesInstances.values(), ...this.defaultTunesInstances.values()].forEach((n) => {\n      if (D(n.wrap))\n        try {\n          i = n.wrap(i);\n        } catch (r) {\n          L(`Tune ${n.constructor.name} wrap method throws an Error %o`, \"warn\", r);\n        }\n    }), e.appendChild(i), e;\n  }\n  /**\n   * Instantiate Block Tunes\n   *\n   * @param tunesData - current Block tunes data\n   * @private\n   */\n  composeTunes(e) {\n    Array.from(this.tunes.values()).forEach((t) => {\n      (t.isInternal ? this.defaultTunesInstances : this.tunesInstances).set(t.name, t.create(e[t.name], this.blockAPI));\n    }), Object.entries(e).forEach(([t, o]) => {\n      this.tunesInstances.has(t) || (this.unavailableTunesData[t] = o);\n    });\n  }\n  /**\n   * Adds focus event listeners to all inputs and contenteditable\n   */\n  addInputEvents() {\n    this.inputs.forEach((e) => {\n      e.addEventListener(\"focus\", this.handleFocus), d.isNativeInput(e) && e.addEventListener(\"input\", this.didMutated);\n    });\n  }\n  /**\n   * removes focus event listeners from all inputs and contenteditable\n   */\n  removeInputEvents() {\n    this.inputs.forEach((e) => {\n      e.removeEventListener(\"focus\", this.handleFocus), d.isNativeInput(e) && e.removeEventListener(\"input\", this.didMutated);\n    });\n  }\n  /**\n   * Listen common editor Dom Changed event and detect mutations related to the  Block\n   */\n  watchBlockMutations() {\n    var e;\n    this.redactorDomChangedCallback = (t) => {\n      const { mutations: o } = t;\n      o.some((n) => Zt(n, this.toolRenderedElement)) && this.didMutated(o);\n    }, (e = this.editorEventBus) == null || e.on(Me, this.redactorDomChangedCallback);\n  }\n  /**\n   * Remove redactor dom change event listener\n   */\n  unwatchBlockMutations() {\n    var e;\n    (e = this.editorEventBus) == null || e.off(Me, this.redactorDomChangedCallback);\n  }\n  /**\n   * Sometimes Tool can replace own main element, for example H2 -> H4 or UL -> OL\n   * We need to detect such changes and update a link to tools main element with the new one\n   *\n   * @param mutations - records of block content mutations\n   */\n  detectToolRootChange(e) {\n    e.forEach((t) => {\n      if (Array.from(t.removedNodes).includes(this.toolRenderedElement)) {\n        const i = t.addedNodes[t.addedNodes.length - 1];\n        this.toolRenderedElement = i;\n      }\n    });\n  }\n  /**\n   * Clears inputs cached value\n   */\n  dropInputsCache() {\n    this.cachedInputs = [];\n  }\n}\nclass Qt extends C {\n  constructor() {\n    super(...arguments), this.insert = (e = this.config.defaultBlock, t = {}, o = {}, i, n, r, a) => {\n      const l = this.Editor.BlockManager.insert({\n        id: a,\n        tool: e,\n        data: t,\n        index: i,\n        needToFocus: n,\n        replace: r\n      });\n      return new ee(l);\n    }, this.composeBlockData = async (e) => {\n      const t = this.Editor.Tools.blockTools.get(e);\n      return new F({\n        tool: t,\n        api: this.Editor.API,\n        readOnly: !0,\n        data: {},\n        tunesData: {}\n      }).data;\n    }, this.update = async (e, t) => {\n      const { BlockManager: o } = this.Editor, i = o.getBlockById(e);\n      if (i === void 0)\n        throw new Error(`Block with id \"${e}\" not found`);\n      const n = await o.update(i, t);\n      return new ee(n);\n    }, this.convert = (e, t, o) => {\n      var h, f;\n      const { BlockManager: i, Tools: n } = this.Editor, r = i.getBlockById(e);\n      if (!r)\n        throw new Error(`Block with id \"${e}\" not found`);\n      const a = n.blockTools.get(r.name), l = n.blockTools.get(t);\n      if (!l)\n        throw new Error(`Block Tool with type \"${t}\" not found`);\n      const c = ((h = a == null ? void 0 : a.conversionConfig) == null ? void 0 : h.export) !== void 0, u = ((f = l.conversionConfig) == null ? void 0 : f.import) !== void 0;\n      if (c && u)\n        i.convert(r, t, o);\n      else {\n        const k = [\n          c ? !1 : ae(r.name),\n          u ? !1 : ae(t)\n        ].filter(Boolean).join(\" and \");\n        throw new Error(`Conversion from \"${r.name}\" to \"${t}\" is not possible. ${k} tool(s) should provide a \"conversionConfig\"`);\n      }\n    }, this.insertMany = (e, t = this.Editor.BlockManager.blocks.length - 1) => {\n      this.validateIndex(t);\n      const o = e.map(({ id: i, type: n, data: r }) => this.Editor.BlockManager.composeBlock({\n        id: i,\n        tool: n || this.config.defaultBlock,\n        data: r\n      }));\n      return this.Editor.BlockManager.insertMany(o, t), o.map((i) => new ee(i));\n    };\n  }\n  /**\n   * Available methods\n   *\n   * @returns {Blocks}\n   */\n  get methods() {\n    return {\n      clear: () => this.clear(),\n      render: (e) => this.render(e),\n      renderFromHTML: (e) => this.renderFromHTML(e),\n      delete: (e) => this.delete(e),\n      swap: (e, t) => this.swap(e, t),\n      move: (e, t) => this.move(e, t),\n      getBlockByIndex: (e) => this.getBlockByIndex(e),\n      getById: (e) => this.getById(e),\n      getCurrentBlockIndex: () => this.getCurrentBlockIndex(),\n      getBlockIndex: (e) => this.getBlockIndex(e),\n      getBlocksCount: () => this.getBlocksCount(),\n      stretchBlock: (e, t = !0) => this.stretchBlock(e, t),\n      insertNewBlock: () => this.insertNewBlock(),\n      insert: this.insert,\n      insertMany: this.insertMany,\n      update: this.update,\n      composeBlockData: this.composeBlockData,\n      convert: this.convert\n    };\n  }\n  /**\n   * Returns Blocks count\n   *\n   * @returns {number}\n   */\n  getBlocksCount() {\n    return this.Editor.BlockManager.blocks.length;\n  }\n  /**\n   * Returns current block index\n   *\n   * @returns {number}\n   */\n  getCurrentBlockIndex() {\n    return this.Editor.BlockManager.currentBlockIndex;\n  }\n  /**\n   * Returns the index of Block by id;\n   *\n   * @param id - block id\n   */\n  getBlockIndex(e) {\n    const t = this.Editor.BlockManager.getBlockById(e);\n    if (!t) {\n      K(\"There is no block with id `\" + e + \"`\", \"warn\");\n      return;\n    }\n    return this.Editor.BlockManager.getBlockIndex(t);\n  }\n  /**\n   * Returns BlockAPI object by Block index\n   *\n   * @param {number} index - index to get\n   */\n  getBlockByIndex(e) {\n    const t = this.Editor.BlockManager.getBlockByIndex(e);\n    if (t === void 0) {\n      K(\"There is no block at index `\" + e + \"`\", \"warn\");\n      return;\n    }\n    return new ee(t);\n  }\n  /**\n   * Returns BlockAPI object by Block id\n   *\n   * @param id - id of block to get\n   */\n  getById(e) {\n    const t = this.Editor.BlockManager.getBlockById(e);\n    return t === void 0 ? (K(\"There is no block with id `\" + e + \"`\", \"warn\"), null) : new ee(t);\n  }\n  /**\n   * Call Block Manager method that swap Blocks\n   *\n   * @param {number} fromIndex - position of first Block\n   * @param {number} toIndex - position of second Block\n   * @deprecated — use 'move' instead\n   */\n  swap(e, t) {\n    L(\n      \"`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead\",\n      \"info\"\n    ), this.Editor.BlockManager.swap(e, t);\n  }\n  /**\n   * Move block from one index to another\n   *\n   * @param {number} toIndex - index to move to\n   * @param {number} fromIndex - index to move from\n   */\n  move(e, t) {\n    this.Editor.BlockManager.move(e, t);\n  }\n  /**\n   * Deletes Block\n   *\n   * @param {number} blockIndex - index of Block to delete\n   */\n  delete(e = this.Editor.BlockManager.currentBlockIndex) {\n    try {\n      const t = this.Editor.BlockManager.getBlockByIndex(e);\n      this.Editor.BlockManager.removeBlock(t);\n    } catch (t) {\n      K(t, \"warn\");\n      return;\n    }\n    this.Editor.BlockManager.blocks.length === 0 && this.Editor.BlockManager.insert(), this.Editor.BlockManager.currentBlock && this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock, this.Editor.Caret.positions.END), this.Editor.Toolbar.close();\n  }\n  /**\n   * Clear Editor's area\n   */\n  async clear() {\n    await this.Editor.BlockManager.clear(!0), this.Editor.InlineToolbar.close();\n  }\n  /**\n   * Fills Editor with Blocks data\n   *\n   * @param {OutputData} data — Saved Editor data\n   */\n  async render(e) {\n    if (e === void 0 || e.blocks === void 0)\n      throw new Error(\"Incorrect data passed to the render() method\");\n    this.Editor.ModificationsObserver.disable(), await this.Editor.BlockManager.clear(), await this.Editor.Renderer.render(e.blocks), this.Editor.ModificationsObserver.enable();\n  }\n  /**\n   * Render passed HTML string\n   *\n   * @param {string} data - HTML string to render\n   * @returns {Promise<void>}\n   */\n  renderFromHTML(e) {\n    return this.Editor.BlockManager.clear(), this.Editor.Paste.processText(e, !0);\n  }\n  /**\n   * Stretch Block's content\n   *\n   * @param {number} index - index of Block to stretch\n   * @param {boolean} status - true to enable, false to disable\n   * @deprecated Use BlockAPI interface to stretch Blocks\n   */\n  stretchBlock(e, t = !0) {\n    Ie(\n      !0,\n      \"blocks.stretchBlock()\",\n      \"BlockAPI\"\n    );\n    const o = this.Editor.BlockManager.getBlockByIndex(e);\n    o && (o.stretched = t);\n  }\n  /**\n   * Insert new Block\n   * After set caret to this Block\n   *\n   * @todo remove in 3.0.0\n   * @deprecated with insert() method\n   */\n  insertNewBlock() {\n    L(\"Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.\", \"warn\"), this.insert();\n  }\n  /**\n   * Validated block index and throws an error if it's invalid\n   *\n   * @param index - index to validate\n   */\n  validateIndex(e) {\n    if (typeof e != \"number\")\n      throw new Error(\"Index should be a number\");\n    if (e < 0)\n      throw new Error(\"Index should be greater than or equal to 0\");\n    if (e === null)\n      throw new Error(\"Index should be greater than or equal to 0\");\n  }\n}\nclass eo extends C {\n  constructor() {\n    super(...arguments), this.setToFirstBlock = (e = this.Editor.Caret.positions.DEFAULT, t = 0) => this.Editor.BlockManager.firstBlock ? (this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock, e, t), !0) : !1, this.setToLastBlock = (e = this.Editor.Caret.positions.DEFAULT, t = 0) => this.Editor.BlockManager.lastBlock ? (this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock, e, t), !0) : !1, this.setToPreviousBlock = (e = this.Editor.Caret.positions.DEFAULT, t = 0) => this.Editor.BlockManager.previousBlock ? (this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock, e, t), !0) : !1, this.setToNextBlock = (e = this.Editor.Caret.positions.DEFAULT, t = 0) => this.Editor.BlockManager.nextBlock ? (this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock, e, t), !0) : !1, this.setToBlock = (e, t = this.Editor.Caret.positions.DEFAULT, o = 0) => this.Editor.BlockManager.blocks[e] ? (this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[e], t, o), !0) : !1, this.focus = (e = !1) => e ? this.setToLastBlock(this.Editor.Caret.positions.END) : this.setToFirstBlock(this.Editor.Caret.positions.START);\n  }\n  /**\n   * Available methods\n   *\n   * @returns {Caret}\n   */\n  get methods() {\n    return {\n      setToFirstBlock: this.setToFirstBlock,\n      setToLastBlock: this.setToLastBlock,\n      setToPreviousBlock: this.setToPreviousBlock,\n      setToNextBlock: this.setToNextBlock,\n      setToBlock: this.setToBlock,\n      focus: this.focus\n    };\n  }\n}\nclass to extends C {\n  /**\n   * Available methods\n   *\n   * @returns {Events}\n   */\n  get methods() {\n    return {\n      emit: (e, t) => this.emit(e, t),\n      off: (e, t) => this.off(e, t),\n      on: (e, t) => this.on(e, t)\n    };\n  }\n  /**\n   * Subscribe on Events\n   *\n   * @param {string} eventName - event name to subscribe\n   * @param {Function} callback - event handler\n   */\n  on(e, t) {\n    this.eventsDispatcher.on(e, t);\n  }\n  /**\n   * Emit event with data\n   *\n   * @param {string} eventName - event to emit\n   * @param {object} data - event's data\n   */\n  emit(e, t) {\n    this.eventsDispatcher.emit(e, t);\n  }\n  /**\n   * Unsubscribe from Event\n   *\n   * @param {string} eventName - event to unsubscribe\n   * @param {Function} callback - event handler\n   */\n  off(e, t) {\n    this.eventsDispatcher.off(e, t);\n  }\n}\nclass Pe extends C {\n  /**\n   * Return namespace section for tool or block tune\n   *\n   * @param tool - tool object\n   */\n  static getNamespace(e) {\n    return e.isTune() ? `blockTunes.${e.name}` : `tools.${e.name}`;\n  }\n  /**\n   * Return I18n API methods with global dictionary access\n   */\n  get methods() {\n    return {\n      t: () => {\n        K(\"I18n.t() method can be accessed only from Tools\", \"warn\");\n      }\n    };\n  }\n  /**\n   * Return I18n API methods with tool namespaced dictionary\n   *\n   * @param tool - Tool object\n   */\n  getMethodsForTool(e) {\n    return Object.assign(\n      this.methods,\n      {\n        t: (t) => $.t(Pe.getNamespace(e), t)\n      }\n    );\n  }\n}\nclass oo extends C {\n  /**\n   * Editor.js Core API modules\n   */\n  get methods() {\n    return {\n      blocks: this.Editor.BlocksAPI.methods,\n      caret: this.Editor.CaretAPI.methods,\n      events: this.Editor.EventsAPI.methods,\n      listeners: this.Editor.ListenersAPI.methods,\n      notifier: this.Editor.NotifierAPI.methods,\n      sanitizer: this.Editor.SanitizerAPI.methods,\n      saver: this.Editor.SaverAPI.methods,\n      selection: this.Editor.SelectionAPI.methods,\n      styles: this.Editor.StylesAPI.classes,\n      toolbar: this.Editor.ToolbarAPI.methods,\n      inlineToolbar: this.Editor.InlineToolbarAPI.methods,\n      tooltip: this.Editor.TooltipAPI.methods,\n      i18n: this.Editor.I18nAPI.methods,\n      readOnly: this.Editor.ReadOnlyAPI.methods,\n      ui: this.Editor.UiAPI.methods\n    };\n  }\n  /**\n   * Returns Editor.js Core API methods for passed tool\n   *\n   * @param tool - tool object\n   */\n  getMethodsForTool(e) {\n    return Object.assign(\n      this.methods,\n      {\n        i18n: this.Editor.I18nAPI.getMethodsForTool(e)\n      }\n    );\n  }\n}\nclass io extends C {\n  /**\n   * Available methods\n   *\n   * @returns {InlineToolbar}\n   */\n  get methods() {\n    return {\n      close: () => this.close(),\n      open: () => this.open()\n    };\n  }\n  /**\n   * Open Inline Toolbar\n   */\n  open() {\n    this.Editor.InlineToolbar.tryToShow();\n  }\n  /**\n   * Close Inline Toolbar\n   */\n  close() {\n    this.Editor.InlineToolbar.close();\n  }\n}\nclass no extends C {\n  /**\n   * Available methods\n   *\n   * @returns {Listeners}\n   */\n  get methods() {\n    return {\n      on: (e, t, o, i) => this.on(e, t, o, i),\n      off: (e, t, o, i) => this.off(e, t, o, i),\n      offById: (e) => this.offById(e)\n    };\n  }\n  /**\n   * Ads a DOM event listener. Return it's id.\n   *\n   * @param {HTMLElement} element - Element to set handler to\n   * @param {string} eventType - event type\n   * @param {() => void} handler - event handler\n   * @param {boolean} useCapture - capture event or not\n   */\n  on(e, t, o, i) {\n    return this.listeners.on(e, t, o, i);\n  }\n  /**\n   * Removes DOM listener from element\n   *\n   * @param {Element} element - Element to remove handler from\n   * @param eventType - event type\n   * @param handler - event handler\n   * @param {boolean} useCapture - capture event or not\n   */\n  off(e, t, o, i) {\n    this.listeners.off(e, t, o, i);\n  }\n  /**\n   * Removes DOM listener by the listener id\n   *\n   * @param id - id of the listener to remove\n   */\n  offById(e) {\n    this.listeners.offById(e);\n  }\n}\nvar Le = {}, so = {\n  get exports() {\n    return Le;\n  },\n  set exports(s) {\n    Le = s;\n  }\n};\n(function(s, e) {\n  (function(t, o) {\n    s.exports = o();\n  })(window, function() {\n    return function(t) {\n      var o = {};\n      function i(n) {\n        if (o[n])\n          return o[n].exports;\n        var r = o[n] = { i: n, l: !1, exports: {} };\n        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n      }\n      return i.m = t, i.c = o, i.d = function(n, r, a) {\n        i.o(n, r) || Object.defineProperty(n, r, { enumerable: !0, get: a });\n      }, i.r = function(n) {\n        typeof Symbol < \"u\" && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, { value: \"Module\" }), Object.defineProperty(n, \"__esModule\", { value: !0 });\n      }, i.t = function(n, r) {\n        if (1 & r && (n = i(n)), 8 & r || 4 & r && typeof n == \"object\" && n && n.__esModule)\n          return n;\n        var a = /* @__PURE__ */ Object.create(null);\n        if (i.r(a), Object.defineProperty(a, \"default\", { enumerable: !0, value: n }), 2 & r && typeof n != \"string\")\n          for (var l in n)\n            i.d(a, l, function(c) {\n              return n[c];\n            }.bind(null, l));\n        return a;\n      }, i.n = function(n) {\n        var r = n && n.__esModule ? function() {\n          return n.default;\n        } : function() {\n          return n;\n        };\n        return i.d(r, \"a\", r), r;\n      }, i.o = function(n, r) {\n        return Object.prototype.hasOwnProperty.call(n, r);\n      }, i.p = \"/\", i(i.s = 0);\n    }([function(t, o, i) {\n      i(1), /*!\n       * Codex JavaScript Notification module\n       * https://github.com/codex-team/js-notifier\n       */\n      t.exports = function() {\n        var n = i(6), r = \"cdx-notify--bounce-in\", a = null;\n        return { show: function(l) {\n          if (l.message) {\n            (function() {\n              if (a)\n                return !0;\n              a = n.getWrapper(), document.body.appendChild(a);\n            })();\n            var c = null, u = l.time || 8e3;\n            switch (l.type) {\n              case \"confirm\":\n                c = n.confirm(l);\n                break;\n              case \"prompt\":\n                c = n.prompt(l);\n                break;\n              default:\n                c = n.alert(l), window.setTimeout(function() {\n                  c.remove();\n                }, u);\n            }\n            a.appendChild(c), c.classList.add(r);\n          }\n        } };\n      }();\n    }, function(t, o, i) {\n      var n = i(2);\n      typeof n == \"string\" && (n = [[t.i, n, \"\"]]);\n      var r = { hmr: !0, transform: void 0, insertInto: void 0 };\n      i(4)(n, r), n.locals && (t.exports = n.locals);\n    }, function(t, o, i) {\n      (t.exports = i(3)(!1)).push([t.i, `.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen,Ubuntu,Cantarell,\"Fira Sans\",\"Droid Sans\",\"Helvetica Neue\",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`, \"\"]);\n    }, function(t, o) {\n      t.exports = function(i) {\n        var n = [];\n        return n.toString = function() {\n          return this.map(function(r) {\n            var a = function(l, c) {\n              var u = l[1] || \"\", h = l[3];\n              if (!h)\n                return u;\n              if (c && typeof btoa == \"function\") {\n                var f = (p = h, \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(p)))) + \" */\"), k = h.sources.map(function(v) {\n                  return \"/*# sourceURL=\" + h.sourceRoot + v + \" */\";\n                });\n                return [u].concat(k).concat([f]).join(`\n`);\n              }\n              var p;\n              return [u].join(`\n`);\n            }(r, i);\n            return r[2] ? \"@media \" + r[2] + \"{\" + a + \"}\" : a;\n          }).join(\"\");\n        }, n.i = function(r, a) {\n          typeof r == \"string\" && (r = [[null, r, \"\"]]);\n          for (var l = {}, c = 0; c < this.length; c++) {\n            var u = this[c][0];\n            typeof u == \"number\" && (l[u] = !0);\n          }\n          for (c = 0; c < r.length; c++) {\n            var h = r[c];\n            typeof h[0] == \"number\" && l[h[0]] || (a && !h[2] ? h[2] = a : a && (h[2] = \"(\" + h[2] + \") and (\" + a + \")\"), n.push(h));\n          }\n        }, n;\n      };\n    }, function(t, o, i) {\n      var n, r, a = {}, l = (n = function() {\n        return window && document && document.all && !window.atob;\n      }, function() {\n        return r === void 0 && (r = n.apply(this, arguments)), r;\n      }), c = function(b) {\n        var g = {};\n        return function(E) {\n          if (typeof E == \"function\")\n            return E();\n          if (g[E] === void 0) {\n            var T = function(O) {\n              return document.querySelector(O);\n            }.call(this, E);\n            if (window.HTMLIFrameElement && T instanceof window.HTMLIFrameElement)\n              try {\n                T = T.contentDocument.head;\n              } catch {\n                T = null;\n              }\n            g[E] = T;\n          }\n          return g[E];\n        };\n      }(), u = null, h = 0, f = [], k = i(5);\n      function p(b, g) {\n        for (var E = 0; E < b.length; E++) {\n          var T = b[E], O = a[T.id];\n          if (O) {\n            O.refs++;\n            for (var S = 0; S < O.parts.length; S++)\n              O.parts[S](T.parts[S]);\n            for (; S < T.parts.length; S++)\n              O.parts.push(x(T.parts[S], g));\n          } else {\n            var H = [];\n            for (S = 0; S < T.parts.length; S++)\n              H.push(x(T.parts[S], g));\n            a[T.id] = { id: T.id, refs: 1, parts: H };\n          }\n        }\n      }\n      function v(b, g) {\n        for (var E = [], T = {}, O = 0; O < b.length; O++) {\n          var S = b[O], H = g.base ? S[0] + g.base : S[0], M = { css: S[1], media: S[2], sourceMap: S[3] };\n          T[H] ? T[H].parts.push(M) : E.push(T[H] = { id: H, parts: [M] });\n        }\n        return E;\n      }\n      function A(b, g) {\n        var E = c(b.insertInto);\n        if (!E)\n          throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n        var T = f[f.length - 1];\n        if (b.insertAt === \"top\")\n          T ? T.nextSibling ? E.insertBefore(g, T.nextSibling) : E.appendChild(g) : E.insertBefore(g, E.firstChild), f.push(g);\n        else if (b.insertAt === \"bottom\")\n          E.appendChild(g);\n        else {\n          if (typeof b.insertAt != \"object\" || !b.insertAt.before)\n            throw new Error(`[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n`);\n          var O = c(b.insertInto + \" \" + b.insertAt.before);\n          E.insertBefore(g, O);\n        }\n      }\n      function N(b) {\n        if (b.parentNode === null)\n          return !1;\n        b.parentNode.removeChild(b);\n        var g = f.indexOf(b);\n        g >= 0 && f.splice(g, 1);\n      }\n      function _(b) {\n        var g = document.createElement(\"style\");\n        return b.attrs.type === void 0 && (b.attrs.type = \"text/css\"), y(g, b.attrs), A(b, g), g;\n      }\n      function y(b, g) {\n        Object.keys(g).forEach(function(E) {\n          b.setAttribute(E, g[E]);\n        });\n      }\n      function x(b, g) {\n        var E, T, O, S;\n        if (g.transform && b.css) {\n          if (!(S = g.transform(b.css)))\n            return function() {\n            };\n          b.css = S;\n        }\n        if (g.singleton) {\n          var H = h++;\n          E = u || (u = _(g)), T = R.bind(null, E, H, !1), O = R.bind(null, E, H, !0);\n        } else\n          b.sourceMap && typeof URL == \"function\" && typeof URL.createObjectURL == \"function\" && typeof URL.revokeObjectURL == \"function\" && typeof Blob == \"function\" && typeof btoa == \"function\" ? (E = function(M) {\n            var W = document.createElement(\"link\");\n            return M.attrs.type === void 0 && (M.attrs.type = \"text/css\"), M.attrs.rel = \"stylesheet\", y(W, M.attrs), A(M, W), W;\n          }(g), T = function(M, W, de) {\n            var Q = de.css, Ee = de.sourceMap, Mt = W.convertToAbsoluteUrls === void 0 && Ee;\n            (W.convertToAbsoluteUrls || Mt) && (Q = k(Q)), Ee && (Q += `\n/*# sourceMappingURL=data:application/json;base64,` + btoa(unescape(encodeURIComponent(JSON.stringify(Ee)))) + \" */\");\n            var Lt = new Blob([Q], { type: \"text/css\" }), Ve = M.href;\n            M.href = URL.createObjectURL(Lt), Ve && URL.revokeObjectURL(Ve);\n          }.bind(null, E, g), O = function() {\n            N(E), E.href && URL.revokeObjectURL(E.href);\n          }) : (E = _(g), T = function(M, W) {\n            var de = W.css, Q = W.media;\n            if (Q && M.setAttribute(\"media\", Q), M.styleSheet)\n              M.styleSheet.cssText = de;\n            else {\n              for (; M.firstChild; )\n                M.removeChild(M.firstChild);\n              M.appendChild(document.createTextNode(de));\n            }\n          }.bind(null, E), O = function() {\n            N(E);\n          });\n        return T(b), function(M) {\n          if (M) {\n            if (M.css === b.css && M.media === b.media && M.sourceMap === b.sourceMap)\n              return;\n            T(b = M);\n          } else\n            O();\n        };\n      }\n      t.exports = function(b, g) {\n        if (typeof DEBUG < \"u\" && DEBUG && typeof document != \"object\")\n          throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n        (g = g || {}).attrs = typeof g.attrs == \"object\" ? g.attrs : {}, g.singleton || typeof g.singleton == \"boolean\" || (g.singleton = l()), g.insertInto || (g.insertInto = \"head\"), g.insertAt || (g.insertAt = \"bottom\");\n        var E = v(b, g);\n        return p(E, g), function(T) {\n          for (var O = [], S = 0; S < E.length; S++) {\n            var H = E[S];\n            (M = a[H.id]).refs--, O.push(M);\n          }\n          for (T && p(v(T, g), g), S = 0; S < O.length; S++) {\n            var M;\n            if ((M = O[S]).refs === 0) {\n              for (var W = 0; W < M.parts.length; W++)\n                M.parts[W]();\n              delete a[M.id];\n            }\n          }\n        };\n      };\n      var w, I = (w = [], function(b, g) {\n        return w[b] = g, w.filter(Boolean).join(`\n`);\n      });\n      function R(b, g, E, T) {\n        var O = E ? \"\" : T.css;\n        if (b.styleSheet)\n          b.styleSheet.cssText = I(g, O);\n        else {\n          var S = document.createTextNode(O), H = b.childNodes;\n          H[g] && b.removeChild(H[g]), H.length ? b.insertBefore(S, H[g]) : b.appendChild(S);\n        }\n      }\n    }, function(t, o) {\n      t.exports = function(i) {\n        var n = typeof window < \"u\" && window.location;\n        if (!n)\n          throw new Error(\"fixUrls requires window.location\");\n        if (!i || typeof i != \"string\")\n          return i;\n        var r = n.protocol + \"//\" + n.host, a = r + n.pathname.replace(/\\/[^\\/]*$/, \"/\");\n        return i.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(l, c) {\n          var u, h = c.trim().replace(/^\"(.*)\"$/, function(f, k) {\n            return k;\n          }).replace(/^'(.*)'$/, function(f, k) {\n            return k;\n          });\n          return /^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(h) ? l : (u = h.indexOf(\"//\") === 0 ? h : h.indexOf(\"/\") === 0 ? r + h : a + h.replace(/^\\.\\//, \"\"), \"url(\" + JSON.stringify(u) + \")\");\n        });\n      };\n    }, function(t, o, i) {\n      var n, r, a, l, c, u, h, f, k;\n      t.exports = (n = \"cdx-notifies\", r = \"cdx-notify\", a = \"cdx-notify__cross\", l = \"cdx-notify__button--confirm\", c = \"cdx-notify__button--cancel\", u = \"cdx-notify__input\", h = \"cdx-notify__button\", f = \"cdx-notify__btns-wrapper\", { alert: k = function(p) {\n        var v = document.createElement(\"DIV\"), A = document.createElement(\"DIV\"), N = p.message, _ = p.style;\n        return v.classList.add(r), _ && v.classList.add(r + \"--\" + _), v.innerHTML = N, A.classList.add(a), A.addEventListener(\"click\", v.remove.bind(v)), v.appendChild(A), v;\n      }, confirm: function(p) {\n        var v = k(p), A = document.createElement(\"div\"), N = document.createElement(\"button\"), _ = document.createElement(\"button\"), y = v.querySelector(\".\" + a), x = p.cancelHandler, w = p.okHandler;\n        return A.classList.add(f), N.innerHTML = p.okText || \"Confirm\", _.innerHTML = p.cancelText || \"Cancel\", N.classList.add(h), _.classList.add(h), N.classList.add(l), _.classList.add(c), x && typeof x == \"function\" && (_.addEventListener(\"click\", x), y.addEventListener(\"click\", x)), w && typeof w == \"function\" && N.addEventListener(\"click\", w), N.addEventListener(\"click\", v.remove.bind(v)), _.addEventListener(\"click\", v.remove.bind(v)), A.appendChild(N), A.appendChild(_), v.appendChild(A), v;\n      }, prompt: function(p) {\n        var v = k(p), A = document.createElement(\"div\"), N = document.createElement(\"button\"), _ = document.createElement(\"input\"), y = v.querySelector(\".\" + a), x = p.cancelHandler, w = p.okHandler;\n        return A.classList.add(f), N.innerHTML = p.okText || \"Ok\", N.classList.add(h), N.classList.add(l), _.classList.add(u), p.placeholder && _.setAttribute(\"placeholder\", p.placeholder), p.default && (_.value = p.default), p.inputType && (_.type = p.inputType), x && typeof x == \"function\" && y.addEventListener(\"click\", x), w && typeof w == \"function\" && N.addEventListener(\"click\", function() {\n          w(_.value);\n        }), N.addEventListener(\"click\", v.remove.bind(v)), A.appendChild(_), A.appendChild(N), v.appendChild(A), v;\n      }, getWrapper: function() {\n        var p = document.createElement(\"DIV\");\n        return p.classList.add(n), p;\n      } });\n    }]);\n  });\n})(so);\nconst ro = /* @__PURE__ */ xe(Le);\nclass ao {\n  /**\n   * Show web notification\n   *\n   * @param {NotifierOptions | ConfirmNotifierOptions | PromptNotifierOptions} options - notification options\n   */\n  show(e) {\n    ro.show(e);\n  }\n}\nclass lo extends C {\n  /**\n   * @param moduleConfiguration - Module Configuration\n   * @param moduleConfiguration.config - Editor's config\n   * @param moduleConfiguration.eventsDispatcher - Editor's event dispatcher\n   */\n  constructor({ config: e, eventsDispatcher: t }) {\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.notifier = new ao();\n  }\n  /**\n   * Available methods\n   */\n  get methods() {\n    return {\n      show: (e) => this.show(e)\n    };\n  }\n  /**\n   * Show notification\n   *\n   * @param {NotifierOptions} options - message option\n   */\n  show(e) {\n    return this.notifier.show(e);\n  }\n}\nclass co extends C {\n  /**\n   * Available methods\n   */\n  get methods() {\n    const e = () => this.isEnabled;\n    return {\n      toggle: (t) => this.toggle(t),\n      get isEnabled() {\n        return e();\n      }\n    };\n  }\n  /**\n   * Set or toggle read-only state\n   *\n   * @param {boolean|undefined} state - set or toggle state\n   * @returns {boolean} current value\n   */\n  toggle(e) {\n    return this.Editor.ReadOnly.toggle(e);\n  }\n  /**\n   * Returns current read-only state\n   */\n  get isEnabled() {\n    return this.Editor.ReadOnly.isEnabled;\n  }\n}\nvar Oe = {}, ho = {\n  get exports() {\n    return Oe;\n  },\n  set exports(s) {\n    Oe = s;\n  }\n};\n(function(s, e) {\n  (function(t, o) {\n    s.exports = o();\n  })(Ot, function() {\n    function t(h) {\n      var f = h.tags, k = Object.keys(f), p = k.map(function(v) {\n        return typeof f[v];\n      }).every(function(v) {\n        return v === \"object\" || v === \"boolean\" || v === \"function\";\n      });\n      if (!p)\n        throw new Error(\"The configuration was invalid\");\n      this.config = h;\n    }\n    var o = [\"P\", \"LI\", \"TD\", \"TH\", \"DIV\", \"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"PRE\"];\n    function i(h) {\n      return o.indexOf(h.nodeName) !== -1;\n    }\n    var n = [\"A\", \"B\", \"STRONG\", \"I\", \"EM\", \"SUB\", \"SUP\", \"U\", \"STRIKE\"];\n    function r(h) {\n      return n.indexOf(h.nodeName) !== -1;\n    }\n    t.prototype.clean = function(h) {\n      const f = document.implementation.createHTMLDocument(), k = f.createElement(\"div\");\n      return k.innerHTML = h, this._sanitize(f, k), k.innerHTML;\n    }, t.prototype._sanitize = function(h, f) {\n      var k = a(h, f), p = k.firstChild();\n      if (p)\n        do {\n          if (p.nodeType === Node.TEXT_NODE)\n            if (p.data.trim() === \"\" && (p.previousElementSibling && i(p.previousElementSibling) || p.nextElementSibling && i(p.nextElementSibling))) {\n              f.removeChild(p), this._sanitize(h, f);\n              break;\n            } else\n              continue;\n          if (p.nodeType === Node.COMMENT_NODE) {\n            f.removeChild(p), this._sanitize(h, f);\n            break;\n          }\n          var v = r(p), A;\n          v && (A = Array.prototype.some.call(p.childNodes, i));\n          var N = !!f.parentNode, _ = i(f) && i(p) && N, y = p.nodeName.toLowerCase(), x = l(this.config, y, p), w = v && A;\n          if (w || c(p, x) || !this.config.keepNestedBlockElements && _) {\n            if (!(p.nodeName === \"SCRIPT\" || p.nodeName === \"STYLE\"))\n              for (; p.childNodes.length > 0; )\n                f.insertBefore(p.childNodes[0], p);\n            f.removeChild(p), this._sanitize(h, f);\n            break;\n          }\n          for (var I = 0; I < p.attributes.length; I += 1) {\n            var R = p.attributes[I];\n            u(R, x, p) && (p.removeAttribute(R.name), I = I - 1);\n          }\n          this._sanitize(h, p);\n        } while (p = k.nextSibling());\n    };\n    function a(h, f) {\n      return h.createTreeWalker(\n        f,\n        NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT,\n        null,\n        !1\n      );\n    }\n    function l(h, f, k) {\n      return typeof h.tags[f] == \"function\" ? h.tags[f](k) : h.tags[f];\n    }\n    function c(h, f) {\n      return typeof f > \"u\" ? !0 : typeof f == \"boolean\" ? !f : !1;\n    }\n    function u(h, f, k) {\n      var p = h.name.toLowerCase();\n      return f === !0 ? !1 : typeof f[p] == \"function\" ? !f[p](h.value, k) : typeof f[p] > \"u\" || f[p] === !1 ? !0 : typeof f[p] == \"string\" ? f[p] !== h.value : !1;\n    }\n    return t;\n  });\n})(ho);\nconst uo = Oe;\nfunction ut(s, e) {\n  return s.map((t) => {\n    const o = D(e) ? e(t.tool) : e;\n    return V(o) || (t.data = Fe(t.data, o)), t;\n  });\n}\nfunction Z(s, e = {}) {\n  const t = {\n    tags: e\n  };\n  return new uo(t).clean(s);\n}\nfunction Fe(s, e) {\n  return Array.isArray(s) ? po(s, e) : z(s) ? fo(s, e) : J(s) ? go(s, e) : s;\n}\nfunction po(s, e) {\n  return s.map((t) => Fe(t, e));\n}\nfunction fo(s, e) {\n  const t = {};\n  for (const o in s) {\n    if (!Object.prototype.hasOwnProperty.call(s, o))\n      continue;\n    const i = s[o], n = bo(e[o]) ? e[o] : e;\n    t[o] = Fe(i, n);\n  }\n  return t;\n}\nfunction go(s, e) {\n  return z(e) ? Z(s, e) : e === !1 ? Z(s, {}) : s;\n}\nfunction bo(s) {\n  return z(s) || Rt(s) || D(s);\n}\nclass mo extends C {\n  /**\n   * Available methods\n   *\n   * @returns {SanitizerConfig}\n   */\n  get methods() {\n    return {\n      clean: (e, t) => this.clean(e, t)\n    };\n  }\n  /**\n   * Perform sanitizing of a string\n   *\n   * @param {string} taintString - what to sanitize\n   * @param {SanitizerConfig} config - sanitizer config\n   * @returns {string}\n   */\n  clean(e, t) {\n    return Z(e, t);\n  }\n}\nclass ko extends C {\n  /**\n   * Available methods\n   *\n   * @returns {Saver}\n   */\n  get methods() {\n    return {\n      save: () => this.save()\n    };\n  }\n  /**\n   * Return Editor's data\n   *\n   * @returns {OutputData}\n   */\n  save() {\n    const e = \"Editor's content can not be saved in read-only mode\";\n    return this.Editor.ReadOnly.isEnabled ? (K(e, \"warn\"), Promise.reject(new Error(e))) : this.Editor.Saver.save();\n  }\n}\nclass vo extends C {\n  /**\n   * Available methods\n   *\n   * @returns {SelectionAPIInterface}\n   */\n  get methods() {\n    return {\n      findParentTag: (e, t) => this.findParentTag(e, t),\n      expandToTag: (e) => this.expandToTag(e)\n    };\n  }\n  /**\n   * Looks ahead from selection and find passed tag with class name\n   *\n   * @param {string} tagName - tag to find\n   * @param {string} className - tag's class name\n   * @returns {HTMLElement|null}\n   */\n  findParentTag(e, t) {\n    return new m().findParentTag(e, t);\n  }\n  /**\n   * Expand selection to passed tag\n   *\n   * @param {HTMLElement} node - tag that should contain selection\n   */\n  expandToTag(e) {\n    new m().expandToTag(e);\n  }\n}\nclass xo extends C {\n  /**\n   * Exported classes\n   */\n  get classes() {\n    return {\n      /**\n       * Base Block styles\n       */\n      block: \"cdx-block\",\n      /**\n       * Inline Tools styles\n       */\n      inlineToolButton: \"ce-inline-tool\",\n      inlineToolButtonActive: \"ce-inline-tool--active\",\n      /**\n       * UI elements\n       */\n      input: \"cdx-input\",\n      loader: \"cdx-loader\",\n      button: \"cdx-button\",\n      /**\n       * Settings styles\n       */\n      settingsButton: \"cdx-settings-button\",\n      settingsButtonActive: \"cdx-settings-button--active\"\n    };\n  }\n}\nclass wo extends C {\n  /**\n   * Available methods\n   *\n   * @returns {Toolbar}\n   */\n  get methods() {\n    return {\n      close: () => this.close(),\n      open: () => this.open(),\n      toggleBlockSettings: (e) => this.toggleBlockSettings(e),\n      toggleToolbox: (e) => this.toggleToolbox(e)\n    };\n  }\n  /**\n   * Open toolbar\n   */\n  open() {\n    this.Editor.Toolbar.moveAndOpen();\n  }\n  /**\n   * Close toolbar and all included elements\n   */\n  close() {\n    this.Editor.Toolbar.close();\n  }\n  /**\n   * Toggles Block Setting of the current block\n   *\n   * @param {boolean} openingState —  opening state of Block Setting\n   */\n  toggleBlockSettings(e) {\n    if (this.Editor.BlockManager.currentBlockIndex === -1) {\n      K(\"Could't toggle the Toolbar because there is no block selected \", \"warn\");\n      return;\n    }\n    e ?? !this.Editor.BlockSettings.opened ? (this.Editor.Toolbar.moveAndOpen(), this.Editor.BlockSettings.open()) : this.Editor.BlockSettings.close();\n  }\n  /**\n   * Open toolbox\n   *\n   * @param {boolean} openingState - Opening state of toolbox\n   */\n  toggleToolbox(e) {\n    if (this.Editor.BlockManager.currentBlockIndex === -1) {\n      K(\"Could't toggle the Toolbox because there is no block selected \", \"warn\");\n      return;\n    }\n    e ?? !this.Editor.Toolbar.toolbox.opened ? (this.Editor.Toolbar.moveAndOpen(), this.Editor.Toolbar.toolbox.open()) : this.Editor.Toolbar.toolbox.close();\n  }\n}\nvar Ae = {}, yo = {\n  get exports() {\n    return Ae;\n  },\n  set exports(s) {\n    Ae = s;\n  }\n};\n/*!\n * CodeX.Tooltips\n * \n * @version 1.0.5\n * \n * @licence MIT\n * @author CodeX <https://codex.so>\n * \n * \n */\n(function(s, e) {\n  (function(t, o) {\n    s.exports = o();\n  })(window, function() {\n    return function(t) {\n      var o = {};\n      function i(n) {\n        if (o[n])\n          return o[n].exports;\n        var r = o[n] = { i: n, l: !1, exports: {} };\n        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n      }\n      return i.m = t, i.c = o, i.d = function(n, r, a) {\n        i.o(n, r) || Object.defineProperty(n, r, { enumerable: !0, get: a });\n      }, i.r = function(n) {\n        typeof Symbol < \"u\" && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, { value: \"Module\" }), Object.defineProperty(n, \"__esModule\", { value: !0 });\n      }, i.t = function(n, r) {\n        if (1 & r && (n = i(n)), 8 & r || 4 & r && typeof n == \"object\" && n && n.__esModule)\n          return n;\n        var a = /* @__PURE__ */ Object.create(null);\n        if (i.r(a), Object.defineProperty(a, \"default\", { enumerable: !0, value: n }), 2 & r && typeof n != \"string\")\n          for (var l in n)\n            i.d(a, l, function(c) {\n              return n[c];\n            }.bind(null, l));\n        return a;\n      }, i.n = function(n) {\n        var r = n && n.__esModule ? function() {\n          return n.default;\n        } : function() {\n          return n;\n        };\n        return i.d(r, \"a\", r), r;\n      }, i.o = function(n, r) {\n        return Object.prototype.hasOwnProperty.call(n, r);\n      }, i.p = \"\", i(i.s = 0);\n    }([function(t, o, i) {\n      t.exports = i(1);\n    }, function(t, o, i) {\n      i.r(o), i.d(o, \"default\", function() {\n        return n;\n      });\n      class n {\n        constructor() {\n          this.nodes = { wrapper: null, content: null }, this.showed = !1, this.offsetTop = 10, this.offsetLeft = 10, this.offsetRight = 10, this.hidingDelay = 0, this.handleWindowScroll = () => {\n            this.showed && this.hide(!0);\n          }, this.loadStyles(), this.prepare(), window.addEventListener(\"scroll\", this.handleWindowScroll, { passive: !0 });\n        }\n        get CSS() {\n          return { tooltip: \"ct\", tooltipContent: \"ct__content\", tooltipShown: \"ct--shown\", placement: { left: \"ct--left\", bottom: \"ct--bottom\", right: \"ct--right\", top: \"ct--top\" } };\n        }\n        show(a, l, c) {\n          this.nodes.wrapper || this.prepare(), this.hidingTimeout && clearTimeout(this.hidingTimeout);\n          const u = Object.assign({ placement: \"bottom\", marginTop: 0, marginLeft: 0, marginRight: 0, marginBottom: 0, delay: 70, hidingDelay: 0 }, c);\n          if (u.hidingDelay && (this.hidingDelay = u.hidingDelay), this.nodes.content.innerHTML = \"\", typeof l == \"string\")\n            this.nodes.content.appendChild(document.createTextNode(l));\n          else {\n            if (!(l instanceof Node))\n              throw Error(\"[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But \" + typeof l + \" given.\");\n            this.nodes.content.appendChild(l);\n          }\n          switch (this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)), u.placement) {\n            case \"top\":\n              this.placeTop(a, u);\n              break;\n            case \"left\":\n              this.placeLeft(a, u);\n              break;\n            case \"right\":\n              this.placeRight(a, u);\n              break;\n            case \"bottom\":\n            default:\n              this.placeBottom(a, u);\n          }\n          u && u.delay ? this.showingTimeout = setTimeout(() => {\n            this.nodes.wrapper.classList.add(this.CSS.tooltipShown), this.showed = !0;\n          }, u.delay) : (this.nodes.wrapper.classList.add(this.CSS.tooltipShown), this.showed = !0);\n        }\n        hide(a = !1) {\n          if (this.hidingDelay && !a)\n            return this.hidingTimeout && clearTimeout(this.hidingTimeout), void (this.hidingTimeout = setTimeout(() => {\n              this.hide(!0);\n            }, this.hidingDelay));\n          this.nodes.wrapper.classList.remove(this.CSS.tooltipShown), this.showed = !1, this.showingTimeout && clearTimeout(this.showingTimeout);\n        }\n        onHover(a, l, c) {\n          a.addEventListener(\"mouseenter\", () => {\n            this.show(a, l, c);\n          }), a.addEventListener(\"mouseleave\", () => {\n            this.hide();\n          });\n        }\n        destroy() {\n          this.nodes.wrapper.remove(), window.removeEventListener(\"scroll\", this.handleWindowScroll);\n        }\n        prepare() {\n          this.nodes.wrapper = this.make(\"div\", this.CSS.tooltip), this.nodes.content = this.make(\"div\", this.CSS.tooltipContent), this.append(this.nodes.wrapper, this.nodes.content), this.append(document.body, this.nodes.wrapper);\n        }\n        loadStyles() {\n          const a = \"codex-tooltips-style\";\n          if (document.getElementById(a))\n            return;\n          const l = i(2), c = this.make(\"style\", null, { textContent: l.toString(), id: a });\n          this.prepend(document.head, c);\n        }\n        placeBottom(a, l) {\n          const c = a.getBoundingClientRect(), u = c.left + a.clientWidth / 2 - this.nodes.wrapper.offsetWidth / 2, h = c.bottom + window.pageYOffset + this.offsetTop + l.marginTop;\n          this.applyPlacement(\"bottom\", u, h);\n        }\n        placeTop(a, l) {\n          const c = a.getBoundingClientRect(), u = c.left + a.clientWidth / 2 - this.nodes.wrapper.offsetWidth / 2, h = c.top + window.pageYOffset - this.nodes.wrapper.clientHeight - this.offsetTop;\n          this.applyPlacement(\"top\", u, h);\n        }\n        placeLeft(a, l) {\n          const c = a.getBoundingClientRect(), u = c.left - this.nodes.wrapper.offsetWidth - this.offsetLeft - l.marginLeft, h = c.top + window.pageYOffset + a.clientHeight / 2 - this.nodes.wrapper.offsetHeight / 2;\n          this.applyPlacement(\"left\", u, h);\n        }\n        placeRight(a, l) {\n          const c = a.getBoundingClientRect(), u = c.right + this.offsetRight + l.marginRight, h = c.top + window.pageYOffset + a.clientHeight / 2 - this.nodes.wrapper.offsetHeight / 2;\n          this.applyPlacement(\"right\", u, h);\n        }\n        applyPlacement(a, l, c) {\n          this.nodes.wrapper.classList.add(this.CSS.placement[a]), this.nodes.wrapper.style.left = l + \"px\", this.nodes.wrapper.style.top = c + \"px\";\n        }\n        make(a, l = null, c = {}) {\n          const u = document.createElement(a);\n          Array.isArray(l) ? u.classList.add(...l) : l && u.classList.add(l);\n          for (const h in c)\n            c.hasOwnProperty(h) && (u[h] = c[h]);\n          return u;\n        }\n        append(a, l) {\n          Array.isArray(l) ? l.forEach((c) => a.appendChild(c)) : a.appendChild(l);\n        }\n        prepend(a, l) {\n          Array.isArray(l) ? (l = l.reverse()).forEach((c) => a.prepend(c)) : a.prepend(l);\n        }\n      }\n    }, function(t, o) {\n      t.exports = `.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:\"\";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url(\"\")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"><path d=\"M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z\"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:\"\";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`;\n    }]).default;\n  });\n})(yo);\nconst Eo = /* @__PURE__ */ xe(Ae);\nclass He {\n  constructor() {\n    this.lib = new Eo();\n  }\n  /**\n   * Release the library\n   */\n  destroy() {\n    this.lib.destroy();\n  }\n  /**\n   * Shows tooltip on element with passed HTML content\n   *\n   * @param {HTMLElement} element - any HTML element in DOM\n   * @param content - tooltip's content\n   * @param options - showing settings\n   */\n  show(e, t, o) {\n    this.lib.show(e, t, o);\n  }\n  /**\n   * Hides tooltip\n   *\n   * @param skipHidingDelay — pass true to immediately hide the tooltip\n   */\n  hide(e = !1) {\n    this.lib.hide(e);\n  }\n  /**\n   * Binds 'mouseenter' and 'mouseleave' events that shows/hides the Tooltip\n   *\n   * @param {HTMLElement} element - any HTML element in DOM\n   * @param content - tooltip's content\n   * @param options - showing settings\n   */\n  onHover(e, t, o) {\n    this.lib.onHover(e, t, o);\n  }\n}\nclass Bo extends C {\n  /**\n   * @class\n   * @param moduleConfiguration - Module Configuration\n   * @param moduleConfiguration.config - Editor's config\n   * @param moduleConfiguration.eventsDispatcher - Editor's event dispatcher\n   */\n  constructor({ config: e, eventsDispatcher: t }) {\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.tooltip = new He();\n  }\n  /**\n   * Destroy Module\n   */\n  destroy() {\n    this.tooltip.destroy();\n  }\n  /**\n   * Available methods\n   */\n  get methods() {\n    return {\n      show: (e, t, o) => this.show(e, t, o),\n      hide: () => this.hide(),\n      onHover: (e, t, o) => this.onHover(e, t, o)\n    };\n  }\n  /**\n   * Method show tooltip on element with passed HTML content\n   *\n   * @param {HTMLElement} element - element on which tooltip should be shown\n   * @param {TooltipContent} content - tooltip content\n   * @param {TooltipOptions} options - tooltip options\n   */\n  show(e, t, o) {\n    this.tooltip.show(e, t, o);\n  }\n  /**\n   * Method hides tooltip on HTML page\n   */\n  hide() {\n    this.tooltip.hide();\n  }\n  /**\n   * Decorator for showing Tooltip by mouseenter/mouseleave\n   *\n   * @param {HTMLElement} element - element on which tooltip should be shown\n   * @param {TooltipContent} content - tooltip content\n   * @param {TooltipOptions} options - tooltip options\n   */\n  onHover(e, t, o) {\n    this.tooltip.onHover(e, t, o);\n  }\n}\nclass To extends C {\n  /**\n   * Available methods / getters\n   */\n  get methods() {\n    return {\n      nodes: this.editorNodes\n      /**\n       * There can be added some UI methods, like toggleThinMode() etc\n       */\n    };\n  }\n  /**\n   * Exported classes\n   */\n  get editorNodes() {\n    return {\n      /**\n       * Top-level editor instance wrapper\n       */\n      wrapper: this.Editor.UI.nodes.wrapper,\n      /**\n       * Element that holds all the Blocks\n       */\n      redactor: this.Editor.UI.nodes.redactor\n    };\n  }\n}\nfunction pt(s, e) {\n  const t = {};\n  return Object.entries(s).forEach(([o, i]) => {\n    if (z(i)) {\n      const n = e ? `${e}.${o}` : o;\n      Object.values(i).every((a) => J(a)) ? t[o] = n : t[o] = pt(i, n);\n      return;\n    }\n    t[o] = i;\n  }), t;\n}\nconst X = pt(at);\nfunction Co(s, e) {\n  const t = {};\n  return Object.keys(s).forEach((o) => {\n    const i = e[o];\n    i !== void 0 ? t[i] = s[o] : t[o] = s[o];\n  }), t;\n}\nconst So = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11\"/></svg>', ft = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10\"/></svg>', Io = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15\"/></svg>', Mo = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16\"/></svg>', Lo = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"4\" stroke=\"currentColor\" stroke-width=\"2\"/></svg>', Oo = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M13.34 10C12.4223 12.7337 11 17 11 17\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M14.21 7H14.2\"/></svg>', Qe = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72\"/></svg>', Ao = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M9.40999 7.29999H9.4\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M14.6 7.29999H14.59\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M9.30999 12H9.3\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M14.6 12H14.59\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M9.40999 16.7H9.4\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2.6\" d=\"M14.6 16.7H14.59\"/></svg>', _o = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M12 7V12M12 17V12M17 12H12M12 12H7\"/></svg>', No = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><circle cx=\"10.5\" cy=\"10.5\" r=\"5.5\" stroke=\"currentColor\" stroke-width=\"2\"/><line x1=\"15.4142\" x2=\"19\" y1=\"15\" y2=\"18.5858\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\"/></svg>', Ro = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397\"/><line x1=\"12.1142\" x2=\"11.7\" y1=\"12.2\" y2=\"11.7858\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\"/></svg>', Do = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><rect width=\"14\" height=\"14\" x=\"5\" y=\"5\" stroke=\"currentColor\" stroke-width=\"2\" rx=\"4\"/><line x1=\"12\" x2=\"12\" y1=\"9\" y2=\"12\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\"/><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M12 15.02V15.01\"/></svg>';\nclass P {\n  /**\n   * Constructs popover item instance\n   *\n   * @param params - popover item construction params\n   */\n  constructor(e) {\n    this.nodes = {\n      root: null,\n      icon: null\n    }, this.confirmationState = null, this.removeSpecialFocusBehavior = () => {\n      this.nodes.root.classList.remove(P.CSS.noFocus);\n    }, this.removeSpecialHoverBehavior = () => {\n      this.nodes.root.classList.remove(P.CSS.noHover);\n    }, this.onErrorAnimationEnd = () => {\n      this.nodes.icon.classList.remove(P.CSS.wobbleAnimation), this.nodes.icon.removeEventListener(\"animationend\", this.onErrorAnimationEnd);\n    }, this.params = e, this.nodes.root = this.make(e);\n  }\n  /**\n   * True if item is disabled and hence not clickable\n   */\n  get isDisabled() {\n    return this.params.isDisabled;\n  }\n  /**\n   * Exposes popover item toggle parameter\n   */\n  get toggle() {\n    return this.params.toggle;\n  }\n  /**\n   * Item title\n   */\n  get title() {\n    return this.params.title;\n  }\n  /**\n   * True if popover should close once item is activated\n   */\n  get closeOnActivate() {\n    return this.params.closeOnActivate;\n  }\n  /**\n   * True if confirmation state is enabled for popover item\n   */\n  get isConfirmationStateEnabled() {\n    return this.confirmationState !== null;\n  }\n  /**\n   * True if item is focused in keyboard navigation process\n   */\n  get isFocused() {\n    return this.nodes.root.classList.contains(P.CSS.focused);\n  }\n  /**\n   * Popover item CSS classes\n   */\n  static get CSS() {\n    return {\n      container: \"ce-popover-item\",\n      title: \"ce-popover-item__title\",\n      secondaryTitle: \"ce-popover-item__secondary-title\",\n      icon: \"ce-popover-item__icon\",\n      active: \"ce-popover-item--active\",\n      disabled: \"ce-popover-item--disabled\",\n      focused: \"ce-popover-item--focused\",\n      hidden: \"ce-popover-item--hidden\",\n      confirmationState: \"ce-popover-item--confirmation\",\n      noHover: \"ce-popover-item--no-hover\",\n      noFocus: \"ce-popover-item--no-focus\",\n      wobbleAnimation: \"wobble\"\n    };\n  }\n  /**\n   * Returns popover item root element\n   */\n  getElement() {\n    return this.nodes.root;\n  }\n  /**\n   * Called on popover item click\n   */\n  handleClick() {\n    if (this.isConfirmationStateEnabled) {\n      this.activateOrEnableConfirmationMode(this.confirmationState);\n      return;\n    }\n    this.activateOrEnableConfirmationMode(this.params);\n  }\n  /**\n   * Toggles item active state\n   *\n   * @param isActive - true if item should strictly should become active\n   */\n  toggleActive(e) {\n    this.nodes.root.classList.toggle(P.CSS.active, e);\n  }\n  /**\n   * Toggles item hidden state\n   *\n   * @param isHidden - true if item should be hidden\n   */\n  toggleHidden(e) {\n    this.nodes.root.classList.toggle(P.CSS.hidden, e);\n  }\n  /**\n   * Resets popover item to its original state\n   */\n  reset() {\n    this.isConfirmationStateEnabled && this.disableConfirmationMode();\n  }\n  /**\n   * Method called once item becomes focused during keyboard navigation\n   */\n  onFocus() {\n    this.disableSpecialHoverAndFocusBehavior();\n  }\n  /**\n   * Constructs HTML element corresponding to popover item params\n   *\n   * @param params - item construction params\n   */\n  make(e) {\n    const t = d.make(\"div\", P.CSS.container);\n    return e.name && (t.dataset.itemName = e.name), this.nodes.icon = d.make(\"div\", P.CSS.icon, {\n      innerHTML: e.icon || Lo\n    }), t.appendChild(this.nodes.icon), t.appendChild(d.make(\"div\", P.CSS.title, {\n      innerHTML: e.title || \"\"\n    })), e.secondaryLabel && t.appendChild(d.make(\"div\", P.CSS.secondaryTitle, {\n      textContent: e.secondaryLabel\n    })), e.isActive && t.classList.add(P.CSS.active), e.isDisabled && t.classList.add(P.CSS.disabled), t;\n  }\n  /**\n   * Activates confirmation mode for the item.\n   *\n   * @param newState - new popover item params that should be applied\n   */\n  enableConfirmationMode(e) {\n    const t = {\n      ...this.params,\n      ...e,\n      confirmation: e.confirmation\n    }, o = this.make(t);\n    this.nodes.root.innerHTML = o.innerHTML, this.nodes.root.classList.add(P.CSS.confirmationState), this.confirmationState = e, this.enableSpecialHoverAndFocusBehavior();\n  }\n  /**\n   * Returns item to its original state\n   */\n  disableConfirmationMode() {\n    const e = this.make(this.params);\n    this.nodes.root.innerHTML = e.innerHTML, this.nodes.root.classList.remove(P.CSS.confirmationState), this.confirmationState = null, this.disableSpecialHoverAndFocusBehavior();\n  }\n  /**\n   * Enables special focus and hover behavior for item in confirmation state.\n   * This is needed to prevent item from being highlighted as hovered/focused just after click.\n   */\n  enableSpecialHoverAndFocusBehavior() {\n    this.nodes.root.classList.add(P.CSS.noHover), this.nodes.root.classList.add(P.CSS.noFocus), this.nodes.root.addEventListener(\"mouseleave\", this.removeSpecialHoverBehavior, { once: !0 });\n  }\n  /**\n   * Disables special focus and hover behavior\n   */\n  disableSpecialHoverAndFocusBehavior() {\n    this.removeSpecialFocusBehavior(), this.removeSpecialHoverBehavior(), this.nodes.root.removeEventListener(\"mouseleave\", this.removeSpecialHoverBehavior);\n  }\n  /**\n   * Executes item's onActivate callback if the item has no confirmation configured\n   *\n   * @param item - item to activate or bring to confirmation mode\n   */\n  activateOrEnableConfirmationMode(e) {\n    if (e.confirmation === void 0)\n      try {\n        e.onActivate(e), this.disableConfirmationMode();\n      } catch {\n        this.animateError();\n      }\n    else\n      this.enableConfirmationMode(e.confirmation);\n  }\n  /**\n   * Animates item which symbolizes that error occured while executing 'onActivate()' callback\n   */\n  animateError() {\n    this.nodes.icon.classList.contains(P.CSS.wobbleAnimation) || (this.nodes.icon.classList.add(P.CSS.wobbleAnimation), this.nodes.icon.addEventListener(\"animationend\", this.onErrorAnimationEnd));\n  }\n}\nconst he = class {\n  /**\n   * @param {HTMLElement[]} nodeList — the list of iterable HTML-items\n   * @param {string} focusedCssClass - user-provided CSS-class that will be set in flipping process\n   */\n  constructor(s, e) {\n    this.cursor = -1, this.items = [], this.items = s || [], this.focusedCssClass = e;\n  }\n  /**\n   * Returns Focused button Node\n   *\n   * @returns {HTMLElement}\n   */\n  get currentItem() {\n    return this.cursor === -1 ? null : this.items[this.cursor];\n  }\n  /**\n   * Sets cursor to specified position\n   *\n   * @param cursorPosition - new cursor position\n   */\n  setCursor(s) {\n    s < this.items.length && s >= -1 && (this.dropCursor(), this.cursor = s, this.items[this.cursor].classList.add(this.focusedCssClass));\n  }\n  /**\n   * Sets items. Can be used when iterable items changed dynamically\n   *\n   * @param {HTMLElement[]} nodeList - nodes to iterate\n   */\n  setItems(s) {\n    this.items = s;\n  }\n  /**\n   * Sets cursor next to the current\n   */\n  next() {\n    this.cursor = this.leafNodesAndReturnIndex(he.directions.RIGHT);\n  }\n  /**\n   * Sets cursor before current\n   */\n  previous() {\n    this.cursor = this.leafNodesAndReturnIndex(he.directions.LEFT);\n  }\n  /**\n   * Sets cursor to the default position and removes CSS-class from previously focused item\n   */\n  dropCursor() {\n    this.cursor !== -1 && (this.items[this.cursor].classList.remove(this.focusedCssClass), this.cursor = -1);\n  }\n  /**\n   * Leafs nodes inside the target list from active element\n   *\n   * @param {string} direction - leaf direction. Can be 'left' or 'right'\n   * @returns {number} index of focused node\n   */\n  leafNodesAndReturnIndex(s) {\n    if (this.items.length === 0)\n      return this.cursor;\n    let e = this.cursor;\n    return e === -1 ? e = s === he.directions.RIGHT ? -1 : 0 : this.items[e].classList.remove(this.focusedCssClass), s === he.directions.RIGHT ? e = (e + 1) % this.items.length : e = (this.items.length + e - 1) % this.items.length, d.canSetCaret(this.items[e]) && re(() => m.setCursor(this.items[e]), 50)(), this.items[e].classList.add(this.focusedCssClass), e;\n  }\n};\nlet ne = he;\nne.directions = {\n  RIGHT: \"right\",\n  LEFT: \"left\"\n};\nclass G {\n  /**\n   * @param {FlipperOptions} options - different constructing settings\n   */\n  constructor(e) {\n    this.iterator = null, this.activated = !1, this.flipCallbacks = [], this.onKeyDown = (t) => {\n      if (this.isEventReadyForHandling(t))\n        switch (G.usedKeys.includes(t.keyCode) && t.preventDefault(), t.keyCode) {\n          case B.TAB:\n            this.handleTabPress(t);\n            break;\n          case B.LEFT:\n          case B.UP:\n            this.flipLeft();\n            break;\n          case B.RIGHT:\n          case B.DOWN:\n            this.flipRight();\n            break;\n          case B.ENTER:\n            this.handleEnterPress(t);\n            break;\n        }\n    }, this.iterator = new ne(e.items, e.focusedItemClass), this.activateCallback = e.activateCallback, this.allowedKeys = e.allowedKeys || G.usedKeys;\n  }\n  /**\n   * True if flipper is currently activated\n   */\n  get isActivated() {\n    return this.activated;\n  }\n  /**\n   * Array of keys (codes) that is handled by Flipper\n   * Used to:\n   *  - preventDefault only for this keys, not all keydowns (@see constructor)\n   *  - to skip external behaviours only for these keys, when filler is activated (@see BlockEvents@arrowRightAndDown)\n   */\n  static get usedKeys() {\n    return [\n      B.TAB,\n      B.LEFT,\n      B.RIGHT,\n      B.ENTER,\n      B.UP,\n      B.DOWN\n    ];\n  }\n  /**\n   * Active tab/arrows handling by flipper\n   *\n   * @param items - Some modules (like, InlineToolbar, BlockSettings) might refresh buttons dynamically\n   * @param cursorPosition - index of the item that should be focused once flipper is activated\n   */\n  activate(e, t) {\n    this.activated = !0, e && this.iterator.setItems(e), t !== void 0 && this.iterator.setCursor(t), document.addEventListener(\"keydown\", this.onKeyDown, !0);\n  }\n  /**\n   * Disable tab/arrows handling by flipper\n   */\n  deactivate() {\n    this.activated = !1, this.dropCursor(), document.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n  /**\n   * Focus first item\n   */\n  focusFirst() {\n    this.dropCursor(), this.flipRight();\n  }\n  /**\n   * Focuses previous flipper iterator item\n   */\n  flipLeft() {\n    this.iterator.previous(), this.flipCallback();\n  }\n  /**\n   * Focuses next flipper iterator item\n   */\n  flipRight() {\n    this.iterator.next(), this.flipCallback();\n  }\n  /**\n   * Return true if some button is focused\n   */\n  hasFocus() {\n    return !!this.iterator.currentItem;\n  }\n  /**\n   * Registeres function that should be executed on each navigation action\n   *\n   * @param cb - function to execute\n   */\n  onFlip(e) {\n    this.flipCallbacks.push(e);\n  }\n  /**\n   * Unregisteres function that is executed on each navigation action\n   *\n   * @param cb - function to stop executing\n   */\n  removeOnFlip(e) {\n    this.flipCallbacks = this.flipCallbacks.filter((t) => t !== e);\n  }\n  /**\n   * Drops flipper's iterator cursor\n   *\n   * @see DomIterator#dropCursor\n   */\n  dropCursor() {\n    this.iterator.dropCursor();\n  }\n  /**\n   * This function is fired before handling flipper keycodes\n   * The result of this function defines if it is need to be handled or not\n   *\n   * @param {KeyboardEvent} event - keydown keyboard event\n   * @returns {boolean}\n   */\n  isEventReadyForHandling(e) {\n    return this.activated && this.allowedKeys.includes(e.keyCode);\n  }\n  /**\n   * When flipper is activated tab press will leaf the items\n   *\n   * @param {KeyboardEvent} event - tab keydown event\n   */\n  handleTabPress(e) {\n    switch (e.shiftKey ? ne.directions.LEFT : ne.directions.RIGHT) {\n      case ne.directions.RIGHT:\n        this.flipRight();\n        break;\n      case ne.directions.LEFT:\n        this.flipLeft();\n        break;\n    }\n  }\n  /**\n   * Enter press will click current item if flipper is activated\n   *\n   * @param {KeyboardEvent} event - enter keydown event\n   */\n  handleEnterPress(e) {\n    this.activated && (this.iterator.currentItem && (e.stopPropagation(), e.preventDefault(), this.iterator.currentItem.click()), D(this.activateCallback) && this.activateCallback(this.iterator.currentItem));\n  }\n  /**\n   * Fired after flipping in any direction\n   */\n  flipCallback() {\n    this.iterator.currentItem && this.iterator.currentItem.scrollIntoViewIfNeeded(), this.flipCallbacks.forEach((e) => e());\n  }\n}\nclass pe {\n  /**\n   * Styles\n   */\n  static get CSS() {\n    return {\n      wrapper: \"cdx-search-field\",\n      icon: \"cdx-search-field__icon\",\n      input: \"cdx-search-field__input\"\n    };\n  }\n  /**\n   * @param options - available config\n   * @param options.items - searchable items list\n   * @param options.onSearch - search callback\n   * @param options.placeholder - input placeholder\n   */\n  constructor({ items: e, onSearch: t, placeholder: o }) {\n    this.listeners = new De(), this.items = e, this.onSearch = t, this.render(o);\n  }\n  /**\n   * Returns search field element\n   */\n  getElement() {\n    return this.wrapper;\n  }\n  /**\n   * Sets focus to the input\n   */\n  focus() {\n    this.input.focus();\n  }\n  /**\n   * Clears search query and results\n   */\n  clear() {\n    this.input.value = \"\", this.searchQuery = \"\", this.onSearch(\"\", this.foundItems);\n  }\n  /**\n   * Clears memory\n   */\n  destroy() {\n    this.listeners.removeAll();\n  }\n  /**\n   * Creates the search field\n   *\n   * @param placeholder - input placeholder\n   */\n  render(e) {\n    this.wrapper = d.make(\"div\", pe.CSS.wrapper);\n    const t = d.make(\"div\", pe.CSS.icon, {\n      innerHTML: No\n    });\n    this.input = d.make(\"input\", pe.CSS.input, {\n      placeholder: e\n    }), this.wrapper.appendChild(t), this.wrapper.appendChild(this.input), this.listeners.on(this.input, \"input\", () => {\n      this.searchQuery = this.input.value, this.onSearch(this.searchQuery, this.foundItems);\n    });\n  }\n  /**\n   * Returns list of found items for the current search query\n   */\n  get foundItems() {\n    return this.items.filter((e) => this.checkItem(e));\n  }\n  /**\n   * Contains logic for checking whether passed item conforms the search query\n   *\n   * @param item - item to be checked\n   */\n  checkItem(e) {\n    var i;\n    const t = ((i = e.title) == null ? void 0 : i.toLowerCase()) || \"\", o = this.searchQuery.toLowerCase();\n    return t.includes(o);\n  }\n}\nconst ue = class {\n  /**\n   * Locks body element scroll\n   */\n  lock() {\n    Ge ? this.lockHard() : document.body.classList.add(ue.CSS.scrollLocked);\n  }\n  /**\n   * Unlocks body element scroll\n   */\n  unlock() {\n    Ge ? this.unlockHard() : document.body.classList.remove(ue.CSS.scrollLocked);\n  }\n  /**\n   * Locks scroll in a hard way (via setting fixed position to body element)\n   */\n  lockHard() {\n    this.scrollPosition = window.pageYOffset, document.documentElement.style.setProperty(\n      \"--window-scroll-offset\",\n      `${this.scrollPosition}px`\n    ), document.body.classList.add(ue.CSS.scrollLockedHard);\n  }\n  /**\n   * Unlocks hard scroll lock\n   */\n  unlockHard() {\n    document.body.classList.remove(ue.CSS.scrollLockedHard), this.scrollPosition !== null && window.scrollTo(0, this.scrollPosition), this.scrollPosition = null;\n  }\n};\nlet gt = ue;\ngt.CSS = {\n  scrollLocked: \"ce-scroll-locked\",\n  scrollLockedHard: \"ce-scroll-locked--hard\"\n};\nvar Po = Object.defineProperty, Fo = Object.getOwnPropertyDescriptor, Ho = (s, e, t, o) => {\n  for (var i = o > 1 ? void 0 : o ? Fo(e, t) : e, n = s.length - 1, r; n >= 0; n--)\n    (r = s[n]) && (i = (o ? r(e, t, i) : r(i)) || i);\n  return o && i && Po(e, t, i), i;\n}, ge = /* @__PURE__ */ ((s) => (s.Close = \"close\", s))(ge || {});\nconst j = class extends we {\n  /**\n   * Constructs the instance\n   *\n   * @param params - popover construction params\n   */\n  constructor(s) {\n    super(), this.scopeElement = document.body, this.listeners = new De(), this.scrollLocker = new gt(), this.nodes = {\n      wrapper: null,\n      popover: null,\n      nothingFoundMessage: null,\n      customContent: null,\n      items: null,\n      overlay: null\n    }, this.messages = {\n      nothingFound: \"Nothing found\",\n      search: \"Search\"\n    }, this.onFlip = () => {\n      this.items.find((t) => t.isFocused).onFocus();\n    }, this.items = s.items.map((e) => new P(e)), s.scopeElement !== void 0 && (this.scopeElement = s.scopeElement), s.messages && (this.messages = {\n      ...this.messages,\n      ...s.messages\n    }), s.customContentFlippableItems && (this.customContentFlippableItems = s.customContentFlippableItems), this.make(), s.customContent && this.addCustomContent(s.customContent), s.searchable && this.addSearch(), this.initializeFlipper();\n  }\n  /**\n   * Popover CSS classes\n   */\n  static get CSS() {\n    return {\n      popover: \"ce-popover\",\n      popoverOpenTop: \"ce-popover--open-top\",\n      popoverOpened: \"ce-popover--opened\",\n      search: \"ce-popover__search\",\n      nothingFoundMessage: \"ce-popover__nothing-found-message\",\n      nothingFoundMessageDisplayed: \"ce-popover__nothing-found-message--displayed\",\n      customContent: \"ce-popover__custom-content\",\n      customContentHidden: \"ce-popover__custom-content--hidden\",\n      items: \"ce-popover__items\",\n      overlay: \"ce-popover__overlay\",\n      overlayHidden: \"ce-popover__overlay--hidden\"\n    };\n  }\n  /**\n   * Returns HTML element corresponding to the popover\n   */\n  getElement() {\n    return this.nodes.wrapper;\n  }\n  /**\n   * Returns true if some item inside popover is focused\n   */\n  hasFocus() {\n    return this.flipper.hasFocus();\n  }\n  /**\n   * Open popover\n   */\n  show() {\n    this.shouldOpenBottom || (this.nodes.popover.style.setProperty(\"--popover-height\", this.height + \"px\"), this.nodes.popover.classList.add(j.CSS.popoverOpenTop)), this.nodes.overlay.classList.remove(j.CSS.overlayHidden), this.nodes.popover.classList.add(j.CSS.popoverOpened), this.flipper.activate(this.flippableElements), this.search !== void 0 && setTimeout(() => {\n      this.search.focus();\n    }, 100), te() && this.scrollLocker.lock();\n  }\n  /**\n   * Closes popover\n   */\n  hide() {\n    this.nodes.popover.classList.remove(j.CSS.popoverOpened), this.nodes.popover.classList.remove(j.CSS.popoverOpenTop), this.nodes.overlay.classList.add(j.CSS.overlayHidden), this.flipper.deactivate(), this.items.forEach((s) => s.reset()), this.search !== void 0 && this.search.clear(), te() && this.scrollLocker.unlock(), this.emit(\n      \"close\"\n      /* Close */\n    );\n  }\n  /**\n   * Clears memory\n   */\n  destroy() {\n    this.flipper.deactivate(), this.listeners.removeAll(), te() && this.scrollLocker.unlock();\n  }\n  /**\n   * Constructs HTML element corresponding to popover\n   */\n  make() {\n    this.nodes.popover = d.make(\"div\", [j.CSS.popover]), this.nodes.nothingFoundMessage = d.make(\"div\", [j.CSS.nothingFoundMessage], {\n      textContent: this.messages.nothingFound\n    }), this.nodes.popover.appendChild(this.nodes.nothingFoundMessage), this.nodes.items = d.make(\"div\", [j.CSS.items]), this.items.forEach((s) => {\n      this.nodes.items.appendChild(s.getElement());\n    }), this.nodes.popover.appendChild(this.nodes.items), this.listeners.on(this.nodes.popover, \"click\", (s) => {\n      const e = this.getTargetItem(s);\n      e !== void 0 && this.handleItemClick(e);\n    }), this.nodes.wrapper = d.make(\"div\"), this.nodes.overlay = d.make(\"div\", [j.CSS.overlay, j.CSS.overlayHidden]), this.listeners.on(this.nodes.overlay, \"click\", () => {\n      this.hide();\n    }), this.nodes.wrapper.appendChild(this.nodes.overlay), this.nodes.wrapper.appendChild(this.nodes.popover);\n  }\n  /**\n   * Adds search to the popover\n   */\n  addSearch() {\n    this.search = new pe({\n      items: this.items,\n      placeholder: this.messages.search,\n      onSearch: (e, t) => {\n        this.items.forEach((i) => {\n          const n = !t.includes(i);\n          i.toggleHidden(n);\n        }), this.toggleNothingFoundMessage(t.length === 0), this.toggleCustomContent(e !== \"\");\n        const o = e === \"\" ? this.flippableElements : t.map((i) => i.getElement());\n        this.flipper.isActivated && (this.flipper.deactivate(), this.flipper.activate(o));\n      }\n    });\n    const s = this.search.getElement();\n    s.classList.add(j.CSS.search), this.nodes.popover.insertBefore(s, this.nodes.popover.firstChild);\n  }\n  /**\n   * Adds custom html content to the popover\n   *\n   * @param content - html content to append\n   */\n  addCustomContent(s) {\n    this.nodes.customContent = s, this.nodes.customContent.classList.add(j.CSS.customContent), this.nodes.popover.insertBefore(s, this.nodes.popover.firstChild);\n  }\n  /**\n   * Retrieves popover item that is the target of the specified event\n   *\n   * @param event - event to retrieve popover item from\n   */\n  getTargetItem(s) {\n    return this.items.find((e) => s.composedPath().includes(e.getElement()));\n  }\n  /**\n   * Handles item clicks\n   *\n   * @param item - item to handle click of\n   */\n  handleItemClick(s) {\n    s.isDisabled || (this.items.filter((e) => e !== s).forEach((e) => e.reset()), s.handleClick(), this.toggleItemActivenessIfNeeded(s), s.closeOnActivate && this.hide());\n  }\n  /**\n   * Creates Flipper instance which allows to navigate between popover items via keyboard\n   */\n  initializeFlipper() {\n    this.flipper = new G({\n      items: this.flippableElements,\n      focusedItemClass: P.CSS.focused,\n      allowedKeys: [\n        B.TAB,\n        B.UP,\n        B.DOWN,\n        B.ENTER\n      ]\n    }), this.flipper.onFlip(this.onFlip);\n  }\n  /**\n   * Returns list of elements available for keyboard navigation.\n   * Contains both usual popover items elements and custom html content.\n   */\n  get flippableElements() {\n    const s = this.items.map((t) => t.getElement());\n    return (this.customContentFlippableItems || []).concat(s);\n  }\n  get height() {\n    let s = 0;\n    if (this.nodes.popover === null)\n      return s;\n    const e = this.nodes.popover.cloneNode(!0);\n    return e.style.visibility = \"hidden\", e.style.position = \"absolute\", e.style.top = \"-1000px\", e.classList.add(j.CSS.popoverOpened), document.body.appendChild(e), s = e.offsetHeight, e.remove(), s;\n  }\n  /**\n   * Checks if popover should be opened bottom.\n   * It should happen when there is enough space below or not enough space above\n   */\n  get shouldOpenBottom() {\n    const s = this.nodes.popover.getBoundingClientRect(), e = this.scopeElement.getBoundingClientRect(), t = this.height, o = s.top + t, i = s.top - t, n = Math.min(window.innerHeight, e.bottom);\n    return i < e.top || o <= n;\n  }\n  /**\n   * Toggles nothing found message visibility\n   *\n   * @param isDisplayed - true if the message should be displayed\n   */\n  toggleNothingFoundMessage(s) {\n    this.nodes.nothingFoundMessage.classList.toggle(j.CSS.nothingFoundMessageDisplayed, s);\n  }\n  /**\n   * Toggles custom content visibility\n   *\n   * @param isDisplayed - true if custom content should be displayed\n   */\n  toggleCustomContent(s) {\n    var e;\n    (e = this.nodes.customContent) == null || e.classList.toggle(j.CSS.customContentHidden, s);\n  }\n  /**\n   * - Toggles item active state, if clicked popover item has property 'toggle' set to true.\n   *\n   * - Performs radiobutton-like behavior if the item has property 'toggle' set to string key.\n   * (All the other items with the same key get inactive, and the item gets active)\n   *\n   * @param clickedItem - popover item that was clicked\n   */\n  toggleItemActivenessIfNeeded(s) {\n    if (s.toggle === !0 && s.toggleActive(), typeof s.toggle == \"string\") {\n      const e = this.items.filter((t) => t.toggle === s.toggle);\n      if (e.length === 1) {\n        s.toggleActive();\n        return;\n      }\n      e.forEach((t) => {\n        t.toggleActive(t === s);\n      });\n    }\n  }\n};\nlet je = j;\nHo([\n  ce\n], je.prototype, \"height\", 1);\nclass jo extends C {\n  constructor() {\n    super(...arguments), this.opened = !1, this.selection = new m(), this.onPopoverClose = () => {\n      this.close();\n    };\n  }\n  /**\n   * Module Events\n   *\n   * @returns {{opened: string, closed: string}}\n   */\n  get events() {\n    return {\n      opened: \"block-settings-opened\",\n      closed: \"block-settings-closed\"\n    };\n  }\n  /**\n   * Block Settings CSS\n   */\n  get CSS() {\n    return {\n      settings: \"ce-settings\"\n    };\n  }\n  /**\n   * Getter for inner popover's flipper instance\n   *\n   * @todo remove once BlockSettings becomes standalone non-module class\n   */\n  get flipper() {\n    var e;\n    return (e = this.popover) == null ? void 0 : e.flipper;\n  }\n  /**\n   * Panel with block settings with 2 sections:\n   *  - Tool's Settings\n   *  - Default Settings [Move, Remove, etc]\n   */\n  make() {\n    this.nodes.wrapper = d.make(\"div\", [this.CSS.settings]);\n  }\n  /**\n   * Destroys module\n   */\n  destroy() {\n    this.removeAllNodes();\n  }\n  /**\n   * Open Block Settings pane\n   *\n   * @param targetBlock - near which Block we should open BlockSettings\n   */\n  open(e = this.Editor.BlockManager.currentBlock) {\n    this.opened = !0, this.selection.save(), e.selected = !0, this.Editor.BlockSelection.clearCache();\n    const [t, o] = e.getTunes();\n    this.eventsDispatcher.emit(this.events.opened), this.popover = new je({\n      searchable: !0,\n      items: t.map((i) => this.resolveTuneAliases(i)),\n      customContent: o,\n      customContentFlippableItems: this.getControls(o),\n      scopeElement: this.Editor.API.methods.ui.nodes.redactor,\n      messages: {\n        nothingFound: $.ui(X.ui.popover, \"Nothing found\"),\n        search: $.ui(X.ui.popover, \"Filter\")\n      }\n    }), this.popover.on(ge.Close, this.onPopoverClose), this.nodes.wrapper.append(this.popover.getElement()), this.popover.show();\n  }\n  /**\n   * Returns root block settings element\n   */\n  getElement() {\n    return this.nodes.wrapper;\n  }\n  /**\n   * Close Block Settings pane\n   */\n  close() {\n    this.opened = !1, m.isAtEditor || this.selection.restore(), this.selection.clearSaved(), !this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted && this.Editor.BlockManager.currentBlock && (this.Editor.BlockManager.currentBlock.selected = !1), this.eventsDispatcher.emit(this.events.closed), this.popover && (this.popover.off(ge.Close, this.onPopoverClose), this.popover.destroy(), this.popover.getElement().remove(), this.popover = null);\n  }\n  /**\n   * Returns list of buttons and inputs inside specified container\n   *\n   * @param container - container to query controls inside of\n   */\n  getControls(e) {\n    const { StylesAPI: t } = this.Editor, o = e.querySelectorAll(\n      `.${t.classes.settingsButton}, ${d.allInputsSelector}`\n    );\n    return Array.from(o);\n  }\n  /**\n   * Resolves aliases in tunes menu items\n   *\n   * @param item - item with resolved aliases\n   */\n  resolveTuneAliases(e) {\n    const t = Co(e, { label: \"title\" });\n    return e.confirmation && (t.confirmation = this.resolveTuneAliases(e.confirmation)), t;\n  }\n}\nclass Y extends C {\n  constructor() {\n    super(...arguments), this.opened = !1, this.tools = [], this.flipper = null, this.togglingCallback = null;\n  }\n  /**\n   * CSS getter\n   */\n  static get CSS() {\n    return {\n      conversionToolbarWrapper: \"ce-conversion-toolbar\",\n      conversionToolbarShowed: \"ce-conversion-toolbar--showed\",\n      conversionToolbarTools: \"ce-conversion-toolbar__tools\",\n      conversionToolbarLabel: \"ce-conversion-toolbar__label\",\n      conversionTool: \"ce-conversion-tool\",\n      conversionToolHidden: \"ce-conversion-tool--hidden\",\n      conversionToolIcon: \"ce-conversion-tool__icon\",\n      conversionToolSecondaryLabel: \"ce-conversion-tool__secondary-label\",\n      conversionToolFocused: \"ce-conversion-tool--focused\",\n      conversionToolActive: \"ce-conversion-tool--active\"\n    };\n  }\n  /**\n   * Create UI of Conversion Toolbar\n   */\n  make() {\n    this.nodes.wrapper = d.make(\"div\", [\n      Y.CSS.conversionToolbarWrapper,\n      ...this.isRtl ? [this.Editor.UI.CSS.editorRtlFix] : []\n    ]), this.nodes.tools = d.make(\"div\", Y.CSS.conversionToolbarTools);\n    const e = d.make(\"div\", Y.CSS.conversionToolbarLabel, {\n      textContent: $.ui(X.ui.inlineToolbar.converter, \"Convert to\")\n    });\n    return this.addTools(), this.enableFlipper(), d.append(this.nodes.wrapper, e), d.append(this.nodes.wrapper, this.nodes.tools), this.nodes.wrapper;\n  }\n  /**\n   * Deactivates flipper and removes all nodes\n   */\n  destroy() {\n    this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes();\n  }\n  /**\n   * Toggle conversion dropdown visibility\n   *\n   * @param {Function} [togglingCallback] — callback that will accept opening state\n   */\n  toggle(e) {\n    this.opened ? this.close() : this.open(), D(e) && (this.togglingCallback = e);\n  }\n  /**\n   * Shows Conversion Toolbar\n   */\n  open() {\n    this.filterTools(), this.opened = !0, this.nodes.wrapper.classList.add(Y.CSS.conversionToolbarShowed), window.requestAnimationFrame(() => {\n      this.flipper.activate(this.tools.map((e) => e.button).filter((e) => !e.classList.contains(Y.CSS.conversionToolHidden))), this.flipper.focusFirst(), D(this.togglingCallback) && this.togglingCallback(!0);\n    });\n  }\n  /**\n   * Closes Conversion Toolbar\n   */\n  close() {\n    this.opened = !1, this.flipper.deactivate(), this.nodes.wrapper.classList.remove(Y.CSS.conversionToolbarShowed), D(this.togglingCallback) && this.togglingCallback(!1);\n  }\n  /**\n   * Returns true if it has more than one tool available for convert in\n   */\n  hasTools() {\n    return this.tools.length === 1 ? this.tools[0].name !== this.config.defaultBlock : !0;\n  }\n  /**\n   * Replaces one Block with another\n   * For that Tools must provide import/export methods\n   *\n   * @param {string} replacingToolName - name of Tool which replaces current\n   * @param blockDataOverrides - If this conversion fired by the one of multiple Toolbox items, extend converted data with this item's \"data\" overrides\n   */\n  async replaceWithBlock(e, t) {\n    const { BlockManager: o, BlockSelection: i, InlineToolbar: n, Caret: r } = this.Editor;\n    o.convert(this.Editor.BlockManager.currentBlock, e, t), i.clearSelection(), this.close(), n.close(), window.requestAnimationFrame(() => {\n      r.setToBlock(this.Editor.BlockManager.currentBlock, r.positions.END);\n    });\n  }\n  /**\n   * Iterates existing Tools and inserts to the ConversionToolbar\n   * if tools have ability to import\n   */\n  addTools() {\n    const e = this.Editor.Tools.blockTools;\n    Array.from(e.entries()).forEach(([t, o]) => {\n      var n;\n      const i = o.conversionConfig;\n      !i || !i.import || (n = o.toolbox) == null || n.forEach(\n        (r) => this.addToolIfValid(t, r)\n      );\n    });\n  }\n  /**\n   * Inserts a tool to the ConversionToolbar if the tool's toolbox config is valid\n   *\n   * @param name - tool's name\n   * @param toolboxSettings - tool's single toolbox setting\n   */\n  addToolIfValid(e, t) {\n    V(t) || !t.icon || this.addTool(e, t);\n  }\n  /**\n   * Add tool to the Conversion Toolbar\n   *\n   * @param toolName - name of Tool to add\n   * @param toolboxItem - tool's toolbox item data\n   */\n  addTool(e, t) {\n    var r;\n    const o = d.make(\"div\", [Y.CSS.conversionTool]), i = d.make(\"div\", [Y.CSS.conversionToolIcon]);\n    o.dataset.tool = e, i.innerHTML = t.icon, d.append(o, i), d.append(o, d.text($.t(X.toolNames, t.title || ae(e))));\n    const n = (r = this.Editor.Tools.blockTools.get(e)) == null ? void 0 : r.shortcut;\n    if (n) {\n      const a = d.make(\"span\", Y.CSS.conversionToolSecondaryLabel, {\n        innerText: Re(n)\n      });\n      d.append(o, a);\n    }\n    d.append(this.nodes.tools, o), this.tools.push({\n      name: e,\n      button: o,\n      toolboxItem: t\n    }), this.listeners.on(o, \"click\", async () => {\n      await this.replaceWithBlock(e, t.data);\n    });\n  }\n  /**\n   * Hide current Tool and show others\n   */\n  async filterTools() {\n    const { currentBlock: e } = this.Editor.BlockManager, t = await e.getActiveToolboxEntry();\n    function o(i, n) {\n      return i.icon === n.icon && i.title === n.title;\n    }\n    this.tools.forEach((i) => {\n      let n = !1;\n      if (t) {\n        const r = o(t, i.toolboxItem);\n        n = i.button.dataset.tool === e.name && r;\n      }\n      i.button.hidden = n, i.button.classList.toggle(Y.CSS.conversionToolHidden, n);\n    });\n  }\n  /**\n   * Prepare Flipper to be able to leaf tools by arrows/tab\n   */\n  enableFlipper() {\n    this.flipper = new G({\n      focusedItemClass: Y.CSS.conversionToolFocused\n    });\n  }\n}\nvar _e = {}, zo = {\n  get exports() {\n    return _e;\n  },\n  set exports(s) {\n    _e = s;\n  }\n};\n/*!\n * Library for handling keyboard shortcuts\n * @copyright CodeX (https://codex.so)\n * @license MIT\n * @author CodeX (https://codex.so)\n * @version 1.2.0\n */\n(function(s, e) {\n  (function(t, o) {\n    s.exports = o();\n  })(window, function() {\n    return function(t) {\n      var o = {};\n      function i(n) {\n        if (o[n])\n          return o[n].exports;\n        var r = o[n] = { i: n, l: !1, exports: {} };\n        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n      }\n      return i.m = t, i.c = o, i.d = function(n, r, a) {\n        i.o(n, r) || Object.defineProperty(n, r, { enumerable: !0, get: a });\n      }, i.r = function(n) {\n        typeof Symbol < \"u\" && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, { value: \"Module\" }), Object.defineProperty(n, \"__esModule\", { value: !0 });\n      }, i.t = function(n, r) {\n        if (1 & r && (n = i(n)), 8 & r || 4 & r && typeof n == \"object\" && n && n.__esModule)\n          return n;\n        var a = /* @__PURE__ */ Object.create(null);\n        if (i.r(a), Object.defineProperty(a, \"default\", { enumerable: !0, value: n }), 2 & r && typeof n != \"string\")\n          for (var l in n)\n            i.d(a, l, function(c) {\n              return n[c];\n            }.bind(null, l));\n        return a;\n      }, i.n = function(n) {\n        var r = n && n.__esModule ? function() {\n          return n.default;\n        } : function() {\n          return n;\n        };\n        return i.d(r, \"a\", r), r;\n      }, i.o = function(n, r) {\n        return Object.prototype.hasOwnProperty.call(n, r);\n      }, i.p = \"\", i(i.s = 0);\n    }([function(t, o, i) {\n      function n(l, c) {\n        for (var u = 0; u < c.length; u++) {\n          var h = c[u];\n          h.enumerable = h.enumerable || !1, h.configurable = !0, \"value\" in h && (h.writable = !0), Object.defineProperty(l, h.key, h);\n        }\n      }\n      function r(l, c, u) {\n        return c && n(l.prototype, c), u && n(l, u), l;\n      }\n      i.r(o);\n      var a = function() {\n        function l(c) {\n          var u = this;\n          (function(h, f) {\n            if (!(h instanceof f))\n              throw new TypeError(\"Cannot call a class as a function\");\n          })(this, l), this.commands = {}, this.keys = {}, this.name = c.name, this.parseShortcutName(c.name), this.element = c.on, this.callback = c.callback, this.executeShortcut = function(h) {\n            u.execute(h);\n          }, this.element.addEventListener(\"keydown\", this.executeShortcut, !1);\n        }\n        return r(l, null, [{ key: \"supportedCommands\", get: function() {\n          return { SHIFT: [\"SHIFT\"], CMD: [\"CMD\", \"CONTROL\", \"COMMAND\", \"WINDOWS\", \"CTRL\"], ALT: [\"ALT\", \"OPTION\"] };\n        } }, { key: \"keyCodes\", get: function() {\n          return { 0: 48, 1: 49, 2: 50, 3: 51, 4: 52, 5: 53, 6: 54, 7: 55, 8: 56, 9: 57, A: 65, B: 66, C: 67, D: 68, E: 69, F: 70, G: 71, H: 72, I: 73, J: 74, K: 75, L: 76, M: 77, N: 78, O: 79, P: 80, Q: 81, R: 82, S: 83, T: 84, U: 85, V: 86, W: 87, X: 88, Y: 89, Z: 90, BACKSPACE: 8, ENTER: 13, ESCAPE: 27, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, INSERT: 45, DELETE: 46, \".\": 190 };\n        } }]), r(l, [{ key: \"parseShortcutName\", value: function(c) {\n          c = c.split(\"+\");\n          for (var u = 0; u < c.length; u++) {\n            c[u] = c[u].toUpperCase();\n            var h = !1;\n            for (var f in l.supportedCommands)\n              if (l.supportedCommands[f].includes(c[u])) {\n                h = this.commands[f] = !0;\n                break;\n              }\n            h || (this.keys[c[u]] = !0);\n          }\n          for (var k in l.supportedCommands)\n            this.commands[k] || (this.commands[k] = !1);\n        } }, { key: \"execute\", value: function(c) {\n          var u, h = { CMD: c.ctrlKey || c.metaKey, SHIFT: c.shiftKey, ALT: c.altKey }, f = !0;\n          for (u in this.commands)\n            this.commands[u] !== h[u] && (f = !1);\n          var k, p = !0;\n          for (k in this.keys)\n            p = p && c.keyCode === l.keyCodes[k];\n          f && p && this.callback(c);\n        } }, { key: \"remove\", value: function() {\n          this.element.removeEventListener(\"keydown\", this.executeShortcut);\n        } }]), l;\n      }();\n      o.default = a;\n    }]).default;\n  });\n})(zo);\nconst Uo = /* @__PURE__ */ xe(_e);\nclass $o {\n  constructor() {\n    this.registeredShortcuts = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Register shortcut\n   *\n   * @param shortcut - shortcut options\n   */\n  add(e) {\n    if (this.findShortcut(e.on, e.name))\n      throw Error(\n        `Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`\n      );\n    const o = new Uo({\n      name: e.name,\n      on: e.on,\n      callback: e.handler\n    }), i = this.registeredShortcuts.get(e.on) || [];\n    this.registeredShortcuts.set(e.on, [...i, o]);\n  }\n  /**\n   * Remove shortcut\n   *\n   * @param element - Element shortcut is set for\n   * @param name - shortcut name\n   */\n  remove(e, t) {\n    const o = this.findShortcut(e, t);\n    if (!o)\n      return;\n    o.remove();\n    const i = this.registeredShortcuts.get(e);\n    this.registeredShortcuts.set(e, i.filter((n) => n !== o));\n  }\n  /**\n   * Get Shortcut instance if exist\n   *\n   * @param element - Element shorcut is set for\n   * @param shortcut - shortcut name\n   * @returns {number} index - shortcut index if exist\n   */\n  findShortcut(e, t) {\n    return (this.registeredShortcuts.get(e) || []).find(({ name: i }) => i === t);\n  }\n}\nconst le = new $o();\nvar Wo = Object.defineProperty, Yo = Object.getOwnPropertyDescriptor, bt = (s, e, t, o) => {\n  for (var i = o > 1 ? void 0 : o ? Yo(e, t) : e, n = s.length - 1, r; n >= 0; n--)\n    (r = s[n]) && (i = (o ? r(e, t, i) : r(i)) || i);\n  return o && i && Wo(e, t, i), i;\n}, me = /* @__PURE__ */ ((s) => (s.Opened = \"toolbox-opened\", s.Closed = \"toolbox-closed\", s.BlockAdded = \"toolbox-block-added\", s))(me || {});\nconst mt = class extends we {\n  /**\n   * Toolbox constructor\n   *\n   * @param options - available parameters\n   * @param options.api - Editor API methods\n   * @param options.tools - Tools available to check whether some of them should be displayed at the Toolbox or not\n   */\n  constructor({ api: s, tools: e, i18nLabels: t }) {\n    super(), this.opened = !1, this.nodes = {\n      toolbox: null\n    }, this.onPopoverClose = () => {\n      this.opened = !1, this.emit(\n        \"toolbox-closed\"\n        /* Closed */\n      );\n    }, this.api = s, this.tools = e, this.i18nLabels = t;\n  }\n  /**\n   * Returns True if Toolbox is Empty and nothing to show\n   *\n   * @returns {boolean}\n   */\n  get isEmpty() {\n    return this.toolsToBeDisplayed.length === 0;\n  }\n  /**\n   * CSS styles\n   *\n   * @returns {Object<string, string>}\n   */\n  static get CSS() {\n    return {\n      toolbox: \"ce-toolbox\"\n    };\n  }\n  /**\n   * Makes the Toolbox\n   */\n  make() {\n    return this.popover = new je({\n      scopeElement: this.api.ui.nodes.redactor,\n      searchable: !0,\n      messages: {\n        nothingFound: this.i18nLabels.nothingFound,\n        search: this.i18nLabels.filter\n      },\n      items: this.toolboxItemsToBeDisplayed\n    }), this.popover.on(ge.Close, this.onPopoverClose), this.enableShortcuts(), this.nodes.toolbox = this.popover.getElement(), this.nodes.toolbox.classList.add(mt.CSS.toolbox), this.nodes.toolbox;\n  }\n  /**\n   * Returns true if the Toolbox has the Flipper activated and the Flipper has selected button\n   */\n  hasFocus() {\n    var s;\n    return (s = this.popover) == null ? void 0 : s.hasFocus();\n  }\n  /**\n   * Destroy Module\n   */\n  destroy() {\n    var s;\n    super.destroy(), this.nodes && this.nodes.toolbox && (this.nodes.toolbox.remove(), this.nodes.toolbox = null), this.removeAllShortcuts(), (s = this.popover) == null || s.off(ge.Close, this.onPopoverClose);\n  }\n  /**\n   * Toolbox Tool's button click handler\n   *\n   * @param toolName - tool type to be activated\n   * @param blockDataOverrides - Block data predefined by the activated Toolbox item\n   */\n  toolButtonActivated(s, e) {\n    this.insertNewBlock(s, e);\n  }\n  /**\n   * Open Toolbox with Tools\n   */\n  open() {\n    var s;\n    this.isEmpty || ((s = this.popover) == null || s.show(), this.opened = !0, this.emit(\n      \"toolbox-opened\"\n      /* Opened */\n    ));\n  }\n  /**\n   * Close Toolbox\n   */\n  close() {\n    var s;\n    (s = this.popover) == null || s.hide(), this.opened = !1, this.emit(\n      \"toolbox-closed\"\n      /* Closed */\n    );\n  }\n  /**\n   * Close Toolbox\n   */\n  toggle() {\n    this.opened ? this.close() : this.open();\n  }\n  get toolsToBeDisplayed() {\n    const s = [];\n    return this.tools.forEach((e) => {\n      e.toolbox && s.push(e);\n    }), s;\n  }\n  get toolboxItemsToBeDisplayed() {\n    const s = (e, t) => ({\n      icon: e.icon,\n      title: $.t(X.toolNames, e.title || ae(t.name)),\n      name: t.name,\n      onActivate: () => {\n        this.toolButtonActivated(t.name, e.data);\n      },\n      secondaryLabel: t.shortcut ? Re(t.shortcut) : \"\"\n    });\n    return this.toolsToBeDisplayed.reduce((e, t) => (Array.isArray(t.toolbox) ? t.toolbox.forEach((o) => {\n      e.push(s(o, t));\n    }) : t.toolbox !== void 0 && e.push(s(t.toolbox, t)), e), []);\n  }\n  /**\n   * Iterate all tools and enable theirs shortcuts if specified\n   */\n  enableShortcuts() {\n    this.toolsToBeDisplayed.forEach((s) => {\n      const e = s.shortcut;\n      e && this.enableShortcutForTool(s.name, e);\n    });\n  }\n  /**\n   * Enable shortcut Block Tool implemented shortcut\n   *\n   * @param {string} toolName - Tool name\n   * @param {string} shortcut - shortcut according to the ShortcutData Module format\n   */\n  enableShortcutForTool(s, e) {\n    le.add({\n      name: e,\n      on: this.api.ui.nodes.redactor,\n      handler: (t) => {\n        t.preventDefault();\n        const o = this.api.blocks.getCurrentBlockIndex(), i = this.api.blocks.getBlockByIndex(o);\n        if (i)\n          try {\n            this.api.blocks.convert(i.id, s), window.requestAnimationFrame(() => {\n              this.api.caret.setToBlock(o, \"end\");\n            });\n            return;\n          } catch {\n          }\n        this.insertNewBlock(s);\n      }\n    });\n  }\n  /**\n   * Removes all added shortcuts\n   * Fired when the Read-Only mode is activated\n   */\n  removeAllShortcuts() {\n    this.toolsToBeDisplayed.forEach((s) => {\n      const e = s.shortcut;\n      e && le.remove(this.api.ui.nodes.redactor, e);\n    });\n  }\n  /**\n   * Inserts new block\n   * Can be called when button clicked on Toolbox or by ShortcutData\n   *\n   * @param {string} toolName - Tool name\n   * @param blockDataOverrides - predefined Block data\n   */\n  async insertNewBlock(s, e) {\n    const t = this.api.blocks.getCurrentBlockIndex(), o = this.api.blocks.getBlockByIndex(t);\n    if (!o)\n      return;\n    const i = o.isEmpty ? t : t + 1;\n    let n;\n    if (e) {\n      const a = await this.api.blocks.composeBlockData(s);\n      n = Object.assign(a, e);\n    }\n    const r = this.api.blocks.insert(\n      s,\n      n,\n      void 0,\n      i,\n      void 0,\n      o.isEmpty\n    );\n    r.call(q.APPEND_CALLBACK), this.api.caret.setToBlock(i), this.emit(\"toolbox-block-added\", {\n      block: r\n    }), this.api.toolbar.close();\n  }\n};\nlet ze = mt;\nbt([\n  ce\n], ze.prototype, \"toolsToBeDisplayed\", 1);\nbt([\n  ce\n], ze.prototype, \"toolboxItemsToBeDisplayed\", 1);\nconst kt = \"block hovered\";\nclass Ko extends C {\n  /**\n   * @class\n   * @param moduleConfiguration - Module Configuration\n   * @param moduleConfiguration.config - Editor's config\n   * @param moduleConfiguration.eventsDispatcher - Editor's event dispatcher\n   */\n  constructor({ config: e, eventsDispatcher: t }) {\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.toolboxInstance = null, this.tooltip = new He();\n  }\n  /**\n   * CSS styles\n   *\n   * @returns {object}\n   */\n  get CSS() {\n    return {\n      toolbar: \"ce-toolbar\",\n      content: \"ce-toolbar__content\",\n      actions: \"ce-toolbar__actions\",\n      actionsOpened: \"ce-toolbar__actions--opened\",\n      toolbarOpened: \"ce-toolbar--opened\",\n      openedToolboxHolderModifier: \"codex-editor--toolbox-opened\",\n      plusButton: \"ce-toolbar__plus\",\n      plusButtonShortcut: \"ce-toolbar__plus-shortcut\",\n      settingsToggler: \"ce-toolbar__settings-btn\",\n      settingsTogglerHidden: \"ce-toolbar__settings-btn--hidden\"\n    };\n  }\n  /**\n   * Returns the Toolbar opening state\n   *\n   * @returns {boolean}\n   */\n  get opened() {\n    return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened);\n  }\n  /**\n   * Public interface for accessing the Toolbox\n   */\n  get toolbox() {\n    var e;\n    return {\n      opened: (e = this.toolboxInstance) == null ? void 0 : e.opened,\n      close: () => {\n        var t;\n        (t = this.toolboxInstance) == null || t.close();\n      },\n      open: () => {\n        if (this.toolboxInstance === null) {\n          L(\"toolbox.open() called before initialization is finished\", \"warn\");\n          return;\n        }\n        this.Editor.BlockManager.currentBlock = this.hoveredBlock, this.toolboxInstance.open();\n      },\n      toggle: () => {\n        if (this.toolboxInstance === null) {\n          L(\"toolbox.toggle() called before initialization is finished\", \"warn\");\n          return;\n        }\n        this.toolboxInstance.toggle();\n      },\n      hasFocus: () => {\n        var t;\n        return (t = this.toolboxInstance) == null ? void 0 : t.hasFocus();\n      }\n    };\n  }\n  /**\n   * Block actions appearance manipulations\n   */\n  get blockActions() {\n    return {\n      hide: () => {\n        this.nodes.actions.classList.remove(this.CSS.actionsOpened);\n      },\n      show: () => {\n        this.nodes.actions.classList.add(this.CSS.actionsOpened);\n      }\n    };\n  }\n  /**\n   * Methods for working with Block Tunes toggler\n   */\n  get blockTunesToggler() {\n    return {\n      hide: () => this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),\n      show: () => this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)\n    };\n  }\n  /**\n   * Toggles read-only mode\n   *\n   * @param {boolean} readOnlyEnabled - read-only mode\n   */\n  toggleReadOnly(e) {\n    e ? (this.destroy(), this.Editor.BlockSettings.destroy(), this.disableModuleBindings()) : window.requestIdleCallback(() => {\n      this.drawUI(), this.enableModuleBindings();\n    }, { timeout: 2e3 });\n  }\n  /**\n   * Move Toolbar to the passed (or current) Block\n   *\n   * @param block - block to move Toolbar near it\n   */\n  moveAndOpen(e = this.Editor.BlockManager.currentBlock) {\n    if (this.toolboxInstance === null) {\n      L(\"Can't open Toolbar since Editor initialization is not finished yet\", \"warn\");\n      return;\n    }\n    if (this.toolboxInstance.opened && this.toolboxInstance.close(), this.Editor.BlockSettings.opened && this.Editor.BlockSettings.close(), !e)\n      return;\n    this.hoveredBlock = e;\n    const t = e.holder, { isMobile: o } = this.Editor.UI, i = e.pluginsContent, n = window.getComputedStyle(i), r = parseInt(n.paddingTop, 10), a = t.offsetHeight;\n    let l;\n    o ? l = t.offsetTop + a : l = t.offsetTop + r, this.nodes.wrapper.style.top = `${Math.floor(l)}px`, this.Editor.BlockManager.blocks.length === 1 && e.isEmpty ? this.blockTunesToggler.hide() : this.blockTunesToggler.show(), this.open();\n  }\n  /**\n   * Close the Toolbar\n   */\n  close() {\n    var e;\n    this.Editor.ReadOnly.isEnabled || (this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened), this.blockActions.hide(), (e = this.toolboxInstance) == null || e.close(), this.Editor.BlockSettings.close());\n  }\n  /**\n   * Open Toolbar with Plus Button and Actions\n   *\n   * @param {boolean} withBlockActions - by default, Toolbar opens with Block Actions.\n   *                                     This flag allows to open Toolbar without Actions.\n   */\n  open(e = !0) {\n    re(() => {\n      this.nodes.wrapper.classList.add(this.CSS.toolbarOpened), e ? this.blockActions.show() : this.blockActions.hide();\n    }, 50)();\n  }\n  /**\n   * Draws Toolbar elements\n   */\n  make() {\n    this.nodes.wrapper = d.make(\"div\", this.CSS.toolbar), [\"content\", \"actions\"].forEach((t) => {\n      this.nodes[t] = d.make(\"div\", this.CSS[t]);\n    }), d.append(this.nodes.wrapper, this.nodes.content), d.append(this.nodes.content, this.nodes.actions), this.nodes.plusButton = d.make(\"div\", this.CSS.plusButton, {\n      innerHTML: _o\n    }), d.append(this.nodes.actions, this.nodes.plusButton), this.readOnlyMutableListeners.on(this.nodes.plusButton, \"click\", () => {\n      this.tooltip.hide(!0), this.plusButtonClicked();\n    }, !1);\n    const e = d.make(\"div\");\n    e.appendChild(document.createTextNode($.ui(X.ui.toolbar.toolbox, \"Add\"))), e.appendChild(d.make(\"div\", this.CSS.plusButtonShortcut, {\n      textContent: \"⇥ Tab\"\n    })), this.tooltip.onHover(this.nodes.plusButton, e, {\n      hidingDelay: 400\n    }), this.nodes.settingsToggler = d.make(\"span\", this.CSS.settingsToggler, {\n      innerHTML: Ao\n    }), d.append(this.nodes.actions, this.nodes.settingsToggler), this.tooltip.onHover(\n      this.nodes.settingsToggler,\n      $.ui(X.ui.blockTunes.toggler, \"Click to tune\"),\n      {\n        hidingDelay: 400\n      }\n    ), d.append(this.nodes.actions, this.makeToolbox()), d.append(this.nodes.actions, this.Editor.BlockSettings.getElement()), d.append(this.Editor.UI.nodes.wrapper, this.nodes.wrapper);\n  }\n  /**\n   * Creates the Toolbox instance and return it's rendered element\n   */\n  makeToolbox() {\n    return this.toolboxInstance = new ze({\n      api: this.Editor.API.methods,\n      tools: this.Editor.Tools.blockTools,\n      i18nLabels: {\n        filter: $.ui(X.ui.popover, \"Filter\"),\n        nothingFound: $.ui(X.ui.popover, \"Nothing found\")\n      }\n    }), this.toolboxInstance.on(me.Opened, () => {\n      this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier);\n    }), this.toolboxInstance.on(me.Closed, () => {\n      this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier);\n    }), this.toolboxInstance.on(me.BlockAdded, ({ block: e }) => {\n      const { BlockManager: t, Caret: o } = this.Editor, i = t.getBlockById(e.id);\n      i.inputs.length === 0 && (i === t.lastBlock ? (t.insertAtEnd(), o.setToBlock(t.lastBlock)) : o.setToBlock(t.nextBlock));\n    }), this.toolboxInstance.make();\n  }\n  /**\n   * Handler for Plus Button\n   */\n  plusButtonClicked() {\n    var e;\n    this.Editor.BlockManager.currentBlock = this.hoveredBlock, (e = this.toolboxInstance) == null || e.toggle();\n  }\n  /**\n   * Enable bindings\n   */\n  enableModuleBindings() {\n    this.readOnlyMutableListeners.on(this.nodes.settingsToggler, \"mousedown\", (e) => {\n      var t;\n      e.stopPropagation(), this.settingsTogglerClicked(), (t = this.toolboxInstance) != null && t.opened && this.toolboxInstance.close(), this.tooltip.hide(!0);\n    }, !0), te() || this.eventsDispatcher.on(kt, (e) => {\n      var t;\n      this.Editor.BlockSettings.opened || (t = this.toolboxInstance) != null && t.opened || this.moveAndOpen(e.block);\n    });\n  }\n  /**\n   * Disable bindings\n   */\n  disableModuleBindings() {\n    this.readOnlyMutableListeners.clearAll();\n  }\n  /**\n   * Clicks on the Block Settings toggler\n   */\n  settingsTogglerClicked() {\n    this.Editor.BlockManager.currentBlock = this.hoveredBlock, this.Editor.BlockSettings.opened ? this.Editor.BlockSettings.close() : this.Editor.BlockSettings.open(this.hoveredBlock);\n  }\n  /**\n   * Draws Toolbar UI\n   *\n   * Toolbar contains BlockSettings and Toolbox.\n   * That's why at first we draw its components and then Toolbar itself\n   *\n   * Steps:\n   *  - Make Toolbar dependent components like BlockSettings, Toolbox and so on\n   *  - Make itself and append dependent nodes to itself\n   *\n   */\n  drawUI() {\n    this.Editor.BlockSettings.make(), this.make();\n  }\n  /**\n   * Removes all created and saved HTMLElements\n   * It is used in Read-Only mode\n   */\n  destroy() {\n    this.removeAllNodes(), this.toolboxInstance && this.toolboxInstance.destroy(), this.tooltip.destroy();\n  }\n}\nvar ye = /* @__PURE__ */ ((s) => (s[s.Block = 0] = \"Block\", s[s.Inline = 1] = \"Inline\", s[s.Tune = 2] = \"Tune\", s))(ye || {}), ke = /* @__PURE__ */ ((s) => (s.Shortcut = \"shortcut\", s.Toolbox = \"toolbox\", s.EnabledInlineTools = \"inlineToolbar\", s.EnabledBlockTunes = \"tunes\", s.Config = \"config\", s))(ke || {}), vt = /* @__PURE__ */ ((s) => (s.Shortcut = \"shortcut\", s.SanitizeConfig = \"sanitize\", s))(vt || {}), se = /* @__PURE__ */ ((s) => (s.IsEnabledLineBreaks = \"enableLineBreaks\", s.Toolbox = \"toolbox\", s.ConversionConfig = \"conversionConfig\", s.IsReadOnlySupported = \"isReadOnlySupported\", s.PasteConfig = \"pasteConfig\", s))(se || {}), Ue = /* @__PURE__ */ ((s) => (s.IsInline = \"isInline\", s.Title = \"title\", s))(Ue || {}), xt = /* @__PURE__ */ ((s) => (s.IsTune = \"isTune\", s))(xt || {});\nclass $e {\n  /**\n   * @class\n   * @param {ConstructorOptions} options - Constructor options\n   */\n  constructor({\n    name: e,\n    constructable: t,\n    config: o,\n    api: i,\n    isDefault: n,\n    isInternal: r = !1,\n    defaultPlaceholder: a\n  }) {\n    this.api = i, this.name = e, this.constructable = t, this.config = o, this.isDefault = n, this.isInternal = r, this.defaultPlaceholder = a;\n  }\n  /**\n   * Returns Tool user configuration\n   */\n  get settings() {\n    const e = this.config.config || {};\n    return this.isDefault && !(\"placeholder\" in e) && this.defaultPlaceholder && (e.placeholder = this.defaultPlaceholder), e;\n  }\n  /**\n   * Calls Tool's reset method\n   */\n  reset() {\n    if (D(this.constructable.reset))\n      return this.constructable.reset();\n  }\n  /**\n   * Calls Tool's prepare method\n   */\n  prepare() {\n    if (D(this.constructable.prepare))\n      return this.constructable.prepare({\n        toolName: this.name,\n        config: this.settings\n      });\n  }\n  /**\n   * Returns shortcut for Tool (internal or specified by user)\n   */\n  get shortcut() {\n    const e = this.constructable.shortcut;\n    return this.config.shortcut || e;\n  }\n  /**\n   * Returns Tool's sanitizer configuration\n   */\n  get sanitizeConfig() {\n    return this.constructable.sanitize || {};\n  }\n  /**\n   * Returns true if Tools is inline\n   */\n  isInline() {\n    return this.type === 1;\n  }\n  /**\n   * Returns true if Tools is block\n   */\n  isBlock() {\n    return this.type === 0;\n  }\n  /**\n   * Returns true if Tools is tune\n   */\n  isTune() {\n    return this.type === 2;\n  }\n}\nclass Xo extends C {\n  /**\n   * @class\n   * @param moduleConfiguration - Module Configuration\n   * @param moduleConfiguration.config - Editor's config\n   * @param moduleConfiguration.eventsDispatcher - Editor's event dispatcher\n   */\n  constructor({ config: e, eventsDispatcher: t }) {\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.CSS = {\n      inlineToolbar: \"ce-inline-toolbar\",\n      inlineToolbarShowed: \"ce-inline-toolbar--showed\",\n      inlineToolbarLeftOriented: \"ce-inline-toolbar--left-oriented\",\n      inlineToolbarRightOriented: \"ce-inline-toolbar--right-oriented\",\n      inlineToolbarShortcut: \"ce-inline-toolbar__shortcut\",\n      buttonsWrapper: \"ce-inline-toolbar__buttons\",\n      actionsWrapper: \"ce-inline-toolbar__actions\",\n      inlineToolButton: \"ce-inline-tool\",\n      inputField: \"cdx-input\",\n      focusedButton: \"ce-inline-tool--focused\",\n      conversionToggler: \"ce-inline-toolbar__dropdown\",\n      conversionTogglerArrow: \"ce-inline-toolbar__dropdown-arrow\",\n      conversionTogglerHidden: \"ce-inline-toolbar__dropdown--hidden\",\n      conversionTogglerContent: \"ce-inline-toolbar__dropdown-content\",\n      togglerAndButtonsWrapper: \"ce-inline-toolbar__toggler-and-button-wrapper\"\n    }, this.opened = !1, this.toolbarVerticalMargin = te() ? 20 : 6, this.buttonsList = null, this.width = 0, this.flipper = null, this.tooltip = new He();\n  }\n  /**\n   * Toggles read-only mode\n   *\n   * @param {boolean} readOnlyEnabled - read-only mode\n   */\n  toggleReadOnly(e) {\n    e ? (this.destroy(), this.Editor.ConversionToolbar.destroy()) : window.requestIdleCallback(() => {\n      this.make();\n    }, { timeout: 2e3 });\n  }\n  /**\n   *  Moving / appearance\n   *  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n   */\n  /**\n   * Shows Inline Toolbar if something is selected\n   *\n   * @param [needToClose] - pass true to close toolbar if it is not allowed.\n   *                                  Avoid to use it just for closing IT, better call .close() clearly.\n   * @param [needToShowConversionToolbar] - pass false to not to show Conversion Toolbar\n   */\n  tryToShow(e = !1, t = !0) {\n    if (!this.allowedToShow()) {\n      e && this.close();\n      return;\n    }\n    this.move(), this.open(t), this.Editor.Toolbar.close();\n  }\n  /**\n   * Move Toolbar to the selected text\n   */\n  move() {\n    const e = m.rect, t = this.Editor.UI.nodes.wrapper.getBoundingClientRect(), o = {\n      x: e.x - t.left,\n      y: e.y + e.height - // + window.scrollY\n      t.top + this.toolbarVerticalMargin\n    };\n    e.width && (o.x += Math.floor(e.width / 2));\n    const i = o.x - this.width / 2, n = o.x + this.width / 2;\n    this.nodes.wrapper.classList.toggle(\n      this.CSS.inlineToolbarLeftOriented,\n      i < this.Editor.UI.contentRect.left\n    ), this.nodes.wrapper.classList.toggle(\n      this.CSS.inlineToolbarRightOriented,\n      n > this.Editor.UI.contentRect.right\n    ), this.nodes.wrapper.style.left = Math.floor(o.x) + \"px\", this.nodes.wrapper.style.top = Math.floor(o.y) + \"px\";\n  }\n  /**\n   * Hides Inline Toolbar\n   */\n  close() {\n    this.opened && (this.Editor.ReadOnly.isEnabled || (this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed), Array.from(this.toolsInstances.entries()).forEach(([e, t]) => {\n      const o = this.getToolShortcut(e);\n      o && le.remove(this.Editor.UI.nodes.redactor, o), D(t.clear) && t.clear();\n    }), this.opened = !1, this.flipper.deactivate(), this.Editor.ConversionToolbar.close()));\n  }\n  /**\n   * Shows Inline Toolbar\n   *\n   * @param [needToShowConversionToolbar] - pass false to not to show Conversion Toolbar\n   */\n  open(e = !0) {\n    if (this.opened)\n      return;\n    this.addToolsFiltered(), this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed), this.buttonsList = this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`), this.opened = !0, e && this.Editor.ConversionToolbar.hasTools() ? this.setConversionTogglerContent() : this.nodes.conversionToggler.hidden = !0;\n    let t = Array.from(this.buttonsList);\n    t.unshift(this.nodes.conversionToggler), t = t.filter((o) => !o.hidden), this.flipper.activate(t);\n  }\n  /**\n   * Check if node is contained by Inline Toolbar\n   *\n   * @param {Node} node — node to check\n   */\n  containsNode(e) {\n    return this.nodes.wrapper.contains(e);\n  }\n  /**\n   * Removes UI and its components\n   */\n  destroy() {\n    this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes(), this.tooltip.destroy();\n  }\n  /**\n   * Making DOM\n   */\n  make() {\n    this.nodes.wrapper = d.make(\"div\", [\n      this.CSS.inlineToolbar,\n      ...this.isRtl ? [this.Editor.UI.CSS.editorRtlFix] : []\n    ]), this.nodes.togglerAndButtonsWrapper = d.make(\"div\", this.CSS.togglerAndButtonsWrapper), this.nodes.buttons = d.make(\"div\", this.CSS.buttonsWrapper), this.nodes.actions = d.make(\"div\", this.CSS.actionsWrapper), this.listeners.on(this.nodes.wrapper, \"mousedown\", (e) => {\n      e.target.closest(`.${this.CSS.actionsWrapper}`) || e.preventDefault();\n    }), d.append(this.nodes.wrapper, [this.nodes.togglerAndButtonsWrapper, this.nodes.actions]), d.append(this.Editor.UI.nodes.wrapper, this.nodes.wrapper), this.addConversionToggler(), d.append(this.nodes.togglerAndButtonsWrapper, this.nodes.buttons), this.prepareConversionToolbar(), window.requestAnimationFrame(() => {\n      this.recalculateWidth();\n    }), this.enableFlipper();\n  }\n  /**\n   * Need to show Inline Toolbar or not\n   */\n  allowedToShow() {\n    const e = [\"IMG\", \"INPUT\"], t = m.get(), o = m.text;\n    if (!t || !t.anchorNode || t.isCollapsed || o.length < 1)\n      return !1;\n    const i = d.isElement(t.anchorNode) ? t.anchorNode : t.anchorNode.parentElement;\n    if (t && e.includes(i.tagName) || i.closest('[contenteditable=\"true\"]') === null)\n      return !1;\n    const r = this.Editor.BlockManager.getBlock(t.anchorNode);\n    return r ? r.tool.inlineTools.size !== 0 : !1;\n  }\n  /**\n   * Recalculate inline toolbar width\n   */\n  recalculateWidth() {\n    this.width = this.nodes.wrapper.offsetWidth;\n  }\n  /**\n   * Create a toggler for Conversion Dropdown\n   * and prepend it to the buttons list\n   */\n  addConversionToggler() {\n    this.nodes.conversionToggler = d.make(\"div\", this.CSS.conversionToggler), this.nodes.conversionTogglerContent = d.make(\"div\", this.CSS.conversionTogglerContent);\n    const e = d.make(\"div\", this.CSS.conversionTogglerArrow, {\n      innerHTML: ft\n    });\n    this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent), this.nodes.conversionToggler.appendChild(e), this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler), this.listeners.on(this.nodes.conversionToggler, \"click\", () => {\n      this.Editor.ConversionToolbar.toggle((t) => {\n        !t && this.opened ? this.flipper.activate() : this.opened && this.flipper.deactivate();\n      });\n    }), te() === !1 && this.tooltip.onHover(this.nodes.conversionToggler, $.ui(X.ui.inlineToolbar.converter, \"Convert to\"), {\n      placement: \"top\",\n      hidingDelay: 100\n    });\n  }\n  /**\n   * Changes Conversion Dropdown content for current block's Tool\n   */\n  async setConversionTogglerContent() {\n    const { BlockManager: e } = this.Editor, { currentBlock: t } = e, o = t.name, i = t.tool.conversionConfig, n = i && i.export;\n    this.nodes.conversionToggler.hidden = !n, this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden, !n);\n    const r = await t.getActiveToolboxEntry() || {};\n    this.nodes.conversionTogglerContent.innerHTML = r.icon || r.title || ae(o);\n  }\n  /**\n   * Makes the Conversion Dropdown\n   */\n  prepareConversionToolbar() {\n    const e = this.Editor.ConversionToolbar.make();\n    d.append(this.nodes.wrapper, e);\n  }\n  /**\n   *  Working with Tools\n   *  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n   */\n  /**\n   * Append only allowed Tools\n   */\n  addToolsFiltered() {\n    const e = m.get(), t = this.Editor.BlockManager.getBlock(e.anchorNode);\n    this.nodes.buttons.innerHTML = \"\", this.nodes.actions.innerHTML = \"\", this.toolsInstances = /* @__PURE__ */ new Map(), Array.from(t.tool.inlineTools.values()).forEach((o) => {\n      this.addTool(o);\n    }), this.recalculateWidth();\n  }\n  /**\n   * Add tool button and activate clicks\n   *\n   * @param {InlineTool} tool - InlineTool object\n   */\n  addTool(e) {\n    const t = e.create(), o = t.render();\n    if (!o) {\n      L(\"Render method must return an instance of Node\", \"warn\", e.name);\n      return;\n    }\n    if (o.dataset.tool = e.name, this.nodes.buttons.appendChild(o), this.toolsInstances.set(e.name, t), D(t.renderActions)) {\n      const a = t.renderActions();\n      this.nodes.actions.appendChild(a);\n    }\n    this.listeners.on(o, \"click\", (a) => {\n      this.toolClicked(t), a.preventDefault();\n    });\n    const i = this.getToolShortcut(e.name);\n    if (i)\n      try {\n        this.enableShortcuts(t, i);\n      } catch {\n      }\n    const n = d.make(\"div\"), r = $.t(\n      X.toolNames,\n      e.title || ae(e.name)\n    );\n    n.appendChild(d.text(r)), i && n.appendChild(d.make(\"div\", this.CSS.inlineToolbarShortcut, {\n      textContent: Re(i)\n    })), te() === !1 && this.tooltip.onHover(o, n, {\n      placement: \"top\",\n      hidingDelay: 100\n    }), t.checkState(m.get());\n  }\n  /**\n   * Get shortcut name for tool\n   *\n   * @param toolName — Tool name\n   */\n  getToolShortcut(e) {\n    const { Tools: t } = this.Editor, o = t.inlineTools.get(e), i = t.internal.inlineTools;\n    return Array.from(i.keys()).includes(e) ? this.inlineTools[e][vt.Shortcut] : o.shortcut;\n  }\n  /**\n   * Enable Tool shortcut with Editor Shortcuts Module\n   *\n   * @param {InlineTool} tool - Tool instance\n   * @param {string} shortcut - shortcut according to the ShortcutData Module format\n   */\n  enableShortcuts(e, t) {\n    le.add({\n      name: t,\n      handler: (o) => {\n        const { currentBlock: i } = this.Editor.BlockManager;\n        i && i.tool.enabledInlineTools && (o.preventDefault(), this.toolClicked(e));\n      },\n      on: this.Editor.UI.nodes.redactor\n    });\n  }\n  /**\n   * Inline Tool button clicks\n   *\n   * @param {InlineTool} tool - Tool's instance\n   */\n  toolClicked(e) {\n    const t = m.range;\n    e.surround(t), this.checkToolsState(), e.renderActions !== void 0 && this.flipper.deactivate();\n  }\n  /**\n   * Check Tools` state by selection\n   */\n  checkToolsState() {\n    this.toolsInstances.forEach((e) => {\n      e.checkState(m.get());\n    });\n  }\n  /**\n   * Get inline tools tools\n   * Tools that has isInline is true\n   */\n  get inlineTools() {\n    const e = {};\n    return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([t, o]) => {\n      e[t] = o.create();\n    }), e;\n  }\n  /**\n   * Allow to leaf buttons by arrows / tab\n   * Buttons will be filled on opening\n   */\n  enableFlipper() {\n    this.flipper = new G({\n      focusedItemClass: this.CSS.focusedButton,\n      allowedKeys: [\n        B.ENTER,\n        B.TAB\n      ]\n    });\n  }\n}\nclass Vo extends C {\n  /**\n   * All keydowns on Block\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  keydown(e) {\n    switch (this.beforeKeydownProcessing(e), e.keyCode) {\n      case B.BACKSPACE:\n        this.backspace(e);\n        break;\n      case B.DELETE:\n        this.delete(e);\n        break;\n      case B.ENTER:\n        this.enter(e);\n        break;\n      case B.DOWN:\n      case B.RIGHT:\n        this.arrowRightAndDown(e);\n        break;\n      case B.UP:\n      case B.LEFT:\n        this.arrowLeftAndUp(e);\n        break;\n      case B.TAB:\n        this.tabPressed(e);\n        break;\n    }\n  }\n  /**\n   * Fires on keydown before event processing\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  beforeKeydownProcessing(e) {\n    this.needToolbarClosing(e) && nt(e.keyCode) && (this.Editor.Toolbar.close(), this.Editor.ConversionToolbar.close(), e.ctrlKey || e.metaKey || e.altKey || e.shiftKey || (this.Editor.BlockManager.clearFocused(), this.Editor.BlockSelection.clearSelection(e)));\n  }\n  /**\n   * Key up on Block:\n   * - shows Inline Toolbar if something selected\n   * - shows conversion toolbar with 85% of block selection\n   *\n   * @param {KeyboardEvent} event - keyup event\n   */\n  keyup(e) {\n    e.shiftKey || this.Editor.UI.checkEmptiness();\n  }\n  /**\n   * Open Toolbox to leaf Tools\n   *\n   * @param {KeyboardEvent} event - tab keydown event\n   */\n  tabPressed(e) {\n    this.Editor.BlockSelection.clearSelection(e);\n    const { BlockManager: t, InlineToolbar: o, ConversionToolbar: i } = this.Editor, n = t.currentBlock;\n    if (!n)\n      return;\n    const r = n.isEmpty, a = n.tool.isDefault && r, l = !r && i.opened, c = !r && !m.isCollapsed && o.opened;\n    a ? this.activateToolbox() : !l && !c && this.activateBlockSettings();\n  }\n  /**\n   * Add drop target styles\n   *\n   * @param {DragEvent} event - drag over event\n   */\n  dragOver(e) {\n    const t = this.Editor.BlockManager.getBlockByChildNode(e.target);\n    t.dropTarget = !0;\n  }\n  /**\n   * Remove drop target style\n   *\n   * @param {DragEvent} event - drag leave event\n   */\n  dragLeave(e) {\n    const t = this.Editor.BlockManager.getBlockByChildNode(e.target);\n    t.dropTarget = !1;\n  }\n  /**\n   * Copying selected blocks\n   * Before putting to the clipboard we sanitize all blocks and then copy to the clipboard\n   *\n   * @param {ClipboardEvent} event - clipboard event\n   */\n  handleCommandC(e) {\n    const { BlockSelection: t } = this.Editor;\n    t.anyBlockSelected && t.copySelectedBlocks(e);\n  }\n  /**\n   * Copy and Delete selected Blocks\n   *\n   * @param {ClipboardEvent} event - clipboard event\n   */\n  handleCommandX(e) {\n    const { BlockSelection: t, BlockManager: o, Caret: i } = this.Editor;\n    t.anyBlockSelected && t.copySelectedBlocks(e).then(() => {\n      const n = o.removeSelectedBlocks(), r = o.insertDefaultBlockAtIndex(n, !0);\n      i.setToBlock(r, i.positions.START), t.clearSelection(e);\n    });\n  }\n  /**\n   * ENTER pressed on block\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  enter(e) {\n    const { BlockManager: t, UI: o } = this.Editor;\n    if (t.currentBlock.tool.isLineBreaksEnabled || o.someToolbarOpened && o.someFlipperButtonFocused || e.shiftKey)\n      return;\n    let n = this.Editor.BlockManager.currentBlock;\n    this.Editor.Caret.isAtStart && !this.Editor.BlockManager.currentBlock.hasMedia ? this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex) : this.Editor.Caret.isAtEnd ? n = this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex + 1) : n = this.Editor.BlockManager.split(), this.Editor.Caret.setToBlock(n), this.Editor.Toolbar.moveAndOpen(n), e.preventDefault();\n  }\n  /**\n   * Handle backspace keydown on Block\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  backspace(e) {\n    const { BlockManager: t, Caret: o } = this.Editor, { currentBlock: i, previousBlock: n } = t;\n    if (!m.isCollapsed || !o.isAtStart)\n      return;\n    if (e.preventDefault(), this.Editor.Toolbar.close(), !(i.currentInput === i.firstInput)) {\n      o.navigatePrevious();\n      return;\n    }\n    if (n === null)\n      return;\n    if (n.isEmpty) {\n      t.removeBlock(n);\n      return;\n    }\n    if (i.isEmpty) {\n      t.removeBlock(i);\n      const l = t.currentBlock;\n      o.setToBlock(l, o.positions.END);\n      return;\n    }\n    Je(i, n) ? this.mergeBlocks(n, i) : o.setToBlock(n, o.positions.END);\n  }\n  /**\n   * Handles delete keydown on Block\n   * Removes char after the caret.\n   * If caret is at the end of the block, merge next block with current\n   *\n   * @param {KeyboardEvent} event - keydown\n   */\n  delete(e) {\n    const { BlockManager: t, Caret: o } = this.Editor, { currentBlock: i, nextBlock: n } = t;\n    if (!m.isCollapsed || !o.isAtEnd)\n      return;\n    if (e.preventDefault(), this.Editor.Toolbar.close(), !(i.currentInput === i.lastInput)) {\n      o.navigateNext();\n      return;\n    }\n    if (n === null)\n      return;\n    if (n.isEmpty) {\n      t.removeBlock(n);\n      return;\n    }\n    if (i.isEmpty) {\n      t.removeBlock(i), o.setToBlock(n, o.positions.START);\n      return;\n    }\n    Je(i, n) ? this.mergeBlocks(i, n) : o.setToBlock(n, o.positions.START);\n  }\n  /**\n   * Merge passed Blocks\n   *\n   * @param targetBlock - to which Block we want to merge\n   * @param blockToMerge - what Block we want to merge\n   */\n  mergeBlocks(e, t) {\n    const { BlockManager: o, Caret: i, Toolbar: n } = this.Editor;\n    i.createShadow(e.pluginsContent), o.mergeBlocks(e, t).then(() => {\n      window.requestAnimationFrame(() => {\n        i.restoreCaret(e.pluginsContent), e.pluginsContent.normalize(), n.close();\n      });\n    });\n  }\n  /**\n   * Handle right and down keyboard keys\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  arrowRightAndDown(e) {\n    const t = G.usedKeys.includes(e.keyCode) && (!e.shiftKey || e.keyCode === B.TAB);\n    if (this.Editor.UI.someToolbarOpened && t)\n      return;\n    this.Editor.BlockManager.clearFocused(), this.Editor.Toolbar.close();\n    const o = this.Editor.Caret.isAtEnd || this.Editor.BlockSelection.anyBlockSelected;\n    if (e.shiftKey && e.keyCode === B.DOWN && o) {\n      this.Editor.CrossBlockSelection.toggleBlockSelectedState();\n      return;\n    }\n    (e.keyCode === B.DOWN || e.keyCode === B.RIGHT && !this.isRtl ? this.Editor.Caret.navigateNext() : this.Editor.Caret.navigatePrevious()) ? e.preventDefault() : re(() => {\n      this.Editor.BlockManager.currentBlock && this.Editor.BlockManager.currentBlock.updateCurrentInput();\n    }, 20)(), this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * Handle left and up keyboard keys\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  arrowLeftAndUp(e) {\n    if (this.Editor.UI.someToolbarOpened) {\n      if (G.usedKeys.includes(e.keyCode) && (!e.shiftKey || e.keyCode === B.TAB))\n        return;\n      this.Editor.UI.closeAllToolbars();\n    }\n    this.Editor.BlockManager.clearFocused(), this.Editor.Toolbar.close();\n    const t = this.Editor.Caret.isAtStart || this.Editor.BlockSelection.anyBlockSelected;\n    if (e.shiftKey && e.keyCode === B.UP && t) {\n      this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);\n      return;\n    }\n    (e.keyCode === B.UP || e.keyCode === B.LEFT && !this.isRtl ? this.Editor.Caret.navigatePrevious() : this.Editor.Caret.navigateNext()) ? e.preventDefault() : re(() => {\n      this.Editor.BlockManager.currentBlock && this.Editor.BlockManager.currentBlock.updateCurrentInput();\n    }, 20)(), this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * Cases when we need to close Toolbar\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  needToolbarClosing(e) {\n    const t = e.keyCode === B.ENTER && this.Editor.Toolbar.toolbox.opened, o = e.keyCode === B.ENTER && this.Editor.BlockSettings.opened, i = e.keyCode === B.ENTER && this.Editor.InlineToolbar.opened, n = e.keyCode === B.ENTER && this.Editor.ConversionToolbar.opened, r = e.keyCode === B.TAB;\n    return !(e.shiftKey || r || t || o || i || n);\n  }\n  /**\n   * If Toolbox is not open, then just open it and show plus button\n   */\n  activateToolbox() {\n    this.Editor.Toolbar.opened || this.Editor.Toolbar.moveAndOpen(), this.Editor.Toolbar.toolbox.open();\n  }\n  /**\n   * Open Toolbar and show BlockSettings before flipping Tools\n   */\n  activateBlockSettings() {\n    this.Editor.Toolbar.opened || (this.Editor.BlockManager.currentBlock.focused = !0, this.Editor.Toolbar.moveAndOpen()), this.Editor.BlockSettings.opened || this.Editor.BlockSettings.open();\n  }\n}\nclass Te {\n  /**\n   * @class\n   * @param {HTMLElement} workingArea — editor`s working node\n   */\n  constructor(e) {\n    this.blocks = [], this.workingArea = e;\n  }\n  /**\n   * Get length of Block instances array\n   *\n   * @returns {number}\n   */\n  get length() {\n    return this.blocks.length;\n  }\n  /**\n   * Get Block instances array\n   *\n   * @returns {Block[]}\n   */\n  get array() {\n    return this.blocks;\n  }\n  /**\n   * Get blocks html elements array\n   *\n   * @returns {HTMLElement[]}\n   */\n  get nodes() {\n    return st(this.workingArea.children);\n  }\n  /**\n   * Proxy trap to implement array-like setter\n   *\n   * @example\n   * blocks[0] = new Block(...)\n   * @param {Blocks} instance — Blocks instance\n   * @param {PropertyKey} property — block index or any Blocks class property key to set\n   * @param {Block} value — value to set\n   * @returns {boolean}\n   */\n  static set(e, t, o) {\n    return isNaN(Number(t)) ? (Reflect.set(e, t, o), !0) : (e.insert(+t, o), !0);\n  }\n  /**\n   * Proxy trap to implement array-like getter\n   *\n   * @param {Blocks} instance — Blocks instance\n   * @param {PropertyKey} property — Blocks class property key\n   * @returns {Block|*}\n   */\n  static get(e, t) {\n    return isNaN(Number(t)) ? Reflect.get(e, t) : e.get(+t);\n  }\n  /**\n   * Push new Block to the blocks array and append it to working area\n   *\n   * @param {Block} block - Block to add\n   */\n  push(e) {\n    this.blocks.push(e), this.insertToDOM(e);\n  }\n  /**\n   * Swaps blocks with indexes first and second\n   *\n   * @param {number} first - first block index\n   * @param {number} second - second block index\n   * @deprecated — use 'move' instead\n   */\n  swap(e, t) {\n    const o = this.blocks[t];\n    d.swap(this.blocks[e].holder, o.holder), this.blocks[t] = this.blocks[e], this.blocks[e] = o;\n  }\n  /**\n   * Move a block from one to another index\n   *\n   * @param {number} toIndex - new index of the block\n   * @param {number} fromIndex - block to move\n   */\n  move(e, t) {\n    const o = this.blocks.splice(t, 1)[0], i = e - 1, n = Math.max(0, i), r = this.blocks[n];\n    e > 0 ? this.insertToDOM(o, \"afterend\", r) : this.insertToDOM(o, \"beforebegin\", r), this.blocks.splice(e, 0, o);\n    const a = this.composeBlockEvent(\"move\", {\n      fromIndex: t,\n      toIndex: e\n    });\n    o.call(q.MOVED, a);\n  }\n  /**\n   * Insert new Block at passed index\n   *\n   * @param {number} index — index to insert Block\n   * @param {Block} block — Block to insert\n   * @param {boolean} replace — it true, replace block on given index\n   */\n  insert(e, t, o = !1) {\n    if (!this.length) {\n      this.push(t);\n      return;\n    }\n    e > this.length && (e = this.length), o && (this.blocks[e].holder.remove(), this.blocks[e].call(q.REMOVED));\n    const i = o ? 1 : 0;\n    if (this.blocks.splice(e, i, t), e > 0) {\n      const n = this.blocks[e - 1];\n      this.insertToDOM(t, \"afterend\", n);\n    } else {\n      const n = this.blocks[e + 1];\n      n ? this.insertToDOM(t, \"beforebegin\", n) : this.insertToDOM(t);\n    }\n  }\n  /**\n   * Replaces block under passed index with passed block\n   *\n   * @param index - index of existed block\n   * @param block - new block\n   */\n  replace(e, t) {\n    if (this.blocks[e] === void 0)\n      throw Error(\"Incorrect index\");\n    this.blocks[e].holder.replaceWith(t.holder), this.blocks[e] = t;\n  }\n  /**\n   * Inserts several blocks at once\n   *\n   * @param blocks - blocks to insert\n   * @param index - index to insert blocks at\n   */\n  insertMany(e, t) {\n    const o = new DocumentFragment();\n    for (const i of e)\n      o.appendChild(i.holder);\n    if (this.length > 0) {\n      if (t > 0) {\n        const i = Math.min(t - 1, this.length - 1);\n        this.blocks[i].holder.after(o);\n      } else\n        t === 0 && this.workingArea.prepend(o);\n      this.blocks.splice(t, 0, ...e);\n    } else\n      this.blocks.push(...e), this.workingArea.appendChild(o);\n    e.forEach((i) => i.call(q.RENDERED));\n  }\n  /**\n   * Remove block\n   *\n   * @param {number} index - index of Block to remove\n   */\n  remove(e) {\n    isNaN(e) && (e = this.length - 1), this.blocks[e].holder.remove(), this.blocks[e].call(q.REMOVED), this.blocks.splice(e, 1);\n  }\n  /**\n   * Remove all blocks\n   */\n  removeAll() {\n    this.workingArea.innerHTML = \"\", this.blocks.forEach((e) => e.call(q.REMOVED)), this.blocks.length = 0;\n  }\n  /**\n   * Insert Block after passed target\n   *\n   * @todo decide if this method is necessary\n   * @param {Block} targetBlock — target after which Block should be inserted\n   * @param {Block} newBlock — Block to insert\n   */\n  insertAfter(e, t) {\n    const o = this.blocks.indexOf(e);\n    this.insert(o + 1, t);\n  }\n  /**\n   * Get Block by index\n   *\n   * @param {number} index — Block index\n   * @returns {Block}\n   */\n  get(e) {\n    return this.blocks[e];\n  }\n  /**\n   * Return index of passed Block\n   *\n   * @param {Block} block - Block to find\n   * @returns {number}\n   */\n  indexOf(e) {\n    return this.blocks.indexOf(e);\n  }\n  /**\n   * Insert new Block into DOM\n   *\n   * @param {Block} block - Block to insert\n   * @param {InsertPosition} position — insert position (if set, will use insertAdjacentElement)\n   * @param {Block} target — Block related to position\n   */\n  insertToDOM(e, t, o) {\n    t ? o.holder.insertAdjacentElement(t, e.holder) : this.workingArea.appendChild(e.holder), e.call(q.RENDERED);\n  }\n  /**\n   * Composes Block event with passed type and details\n   *\n   * @param {string} type - event type\n   * @param {object} detail - event detail\n   */\n  composeBlockEvent(e, t) {\n    return new CustomEvent(e, {\n      detail: t\n    });\n  }\n}\nconst et = \"block-removed\", tt = \"block-added\", qo = \"block-moved\", ot = \"block-changed\";\nclass Zo {\n  constructor() {\n    this.completed = Promise.resolve();\n  }\n  /**\n   * Add new promise to queue\n   *\n   * @param operation - promise should be added to queue\n   */\n  add(e) {\n    return new Promise((t, o) => {\n      this.completed = this.completed.then(e).then(t).catch(o);\n    });\n  }\n}\nclass Go extends C {\n  constructor() {\n    super(...arguments), this._currentBlockIndex = -1, this._blocks = null;\n  }\n  /**\n   * Returns current Block index\n   *\n   * @returns {number}\n   */\n  get currentBlockIndex() {\n    return this._currentBlockIndex;\n  }\n  /**\n   * Set current Block index and fire Block lifecycle callbacks\n   *\n   * @param {number} newIndex - index of Block to set as current\n   */\n  set currentBlockIndex(e) {\n    this._currentBlockIndex = e;\n  }\n  /**\n   * returns first Block\n   *\n   * @returns {Block}\n   */\n  get firstBlock() {\n    return this._blocks[0];\n  }\n  /**\n   * returns last Block\n   *\n   * @returns {Block}\n   */\n  get lastBlock() {\n    return this._blocks[this._blocks.length - 1];\n  }\n  /**\n   * Get current Block instance\n   *\n   * @returns {Block}\n   */\n  get currentBlock() {\n    return this._blocks[this.currentBlockIndex];\n  }\n  /**\n   * Set passed Block as a current\n   *\n   * @param block - block to set as a current\n   */\n  set currentBlock(e) {\n    this.currentBlockIndex = this.getBlockIndex(e);\n  }\n  /**\n   * Returns next Block instance\n   *\n   * @returns {Block|null}\n   */\n  get nextBlock() {\n    return this.currentBlockIndex === this._blocks.length - 1 ? null : this._blocks[this.currentBlockIndex + 1];\n  }\n  /**\n   * Return first Block with inputs after current Block\n   *\n   * @returns {Block | undefined}\n   */\n  get nextContentfulBlock() {\n    return this.blocks.slice(this.currentBlockIndex + 1).find((t) => !!t.inputs.length);\n  }\n  /**\n   * Return first Block with inputs before current Block\n   *\n   * @returns {Block | undefined}\n   */\n  get previousContentfulBlock() {\n    return this.blocks.slice(0, this.currentBlockIndex).reverse().find((t) => !!t.inputs.length);\n  }\n  /**\n   * Returns previous Block instance\n   *\n   * @returns {Block|null}\n   */\n  get previousBlock() {\n    return this.currentBlockIndex === 0 ? null : this._blocks[this.currentBlockIndex - 1];\n  }\n  /**\n   * Get array of Block instances\n   *\n   * @returns {Block[]} {@link Blocks#array}\n   */\n  get blocks() {\n    return this._blocks.array;\n  }\n  /**\n   * Check if each Block is empty\n   *\n   * @returns {boolean}\n   */\n  get isEditorEmpty() {\n    return this.blocks.every((e) => e.isEmpty);\n  }\n  /**\n   * Should be called after Editor.UI preparation\n   * Define this._blocks property\n   */\n  prepare() {\n    const e = new Te(this.Editor.UI.nodes.redactor);\n    this._blocks = new Proxy(e, {\n      set: Te.set,\n      get: Te.get\n    }), this.listeners.on(\n      document,\n      \"copy\",\n      (t) => this.Editor.BlockEvents.handleCommandC(t)\n    );\n  }\n  /**\n   * Toggle read-only state\n   *\n   * If readOnly is true:\n   *  - Unbind event handlers from created Blocks\n   *\n   * if readOnly is false:\n   *  - Bind event handlers to all existing Blocks\n   *\n   * @param {boolean} readOnlyEnabled - \"read only\" state\n   */\n  toggleReadOnly(e) {\n    e ? this.disableModuleBindings() : this.enableModuleBindings();\n  }\n  /**\n   * Creates Block instance by tool name\n   *\n   * @param {object} options - block creation options\n   * @param {string} options.tool - tools passed in editor config {@link EditorConfig#tools}\n   * @param {string} [options.id] - unique id for this block\n   * @param {BlockToolData} [options.data] - constructor params\n   * @returns {Block}\n   */\n  composeBlock({\n    tool: e,\n    data: t = {},\n    id: o = void 0,\n    tunes: i = {}\n  }) {\n    const n = this.Editor.ReadOnly.isEnabled, r = this.Editor.Tools.blockTools.get(e), a = new F({\n      id: o,\n      data: t,\n      tool: r,\n      api: this.Editor.API,\n      readOnly: n,\n      tunesData: i\n    }, this.eventsDispatcher);\n    return n || window.requestIdleCallback(() => {\n      this.bindBlockEvents(a);\n    }, { timeout: 2e3 }), a;\n  }\n  /**\n   * Insert new block into _blocks\n   *\n   * @param {object} options - insert options\n   * @param {string} [options.id] - block's unique id\n   * @param {string} [options.tool] - plugin name, by default method inserts the default block type\n   * @param {object} [options.data] - plugin data\n   * @param {number} [options.index] - index where to insert new Block\n   * @param {boolean} [options.needToFocus] - flag shows if needed to update current Block index\n   * @param {boolean} [options.replace] - flag shows if block by passed index should be replaced with inserted one\n   * @returns {Block}\n   */\n  insert({\n    id: e = void 0,\n    tool: t = this.config.defaultBlock,\n    data: o = {},\n    index: i,\n    needToFocus: n = !0,\n    replace: r = !1,\n    tunes: a = {}\n  } = {}) {\n    let l = i;\n    l === void 0 && (l = this.currentBlockIndex + (r ? 0 : 1));\n    const c = this.composeBlock({\n      id: e,\n      tool: t,\n      data: o,\n      tunes: a\n    });\n    return r && this.blockDidMutated(et, this.getBlockByIndex(l), {\n      index: l\n    }), this._blocks.insert(l, c, r), this.blockDidMutated(tt, c, {\n      index: l\n    }), n ? this.currentBlockIndex = l : l <= this.currentBlockIndex && this.currentBlockIndex++, c;\n  }\n  /**\n   * Inserts several blocks at once\n   *\n   * @param blocks - blocks to insert\n   * @param index - index where to insert\n   */\n  insertMany(e, t = 0) {\n    this._blocks.insertMany(e, t);\n  }\n  /**\n   * Update Block data.\n   *\n   * Currently we don't have an 'update' method in the Tools API, so we just create a new block with the same id and type\n   * Should not trigger 'block-removed' or 'block-added' events\n   *\n   * @param block - block to update\n   * @param data - new data\n   */\n  async update(e, t) {\n    const o = await e.data, i = this.composeBlock({\n      id: e.id,\n      tool: e.name,\n      data: Object.assign({}, o, t),\n      tunes: e.tunes\n    }), n = this.getBlockIndex(e);\n    return this._blocks.replace(n, i), this.blockDidMutated(ot, i, {\n      index: n\n    }), i;\n  }\n  /**\n   * Replace passed Block with the new one with specified Tool and data\n   *\n   * @param block - block to replace\n   * @param newTool - new Tool name\n   * @param data - new Tool data\n   */\n  replace(e, t, o) {\n    const i = this.getBlockIndex(e);\n    this.insert({\n      tool: t,\n      data: o,\n      index: i,\n      replace: !0\n    });\n  }\n  /**\n   * Insert pasted content. Call onPaste callback after insert.\n   *\n   * @param {string} toolName - name of Tool to insert\n   * @param {PasteEvent} pasteEvent - pasted data\n   * @param {boolean} replace - should replace current block\n   */\n  paste(e, t, o = !1) {\n    const i = this.insert({\n      tool: e,\n      replace: o\n    });\n    try {\n      window.requestIdleCallback(() => {\n        i.call(q.ON_PASTE, t);\n      });\n    } catch (n) {\n      L(`${e}: onPaste callback call is failed`, \"error\", n);\n    }\n    return i;\n  }\n  /**\n   * Insert new default block at passed index\n   *\n   * @param {number} index - index where Block should be inserted\n   * @param {boolean} needToFocus - if true, updates current Block index\n   *\n   * TODO: Remove method and use insert() with index instead (?)\n   * @returns {Block} inserted Block\n   */\n  insertDefaultBlockAtIndex(e, t = !1) {\n    const o = this.composeBlock({ tool: this.config.defaultBlock });\n    return this._blocks[e] = o, this.blockDidMutated(tt, o, {\n      index: e\n    }), t ? this.currentBlockIndex = e : e <= this.currentBlockIndex && this.currentBlockIndex++, o;\n  }\n  /**\n   * Always inserts at the end\n   *\n   * @returns {Block}\n   */\n  insertAtEnd() {\n    return this.currentBlockIndex = this.blocks.length - 1, this.insert();\n  }\n  /**\n   * Merge two blocks\n   *\n   * @param {Block} targetBlock - previous block will be append to this block\n   * @param {Block} blockToMerge - block that will be merged with target block\n   * @returns {Promise} - the sequence that can be continued\n   */\n  async mergeBlocks(e, t) {\n    const o = await t.data;\n    V(o) || await e.mergeWith(o), this.removeBlock(t), this.currentBlockIndex = this._blocks.indexOf(e);\n  }\n  /**\n   * Remove passed Block\n   *\n   * @param block - Block to remove\n   * @param addLastBlock - if true, adds new default block at the end. @todo remove this logic and use event-bus instead\n   */\n  removeBlock(e, t = !0) {\n    return new Promise((o) => {\n      const i = this._blocks.indexOf(e);\n      if (!this.validateIndex(i))\n        throw new Error(\"Can't find a Block to remove\");\n      e.destroy(), this._blocks.remove(i), this.blockDidMutated(et, e, {\n        index: i\n      }), this.currentBlockIndex >= i && this.currentBlockIndex--, this.blocks.length ? i === 0 && (this.currentBlockIndex = 0) : (this.currentBlockIndex = -1, t && this.insert()), o();\n    });\n  }\n  /**\n   * Remove only selected Blocks\n   * and returns first Block index where started removing...\n   *\n   * @returns {number|undefined}\n   */\n  removeSelectedBlocks() {\n    let e;\n    for (let t = this.blocks.length - 1; t >= 0; t--)\n      this.blocks[t].selected && (this.removeBlock(this.blocks[t]), e = t);\n    return e;\n  }\n  /**\n   * Attention!\n   * After removing insert the new default typed Block and focus on it\n   * Removes all blocks\n   */\n  removeAllBlocks() {\n    for (let e = this.blocks.length - 1; e >= 0; e--)\n      this._blocks.remove(e);\n    this.currentBlockIndex = -1, this.insert(), this.currentBlock.firstInput.focus();\n  }\n  /**\n   * Split current Block\n   * 1. Extract content from Caret position to the Block`s end\n   * 2. Insert a new Block below current one with extracted content\n   *\n   * @returns {Block}\n   */\n  split() {\n    const e = this.Editor.Caret.extractFragmentFromCaretPosition(), t = d.make(\"div\");\n    t.appendChild(e);\n    const o = {\n      text: d.isEmpty(t) ? \"\" : t.innerHTML\n    };\n    return this.insert({ data: o });\n  }\n  /**\n   * Returns Block by passed index\n   *\n   * @param {number} index - index to get. -1 to get last\n   * @returns {Block}\n   */\n  getBlockByIndex(e) {\n    return e === -1 && (e = this._blocks.length - 1), this._blocks[e];\n  }\n  /**\n   * Returns an index for passed Block\n   *\n   * @param block - block to find index\n   */\n  getBlockIndex(e) {\n    return this._blocks.indexOf(e);\n  }\n  /**\n   * Returns the Block by passed id\n   *\n   * @param id - id of block to get\n   * @returns {Block}\n   */\n  getBlockById(e) {\n    return this._blocks.array.find((t) => t.id === e);\n  }\n  /**\n   * Get Block instance by html element\n   *\n   * @param {Node} element - html element to get Block by\n   */\n  getBlock(e) {\n    d.isElement(e) || (e = e.parentNode);\n    const t = this._blocks.nodes, o = e.closest(`.${F.CSS.wrapper}`), i = t.indexOf(o);\n    if (i >= 0)\n      return this._blocks[i];\n  }\n  /**\n   * Remove selection from all Blocks then highlight only Current Block\n   */\n  highlightCurrentNode() {\n    this.clearFocused(), this.currentBlock.focused = !0;\n  }\n  /**\n   * Remove selection from all Blocks\n   */\n  clearFocused() {\n    this.blocks.forEach((e) => {\n      e.focused = !1;\n    });\n  }\n  /**\n   * 1) Find first-level Block from passed child Node\n   * 2) Mark it as current\n   *\n   * @param {Node} childNode - look ahead from this node.\n   * @returns {Block | undefined} can return undefined in case when the passed child note is not a part of the current editor instance\n   */\n  setCurrentBlockByChildNode(e) {\n    d.isElement(e) || (e = e.parentNode);\n    const t = e.closest(`.${F.CSS.wrapper}`);\n    if (!t)\n      return;\n    const o = t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);\n    if (o != null && o.isEqualNode(this.Editor.UI.nodes.wrapper))\n      return this.currentBlockIndex = this._blocks.nodes.indexOf(t), this.currentBlock.updateCurrentInput(), this.currentBlock;\n  }\n  /**\n   * Return block which contents passed node\n   *\n   * @param {Node} childNode - node to get Block by\n   * @returns {Block}\n   */\n  getBlockByChildNode(e) {\n    d.isElement(e) || (e = e.parentNode);\n    const t = e.closest(`.${F.CSS.wrapper}`);\n    return this.blocks.find((o) => o.holder === t);\n  }\n  /**\n   * Swap Blocks Position\n   *\n   * @param {number} fromIndex - index of first block\n   * @param {number} toIndex - index of second block\n   * @deprecated — use 'move' instead\n   */\n  swap(e, t) {\n    this._blocks.swap(e, t), this.currentBlockIndex = t;\n  }\n  /**\n   * Move a block to a new index\n   *\n   * @param {number} toIndex - index where to move Block\n   * @param {number} fromIndex - index of Block to move\n   */\n  move(e, t = this.currentBlockIndex) {\n    if (isNaN(e) || isNaN(t)) {\n      L(\"Warning during 'move' call: incorrect indices provided.\", \"warn\");\n      return;\n    }\n    if (!this.validateIndex(e) || !this.validateIndex(t)) {\n      L(\"Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.\", \"warn\");\n      return;\n    }\n    this._blocks.move(e, t), this.currentBlockIndex = e, this.blockDidMutated(qo, this.currentBlock, {\n      fromIndex: t,\n      toIndex: e\n    });\n  }\n  /**\n   * Converts passed Block to the new Tool\n   * Uses Conversion Config\n   *\n   * @param blockToConvert - Block that should be converted\n   * @param targetToolName - name of the Tool to convert to\n   * @param blockDataOverrides - optional new Block data overrides\n   */\n  async convert(e, t, o) {\n    if (!await e.save())\n      throw new Error(\"Could not convert Block. Failed to extract original Block data.\");\n    const n = this.Editor.Tools.blockTools.get(t);\n    if (!n)\n      throw new Error(`Could not convert Block. Tool «${t}» not found.`);\n    const r = await e.exportDataAsString(), a = Z(\n      r,\n      n.sanitizeConfig\n    );\n    let l = Jt(a, n.conversionConfig);\n    o && (l = Object.assign(l, o)), this.replace(e, n.name, l);\n  }\n  /**\n   * Sets current Block Index -1 which means unknown\n   * and clear highlights\n   */\n  dropPointer() {\n    this.currentBlockIndex = -1, this.clearFocused();\n  }\n  /**\n   * Clears Editor\n   *\n   * @param {boolean} needToAddDefaultBlock - 1) in internal calls (for example, in api.blocks.render)\n   *                                             we don't need to add an empty default block\n   *                                        2) in api.blocks.clear we should add empty block\n   */\n  async clear(e = !1) {\n    const t = new Zo();\n    this.blocks.forEach((o) => {\n      t.add(async () => {\n        await this.removeBlock(o, !1);\n      });\n    }), await t.completed, this.dropPointer(), e && this.insert(), this.Editor.UI.checkEmptiness();\n  }\n  /**\n   * Cleans up all the block tools' resources\n   * This is called when editor is destroyed\n   */\n  async destroy() {\n    await Promise.all(this.blocks.map((e) => e.destroy()));\n  }\n  /**\n   * Bind Block events\n   *\n   * @param {Block} block - Block to which event should be bound\n   */\n  bindBlockEvents(e) {\n    const { BlockEvents: t } = this.Editor;\n    this.readOnlyMutableListeners.on(e.holder, \"keydown\", (o) => {\n      t.keydown(o);\n    }), this.readOnlyMutableListeners.on(e.holder, \"keyup\", (o) => {\n      t.keyup(o);\n    }), this.readOnlyMutableListeners.on(e.holder, \"dragover\", (o) => {\n      t.dragOver(o);\n    }), this.readOnlyMutableListeners.on(e.holder, \"dragleave\", (o) => {\n      t.dragLeave(o);\n    }), e.on(\"didMutated\", (o) => this.blockDidMutated(ot, o, {\n      index: this.getBlockIndex(o)\n    }));\n  }\n  /**\n   * Disable mutable handlers and bindings\n   */\n  disableModuleBindings() {\n    this.readOnlyMutableListeners.clearAll();\n  }\n  /**\n   * Enables all module handlers and bindings for all Blocks\n   */\n  enableModuleBindings() {\n    this.readOnlyMutableListeners.on(\n      document,\n      \"cut\",\n      (e) => this.Editor.BlockEvents.handleCommandX(e)\n    ), this.blocks.forEach((e) => {\n      this.bindBlockEvents(e);\n    });\n  }\n  /**\n   * Validates that the given index is not lower than 0 or higher than the amount of blocks\n   *\n   * @param {number} index - index of blocks array to validate\n   * @returns {boolean}\n   */\n  validateIndex(e) {\n    return !(e < 0 || e >= this._blocks.length);\n  }\n  /**\n   * Block mutation callback\n   *\n   * @param mutationType - what happened with block\n   * @param block - mutated block\n   * @param detailData - additional data to pass with change event\n   */\n  blockDidMutated(e, t, o) {\n    const i = new CustomEvent(e, {\n      detail: {\n        target: new ee(t),\n        ...o\n      }\n    });\n    return this.eventsDispatcher.emit(ct, {\n      event: i\n    }), t;\n  }\n}\nclass Jo extends C {\n  constructor() {\n    super(...arguments), this.anyBlockSelectedCache = null, this.needToSelectAll = !1, this.nativeInputSelected = !1, this.readyToBlockSelection = !1;\n  }\n  /**\n   * Sanitizer Config\n   *\n   * @returns {SanitizerConfig}\n   */\n  get sanitizerConfig() {\n    return {\n      p: {},\n      h1: {},\n      h2: {},\n      h3: {},\n      h4: {},\n      h5: {},\n      h6: {},\n      ol: {},\n      ul: {},\n      li: {},\n      br: !0,\n      img: {\n        src: !0,\n        width: !0,\n        height: !0\n      },\n      a: {\n        href: !0\n      },\n      b: {},\n      i: {},\n      u: {}\n    };\n  }\n  /**\n   * Flag that identifies all Blocks selection\n   *\n   * @returns {boolean}\n   */\n  get allBlocksSelected() {\n    const { BlockManager: e } = this.Editor;\n    return e.blocks.every((t) => t.selected === !0);\n  }\n  /**\n   * Set selected all blocks\n   *\n   * @param {boolean} state - state to set\n   */\n  set allBlocksSelected(e) {\n    const { BlockManager: t } = this.Editor;\n    t.blocks.forEach((o) => {\n      o.selected = e;\n    }), this.clearCache();\n  }\n  /**\n   * Flag that identifies any Block selection\n   *\n   * @returns {boolean}\n   */\n  get anyBlockSelected() {\n    const { BlockManager: e } = this.Editor;\n    return this.anyBlockSelectedCache === null && (this.anyBlockSelectedCache = e.blocks.some((t) => t.selected === !0)), this.anyBlockSelectedCache;\n  }\n  /**\n   * Return selected Blocks array\n   *\n   * @returns {Block[]}\n   */\n  get selectedBlocks() {\n    return this.Editor.BlockManager.blocks.filter((e) => e.selected);\n  }\n  /**\n   * Module Preparation\n   * Registers Shortcuts CMD+A and CMD+C\n   * to select all and copy them\n   */\n  prepare() {\n    this.selection = new m(), le.add({\n      name: \"CMD+A\",\n      handler: (e) => {\n        const { BlockManager: t, ReadOnly: o } = this.Editor;\n        if (o.isEnabled) {\n          e.preventDefault(), this.selectAllBlocks();\n          return;\n        }\n        t.currentBlock && this.handleCommandA(e);\n      },\n      on: this.Editor.UI.nodes.redactor\n    });\n  }\n  /**\n   * Toggle read-only state\n   *\n   *  - Remove all ranges\n   *  - Unselect all Blocks\n   */\n  toggleReadOnly() {\n    m.get().removeAllRanges(), this.allBlocksSelected = !1;\n  }\n  /**\n   * Remove selection of Block\n   *\n   * @param {number?} index - Block index according to the BlockManager's indexes\n   */\n  unSelectBlockByIndex(e) {\n    const { BlockManager: t } = this.Editor;\n    let o;\n    isNaN(e) ? o = t.currentBlock : o = t.getBlockByIndex(e), o.selected = !1, this.clearCache();\n  }\n  /**\n   * Clear selection from Blocks\n   *\n   * @param {Event} reason - event caused clear of selection\n   * @param {boolean} restoreSelection - if true, restore saved selection\n   */\n  clearSelection(e, t = !1) {\n    const { BlockManager: o, Caret: i, RectangleSelection: n } = this.Editor;\n    this.needToSelectAll = !1, this.nativeInputSelected = !1, this.readyToBlockSelection = !1;\n    const r = e && e instanceof KeyboardEvent, a = r && nt(e.keyCode);\n    if (this.anyBlockSelected && r && a && !m.isSelectionExists) {\n      const l = o.removeSelectedBlocks();\n      o.insertDefaultBlockAtIndex(l, !0), i.setToBlock(o.currentBlock), re(() => {\n        const c = e.key;\n        i.insertContentAtCaretPosition(c.length > 1 ? \"\" : c);\n      }, 20)();\n    }\n    if (this.Editor.CrossBlockSelection.clear(e), !this.anyBlockSelected || n.isRectActivated()) {\n      this.Editor.RectangleSelection.clearSelection();\n      return;\n    }\n    t && this.selection.restore(), this.allBlocksSelected = !1;\n  }\n  /**\n   * Reduce each Block and copy its content\n   *\n   * @param {ClipboardEvent} e - copy/cut event\n   * @returns {Promise<void>}\n   */\n  copySelectedBlocks(e) {\n    e.preventDefault();\n    const t = d.make(\"div\");\n    this.selectedBlocks.forEach((n) => {\n      const r = Z(n.holder.innerHTML, this.sanitizerConfig), a = d.make(\"p\");\n      a.innerHTML = r, t.appendChild(a);\n    });\n    const o = Array.from(t.childNodes).map((n) => n.textContent).join(`\n\n`), i = t.innerHTML;\n    return e.clipboardData.setData(\"text/plain\", o), e.clipboardData.setData(\"text/html\", i), Promise.all(this.selectedBlocks.map((n) => n.save())).then((n) => {\n      try {\n        e.clipboardData.setData(this.Editor.Paste.MIME_TYPE, JSON.stringify(n));\n      } catch {\n      }\n    });\n  }\n  /**\n   * select Block\n   *\n   * @param {number?} index - Block index according to the BlockManager's indexes\n   */\n  selectBlockByIndex(e) {\n    const { BlockManager: t } = this.Editor;\n    t.clearFocused();\n    let o;\n    isNaN(e) ? o = t.currentBlock : o = t.getBlockByIndex(e), this.selection.save(), m.get().removeAllRanges(), o.selected = !0, this.clearCache(), this.Editor.InlineToolbar.close();\n  }\n  /**\n   * Clear anyBlockSelected cache\n   */\n  clearCache() {\n    this.anyBlockSelectedCache = null;\n  }\n  /**\n   * Module destruction\n   * De-registers Shortcut CMD+A\n   */\n  destroy() {\n    le.remove(this.Editor.UI.nodes.redactor, \"CMD+A\");\n  }\n  /**\n   * First CMD+A selects all input content by native behaviour,\n   * next CMD+A keypress selects all blocks\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  handleCommandA(e) {\n    if (this.Editor.RectangleSelection.clearSelection(), d.isNativeInput(e.target) && !this.readyToBlockSelection) {\n      this.readyToBlockSelection = !0;\n      return;\n    }\n    const o = this.Editor.BlockManager.getBlock(e.target).inputs;\n    if (o.length > 1 && !this.readyToBlockSelection) {\n      this.readyToBlockSelection = !0;\n      return;\n    }\n    if (o.length === 1 && !this.needToSelectAll) {\n      this.needToSelectAll = !0;\n      return;\n    }\n    this.needToSelectAll ? (e.preventDefault(), this.selectAllBlocks(), this.needToSelectAll = !1, this.readyToBlockSelection = !1, this.Editor.ConversionToolbar.close()) : this.readyToBlockSelection && (e.preventDefault(), this.selectBlockByIndex(), this.needToSelectAll = !0);\n  }\n  /**\n   * Select All Blocks\n   * Each Block has selected setter that makes Block copyable\n   */\n  selectAllBlocks() {\n    this.selection.save(), m.get().removeAllRanges(), this.allBlocksSelected = !0, this.Editor.InlineToolbar.close();\n  }\n}\nclass ve extends C {\n  /**\n   * Allowed caret positions in input\n   *\n   * @static\n   * @returns {{START: string, END: string, DEFAULT: string}}\n   */\n  get positions() {\n    return {\n      START: \"start\",\n      END: \"end\",\n      DEFAULT: \"default\"\n    };\n  }\n  /**\n   * Elements styles that can be useful for Caret Module\n   */\n  static get CSS() {\n    return {\n      shadowCaret: \"cdx-shadow-caret\"\n    };\n  }\n  /**\n   * Get's deepest first node and checks if offset is zero\n   *\n   * @returns {boolean}\n   */\n  get isAtStart() {\n    const e = m.get(), t = d.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput);\n    let o = e.focusNode;\n    if (d.isNativeInput(t))\n      return t.selectionEnd === 0;\n    if (!e.anchorNode)\n      return !1;\n    let i = o.textContent.search(/\\S/);\n    i === -1 && (i = 0);\n    let n = e.focusOffset;\n    return o.nodeType !== Node.TEXT_NODE && o.childNodes.length && (o.childNodes[n] ? (o = o.childNodes[n], n = 0) : (o = o.childNodes[n - 1], n = o.textContent.length)), (d.isLineBreakTag(t) || d.isEmpty(t)) && this.getHigherLevelSiblings(o, \"left\").every((l) => {\n      const c = d.isLineBreakTag(l), u = l.children.length === 1 && d.isLineBreakTag(l.children[0]), h = c || u;\n      return d.isEmpty(l) && !h;\n    }) && n === i ? !0 : t === null || o === t && n <= i;\n  }\n  /**\n   * Get's deepest last node and checks if offset is last node text length\n   *\n   * @returns {boolean}\n   */\n  get isAtEnd() {\n    const e = m.get();\n    let t = e.focusNode;\n    const o = d.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput, !0);\n    if (d.isNativeInput(o))\n      return o.selectionEnd === o.value.length;\n    if (!e.focusNode)\n      return !1;\n    let i = e.focusOffset;\n    if (t.nodeType !== Node.TEXT_NODE && t.childNodes.length && (t.childNodes[i - 1] ? (t = t.childNodes[i - 1], i = t.textContent.length) : (t = t.childNodes[0], i = 0)), d.isLineBreakTag(o) || d.isEmpty(o)) {\n      const r = this.getHigherLevelSiblings(t, \"right\");\n      if (r.every((l, c) => c === r.length - 1 && d.isLineBreakTag(l) || d.isEmpty(l) && !d.isLineBreakTag(l)) && i === t.textContent.length)\n        return !0;\n    }\n    const n = o.textContent.replace(/\\s+$/, \"\");\n    return t === o && i >= n.length;\n  }\n  /**\n   * Method gets Block instance and puts caret to the text node with offset\n   * There two ways that method applies caret position:\n   *   - first found text node: sets at the beginning, but you can pass an offset\n   *   - last found text node: sets at the end of the node. Also, you can customize the behaviour\n   *\n   * @param {Block} block - Block class\n   * @param {string} position - position where to set caret.\n   *                            If default - leave default behaviour and apply offset if it's passed\n   * @param {number} offset - caret offset regarding to the text node\n   */\n  setToBlock(e, t = this.positions.DEFAULT, o = 0) {\n    const { BlockManager: i } = this.Editor;\n    let n;\n    switch (t) {\n      case this.positions.START:\n        n = e.firstInput;\n        break;\n      case this.positions.END:\n        n = e.lastInput;\n        break;\n      default:\n        n = e.currentInput;\n    }\n    if (!n)\n      return;\n    const r = d.getDeepestNode(n, t === this.positions.END), a = d.getContentLength(r);\n    switch (!0) {\n      case t === this.positions.START:\n        o = 0;\n        break;\n      case t === this.positions.END:\n      case o > a:\n        o = a;\n        break;\n    }\n    re(() => {\n      this.set(r, o);\n    }, 20)(), i.setCurrentBlockByChildNode(e.holder), i.currentBlock.currentInput = n;\n  }\n  /**\n   * Set caret to the current input of current Block.\n   *\n   * @param {HTMLElement} input - input where caret should be set\n   * @param {string} position - position of the caret.\n   *                            If default - leave default behaviour and apply offset if it's passed\n   * @param {number} offset - caret offset regarding to the text node\n   */\n  setToInput(e, t = this.positions.DEFAULT, o = 0) {\n    const { currentBlock: i } = this.Editor.BlockManager, n = d.getDeepestNode(e);\n    switch (t) {\n      case this.positions.START:\n        this.set(n, 0);\n        break;\n      case this.positions.END:\n        this.set(n, d.getContentLength(n));\n        break;\n      default:\n        o && this.set(n, o);\n    }\n    i.currentInput = e;\n  }\n  /**\n   * Creates Document Range and sets caret to the element with offset\n   *\n   * @param {HTMLElement} element - target node.\n   * @param {number} offset - offset\n   */\n  set(e, t = 0) {\n    const { top: o, bottom: i } = m.setCursor(e, t), { innerHeight: n } = window;\n    o < 0 && window.scrollBy(0, o), i > n && window.scrollBy(0, i - n);\n  }\n  /**\n   * Set Caret to the last Block\n   * If last block is not empty, append another empty block\n   */\n  setToTheLastBlock() {\n    const e = this.Editor.BlockManager.lastBlock;\n    if (e)\n      if (e.tool.isDefault && e.isEmpty)\n        this.setToBlock(e);\n      else {\n        const t = this.Editor.BlockManager.insertAtEnd();\n        this.setToBlock(t);\n      }\n  }\n  /**\n   * Extract content fragment of current Block from Caret position to the end of the Block\n   */\n  extractFragmentFromCaretPosition() {\n    const e = m.get();\n    if (e.rangeCount) {\n      const t = e.getRangeAt(0), o = this.Editor.BlockManager.currentBlock.currentInput;\n      if (t.deleteContents(), o)\n        if (d.isNativeInput(o)) {\n          const i = o, n = document.createDocumentFragment(), r = i.value.substring(0, i.selectionStart), a = i.value.substring(i.selectionStart);\n          return n.textContent = a, i.value = r, n;\n        } else {\n          const i = t.cloneRange();\n          return i.selectNodeContents(o), i.setStart(t.endContainer, t.endOffset), i.extractContents();\n        }\n    }\n  }\n  /**\n   * Set's caret to the next Block or Tool`s input\n   * Before moving caret, we should check if caret position is at the end of Plugins node\n   * Using {@link Dom#getDeepestNode} to get a last node and match with current selection\n   *\n   * @returns {boolean}\n   */\n  navigateNext() {\n    const { BlockManager: e } = this.Editor, { currentBlock: t, nextContentfulBlock: o } = e, { nextInput: i } = t, n = this.isAtEnd;\n    let r = o;\n    if (!r && !i) {\n      if (t.tool.isDefault || !n)\n        return !1;\n      r = e.insertAtEnd();\n    }\n    return n ? (i ? this.setToInput(i, this.positions.START) : this.setToBlock(r, this.positions.START), !0) : !1;\n  }\n  /**\n   * Set's caret to the previous Tool`s input or Block\n   * Before moving caret, we should check if caret position is start of the Plugins node\n   * Using {@link Dom#getDeepestNode} to get a last node and match with current selection\n   *\n   * @returns {boolean}\n   */\n  navigatePrevious() {\n    const { currentBlock: e, previousContentfulBlock: t } = this.Editor.BlockManager;\n    if (!e)\n      return !1;\n    const { previousInput: o } = e;\n    return !t && !o ? !1 : this.isAtStart ? (o ? this.setToInput(o, this.positions.END) : this.setToBlock(t, this.positions.END), !0) : !1;\n  }\n  /**\n   * Inserts shadow element after passed element where caret can be placed\n   *\n   * @param {Element} element - element after which shadow caret should be inserted\n   */\n  createShadow(e) {\n    const t = document.createElement(\"span\");\n    t.classList.add(ve.CSS.shadowCaret), e.insertAdjacentElement(\"beforeend\", t);\n  }\n  /**\n   * Restores caret position\n   *\n   * @param {HTMLElement} element - element where caret should be restored\n   */\n  restoreCaret(e) {\n    const t = e.querySelector(`.${ve.CSS.shadowCaret}`);\n    if (!t)\n      return;\n    new m().expandToTag(t);\n    const i = document.createRange();\n    i.selectNode(t), i.extractContents();\n  }\n  /**\n   * Inserts passed content at caret position\n   *\n   * @param {string} content - content to insert\n   */\n  insertContentAtCaretPosition(e) {\n    const t = document.createDocumentFragment(), o = document.createElement(\"div\"), i = m.get(), n = m.range;\n    o.innerHTML = e, Array.from(o.childNodes).forEach((c) => t.appendChild(c)), t.childNodes.length === 0 && t.appendChild(new Text());\n    const r = t.lastChild;\n    n.deleteContents(), n.insertNode(t);\n    const a = document.createRange(), l = r.nodeType === Node.TEXT_NODE ? r : r.firstChild;\n    l !== null && l.textContent !== null && a.setStart(l, l.textContent.length), i.removeAllRanges(), i.addRange(a);\n  }\n  /**\n   * Get all first-level (first child of [contenteditable]) siblings from passed node\n   * Then you can check it for emptiness\n   *\n   * @example\n   * <div contenteditable>\n   * <p></p>                            |\n   * <p></p>                            | left first-level siblings\n   * <p></p>                            |\n   * <blockquote><a><b>adaddad</b><a><blockquote>       <-- passed node for example <b>\n   * <p></p>                            |\n   * <p></p>                            | right first-level siblings\n   * <p></p>                            |\n   * </div>\n   * @param {HTMLElement} from - element from which siblings should be searched\n   * @param {'left' | 'right'} direction - direction of search\n   * @returns {HTMLElement[]}\n   */\n  getHigherLevelSiblings(e, t) {\n    let o = e;\n    const i = [];\n    for (; o.parentNode && o.parentNode.contentEditable !== \"true\"; )\n      o = o.parentNode;\n    const n = t === \"left\" ? \"previousSibling\" : \"nextSibling\";\n    for (; o[n]; )\n      o = o[n], i.push(o);\n    return i;\n  }\n}\nclass Qo extends C {\n  constructor() {\n    super(...arguments), this.onMouseUp = () => {\n      this.listeners.off(document, \"mouseover\", this.onMouseOver), this.listeners.off(document, \"mouseup\", this.onMouseUp);\n    }, this.onMouseOver = (e) => {\n      const { BlockManager: t, BlockSelection: o } = this.Editor, i = t.getBlockByChildNode(e.relatedTarget) || this.lastSelectedBlock, n = t.getBlockByChildNode(e.target);\n      if (!(!i || !n) && n !== i) {\n        if (i === this.firstSelectedBlock) {\n          m.get().removeAllRanges(), i.selected = !0, n.selected = !0, o.clearCache();\n          return;\n        }\n        if (n === this.firstSelectedBlock) {\n          i.selected = !1, n.selected = !1, o.clearCache();\n          return;\n        }\n        this.Editor.InlineToolbar.close(), this.toggleBlocksSelectedState(i, n), this.lastSelectedBlock = n;\n      }\n    };\n  }\n  /**\n   * Module preparation\n   *\n   * @returns {Promise}\n   */\n  async prepare() {\n    this.listeners.on(document, \"mousedown\", (e) => {\n      this.enableCrossBlockSelection(e);\n    });\n  }\n  /**\n   * Sets up listeners\n   *\n   * @param {MouseEvent} event - mouse down event\n   */\n  watchSelection(e) {\n    if (e.button !== _t.LEFT)\n      return;\n    const { BlockManager: t } = this.Editor;\n    this.firstSelectedBlock = t.getBlock(e.target), this.lastSelectedBlock = this.firstSelectedBlock, this.listeners.on(document, \"mouseover\", this.onMouseOver), this.listeners.on(document, \"mouseup\", this.onMouseUp);\n  }\n  /**\n   * return boolean is cross block selection started\n   */\n  get isCrossBlockSelectionStarted() {\n    return !!this.firstSelectedBlock && !!this.lastSelectedBlock;\n  }\n  /**\n   * Change selection state of the next Block\n   * Used for CBS via Shift + arrow keys\n   *\n   * @param {boolean} next - if true, toggle next block. Previous otherwise\n   */\n  toggleBlockSelectedState(e = !0) {\n    const { BlockManager: t, BlockSelection: o } = this.Editor;\n    this.lastSelectedBlock || (this.lastSelectedBlock = this.firstSelectedBlock = t.currentBlock), this.firstSelectedBlock === this.lastSelectedBlock && (this.firstSelectedBlock.selected = !0, o.clearCache(), m.get().removeAllRanges());\n    const i = t.blocks.indexOf(this.lastSelectedBlock) + (e ? 1 : -1), n = t.blocks[i];\n    n && (this.lastSelectedBlock.selected !== n.selected ? (n.selected = !0, o.clearCache()) : (this.lastSelectedBlock.selected = !1, o.clearCache()), this.lastSelectedBlock = n, this.Editor.InlineToolbar.close(), n.holder.scrollIntoView({\n      block: \"nearest\"\n    }));\n  }\n  /**\n   * Clear saved state\n   *\n   * @param {Event} reason - event caused clear of selection\n   */\n  clear(e) {\n    const { BlockManager: t, BlockSelection: o, Caret: i } = this.Editor, n = t.blocks.indexOf(this.firstSelectedBlock), r = t.blocks.indexOf(this.lastSelectedBlock);\n    if (o.anyBlockSelected && n > -1 && r > -1)\n      if (e && e instanceof KeyboardEvent)\n        switch (e.keyCode) {\n          case B.DOWN:\n          case B.RIGHT:\n            i.setToBlock(t.blocks[Math.max(n, r)], i.positions.END);\n            break;\n          case B.UP:\n          case B.LEFT:\n            i.setToBlock(t.blocks[Math.min(n, r)], i.positions.START);\n            break;\n          default:\n            i.setToBlock(t.blocks[Math.max(n, r)], i.positions.END);\n        }\n      else\n        i.setToBlock(t.blocks[Math.max(n, r)], i.positions.END);\n    this.firstSelectedBlock = this.lastSelectedBlock = null;\n  }\n  /**\n   * Enables Cross Block Selection\n   *\n   * @param {MouseEvent} event - mouse down event\n   */\n  enableCrossBlockSelection(e) {\n    const { UI: t } = this.Editor;\n    m.isCollapsed || this.Editor.BlockSelection.clearSelection(e), t.nodes.redactor.contains(e.target) ? this.watchSelection(e) : this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * Change blocks selection state between passed two blocks.\n   *\n   * @param {Block} firstBlock - first block in range\n   * @param {Block} lastBlock - last block in range\n   */\n  toggleBlocksSelectedState(e, t) {\n    const { BlockManager: o, BlockSelection: i } = this.Editor, n = o.blocks.indexOf(e), r = o.blocks.indexOf(t), a = e.selected !== t.selected;\n    for (let l = Math.min(n, r); l <= Math.max(n, r); l++) {\n      const c = o.blocks[l];\n      c !== this.firstSelectedBlock && c !== (a ? e : t) && (o.blocks[l].selected = !o.blocks[l].selected, i.clearCache());\n    }\n  }\n}\nclass ei extends C {\n  constructor() {\n    super(...arguments), this.isStartedAtEditor = !1;\n  }\n  /**\n   * Toggle read-only state\n   *\n   * if state is true:\n   *  - disable all drag-n-drop event handlers\n   *\n   * if state is false:\n   *  - restore drag-n-drop event handlers\n   *\n   * @param {boolean} readOnlyEnabled - \"read only\" state\n   */\n  toggleReadOnly(e) {\n    e ? this.disableModuleBindings() : this.enableModuleBindings();\n  }\n  /**\n   * Add drag events listeners to editor zone\n   */\n  enableModuleBindings() {\n    const { UI: e } = this.Editor;\n    this.readOnlyMutableListeners.on(e.nodes.holder, \"drop\", async (t) => {\n      await this.processDrop(t);\n    }, !0), this.readOnlyMutableListeners.on(e.nodes.holder, \"dragstart\", () => {\n      this.processDragStart();\n    }), this.readOnlyMutableListeners.on(e.nodes.holder, \"dragover\", (t) => {\n      this.processDragOver(t);\n    }, !0);\n  }\n  /**\n   * Unbind drag-n-drop event handlers\n   */\n  disableModuleBindings() {\n    this.readOnlyMutableListeners.clearAll();\n  }\n  /**\n   * Handle drop event\n   *\n   * @param {DragEvent} dropEvent - drop event\n   */\n  async processDrop(e) {\n    const {\n      BlockManager: t,\n      Caret: o,\n      Paste: i\n    } = this.Editor;\n    e.preventDefault(), t.blocks.forEach((r) => {\n      r.dropTarget = !1;\n    }), m.isAtEditor && !m.isCollapsed && this.isStartedAtEditor && document.execCommand(\"delete\"), this.isStartedAtEditor = !1;\n    const n = t.setCurrentBlockByChildNode(e.target);\n    if (n)\n      this.Editor.Caret.setToBlock(n, o.positions.END);\n    else {\n      const r = t.setCurrentBlockByChildNode(t.lastBlock.holder);\n      this.Editor.Caret.setToBlock(r, o.positions.END);\n    }\n    await i.processDataTransfer(e.dataTransfer, !0);\n  }\n  /**\n   * Handle drag start event\n   */\n  processDragStart() {\n    m.isAtEditor && !m.isCollapsed && (this.isStartedAtEditor = !0), this.Editor.InlineToolbar.close();\n  }\n  /**\n   * @param {DragEvent} dragEvent - drag event\n   */\n  processDragOver(e) {\n    e.preventDefault();\n  }\n}\nclass ti extends C {\n  /**\n   * Prepare the module\n   *\n   * @param options - options used by the modification observer module\n   * @param options.config - Editor configuration object\n   * @param options.eventsDispatcher - common Editor event bus\n   */\n  constructor({ config: e, eventsDispatcher: t }) {\n    super({\n      config: e,\n      eventsDispatcher: t\n    }), this.disabled = !1, this.batchingTimeout = null, this.batchingOnChangeQueue = /* @__PURE__ */ new Map(), this.batchTime = 400, this.mutationObserver = new MutationObserver((o) => {\n      this.redactorChanged(o);\n    }), this.eventsDispatcher.on(ct, (o) => {\n      this.particularBlockChanged(o.event);\n    }), this.eventsDispatcher.on(dt, () => {\n      this.disable();\n    }), this.eventsDispatcher.on(ht, () => {\n      this.enable();\n    });\n  }\n  /**\n   * Enables onChange event\n   */\n  enable() {\n    this.mutationObserver.observe(\n      this.Editor.UI.nodes.redactor,\n      {\n        childList: !0,\n        subtree: !0,\n        characterData: !0,\n        attributes: !0\n      }\n    ), this.disabled = !1;\n  }\n  /**\n   * Disables onChange event\n   */\n  disable() {\n    this.mutationObserver.disconnect(), this.disabled = !0;\n  }\n  /**\n   * Call onChange event passed to Editor.js configuration\n   *\n   * @param event - some of our custom change events\n   */\n  particularBlockChanged(e) {\n    this.disabled || !D(this.config.onChange) || (this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`, e), this.batchingTimeout && clearTimeout(this.batchingTimeout), this.batchingTimeout = setTimeout(() => {\n      let t;\n      this.batchingOnChangeQueue.size === 1 ? t = this.batchingOnChangeQueue.values().next().value : t = Array.from(this.batchingOnChangeQueue.values()), this.config.onChange && this.config.onChange(this.Editor.API.methods, t), this.batchingOnChangeQueue.clear();\n    }, this.batchTime));\n  }\n  /**\n   * Fired on every blocks wrapper dom change\n   *\n   * @param mutations - mutations happened\n   */\n  redactorChanged(e) {\n    this.eventsDispatcher.emit(Me, {\n      mutations: e\n    });\n  }\n}\nconst wt = class extends C {\n  constructor() {\n    super(...arguments), this.MIME_TYPE = \"application/x-editor-js\", this.toolsTags = {}, this.tagsByTool = {}, this.toolsPatterns = [], this.toolsFiles = {}, this.exceptionList = [], this.processTool = (s) => {\n      try {\n        const e = s.create({}, {}, !1);\n        if (s.pasteConfig === !1) {\n          this.exceptionList.push(s.name);\n          return;\n        }\n        if (!D(e.onPaste))\n          return;\n        this.getTagsConfig(s), this.getFilesConfig(s), this.getPatternsConfig(s);\n      } catch (e) {\n        L(\n          `Paste handling for «${s.name}» Tool hasn't been set up because of the error`,\n          \"warn\",\n          e\n        );\n      }\n    }, this.handlePasteEvent = async (s) => {\n      const { BlockManager: e, Toolbar: t } = this.Editor, o = e.setCurrentBlockByChildNode(s.target);\n      !o || this.isNativeBehaviour(s.target) && !s.clipboardData.types.includes(\"Files\") || o && this.exceptionList.includes(o.name) || (s.preventDefault(), this.processDataTransfer(s.clipboardData), e.clearFocused(), t.close());\n    };\n  }\n  /**\n   * Set onPaste callback and collect tools` paste configurations\n   */\n  async prepare() {\n    this.processTools();\n  }\n  /**\n   * Set read-only state\n   *\n   * @param {boolean} readOnlyEnabled - read only flag value\n   */\n  toggleReadOnly(s) {\n    s ? this.unsetCallback() : this.setCallback();\n  }\n  /**\n   * Handle pasted or dropped data transfer object\n   *\n   * @param {DataTransfer} dataTransfer - pasted or dropped data transfer object\n   * @param {boolean} isDragNDrop - true if data transfer comes from drag'n'drop events\n   */\n  async processDataTransfer(s, e = !1) {\n    const { Tools: t } = this.Editor, o = s.types;\n    if ((o.includes ? o.includes(\"Files\") : o.contains(\"Files\")) && !V(this.toolsFiles)) {\n      await this.processFiles(s.files);\n      return;\n    }\n    const n = s.getData(this.MIME_TYPE), r = s.getData(\"text/plain\");\n    let a = s.getData(\"text/html\");\n    if (n)\n      try {\n        this.insertEditorJSData(JSON.parse(n));\n        return;\n      } catch {\n      }\n    e && r.trim() && a.trim() && (a = \"<p>\" + (a.trim() ? a : r) + \"</p>\");\n    const l = Object.keys(this.toolsTags).reduce((h, f) => (h[f.toLowerCase()] = this.toolsTags[f].sanitizationConfig ?? {}, h), {}), c = Object.assign({}, l, t.getAllInlineToolsSanitizeConfig(), { br: {} }), u = Z(a, c);\n    !u.trim() || u.trim() === r || !d.isHTMLString(u) ? await this.processText(r) : await this.processText(u, !0);\n  }\n  /**\n   * Process pasted text and divide them into Blocks\n   *\n   * @param {string} data - text to process. Can be HTML or plain.\n   * @param {boolean} isHTML - if passed string is HTML, this parameter should be true\n   */\n  async processText(s, e = !1) {\n    const { Caret: t, BlockManager: o } = this.Editor, i = e ? this.processHTML(s) : this.processPlain(s);\n    if (!i.length)\n      return;\n    if (i.length === 1) {\n      i[0].isBlock ? this.processSingleBlock(i.pop()) : this.processInlinePaste(i.pop());\n      return;\n    }\n    const r = o.currentBlock && o.currentBlock.tool.isDefault && o.currentBlock.isEmpty;\n    i.map(\n      async (a, l) => this.insertBlock(a, l === 0 && r)\n    ), o.currentBlock && t.setToBlock(o.currentBlock, t.positions.END);\n  }\n  /**\n   * Set onPaste callback handler\n   */\n  setCallback() {\n    this.listeners.on(this.Editor.UI.nodes.holder, \"paste\", this.handlePasteEvent);\n  }\n  /**\n   * Unset onPaste callback handler\n   */\n  unsetCallback() {\n    this.listeners.off(this.Editor.UI.nodes.holder, \"paste\", this.handlePasteEvent);\n  }\n  /**\n   * Get and process tool`s paste configs\n   */\n  processTools() {\n    const s = this.Editor.Tools.blockTools;\n    Array.from(s.values()).forEach(this.processTool);\n  }\n  /**\n   * Get tags name list from either tag name or sanitization config.\n   *\n   * @param {string | object} tagOrSanitizeConfig - tag name or sanitize config object.\n   * @returns {string[]} array of tags.\n   */\n  collectTagNames(s) {\n    return J(s) ? [s] : z(s) ? Object.keys(s) : [];\n  }\n  /**\n   * Get tags to substitute by Tool\n   *\n   * @param tool - BlockTool object\n   */\n  getTagsConfig(s) {\n    if (s.pasteConfig === !1)\n      return;\n    const e = s.pasteConfig.tags || [], t = [];\n    e.forEach((o) => {\n      const i = this.collectTagNames(o);\n      t.push(...i), i.forEach((n) => {\n        if (Object.prototype.hasOwnProperty.call(this.toolsTags, n)) {\n          L(\n            `Paste handler for «${s.name}» Tool on «${n}» tag is skipped because it is already used by «${this.toolsTags[n].tool.name}» Tool.`,\n            \"warn\"\n          );\n          return;\n        }\n        const r = z(o) ? o[n] : null;\n        this.toolsTags[n.toUpperCase()] = {\n          tool: s,\n          sanitizationConfig: r\n        };\n      });\n    }), this.tagsByTool[s.name] = t.map((o) => o.toUpperCase());\n  }\n  /**\n   * Get files` types and extensions to substitute by Tool\n   *\n   * @param tool - BlockTool object\n   */\n  getFilesConfig(s) {\n    if (s.pasteConfig === !1)\n      return;\n    const { files: e = {} } = s.pasteConfig;\n    let { extensions: t, mimeTypes: o } = e;\n    !t && !o || (t && !Array.isArray(t) && (L(`«extensions» property of the onDrop config for «${s.name}» Tool should be an array`), t = []), o && !Array.isArray(o) && (L(`«mimeTypes» property of the onDrop config for «${s.name}» Tool should be an array`), o = []), o && (o = o.filter((i) => Ft(i) ? !0 : (L(`MIME type value «${i}» for the «${s.name}» Tool is not a valid MIME type`, \"warn\"), !1))), this.toolsFiles[s.name] = {\n      extensions: t || [],\n      mimeTypes: o || []\n    });\n  }\n  /**\n   * Get RegExp patterns to substitute by Tool\n   *\n   * @param tool - BlockTool object\n   */\n  getPatternsConfig(s) {\n    s.pasteConfig === !1 || !s.pasteConfig.patterns || V(s.pasteConfig.patterns) || Object.entries(s.pasteConfig.patterns).forEach(([e, t]) => {\n      t instanceof RegExp || L(\n        `Pattern ${t} for «${s.name}» Tool is skipped because it should be a Regexp instance.`,\n        \"warn\"\n      ), this.toolsPatterns.push({\n        key: e,\n        pattern: t,\n        tool: s\n      });\n    });\n  }\n  /**\n   * Check if browser behavior suits better\n   *\n   * @param {EventTarget} element - element where content has been pasted\n   * @returns {boolean}\n   */\n  isNativeBehaviour(s) {\n    return d.isNativeInput(s);\n  }\n  /**\n   * Get files from data transfer object and insert related Tools\n   *\n   * @param {FileList} items - pasted or dropped items\n   */\n  async processFiles(s) {\n    const { BlockManager: e } = this.Editor;\n    let t;\n    t = await Promise.all(\n      Array.from(s).map((n) => this.processFile(n))\n    ), t = t.filter((n) => !!n);\n    const i = e.currentBlock.tool.isDefault && e.currentBlock.isEmpty;\n    t.forEach(\n      (n, r) => {\n        e.paste(n.type, n.event, r === 0 && i);\n      }\n    );\n  }\n  /**\n   * Get information about file and find Tool to handle it\n   *\n   * @param {File} file - file to process\n   */\n  async processFile(s) {\n    const e = Pt(s), t = Object.entries(this.toolsFiles).find(([n, { mimeTypes: r, extensions: a }]) => {\n      const [l, c] = s.type.split(\"/\"), u = a.find((f) => f.toLowerCase() === e.toLowerCase()), h = r.find((f) => {\n        const [k, p] = f.split(\"/\");\n        return k === l && (p === c || p === \"*\");\n      });\n      return !!u || !!h;\n    });\n    if (!t)\n      return;\n    const [o] = t;\n    return {\n      event: this.composePasteEvent(\"file\", {\n        file: s\n      }),\n      type: o\n    };\n  }\n  /**\n   * Split HTML string to blocks and return it as array of Block data\n   *\n   * @param {string} innerHTML - html string to process\n   * @returns {PasteData[]}\n   */\n  processHTML(s) {\n    const { Tools: e } = this.Editor, t = d.make(\"DIV\");\n    return t.innerHTML = s, this.getNodes(t).map((i) => {\n      let n, r = e.defaultTool, a = !1;\n      switch (i.nodeType) {\n        case Node.DOCUMENT_FRAGMENT_NODE:\n          n = d.make(\"div\"), n.appendChild(i);\n          break;\n        case Node.ELEMENT_NODE:\n          n = i, a = !0, this.toolsTags[n.tagName] && (r = this.toolsTags[n.tagName].tool);\n          break;\n      }\n      const { tags: l } = r.pasteConfig || { tags: [] }, c = l.reduce((f, k) => (this.collectTagNames(k).forEach((v) => {\n        const A = z(k) ? k[v] : null;\n        f[v.toLowerCase()] = A || {};\n      }), f), {}), u = Object.assign({}, c, r.baseSanitizeConfig);\n      if (n.tagName.toLowerCase() === \"table\") {\n        const f = Z(n.outerHTML, u);\n        n = d.make(\"div\", void 0, {\n          innerHTML: f\n        }).firstChild;\n      } else\n        n.innerHTML = Z(n.innerHTML, u);\n      const h = this.composePasteEvent(\"tag\", {\n        data: n\n      });\n      return {\n        content: n,\n        isBlock: a,\n        tool: r.name,\n        event: h\n      };\n    }).filter((i) => {\n      const n = d.isEmpty(i.content), r = d.isSingleTag(i.content);\n      return !n || r;\n    });\n  }\n  /**\n   * Split plain text by new line symbols and return it as array of Block data\n   *\n   * @param {string} plain - string to process\n   * @returns {PasteData[]}\n   */\n  processPlain(s) {\n    const { defaultBlock: e } = this.config;\n    if (!s)\n      return [];\n    const t = e;\n    return s.split(/\\r?\\n/).filter((o) => o.trim()).map((o) => {\n      const i = d.make(\"div\");\n      i.textContent = o;\n      const n = this.composePasteEvent(\"tag\", {\n        data: i\n      });\n      return {\n        content: i,\n        tool: t,\n        isBlock: !1,\n        event: n\n      };\n    });\n  }\n  /**\n   * Process paste of single Block tool content\n   *\n   * @param {PasteData} dataToInsert - data of Block to insert\n   */\n  async processSingleBlock(s) {\n    const { Caret: e, BlockManager: t } = this.Editor, { currentBlock: o } = t;\n    if (!o || s.tool !== o.name || !d.containsOnlyInlineElements(s.content.innerHTML)) {\n      this.insertBlock(s, (o == null ? void 0 : o.tool.isDefault) && o.isEmpty);\n      return;\n    }\n    e.insertContentAtCaretPosition(s.content.innerHTML);\n  }\n  /**\n   * Process paste to single Block:\n   * 1. Find patterns` matches\n   * 2. Insert new block if it is not the same type as current one\n   * 3. Just insert text if there is no substitutions\n   *\n   * @param {PasteData} dataToInsert - data of Block to insert\n   */\n  async processInlinePaste(s) {\n    const { BlockManager: e, Caret: t } = this.Editor, { content: o } = s;\n    if (e.currentBlock && e.currentBlock.tool.isDefault && o.textContent.length < wt.PATTERN_PROCESSING_MAX_LENGTH) {\n      const n = await this.processPattern(o.textContent);\n      if (n) {\n        const r = e.currentBlock && e.currentBlock.tool.isDefault && e.currentBlock.isEmpty, a = e.paste(n.tool, n.event, r);\n        t.setToBlock(a, t.positions.END);\n        return;\n      }\n    }\n    if (e.currentBlock && e.currentBlock.currentInput) {\n      const n = e.currentBlock.tool.baseSanitizeConfig;\n      document.execCommand(\n        \"insertHTML\",\n        !1,\n        Z(o.innerHTML, n)\n      );\n    } else\n      this.insertBlock(s);\n  }\n  /**\n   * Get patterns` matches\n   *\n   * @param {string} text - text to process\n   * @returns {Promise<{event: PasteEvent, tool: string}>}\n   */\n  async processPattern(s) {\n    const e = this.toolsPatterns.find((o) => {\n      const i = o.pattern.exec(s);\n      return i ? s === i.shift() : !1;\n    });\n    return e ? {\n      event: this.composePasteEvent(\"pattern\", {\n        key: e.key,\n        data: s\n      }),\n      tool: e.tool.name\n    } : void 0;\n  }\n  /**\n   * Insert pasted Block content to Editor\n   *\n   * @param {PasteData} data - data to insert\n   * @param {boolean} canReplaceCurrentBlock - if true and is current Block is empty, will replace current Block\n   * @returns {void}\n   */\n  insertBlock(s, e = !1) {\n    const { BlockManager: t, Caret: o } = this.Editor, { currentBlock: i } = t;\n    let n;\n    if (e && i && i.isEmpty) {\n      n = t.paste(s.tool, s.event, !0), o.setToBlock(n, o.positions.END);\n      return;\n    }\n    n = t.paste(s.tool, s.event), o.setToBlock(n, o.positions.END);\n  }\n  /**\n   * Insert data passed as application/x-editor-js JSON\n   *\n   * @param {Array} blocks — Blocks' data to insert\n   * @returns {void}\n   */\n  insertEditorJSData(s) {\n    const { BlockManager: e, Caret: t, Tools: o } = this.Editor;\n    ut(\n      s,\n      (n) => o.blockTools.get(n).sanitizeConfig\n    ).forEach(({ tool: n, data: r }, a) => {\n      let l = !1;\n      a === 0 && (l = e.currentBlock && e.currentBlock.tool.isDefault && e.currentBlock.isEmpty);\n      const c = e.insert({\n        tool: n,\n        data: r,\n        replace: l\n      });\n      t.setToBlock(c, t.positions.END);\n    });\n  }\n  /**\n   * Fetch nodes from Element node\n   *\n   * @param {Node} node - current node\n   * @param {Node[]} nodes - processed nodes\n   * @param {Node} destNode - destination node\n   */\n  processElementNode(s, e, t) {\n    const o = Object.keys(this.toolsTags), i = s, { tool: n } = this.toolsTags[i.tagName] || {}, r = this.tagsByTool[n == null ? void 0 : n.name] || [], a = o.includes(i.tagName), l = d.blockElements.includes(i.tagName.toLowerCase()), c = Array.from(i.children).some(\n      ({ tagName: h }) => o.includes(h) && !r.includes(h)\n    ), u = Array.from(i.children).some(\n      ({ tagName: h }) => d.blockElements.includes(h.toLowerCase())\n    );\n    if (!l && !a && !c)\n      return t.appendChild(i), [...e, t];\n    if (a && !c || l && !u && !c)\n      return [...e, t, i];\n  }\n  /**\n   * Recursively divide HTML string to two types of nodes:\n   * 1. Block element\n   * 2. Document Fragments contained text and markup tags like a, b, i etc.\n   *\n   * @param {Node} wrapper - wrapper of paster HTML content\n   * @returns {Node[]}\n   */\n  getNodes(s) {\n    const e = Array.from(s.childNodes);\n    let t;\n    const o = (i, n) => {\n      if (d.isEmpty(n) && !d.isSingleTag(n))\n        return i;\n      const r = i[i.length - 1];\n      let a = new DocumentFragment();\n      switch (r && d.isFragment(r) && (a = i.pop()), n.nodeType) {\n        case Node.ELEMENT_NODE:\n          if (t = this.processElementNode(n, i, a), t)\n            return t;\n          break;\n        case Node.TEXT_NODE:\n          return a.appendChild(n), [...i, a];\n        default:\n          return [...i, a];\n      }\n      return [...i, ...Array.from(n.childNodes).reduce(o, [])];\n    };\n    return e.reduce(o, []);\n  }\n  /**\n   * Compose paste event with passed type and detail\n   *\n   * @param {string} type - event type\n   * @param {PasteEventDetail} detail - event detail\n   */\n  composePasteEvent(s, e) {\n    return new CustomEvent(s, {\n      detail: e\n    });\n  }\n};\nlet yt = wt;\nyt.PATTERN_PROCESSING_MAX_LENGTH = 450;\nclass oi extends C {\n  constructor() {\n    super(...arguments), this.toolsDontSupportReadOnly = [], this.readOnlyEnabled = !1;\n  }\n  /**\n   * Returns state of read only mode\n   */\n  get isEnabled() {\n    return this.readOnlyEnabled;\n  }\n  /**\n   * Set initial state\n   */\n  async prepare() {\n    const { Tools: e } = this.Editor, { blockTools: t } = e, o = [];\n    Array.from(t.entries()).forEach(([i, n]) => {\n      n.isReadOnlySupported || o.push(i);\n    }), this.toolsDontSupportReadOnly = o, this.config.readOnly && o.length > 0 && this.throwCriticalError(), this.toggle(this.config.readOnly);\n  }\n  /**\n   * Set read-only mode or toggle current state\n   * Call all Modules `toggleReadOnly` method and re-render Editor\n   *\n   * @param {boolean} state - (optional) read-only state or toggle\n   */\n  async toggle(e = !this.readOnlyEnabled) {\n    e && this.toolsDontSupportReadOnly.length > 0 && this.throwCriticalError();\n    const t = this.readOnlyEnabled;\n    this.readOnlyEnabled = e;\n    for (const i in this.Editor)\n      this.Editor[i].toggleReadOnly && this.Editor[i].toggleReadOnly(e);\n    if (t === e)\n      return this.readOnlyEnabled;\n    const o = await this.Editor.Saver.save();\n    return await this.Editor.BlockManager.clear(), await this.Editor.Renderer.render(o.blocks), this.readOnlyEnabled;\n  }\n  /**\n   * Throws an error about tools which don't support read-only mode\n   */\n  throwCriticalError() {\n    throw new lt(\n      `To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(\", \")} don't support read-only mode.`\n    );\n  }\n}\nclass fe extends C {\n  constructor() {\n    super(...arguments), this.isRectSelectionActivated = !1, this.SCROLL_SPEED = 3, this.HEIGHT_OF_SCROLL_ZONE = 40, this.BOTTOM_SCROLL_ZONE = 1, this.TOP_SCROLL_ZONE = 2, this.MAIN_MOUSE_BUTTON = 0, this.mousedown = !1, this.isScrolling = !1, this.inScrollZone = null, this.startX = 0, this.startY = 0, this.mouseX = 0, this.mouseY = 0, this.stackOfSelected = [], this.listenerIds = [];\n  }\n  /**\n   * CSS classes for the Block\n   *\n   * @returns {{wrapper: string, content: string}}\n   */\n  static get CSS() {\n    return {\n      overlay: \"codex-editor-overlay\",\n      overlayContainer: \"codex-editor-overlay__container\",\n      rect: \"codex-editor-overlay__rectangle\",\n      topScrollZone: \"codex-editor-overlay__scroll-zone--top\",\n      bottomScrollZone: \"codex-editor-overlay__scroll-zone--bottom\"\n    };\n  }\n  /**\n   * Module Preparation\n   * Creating rect and hang handlers\n   */\n  prepare() {\n    this.enableModuleBindings();\n  }\n  /**\n   * Init rect params\n   *\n   * @param {number} pageX - X coord of mouse\n   * @param {number} pageY - Y coord of mouse\n   */\n  startSelection(e, t) {\n    const o = document.elementFromPoint(e - window.pageXOffset, t - window.pageYOffset);\n    o.closest(`.${this.Editor.Toolbar.CSS.toolbar}`) || (this.Editor.BlockSelection.allBlocksSelected = !1, this.clearSelection(), this.stackOfSelected = []);\n    const n = [\n      `.${F.CSS.content}`,\n      `.${this.Editor.Toolbar.CSS.toolbar}`,\n      `.${this.Editor.InlineToolbar.CSS.inlineToolbar}`\n    ], r = o.closest(\".\" + this.Editor.UI.CSS.editorWrapper), a = n.some((l) => !!o.closest(l));\n    !r || a || (this.mousedown = !0, this.startX = e, this.startY = t);\n  }\n  /**\n   * Clear all params to end selection\n   */\n  endSelection() {\n    this.mousedown = !1, this.startX = 0, this.startY = 0, this.overlayRectangle.style.display = \"none\";\n  }\n  /**\n   * is RectSelection Activated\n   */\n  isRectActivated() {\n    return this.isRectSelectionActivated;\n  }\n  /**\n   * Mark that selection is end\n   */\n  clearSelection() {\n    this.isRectSelectionActivated = !1;\n  }\n  /**\n   * Sets Module necessary event handlers\n   */\n  enableModuleBindings() {\n    const { container: e } = this.genHTML();\n    this.listeners.on(e, \"mousedown\", (t) => {\n      this.processMouseDown(t);\n    }, !1), this.listeners.on(document.body, \"mousemove\", Ce((t) => {\n      this.processMouseMove(t);\n    }, 10), {\n      passive: !0\n    }), this.listeners.on(document.body, \"mouseleave\", () => {\n      this.processMouseLeave();\n    }), this.listeners.on(window, \"scroll\", Ce((t) => {\n      this.processScroll(t);\n    }, 10), {\n      passive: !0\n    }), this.listeners.on(document.body, \"mouseup\", () => {\n      this.processMouseUp();\n    }, !1);\n  }\n  /**\n   * Handle mouse down events\n   *\n   * @param {MouseEvent} mouseEvent - mouse event payload\n   */\n  processMouseDown(e) {\n    if (e.button !== this.MAIN_MOUSE_BUTTON)\n      return;\n    e.target.closest(d.allInputsSelector) !== null || this.startSelection(e.pageX, e.pageY);\n  }\n  /**\n   * Handle mouse move events\n   *\n   * @param {MouseEvent} mouseEvent - mouse event payload\n   */\n  processMouseMove(e) {\n    this.changingRectangle(e), this.scrollByZones(e.clientY);\n  }\n  /**\n   * Handle mouse leave\n   */\n  processMouseLeave() {\n    this.clearSelection(), this.endSelection();\n  }\n  /**\n   * @param {MouseEvent} mouseEvent - mouse event payload\n   */\n  processScroll(e) {\n    this.changingRectangle(e);\n  }\n  /**\n   * Handle mouse up\n   */\n  processMouseUp() {\n    this.clearSelection(), this.endSelection();\n  }\n  /**\n   * Scroll If mouse in scroll zone\n   *\n   * @param {number} clientY - Y coord of mouse\n   */\n  scrollByZones(e) {\n    if (this.inScrollZone = null, e <= this.HEIGHT_OF_SCROLL_ZONE && (this.inScrollZone = this.TOP_SCROLL_ZONE), document.documentElement.clientHeight - e <= this.HEIGHT_OF_SCROLL_ZONE && (this.inScrollZone = this.BOTTOM_SCROLL_ZONE), !this.inScrollZone) {\n      this.isScrolling = !1;\n      return;\n    }\n    this.isScrolling || (this.scrollVertical(this.inScrollZone === this.TOP_SCROLL_ZONE ? -this.SCROLL_SPEED : this.SCROLL_SPEED), this.isScrolling = !0);\n  }\n  /**\n   * Generates required HTML elements\n   *\n   * @returns {Object<string, Element>}\n   */\n  genHTML() {\n    const { UI: e } = this.Editor, t = e.nodes.holder.querySelector(\".\" + e.CSS.editorWrapper), o = d.make(\"div\", fe.CSS.overlay, {}), i = d.make(\"div\", fe.CSS.overlayContainer, {}), n = d.make(\"div\", fe.CSS.rect, {});\n    return i.appendChild(n), o.appendChild(i), t.appendChild(o), this.overlayRectangle = n, {\n      container: t,\n      overlay: o\n    };\n  }\n  /**\n   * Activates scrolling if blockSelection is active and mouse is in scroll zone\n   *\n   * @param {number} speed - speed of scrolling\n   */\n  scrollVertical(e) {\n    if (!(this.inScrollZone && this.mousedown))\n      return;\n    const t = window.pageYOffset;\n    window.scrollBy(0, e), this.mouseY += window.pageYOffset - t, setTimeout(() => {\n      this.scrollVertical(e);\n    }, 0);\n  }\n  /**\n   * Handles the change in the rectangle and its effect\n   *\n   * @param {MouseEvent} event - mouse event\n   */\n  changingRectangle(e) {\n    if (!this.mousedown)\n      return;\n    e.pageY !== void 0 && (this.mouseX = e.pageX, this.mouseY = e.pageY);\n    const { rightPos: t, leftPos: o, index: i } = this.genInfoForMouseSelection(), n = this.startX > t && this.mouseX > t, r = this.startX < o && this.mouseX < o;\n    this.rectCrossesBlocks = !(n || r), this.isRectSelectionActivated || (this.rectCrossesBlocks = !1, this.isRectSelectionActivated = !0, this.shrinkRectangleToPoint(), this.overlayRectangle.style.display = \"block\"), this.updateRectangleSize(), this.Editor.Toolbar.close(), i !== void 0 && (this.trySelectNextBlock(i), this.inverseSelection(), m.get().removeAllRanges());\n  }\n  /**\n   * Shrink rect to singular point\n   */\n  shrinkRectangleToPoint() {\n    this.overlayRectangle.style.left = `${this.startX - window.pageXOffset}px`, this.overlayRectangle.style.top = `${this.startY - window.pageYOffset}px`, this.overlayRectangle.style.bottom = `calc(100% - ${this.startY - window.pageYOffset}px`, this.overlayRectangle.style.right = `calc(100% - ${this.startX - window.pageXOffset}px`;\n  }\n  /**\n   * Select or unselect all of blocks in array if rect is out or in selectable area\n   */\n  inverseSelection() {\n    const t = this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;\n    if (this.rectCrossesBlocks && !t)\n      for (const o of this.stackOfSelected)\n        this.Editor.BlockSelection.selectBlockByIndex(o);\n    if (!this.rectCrossesBlocks && t)\n      for (const o of this.stackOfSelected)\n        this.Editor.BlockSelection.unSelectBlockByIndex(o);\n  }\n  /**\n   * Updates size of rectangle\n   */\n  updateRectangleSize() {\n    this.mouseY >= this.startY ? (this.overlayRectangle.style.top = `${this.startY - window.pageYOffset}px`, this.overlayRectangle.style.bottom = `calc(100% - ${this.mouseY - window.pageYOffset}px`) : (this.overlayRectangle.style.bottom = `calc(100% - ${this.startY - window.pageYOffset}px`, this.overlayRectangle.style.top = `${this.mouseY - window.pageYOffset}px`), this.mouseX >= this.startX ? (this.overlayRectangle.style.left = `${this.startX - window.pageXOffset}px`, this.overlayRectangle.style.right = `calc(100% - ${this.mouseX - window.pageXOffset}px`) : (this.overlayRectangle.style.right = `calc(100% - ${this.startX - window.pageXOffset}px`, this.overlayRectangle.style.left = `${this.mouseX - window.pageXOffset}px`);\n  }\n  /**\n   * Collects information needed to determine the behavior of the rectangle\n   *\n   * @returns {object} index - index next Block, leftPos - start of left border of Block, rightPos - right border\n   */\n  genInfoForMouseSelection() {\n    const t = document.body.offsetWidth / 2, o = this.mouseY - window.pageYOffset, i = document.elementFromPoint(t, o), n = this.Editor.BlockManager.getBlockByChildNode(i);\n    let r;\n    n !== void 0 && (r = this.Editor.BlockManager.blocks.findIndex((h) => h.holder === n.holder));\n    const a = this.Editor.BlockManager.lastBlock.holder.querySelector(\".\" + F.CSS.content), l = Number.parseInt(window.getComputedStyle(a).width, 10) / 2, c = t - l, u = t + l;\n    return {\n      index: r,\n      leftPos: c,\n      rightPos: u\n    };\n  }\n  /**\n   * Select block with index index\n   *\n   * @param index - index of block in redactor\n   */\n  addBlockInSelection(e) {\n    this.rectCrossesBlocks && this.Editor.BlockSelection.selectBlockByIndex(e), this.stackOfSelected.push(e);\n  }\n  /**\n   * Adds a block to the selection and determines which blocks should be selected\n   *\n   * @param {object} index - index of new block in the reactor\n   */\n  trySelectNextBlock(e) {\n    const t = this.stackOfSelected[this.stackOfSelected.length - 1] === e, o = this.stackOfSelected.length, i = 1, n = -1, r = 0;\n    if (t)\n      return;\n    const a = this.stackOfSelected[o - 1] - this.stackOfSelected[o - 2] > 0;\n    let l = r;\n    o > 1 && (l = a ? i : n);\n    const c = e > this.stackOfSelected[o - 1] && l === i, u = e < this.stackOfSelected[o - 1] && l === n, f = !(c || u || l === r);\n    if (!f && (e > this.stackOfSelected[o - 1] || this.stackOfSelected[o - 1] === void 0)) {\n      let v = this.stackOfSelected[o - 1] + 1 || e;\n      for (v; v <= e; v++)\n        this.addBlockInSelection(v);\n      return;\n    }\n    if (!f && e < this.stackOfSelected[o - 1]) {\n      for (let v = this.stackOfSelected[o - 1] - 1; v >= e; v--)\n        this.addBlockInSelection(v);\n      return;\n    }\n    if (!f)\n      return;\n    let k = o - 1, p;\n    for (e > this.stackOfSelected[o - 1] ? p = () => e > this.stackOfSelected[k] : p = () => e < this.stackOfSelected[k]; p(); )\n      this.rectCrossesBlocks && this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[k]), this.stackOfSelected.pop(), k--;\n  }\n}\nclass ii extends C {\n  /**\n   * Renders passed blocks as one batch\n   *\n   * @param blocksData - blocks to render\n   */\n  async render(e) {\n    return new Promise((t) => {\n      const { Tools: o, BlockManager: i } = this.Editor, n = e.map(({ type: r, data: a, tunes: l, id: c }) => {\n        o.available.has(r) === !1 && (K(`Tool «${r}» is not found. Check 'tools' property at the Editor.js config.`, \"warn\"), a = this.composeStubDataForTool(r, a, c), r = o.stubTool);\n        let u;\n        try {\n          u = i.composeBlock({\n            id: c,\n            tool: r,\n            data: a,\n            tunes: l\n          });\n        } catch (h) {\n          L(`Block «${r}» skipped because of plugins error`, \"error\", {\n            data: a,\n            error: h\n          }), a = this.composeStubDataForTool(r, a, c), r = o.stubTool, u = i.composeBlock({\n            id: c,\n            tool: r,\n            data: a,\n            tunes: l\n          });\n        }\n        return u;\n      });\n      i.insertMany(n), window.requestIdleCallback(() => {\n        t();\n      }, { timeout: 2e3 });\n    });\n  }\n  /**\n   * Create data for the Stub Tool that will be used instead of unavailable tool\n   *\n   * @param tool - unavailable tool name to stub\n   * @param data - data of unavailable block\n   * @param [id] - id of unavailable block\n   */\n  composeStubDataForTool(e, t, o) {\n    const { Tools: i } = this.Editor;\n    let n = e;\n    if (i.unavailable.has(e)) {\n      const r = i.unavailable.get(e).toolbox;\n      r !== void 0 && r[0].title !== void 0 && (n = r[0].title);\n    }\n    return {\n      savedData: {\n        id: o,\n        type: e,\n        data: t\n      },\n      title: n\n    };\n  }\n}\nclass ni extends C {\n  /**\n   * Composes new chain of Promises to fire them alternatelly\n   *\n   * @returns {OutputData}\n   */\n  async save() {\n    const { BlockManager: e, Tools: t } = this.Editor, o = e.blocks, i = [];\n    try {\n      o.forEach((a) => {\n        i.push(this.getSavedData(a));\n      });\n      const n = await Promise.all(i), r = await ut(n, (a) => t.blockTools.get(a).sanitizeConfig);\n      return this.makeOutput(r);\n    } catch (n) {\n      K(\"Saving failed due to the Error %o\", \"error\", n);\n    }\n  }\n  /**\n   * Saves and validates\n   *\n   * @param {Block} block - Editor's Tool\n   * @returns {ValidatedData} - Tool's validated data\n   */\n  async getSavedData(e) {\n    const t = await e.save(), o = t && await e.validate(t.data);\n    return {\n      ...t,\n      isValid: o\n    };\n  }\n  /**\n   * Creates output object with saved data, time and version of editor\n   *\n   * @param {ValidatedData} allExtractedData - data extracted from Blocks\n   * @returns {OutputData}\n   */\n  makeOutput(e) {\n    const t = [];\n    return e.forEach(({ id: o, tool: i, data: n, tunes: r, isValid: a }) => {\n      if (!a) {\n        L(`Block «${i}» skipped because saved data is invalid`);\n        return;\n      }\n      if (i === this.Editor.Tools.stubTool) {\n        t.push(n);\n        return;\n      }\n      const l = {\n        id: o,\n        type: i,\n        data: n,\n        ...!V(r) && {\n          tunes: r\n        }\n      };\n      t.push(l);\n    }), {\n      time: +/* @__PURE__ */ new Date(),\n      blocks: t,\n      version: \"2.28.2\"\n    };\n  }\n}\nvar Ne = {}, si = {\n  get exports() {\n    return Ne;\n  },\n  set exports(s) {\n    Ne = s;\n  }\n};\n(function(s, e) {\n  (function(t, o) {\n    s.exports = o();\n  })(window, function() {\n    return function(t) {\n      var o = {};\n      function i(n) {\n        if (o[n])\n          return o[n].exports;\n        var r = o[n] = { i: n, l: !1, exports: {} };\n        return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;\n      }\n      return i.m = t, i.c = o, i.d = function(n, r, a) {\n        i.o(n, r) || Object.defineProperty(n, r, { enumerable: !0, get: a });\n      }, i.r = function(n) {\n        typeof Symbol < \"u\" && Symbol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, { value: \"Module\" }), Object.defineProperty(n, \"__esModule\", { value: !0 });\n      }, i.t = function(n, r) {\n        if (1 & r && (n = i(n)), 8 & r || 4 & r && typeof n == \"object\" && n && n.__esModule)\n          return n;\n        var a = /* @__PURE__ */ Object.create(null);\n        if (i.r(a), Object.defineProperty(a, \"default\", { enumerable: !0, value: n }), 2 & r && typeof n != \"string\")\n          for (var l in n)\n            i.d(a, l, function(c) {\n              return n[c];\n            }.bind(null, l));\n        return a;\n      }, i.n = function(n) {\n        var r = n && n.__esModule ? function() {\n          return n.default;\n        } : function() {\n          return n;\n        };\n        return i.d(r, \"a\", r), r;\n      }, i.o = function(n, r) {\n        return Object.prototype.hasOwnProperty.call(n, r);\n      }, i.p = \"/\", i(i.s = 4);\n    }([function(t, o, i) {\n      var n = i(1), r = i(2);\n      typeof (r = r.__esModule ? r.default : r) == \"string\" && (r = [[t.i, r, \"\"]]);\n      var a = { insert: \"head\", singleton: !1 };\n      n(r, a), t.exports = r.locals || {};\n    }, function(t, o, i) {\n      var n, r = function() {\n        return n === void 0 && (n = !!(window && document && document.all && !window.atob)), n;\n      }, a = function() {\n        var y = {};\n        return function(x) {\n          if (y[x] === void 0) {\n            var w = document.querySelector(x);\n            if (window.HTMLIFrameElement && w instanceof window.HTMLIFrameElement)\n              try {\n                w = w.contentDocument.head;\n              } catch {\n                w = null;\n              }\n            y[x] = w;\n          }\n          return y[x];\n        };\n      }(), l = [];\n      function c(y) {\n        for (var x = -1, w = 0; w < l.length; w++)\n          if (l[w].identifier === y) {\n            x = w;\n            break;\n          }\n        return x;\n      }\n      function u(y, x) {\n        for (var w = {}, I = [], R = 0; R < y.length; R++) {\n          var b = y[R], g = x.base ? b[0] + x.base : b[0], E = w[g] || 0, T = \"\".concat(g, \" \").concat(E);\n          w[g] = E + 1;\n          var O = c(T), S = { css: b[1], media: b[2], sourceMap: b[3] };\n          O !== -1 ? (l[O].references++, l[O].updater(S)) : l.push({ identifier: T, updater: _(S, x), references: 1 }), I.push(T);\n        }\n        return I;\n      }\n      function h(y) {\n        var x = document.createElement(\"style\"), w = y.attributes || {};\n        if (w.nonce === void 0) {\n          var I = i.nc;\n          I && (w.nonce = I);\n        }\n        if (Object.keys(w).forEach(function(b) {\n          x.setAttribute(b, w[b]);\n        }), typeof y.insert == \"function\")\n          y.insert(x);\n        else {\n          var R = a(y.insert || \"head\");\n          if (!R)\n            throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n          R.appendChild(x);\n        }\n        return x;\n      }\n      var f, k = (f = [], function(y, x) {\n        return f[y] = x, f.filter(Boolean).join(`\n`);\n      });\n      function p(y, x, w, I) {\n        var R = w ? \"\" : I.media ? \"@media \".concat(I.media, \" {\").concat(I.css, \"}\") : I.css;\n        if (y.styleSheet)\n          y.styleSheet.cssText = k(x, R);\n        else {\n          var b = document.createTextNode(R), g = y.childNodes;\n          g[x] && y.removeChild(g[x]), g.length ? y.insertBefore(b, g[x]) : y.appendChild(b);\n        }\n      }\n      function v(y, x, w) {\n        var I = w.css, R = w.media, b = w.sourceMap;\n        if (R ? y.setAttribute(\"media\", R) : y.removeAttribute(\"media\"), b && btoa && (I += `\n/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(b)))), \" */\")), y.styleSheet)\n          y.styleSheet.cssText = I;\n        else {\n          for (; y.firstChild; )\n            y.removeChild(y.firstChild);\n          y.appendChild(document.createTextNode(I));\n        }\n      }\n      var A = null, N = 0;\n      function _(y, x) {\n        var w, I, R;\n        if (x.singleton) {\n          var b = N++;\n          w = A || (A = h(x)), I = p.bind(null, w, b, !1), R = p.bind(null, w, b, !0);\n        } else\n          w = h(x), I = v.bind(null, w, x), R = function() {\n            (function(g) {\n              if (g.parentNode === null)\n                return !1;\n              g.parentNode.removeChild(g);\n            })(w);\n          };\n        return I(y), function(g) {\n          if (g) {\n            if (g.css === y.css && g.media === y.media && g.sourceMap === y.sourceMap)\n              return;\n            I(y = g);\n          } else\n            R();\n        };\n      }\n      t.exports = function(y, x) {\n        (x = x || {}).singleton || typeof x.singleton == \"boolean\" || (x.singleton = r());\n        var w = u(y = y || [], x);\n        return function(I) {\n          if (I = I || [], Object.prototype.toString.call(I) === \"[object Array]\") {\n            for (var R = 0; R < w.length; R++) {\n              var b = c(w[R]);\n              l[b].references--;\n            }\n            for (var g = u(I, x), E = 0; E < w.length; E++) {\n              var T = c(w[E]);\n              l[T].references === 0 && (l[T].updater(), l.splice(T, 1));\n            }\n            w = g;\n          }\n        };\n      };\n    }, function(t, o, i) {\n      (o = i(3)(!1)).push([t.i, `.ce-paragraph {\n    line-height: 1.6em;\n    outline: none;\n}\n\n.ce-paragraph[data-placeholder]:empty::before{\n  content: attr(data-placeholder);\n  color: #707684;\n  font-weight: normal;\n  opacity: 0;\n}\n\n/** Show placeholder at the first paragraph if Editor is empty */\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {\n  opacity: 1;\n}\n\n.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {\n  opacity: 0;\n}\n\n.ce-paragraph p:first-of-type{\n    margin-top: 0;\n}\n\n.ce-paragraph p:last-of-type{\n    margin-bottom: 0;\n}\n`, \"\"]), t.exports = o;\n    }, function(t, o, i) {\n      t.exports = function(n) {\n        var r = [];\n        return r.toString = function() {\n          return this.map(function(a) {\n            var l = function(c, u) {\n              var h = c[1] || \"\", f = c[3];\n              if (!f)\n                return h;\n              if (u && typeof btoa == \"function\") {\n                var k = (v = f, A = btoa(unescape(encodeURIComponent(JSON.stringify(v)))), N = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(A), \"/*# \".concat(N, \" */\")), p = f.sources.map(function(_) {\n                  return \"/*# sourceURL=\".concat(f.sourceRoot || \"\").concat(_, \" */\");\n                });\n                return [h].concat(p).concat([k]).join(`\n`);\n              }\n              var v, A, N;\n              return [h].join(`\n`);\n            }(a, n);\n            return a[2] ? \"@media \".concat(a[2], \" {\").concat(l, \"}\") : l;\n          }).join(\"\");\n        }, r.i = function(a, l, c) {\n          typeof a == \"string\" && (a = [[null, a, \"\"]]);\n          var u = {};\n          if (c)\n            for (var h = 0; h < this.length; h++) {\n              var f = this[h][0];\n              f != null && (u[f] = !0);\n            }\n          for (var k = 0; k < a.length; k++) {\n            var p = [].concat(a[k]);\n            c && u[p[0]] || (l && (p[2] ? p[2] = \"\".concat(l, \" and \").concat(p[2]) : p[2] = l), r.push(p));\n          }\n        }, r;\n      };\n    }, function(t, o, i) {\n      i.r(o), i.d(o, \"default\", function() {\n        return a;\n      }), i(0);\n      function n(l, c) {\n        for (var u = 0; u < c.length; u++) {\n          var h = c[u];\n          h.enumerable = h.enumerable || !1, h.configurable = !0, \"value\" in h && (h.writable = !0), Object.defineProperty(l, h.key, h);\n        }\n      }\n      function r(l, c, u) {\n        return c && n(l.prototype, c), u && n(l, u), l;\n      }\n      /**\n       * Base Paragraph Block for the Editor.js.\n       * Represents a regular text block\n       *\n       * @author CodeX (team@codex.so)\n       * @copyright CodeX 2018\n       * @license The MIT License (MIT)\n       */\n      var a = function() {\n        function l(c) {\n          var u = c.data, h = c.config, f = c.api, k = c.readOnly;\n          (function(p, v) {\n            if (!(p instanceof v))\n              throw new TypeError(\"Cannot call a class as a function\");\n          })(this, l), this.api = f, this.readOnly = k, this._CSS = { block: this.api.styles.block, wrapper: \"ce-paragraph\" }, this.readOnly || (this.onKeyUp = this.onKeyUp.bind(this)), this._placeholder = h.placeholder ? h.placeholder : l.DEFAULT_PLACEHOLDER, this._data = {}, this._element = null, this._preserveBlank = h.preserveBlank !== void 0 && h.preserveBlank, this.data = u;\n        }\n        return r(l, null, [{ key: \"DEFAULT_PLACEHOLDER\", get: function() {\n          return \"\";\n        } }]), r(l, [{ key: \"onKeyUp\", value: function(c) {\n          c.code !== \"Backspace\" && c.code !== \"Delete\" || this._element.textContent === \"\" && (this._element.innerHTML = \"\");\n        } }, { key: \"drawView\", value: function() {\n          var c = document.createElement(\"DIV\");\n          return c.classList.add(this._CSS.wrapper, this._CSS.block), c.contentEditable = !1, c.dataset.placeholder = this.api.i18n.t(this._placeholder), this.readOnly || (c.contentEditable = !0, c.addEventListener(\"keyup\", this.onKeyUp)), c;\n        } }, { key: \"render\", value: function() {\n          return this._element === null && (this._element = this.drawView()), this.hydrate(), this._element;\n        } }, { key: \"merge\", value: function(c) {\n          var u = { text: this.data.text + c.text };\n          this.data = u;\n        } }, { key: \"validate\", value: function(c) {\n          return !(c.text.trim() === \"\" && !this._preserveBlank);\n        } }, { key: \"save\", value: function(c) {\n          return { text: c.innerHTML };\n        } }, { key: \"onPaste\", value: function(c) {\n          var u = { text: c.detail.data.innerHTML };\n          this.data = u;\n        } }, { key: \"hydrate\", value: function() {\n          var c = this;\n          window.requestAnimationFrame(function() {\n            c._element.innerHTML = c._data.text || \"\";\n          });\n        } }, { key: \"data\", get: function() {\n          if (this._element !== null) {\n            var c = this._element.innerHTML;\n            this._data.text = c;\n          }\n          return this._data;\n        }, set: function(c) {\n          this._data = c || {}, this._element !== null && this.hydrate();\n        } }], [{ key: \"conversionConfig\", get: function() {\n          return { export: \"text\", import: \"text\" };\n        } }, { key: \"sanitize\", get: function() {\n          return { text: { br: !0 } };\n        } }, { key: \"isReadOnlySupported\", get: function() {\n          return !0;\n        } }, { key: \"pasteConfig\", get: function() {\n          return { tags: [\"P\"] };\n        } }, { key: \"toolbox\", get: function() {\n          return { icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14\"/></svg>', title: \"Text\" };\n        } }]), l;\n      }();\n    }]).default;\n  });\n})(si);\nconst ri = /* @__PURE__ */ xe(Ne);\nclass We {\n  constructor() {\n    this.commandName = \"bold\", this.CSS = {\n      button: \"ce-inline-tool\",\n      buttonActive: \"ce-inline-tool--active\",\n      buttonModifier: \"ce-inline-tool--bold\"\n    }, this.nodes = {\n      button: void 0\n    };\n  }\n  /**\n   * Sanitizer Rule\n   * Leave <b> tags\n   *\n   * @returns {object}\n   */\n  static get sanitize() {\n    return {\n      b: {}\n    };\n  }\n  /**\n   * Create button for Inline Toolbar\n   */\n  render() {\n    return this.nodes.button = document.createElement(\"button\"), this.nodes.button.type = \"button\", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.innerHTML = So, this.nodes.button;\n  }\n  /**\n   * Wrap range with <b> tag\n   */\n  surround() {\n    document.execCommand(this.commandName);\n  }\n  /**\n   * Check selection and set activated state to button if there are <b> tag\n   *\n   * @returns {boolean}\n   */\n  checkState() {\n    const e = document.queryCommandState(this.commandName);\n    return this.nodes.button.classList.toggle(this.CSS.buttonActive, e), e;\n  }\n  /**\n   * Set a shortcut\n   *\n   * @returns {boolean}\n   */\n  get shortcut() {\n    return \"CMD+B\";\n  }\n}\nWe.isInline = !0;\nWe.title = \"Bold\";\nclass Ye {\n  constructor() {\n    this.commandName = \"italic\", this.CSS = {\n      button: \"ce-inline-tool\",\n      buttonActive: \"ce-inline-tool--active\",\n      buttonModifier: \"ce-inline-tool--italic\"\n    }, this.nodes = {\n      button: null\n    };\n  }\n  /**\n   * Sanitizer Rule\n   * Leave <i> tags\n   *\n   * @returns {object}\n   */\n  static get sanitize() {\n    return {\n      i: {}\n    };\n  }\n  /**\n   * Create button for Inline Toolbar\n   */\n  render() {\n    return this.nodes.button = document.createElement(\"button\"), this.nodes.button.type = \"button\", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.innerHTML = Oo, this.nodes.button;\n  }\n  /**\n   * Wrap range with <i> tag\n   */\n  surround() {\n    document.execCommand(this.commandName);\n  }\n  /**\n   * Check selection and set activated state to button if there are <i> tag\n   */\n  checkState() {\n    const e = document.queryCommandState(this.commandName);\n    return this.nodes.button.classList.toggle(this.CSS.buttonActive, e), e;\n  }\n  /**\n   * Set a shortcut\n   */\n  get shortcut() {\n    return \"CMD+I\";\n  }\n}\nYe.isInline = !0;\nYe.title = \"Italic\";\nclass Ke {\n  /**\n   * @param api - Editor.js API\n   */\n  constructor({ api: e }) {\n    this.commandLink = \"createLink\", this.commandUnlink = \"unlink\", this.ENTER_KEY = 13, this.CSS = {\n      button: \"ce-inline-tool\",\n      buttonActive: \"ce-inline-tool--active\",\n      buttonModifier: \"ce-inline-tool--link\",\n      buttonUnlink: \"ce-inline-tool--unlink\",\n      input: \"ce-inline-tool-input\",\n      inputShowed: \"ce-inline-tool-input--showed\"\n    }, this.nodes = {\n      button: null,\n      input: null\n    }, this.inputOpened = !1, this.toolbar = e.toolbar, this.inlineToolbar = e.inlineToolbar, this.notifier = e.notifier, this.i18n = e.i18n, this.selection = new m();\n  }\n  /**\n   * Sanitizer Rule\n   * Leave <a> tags\n   *\n   * @returns {object}\n   */\n  static get sanitize() {\n    return {\n      a: {\n        href: !0,\n        target: \"_blank\",\n        rel: \"nofollow\"\n      }\n    };\n  }\n  /**\n   * Create button for Inline Toolbar\n   */\n  render() {\n    return this.nodes.button = document.createElement(\"button\"), this.nodes.button.type = \"button\", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.innerHTML = Qe, this.nodes.button;\n  }\n  /**\n   * Input for the link\n   */\n  renderActions() {\n    return this.nodes.input = document.createElement(\"input\"), this.nodes.input.placeholder = this.i18n.t(\"Add a link\"), this.nodes.input.classList.add(this.CSS.input), this.nodes.input.addEventListener(\"keydown\", (e) => {\n      e.keyCode === this.ENTER_KEY && this.enterPressed(e);\n    }), this.nodes.input;\n  }\n  /**\n   * Handle clicks on the Inline Toolbar icon\n   *\n   * @param {Range} range - range to wrap with link\n   */\n  surround(e) {\n    if (e) {\n      this.inputOpened ? (this.selection.restore(), this.selection.removeFakeBackground()) : (this.selection.setFakeBackground(), this.selection.save());\n      const t = this.selection.findParentTag(\"A\");\n      if (t) {\n        this.selection.expandToTag(t), this.unlink(), this.closeActions(), this.checkState(), this.toolbar.close();\n        return;\n      }\n    }\n    this.toggleActions();\n  }\n  /**\n   * Check selection and set activated state to button if there are <a> tag\n   */\n  checkState() {\n    const e = this.selection.findParentTag(\"A\");\n    if (e) {\n      this.nodes.button.innerHTML = Ro, this.nodes.button.classList.add(this.CSS.buttonUnlink), this.nodes.button.classList.add(this.CSS.buttonActive), this.openActions();\n      const t = e.getAttribute(\"href\");\n      this.nodes.input.value = t !== \"null\" ? t : \"\", this.selection.save();\n    } else\n      this.nodes.button.innerHTML = Qe, this.nodes.button.classList.remove(this.CSS.buttonUnlink), this.nodes.button.classList.remove(this.CSS.buttonActive);\n    return !!e;\n  }\n  /**\n   * Function called with Inline Toolbar closing\n   */\n  clear() {\n    this.closeActions();\n  }\n  /**\n   * Set a shortcut\n   */\n  get shortcut() {\n    return \"CMD+K\";\n  }\n  /**\n   * Show/close link input\n   */\n  toggleActions() {\n    this.inputOpened ? this.closeActions(!1) : this.openActions(!0);\n  }\n  /**\n   * @param {boolean} needFocus - on link creation we need to focus input. On editing - nope.\n   */\n  openActions(e = !1) {\n    this.nodes.input.classList.add(this.CSS.inputShowed), e && this.nodes.input.focus(), this.inputOpened = !0;\n  }\n  /**\n   * Close input\n   *\n   * @param {boolean} clearSavedSelection — we don't need to clear saved selection\n   *                                        on toggle-clicks on the icon of opened Toolbar\n   */\n  closeActions(e = !0) {\n    if (this.selection.isFakeBackgroundEnabled) {\n      const t = new m();\n      t.save(), this.selection.restore(), this.selection.removeFakeBackground(), t.restore();\n    }\n    this.nodes.input.classList.remove(this.CSS.inputShowed), this.nodes.input.value = \"\", e && this.selection.clearSaved(), this.inputOpened = !1;\n  }\n  /**\n   * Enter pressed on input\n   *\n   * @param {KeyboardEvent} event - enter keydown event\n   */\n  enterPressed(e) {\n    let t = this.nodes.input.value || \"\";\n    if (!t.trim()) {\n      this.selection.restore(), this.unlink(), e.preventDefault(), this.closeActions();\n      return;\n    }\n    if (!this.validateURL(t)) {\n      this.notifier.show({\n        message: \"Pasted link is not valid.\",\n        style: \"error\"\n      }), L(\"Incorrect Link pasted\", \"warn\", t);\n      return;\n    }\n    t = this.prepareLink(t), this.selection.restore(), this.selection.removeFakeBackground(), this.insertLink(t), e.preventDefault(), e.stopPropagation(), e.stopImmediatePropagation(), this.selection.collapseToEnd(), this.inlineToolbar.close();\n  }\n  /**\n   * Detects if passed string is URL\n   *\n   * @param {string} str - string to validate\n   * @returns {boolean}\n   */\n  validateURL(e) {\n    return !/\\s/.test(e);\n  }\n  /**\n   * Process link before injection\n   * - sanitize\n   * - add protocol for links like 'google.com'\n   *\n   * @param {string} link - raw user input\n   */\n  prepareLink(e) {\n    return e = e.trim(), e = this.addProtocol(e), e;\n  }\n  /**\n   * Add 'http' protocol to the links like 'vc.ru', 'google.com'\n   *\n   * @param {string} link - string to process\n   */\n  addProtocol(e) {\n    if (/^(\\w+):(\\/\\/)?/.test(e))\n      return e;\n    const t = /^\\/[^/\\s]/.test(e), o = e.substring(0, 1) === \"#\", i = /^\\/\\/[^/\\s]/.test(e);\n    return !t && !o && !i && (e = \"http://\" + e), e;\n  }\n  /**\n   * Inserts <a> tag with \"href\"\n   *\n   * @param {string} link - \"href\" value\n   */\n  insertLink(e) {\n    const t = this.selection.findParentTag(\"A\");\n    t && this.selection.expandToTag(t), document.execCommand(this.commandLink, !1, e);\n  }\n  /**\n   * Removes <a> tag\n   */\n  unlink() {\n    document.execCommand(this.commandUnlink);\n  }\n}\nKe.isInline = !0;\nKe.title = \"Link\";\nclass Et {\n  /**\n   * @param options - constructor options\n   * @param options.data - stub tool data\n   * @param options.api - Editor.js API\n   */\n  constructor({ data: e, api: t }) {\n    this.CSS = {\n      wrapper: \"ce-stub\",\n      info: \"ce-stub__info\",\n      title: \"ce-stub__title\",\n      subtitle: \"ce-stub__subtitle\"\n    }, this.api = t, this.title = e.title || this.api.i18n.t(\"Error\"), this.subtitle = this.api.i18n.t(\"The block can not be displayed correctly.\"), this.savedData = e.savedData, this.wrapper = this.make();\n  }\n  /**\n   * Returns stub holder\n   *\n   * @returns {HTMLElement}\n   */\n  render() {\n    return this.wrapper;\n  }\n  /**\n   * Return original Tool data\n   *\n   * @returns {BlockToolData}\n   */\n  save() {\n    return this.savedData;\n  }\n  /**\n   * Create Tool html markup\n   *\n   * @returns {HTMLElement}\n   */\n  make() {\n    const e = d.make(\"div\", this.CSS.wrapper), t = Do, o = d.make(\"div\", this.CSS.info), i = d.make(\"div\", this.CSS.title, {\n      textContent: this.title\n    }), n = d.make(\"div\", this.CSS.subtitle, {\n      textContent: this.subtitle\n    });\n    return e.innerHTML = t, o.appendChild(i), o.appendChild(n), e.appendChild(o), e;\n  }\n}\nEt.isReadOnlySupported = !0;\nclass ai extends $e {\n  constructor() {\n    super(...arguments), this.type = ye.Inline;\n  }\n  /**\n   * Returns title for Inline Tool if specified by user\n   */\n  get title() {\n    return this.constructable[Ue.Title];\n  }\n  /**\n   * Constructs new InlineTool instance from constructable\n   */\n  create() {\n    return new this.constructable({\n      api: this.api.getMethodsForTool(this),\n      config: this.settings\n    });\n  }\n}\nclass li extends $e {\n  constructor() {\n    super(...arguments), this.type = ye.Tune;\n  }\n  /**\n   * Constructs new BlockTune instance from constructable\n   *\n   * @param data - Tune data\n   * @param block - Block API object\n   */\n  create(e, t) {\n    return new this.constructable({\n      api: this.api.getMethodsForTool(this),\n      config: this.settings,\n      block: t,\n      data: e\n    });\n  }\n}\nclass U extends Map {\n  /**\n   * Returns Block Tools collection\n   */\n  get blockTools() {\n    const e = Array.from(this.entries()).filter(([, t]) => t.isBlock());\n    return new U(e);\n  }\n  /**\n   * Returns Inline Tools collection\n   */\n  get inlineTools() {\n    const e = Array.from(this.entries()).filter(([, t]) => t.isInline());\n    return new U(e);\n  }\n  /**\n   * Returns Block Tunes collection\n   */\n  get blockTunes() {\n    const e = Array.from(this.entries()).filter(([, t]) => t.isTune());\n    return new U(e);\n  }\n  /**\n   * Returns internal Tools collection\n   */\n  get internalTools() {\n    const e = Array.from(this.entries()).filter(([, t]) => t.isInternal);\n    return new U(e);\n  }\n  /**\n   * Returns Tools collection provided by user\n   */\n  get externalTools() {\n    const e = Array.from(this.entries()).filter(([, t]) => !t.isInternal);\n    return new U(e);\n  }\n}\nvar ci = Object.defineProperty, di = Object.getOwnPropertyDescriptor, Bt = (s, e, t, o) => {\n  for (var i = o > 1 ? void 0 : o ? di(e, t) : e, n = s.length - 1, r; n >= 0; n--)\n    (r = s[n]) && (i = (o ? r(e, t, i) : r(i)) || i);\n  return o && i && ci(e, t, i), i;\n};\nclass Xe extends $e {\n  constructor() {\n    super(...arguments), this.type = ye.Block, this.inlineTools = new U(), this.tunes = new U();\n  }\n  /**\n   * Creates new Tool instance\n   *\n   * @param data - Tool data\n   * @param block - BlockAPI for current Block\n   * @param readOnly - True if Editor is in read-only mode\n   */\n  create(e, t, o) {\n    return new this.constructable({\n      data: e,\n      block: t,\n      readOnly: o,\n      api: this.api.getMethodsForTool(this),\n      config: this.settings\n    });\n  }\n  /**\n   * Returns true if read-only mode is supported by Tool\n   */\n  get isReadOnlySupported() {\n    return this.constructable[se.IsReadOnlySupported] === !0;\n  }\n  /**\n   * Returns true if Tool supports linebreaks\n   */\n  get isLineBreaksEnabled() {\n    return this.constructable[se.IsEnabledLineBreaks];\n  }\n  /**\n   * Returns Tool toolbox configuration (internal or user-specified).\n   *\n   * Merges internal and user-defined toolbox configs based on the following rules:\n   *\n   * - If both internal and user-defined toolbox configs are arrays their items are merged.\n   * Length of the second one is kept.\n   *\n   * - If both are objects their properties are merged.\n   *\n   * - If one is an object and another is an array than internal config is replaced with user-defined\n   * config. This is made to allow user to override default tool's toolbox representation (single/multiple entries)\n   */\n  get toolbox() {\n    const e = this.constructable[se.Toolbox], t = this.config[ke.Toolbox];\n    if (!V(e) && t !== !1)\n      return t ? Array.isArray(e) ? Array.isArray(t) ? t.map((o, i) => {\n        const n = e[i];\n        return n ? {\n          ...n,\n          ...o\n        } : o;\n      }) : [t] : Array.isArray(t) ? t : [\n        {\n          ...e,\n          ...t\n        }\n      ] : Array.isArray(e) ? e : [e];\n  }\n  /**\n   * Returns Tool conversion configuration\n   */\n  get conversionConfig() {\n    return this.constructable[se.ConversionConfig];\n  }\n  /**\n   * Returns enabled inline tools for Tool\n   */\n  get enabledInlineTools() {\n    return this.config[ke.EnabledInlineTools] || !1;\n  }\n  /**\n   * Returns enabled tunes for Tool\n   */\n  get enabledBlockTunes() {\n    return this.config[ke.EnabledBlockTunes];\n  }\n  /**\n   * Returns Tool paste configuration\n   */\n  get pasteConfig() {\n    return this.constructable[se.PasteConfig] ?? {};\n  }\n  get sanitizeConfig() {\n    const e = super.sanitizeConfig, t = this.baseSanitizeConfig;\n    if (V(e))\n      return t;\n    const o = {};\n    for (const i in e)\n      if (Object.prototype.hasOwnProperty.call(e, i)) {\n        const n = e[i];\n        z(n) ? o[i] = Object.assign({}, t, n) : o[i] = n;\n      }\n    return o;\n  }\n  get baseSanitizeConfig() {\n    const e = {};\n    return Array.from(this.inlineTools.values()).forEach((t) => Object.assign(e, t.sanitizeConfig)), Array.from(this.tunes.values()).forEach((t) => Object.assign(e, t.sanitizeConfig)), e;\n  }\n}\nBt([\n  ce\n], Xe.prototype, \"sanitizeConfig\", 1);\nBt([\n  ce\n], Xe.prototype, \"baseSanitizeConfig\", 1);\nclass hi {\n  /**\n   * @class\n   * @param config - tools config\n   * @param editorConfig - EditorJS config\n   * @param api - EditorJS API module\n   */\n  constructor(e, t, o) {\n    this.api = o, this.config = e, this.editorConfig = t;\n  }\n  /**\n   * Returns Tool object based on it's type\n   *\n   * @param name - tool name\n   */\n  get(e) {\n    const { class: t, isInternal: o = !1, ...i } = this.config[e], n = this.getConstructor(t);\n    return new n({\n      name: e,\n      constructable: t,\n      config: i,\n      api: this.api,\n      isDefault: e === this.editorConfig.defaultBlock,\n      defaultPlaceholder: this.editorConfig.placeholder,\n      isInternal: o\n    });\n  }\n  /**\n   * Find appropriate Tool object constructor for Tool constructable\n   *\n   * @param constructable - Tools constructable\n   */\n  getConstructor(e) {\n    switch (!0) {\n      case e[Ue.IsInline]:\n        return ai;\n      case e[xt.IsTune]:\n        return li;\n      default:\n        return Xe;\n    }\n  }\n}\nclass Tt {\n  /**\n   * MoveDownTune constructor\n   *\n   * @param {API} api — Editor's API\n   */\n  constructor({ api: e }) {\n    this.CSS = {\n      animation: \"wobble\"\n    }, this.api = e;\n  }\n  /**\n   * Tune's appearance in block settings menu\n   */\n  render() {\n    return {\n      icon: ft,\n      title: this.api.i18n.t(\"Move down\"),\n      onActivate: () => this.handleClick(),\n      name: \"move-down\"\n    };\n  }\n  /**\n   * Handle clicks on 'move down' button\n   */\n  handleClick() {\n    const e = this.api.blocks.getCurrentBlockIndex(), t = this.api.blocks.getBlockByIndex(e + 1);\n    if (!t)\n      throw new Error(\"Unable to move Block down since it is already the last\");\n    const o = t.holder, i = o.getBoundingClientRect();\n    let n = Math.abs(window.innerHeight - o.offsetHeight);\n    i.top < window.innerHeight && (n = window.scrollY + o.offsetHeight), window.scrollTo(0, n), this.api.blocks.move(e + 1), this.api.toolbar.toggleBlockSettings(!0);\n  }\n}\nTt.isTune = !0;\nclass Ct {\n  /**\n   * DeleteTune constructor\n   *\n   * @param {API} api - Editor's API\n   */\n  constructor({ api: e }) {\n    this.api = e;\n  }\n  /**\n   * Tune's appearance in block settings menu\n   */\n  render() {\n    return {\n      icon: Mo,\n      title: this.api.i18n.t(\"Delete\"),\n      name: \"delete\",\n      confirmation: {\n        title: this.api.i18n.t(\"Click to delete\"),\n        onActivate: () => this.handleClick()\n      }\n    };\n  }\n  /**\n   * Delete block conditions passed\n   */\n  handleClick() {\n    this.api.blocks.delete();\n  }\n}\nCt.isTune = !0;\nclass St {\n  /**\n   * MoveUpTune constructor\n   *\n   * @param {API} api - Editor's API\n   */\n  constructor({ api: e }) {\n    this.CSS = {\n      animation: \"wobble\"\n    }, this.api = e;\n  }\n  /**\n   * Tune's appearance in block settings menu\n   */\n  render() {\n    return {\n      icon: Io,\n      title: this.api.i18n.t(\"Move up\"),\n      onActivate: () => this.handleClick(),\n      name: \"move-up\"\n    };\n  }\n  /**\n   * Move current block up\n   */\n  handleClick() {\n    const e = this.api.blocks.getCurrentBlockIndex(), t = this.api.blocks.getBlockByIndex(e), o = this.api.blocks.getBlockByIndex(e - 1);\n    if (e === 0 || !t || !o)\n      throw new Error(\"Unable to move Block up since it is already the first\");\n    const i = t.holder, n = o.holder, r = i.getBoundingClientRect(), a = n.getBoundingClientRect();\n    let l;\n    a.top > 0 ? l = Math.abs(r.top) - Math.abs(a.top) : l = Math.abs(r.top) + a.height, window.scrollBy(0, -1 * l), this.api.blocks.move(e - 1), this.api.toolbar.toggleBlockSettings(!0);\n  }\n}\nSt.isTune = !0;\nvar ui = Object.defineProperty, pi = Object.getOwnPropertyDescriptor, fi = (s, e, t, o) => {\n  for (var i = o > 1 ? void 0 : o ? pi(e, t) : e, n = s.length - 1, r; n >= 0; n--)\n    (r = s[n]) && (i = (o ? r(e, t, i) : r(i)) || i);\n  return o && i && ui(e, t, i), i;\n};\nclass It extends C {\n  constructor() {\n    super(...arguments), this.stubTool = \"stub\", this.toolsAvailable = new U(), this.toolsUnavailable = new U();\n  }\n  /**\n   * Returns available Tools\n   */\n  get available() {\n    return this.toolsAvailable;\n  }\n  /**\n   * Returns unavailable Tools\n   */\n  get unavailable() {\n    return this.toolsUnavailable;\n  }\n  /**\n   * Return Tools for the Inline Toolbar\n   */\n  get inlineTools() {\n    return this.available.inlineTools;\n  }\n  /**\n   * Return editor block tools\n   */\n  get blockTools() {\n    return this.available.blockTools;\n  }\n  /**\n   * Return available Block Tunes\n   *\n   * @returns {object} - object of Inline Tool's classes\n   */\n  get blockTunes() {\n    return this.available.blockTunes;\n  }\n  /**\n   * Returns default Tool object\n   */\n  get defaultTool() {\n    return this.blockTools.get(this.config.defaultBlock);\n  }\n  /**\n   * Returns internal tools\n   */\n  get internal() {\n    return this.available.internalTools;\n  }\n  /**\n   * Creates instances via passed or default configuration\n   *\n   * @returns {Promise<void>}\n   */\n  async prepare() {\n    if (this.validateTools(), this.config.tools = Se({}, this.internalTools, this.config.tools), !Object.prototype.hasOwnProperty.call(this.config, \"tools\") || Object.keys(this.config.tools).length === 0)\n      throw Error(\"Can't start without tools\");\n    const e = this.prepareConfig();\n    this.factory = new hi(e, this.config, this.Editor.API);\n    const t = this.getListOfPrepareFunctions(e);\n    if (t.length === 0)\n      return Promise.resolve();\n    await Dt(t, (o) => {\n      this.toolPrepareMethodSuccess(o);\n    }, (o) => {\n      this.toolPrepareMethodFallback(o);\n    }), this.prepareBlockTools();\n  }\n  getAllInlineToolsSanitizeConfig() {\n    const e = {};\n    return Array.from(this.inlineTools.values()).forEach((t) => {\n      Object.assign(e, t.sanitizeConfig);\n    }), e;\n  }\n  /**\n   * Calls each Tool reset method to clean up anything set by Tool\n   */\n  destroy() {\n    Object.values(this.available).forEach(async (e) => {\n      D(e.reset) && await e.reset();\n    });\n  }\n  /**\n   * Returns internal tools\n   * Includes Bold, Italic, Link and Paragraph\n   */\n  get internalTools() {\n    return {\n      bold: {\n        class: We,\n        isInternal: !0\n      },\n      italic: {\n        class: Ye,\n        isInternal: !0\n      },\n      link: {\n        class: Ke,\n        isInternal: !0\n      },\n      paragraph: {\n        class: ri,\n        inlineToolbar: !0,\n        isInternal: !0\n      },\n      stub: {\n        class: Et,\n        isInternal: !0\n      },\n      moveUp: {\n        class: St,\n        isInternal: !0\n      },\n      delete: {\n        class: Ct,\n        isInternal: !0\n      },\n      moveDown: {\n        class: Tt,\n        isInternal: !0\n      }\n    };\n  }\n  /**\n   * Tool prepare method success callback\n   *\n   * @param {object} data - append tool to available list\n   */\n  toolPrepareMethodSuccess(e) {\n    const t = this.factory.get(e.toolName);\n    if (t.isInline()) {\n      const i = [\"render\", \"surround\", \"checkState\"].filter((n) => !t.create()[n]);\n      if (i.length) {\n        L(\n          `Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,\n          \"warn\",\n          i\n        ), this.toolsUnavailable.set(t.name, t);\n        return;\n      }\n    }\n    this.toolsAvailable.set(t.name, t);\n  }\n  /**\n   * Tool prepare method fail callback\n   *\n   * @param {object} data - append tool to unavailable list\n   */\n  toolPrepareMethodFallback(e) {\n    this.toolsUnavailable.set(e.toolName, this.factory.get(e.toolName));\n  }\n  /**\n   * Binds prepare function of plugins with user or default config\n   *\n   * @returns {Array} list of functions that needs to be fired sequentially\n   * @param config - tools config\n   */\n  getListOfPrepareFunctions(e) {\n    const t = [];\n    return Object.entries(e).forEach(([o, i]) => {\n      t.push({\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        function: D(i.class.prepare) ? i.class.prepare : () => {\n        },\n        data: {\n          toolName: o,\n          config: i.config\n        }\n      });\n    }), t;\n  }\n  /**\n   * Assign enabled Inline Tools and Block Tunes for Block Tool\n   */\n  prepareBlockTools() {\n    Array.from(this.blockTools.values()).forEach((e) => {\n      this.assignInlineToolsToBlockTool(e), this.assignBlockTunesToBlockTool(e);\n    });\n  }\n  /**\n   * Assign enabled Inline Tools for Block Tool\n   *\n   * @param tool - Block Tool\n   */\n  assignInlineToolsToBlockTool(e) {\n    if (this.config.inlineToolbar !== !1) {\n      if (e.enabledInlineTools === !0) {\n        e.inlineTools = new U(\n          Array.isArray(this.config.inlineToolbar) ? this.config.inlineToolbar.map((t) => [t, this.inlineTools.get(t)]) : Array.from(this.inlineTools.entries())\n        );\n        return;\n      }\n      Array.isArray(e.enabledInlineTools) && (e.inlineTools = new U(\n        e.enabledInlineTools.map((t) => [t, this.inlineTools.get(t)])\n      ));\n    }\n  }\n  /**\n   * Assign enabled Block Tunes for Block Tool\n   *\n   * @param tool — Block Tool\n   */\n  assignBlockTunesToBlockTool(e) {\n    if (e.enabledBlockTunes !== !1) {\n      if (Array.isArray(e.enabledBlockTunes)) {\n        const t = new U(\n          e.enabledBlockTunes.map((o) => [o, this.blockTunes.get(o)])\n        );\n        e.tunes = new U([...t, ...this.blockTunes.internalTools]);\n        return;\n      }\n      if (Array.isArray(this.config.tunes)) {\n        const t = new U(\n          this.config.tunes.map((o) => [o, this.blockTunes.get(o)])\n        );\n        e.tunes = new U([...t, ...this.blockTunes.internalTools]);\n        return;\n      }\n      e.tunes = this.blockTunes.internalTools;\n    }\n  }\n  /**\n   * Validate Tools configuration objects and throw Error for user if it is invalid\n   */\n  validateTools() {\n    for (const e in this.config.tools)\n      if (Object.prototype.hasOwnProperty.call(this.config.tools, e)) {\n        if (e in this.internalTools)\n          return;\n        const t = this.config.tools[e];\n        if (!D(t) && !D(t.class))\n          throw Error(\n            `Tool «${e}» must be a constructor function or an object with function in the «class» property`\n          );\n      }\n  }\n  /**\n   * Unify tools config\n   */\n  prepareConfig() {\n    const e = {};\n    for (const t in this.config.tools)\n      z(this.config.tools[t]) ? e[t] = this.config.tools[t] : e[t] = { class: this.config.tools[t] };\n    return e;\n  }\n}\nfi([\n  ce\n], It.prototype, \"getAllInlineToolsSanitizeConfig\", 1);\nconst gi = `:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:\"\\\\feff\"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;-webkit-transform:translateX(-50%) translateY(8px) scale(.94);transform:translate(-50%) translateY(8px) scale(.94);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translate(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.94);transform:translate(-23px) translateY(8px) scale(.94)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translate(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.94);transform:translate(-100%) translateY(8px) scale(.94);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translate(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:\"\";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:\"\";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width: 651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:\"\";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}\n`;\nclass bi extends C {\n  constructor() {\n    super(...arguments), this.isMobile = !1, this.contentRectCache = void 0, this.resizeDebouncer = Ht(() => {\n      this.windowResize();\n    }, 200);\n  }\n  /**\n   * Editor.js UI CSS class names\n   *\n   * @returns {{editorWrapper: string, editorZone: string}}\n   */\n  get CSS() {\n    return {\n      editorWrapper: \"codex-editor\",\n      editorWrapperNarrow: \"codex-editor--narrow\",\n      editorZone: \"codex-editor__redactor\",\n      editorZoneHidden: \"codex-editor__redactor--hidden\",\n      editorEmpty: \"codex-editor--empty\",\n      editorRtlFix: \"codex-editor--rtl\"\n    };\n  }\n  /**\n   * Return Width of center column of Editor\n   *\n   * @returns {DOMRect}\n   */\n  get contentRect() {\n    if (this.contentRectCache)\n      return this.contentRectCache;\n    const e = this.nodes.wrapper.querySelector(`.${F.CSS.content}`);\n    return e ? (this.contentRectCache = e.getBoundingClientRect(), this.contentRectCache) : {\n      width: 650,\n      left: 0,\n      right: 0\n    };\n  }\n  /**\n   * Making main interface\n   */\n  async prepare() {\n    this.checkIsMobile(), this.make(), this.loadStyles();\n  }\n  /**\n   * Toggle read-only state\n   *\n   * If readOnly is true:\n   *  - removes all listeners from main UI module elements\n   *\n   * if readOnly is false:\n   *  - enables all listeners to UI module elements\n   *\n   * @param {boolean} readOnlyEnabled - \"read only\" state\n   */\n  toggleReadOnly(e) {\n    e ? this.disableModuleBindings() : this.enableModuleBindings();\n  }\n  /**\n   * Check if Editor is empty and set CSS class to wrapper\n   */\n  checkEmptiness() {\n    const { BlockManager: e } = this.Editor;\n    this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty, e.isEditorEmpty);\n  }\n  /**\n   * Check if one of Toolbar is opened\n   * Used to prevent global keydowns (for example, Enter) conflicts with Enter-on-toolbar\n   *\n   * @returns {boolean}\n   */\n  get someToolbarOpened() {\n    const { Toolbar: e, BlockSettings: t, InlineToolbar: o, ConversionToolbar: i } = this.Editor;\n    return t.opened || o.opened || i.opened || e.toolbox.opened;\n  }\n  /**\n   * Check for some Flipper-buttons is under focus\n   */\n  get someFlipperButtonFocused() {\n    return this.Editor.Toolbar.toolbox.hasFocus() ? !0 : Object.entries(this.Editor).filter(([e, t]) => t.flipper instanceof G).some(([e, t]) => t.flipper.hasFocus());\n  }\n  /**\n   * Clean editor`s UI\n   */\n  destroy() {\n    this.nodes.holder.innerHTML = \"\";\n  }\n  /**\n   * Close all Editor's toolbars\n   */\n  closeAllToolbars() {\n    const { Toolbar: e, BlockSettings: t, InlineToolbar: o, ConversionToolbar: i } = this.Editor;\n    t.close(), o.close(), i.close(), e.toolbox.close();\n  }\n  /**\n   * Check for mobile mode and cache a result\n   */\n  checkIsMobile() {\n    this.isMobile = window.innerWidth < rt;\n  }\n  /**\n   * Makes Editor.js interface\n   */\n  make() {\n    this.nodes.holder = d.getHolder(this.config.holder), this.nodes.wrapper = d.make(\"div\", [\n      this.CSS.editorWrapper,\n      ...this.isRtl ? [this.CSS.editorRtlFix] : []\n    ]), this.nodes.redactor = d.make(\"div\", this.CSS.editorZone), this.nodes.holder.offsetWidth < this.contentRect.width && this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow), this.nodes.redactor.style.paddingBottom = this.config.minHeight + \"px\", this.nodes.wrapper.appendChild(this.nodes.redactor), this.nodes.holder.appendChild(this.nodes.wrapper);\n  }\n  /**\n   * Appends CSS\n   */\n  loadStyles() {\n    const e = \"editor-js-styles\";\n    if (d.get(e))\n      return;\n    const t = d.make(\"style\", null, {\n      id: e,\n      textContent: gi.toString()\n    });\n    d.prepend(document.head, t);\n  }\n  /**\n   * Bind events on the Editor.js interface\n   */\n  enableModuleBindings() {\n    this.readOnlyMutableListeners.on(this.nodes.redactor, \"click\", (e) => {\n      this.redactorClicked(e);\n    }, !1), this.readOnlyMutableListeners.on(this.nodes.redactor, \"mousedown\", (e) => {\n      this.documentTouched(e);\n    }, !0), this.readOnlyMutableListeners.on(this.nodes.redactor, \"touchstart\", (e) => {\n      this.documentTouched(e);\n    }, !0), this.readOnlyMutableListeners.on(document, \"keydown\", (e) => {\n      this.documentKeydown(e);\n    }, !0), this.readOnlyMutableListeners.on(document, \"mousedown\", (e) => {\n      this.documentClicked(e);\n    }, !0), this.readOnlyMutableListeners.on(document, \"selectionchange\", () => {\n      this.selectionChanged();\n    }, !0), this.readOnlyMutableListeners.on(window, \"resize\", () => {\n      this.resizeDebouncer();\n    }, {\n      passive: !0\n    }), this.watchBlockHoveredEvents();\n  }\n  /**\n   * Listen redactor mousemove to emit 'block-hovered' event\n   */\n  watchBlockHoveredEvents() {\n    let e;\n    this.readOnlyMutableListeners.on(this.nodes.redactor, \"mousemove\", Ce((t) => {\n      const o = t.target.closest(\".ce-block\");\n      this.Editor.BlockSelection.anyBlockSelected || o && e !== o && (e = o, this.eventsDispatcher.emit(kt, {\n        block: this.Editor.BlockManager.getBlockByChildNode(o)\n      }));\n    }, 20), {\n      passive: !0\n    });\n  }\n  /**\n   * Unbind events on the Editor.js interface\n   */\n  disableModuleBindings() {\n    this.readOnlyMutableListeners.clearAll();\n  }\n  /**\n   * Resize window handler\n   */\n  windowResize() {\n    this.contentRectCache = null, this.checkIsMobile();\n  }\n  /**\n   * All keydowns on document\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  documentKeydown(e) {\n    switch (e.keyCode) {\n      case B.ENTER:\n        this.enterPressed(e);\n        break;\n      case B.BACKSPACE:\n      case B.DELETE:\n        this.backspacePressed(e);\n        break;\n      case B.ESC:\n        this.escapePressed(e);\n        break;\n      default:\n        this.defaultBehaviour(e);\n        break;\n    }\n  }\n  /**\n   * Ignore all other document's keydown events\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  defaultBehaviour(e) {\n    const { currentBlock: t } = this.Editor.BlockManager, o = e.target.closest(`.${this.CSS.editorWrapper}`), i = e.altKey || e.ctrlKey || e.metaKey || e.shiftKey;\n    if (t !== void 0 && o === null) {\n      this.Editor.BlockEvents.keydown(e);\n      return;\n    }\n    o || t && i || (this.Editor.BlockManager.dropPointer(), this.Editor.Toolbar.close());\n  }\n  /**\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  backspacePressed(e) {\n    const { BlockManager: t, BlockSelection: o, Caret: i } = this.Editor;\n    if (o.anyBlockSelected && !m.isSelectionExists) {\n      const n = t.removeSelectedBlocks();\n      i.setToBlock(t.insertDefaultBlockAtIndex(n, !0), i.positions.START), o.clearSelection(e), e.preventDefault(), e.stopPropagation(), e.stopImmediatePropagation();\n    }\n  }\n  /**\n   * Escape pressed\n   * If some of Toolbar components are opened, then close it otherwise close Toolbar\n   *\n   * @param {Event} event - escape keydown event\n   */\n  escapePressed(e) {\n    this.Editor.BlockSelection.clearSelection(e), this.Editor.Toolbar.toolbox.opened ? (this.Editor.Toolbar.toolbox.close(), this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock)) : this.Editor.BlockSettings.opened ? this.Editor.BlockSettings.close() : this.Editor.ConversionToolbar.opened ? this.Editor.ConversionToolbar.close() : this.Editor.InlineToolbar.opened ? this.Editor.InlineToolbar.close() : this.Editor.Toolbar.close();\n  }\n  /**\n   * Enter pressed on document\n   *\n   * @param {KeyboardEvent} event - keyboard event\n   */\n  enterPressed(e) {\n    const { BlockManager: t, BlockSelection: o } = this.Editor, i = t.currentBlockIndex >= 0;\n    if (o.anyBlockSelected && !m.isSelectionExists) {\n      o.clearSelection(e), e.preventDefault(), e.stopImmediatePropagation(), e.stopPropagation();\n      return;\n    }\n    if (!this.someToolbarOpened && i && e.target.tagName === \"BODY\") {\n      const n = this.Editor.BlockManager.insert();\n      this.Editor.Caret.setToBlock(n), this.Editor.BlockManager.highlightCurrentNode(), this.Editor.Toolbar.moveAndOpen(n);\n    }\n    this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * All clicks on document\n   *\n   * @param {MouseEvent} event - Click event\n   */\n  documentClicked(e) {\n    if (!e.isTrusted)\n      return;\n    const t = e.target;\n    this.nodes.holder.contains(t) || m.isAtEditor || (this.Editor.BlockManager.dropPointer(), this.Editor.Toolbar.close());\n    const i = this.Editor.BlockSettings.nodes.wrapper.contains(t), n = this.Editor.Toolbar.nodes.settingsToggler.contains(t), r = i || n;\n    if (this.Editor.BlockSettings.opened && !r) {\n      this.Editor.BlockSettings.close();\n      const a = this.Editor.BlockManager.getBlockByChildNode(t);\n      this.Editor.Toolbar.moveAndOpen(a);\n    }\n    this.Editor.BlockSelection.clearSelection(e);\n  }\n  /**\n   * First touch on editor\n   * Fired before click\n   *\n   * Used to change current block — we need to do it before 'selectionChange' event.\n   * Also:\n   * - Move and show the Toolbar\n   * - Set a Caret\n   *\n   * @param {MouseEvent | TouchEvent} event - touch or mouse event\n   */\n  documentTouched(e) {\n    let t = e.target;\n    if (t === this.nodes.redactor) {\n      const o = e instanceof MouseEvent ? e.clientX : e.touches[0].clientX, i = e instanceof MouseEvent ? e.clientY : e.touches[0].clientY;\n      t = document.elementFromPoint(o, i);\n    }\n    try {\n      this.Editor.BlockManager.setCurrentBlockByChildNode(t), this.Editor.BlockManager.highlightCurrentNode();\n    } catch {\n      this.Editor.RectangleSelection.isRectActivated() || this.Editor.Caret.setToTheLastBlock();\n    }\n    this.Editor.Toolbar.moveAndOpen();\n  }\n  /**\n   * All clicks on the redactor zone\n   *\n   * @param {MouseEvent} event - click event\n   * @description\n   * - By clicks on the Editor's bottom zone:\n   *      - if last Block is empty, set a Caret to this\n   *      - otherwise, add a new empty Block and set a Caret to that\n   */\n  redactorClicked(e) {\n    const { BlockSelection: t } = this.Editor;\n    if (!m.isCollapsed)\n      return;\n    const o = () => {\n      e.stopImmediatePropagation(), e.stopPropagation();\n    }, i = e.target, n = e.metaKey || e.ctrlKey;\n    if (d.isAnchor(i) && n) {\n      o();\n      const u = i.getAttribute(\"href\"), h = zt(u);\n      $t(h);\n      return;\n    }\n    const r = this.Editor.BlockManager.getBlockByIndex(-1), a = d.offset(r.holder).bottom, l = e.pageY;\n    if (e.target instanceof Element && e.target.isEqualNode(this.nodes.redactor) && /**\n    * If there is cross block selection started, target will be equal to redactor so we need additional check\n    */\n    !t.anyBlockSelected && /**\n    * Prevent caret jumping (to last block) when clicking between blocks\n    */\n    a < l) {\n      o();\n      const { BlockManager: u, Caret: h, Toolbar: f } = this.Editor;\n      (!u.lastBlock.tool.isDefault || !u.lastBlock.isEmpty) && u.insertAtEnd(), h.setToTheLastBlock(), f.moveAndOpen(u.lastBlock);\n    }\n  }\n  /**\n   * Handle selection changes on mobile devices\n   * Uses for showing the Inline Toolbar\n   */\n  selectionChanged() {\n    const { CrossBlockSelection: e, BlockSelection: t } = this.Editor, o = m.anchorElement;\n    if (e.isCrossBlockSelectionStarted && t.anyBlockSelected && m.get().removeAllRanges(), !o) {\n      m.range || this.Editor.InlineToolbar.close();\n      return;\n    }\n    const i = o.closest(`.${F.CSS.content}`) === null;\n    if (i && (this.Editor.InlineToolbar.containsNode(o) || this.Editor.InlineToolbar.close(), !(o.dataset.inlineToolbar === \"true\")))\n      return;\n    this.Editor.BlockManager.currentBlock || this.Editor.BlockManager.setCurrentBlockByChildNode(o);\n    const n = i !== !0;\n    this.Editor.InlineToolbar.tryToShow(!0, n);\n  }\n}\nconst mi = {\n  // API Modules\n  BlocksAPI: Qt,\n  CaretAPI: eo,\n  EventsAPI: to,\n  I18nAPI: Pe,\n  API: oo,\n  InlineToolbarAPI: io,\n  ListenersAPI: no,\n  NotifierAPI: lo,\n  ReadOnlyAPI: co,\n  SanitizerAPI: mo,\n  SaverAPI: ko,\n  SelectionAPI: vo,\n  StylesAPI: xo,\n  ToolbarAPI: wo,\n  TooltipAPI: Bo,\n  UiAPI: To,\n  // Toolbar Modules\n  BlockSettings: jo,\n  ConversionToolbar: Y,\n  Toolbar: Ko,\n  InlineToolbar: Xo,\n  // Modules\n  BlockEvents: Vo,\n  BlockManager: Go,\n  BlockSelection: Jo,\n  Caret: ve,\n  CrossBlockSelection: Qo,\n  DragNDrop: ei,\n  ModificationsObserver: ti,\n  Paste: yt,\n  ReadOnly: oi,\n  RectangleSelection: fe,\n  Renderer: ii,\n  Saver: ni,\n  Tools: It,\n  UI: bi\n};\nclass ki {\n  /**\n   * @param {EditorConfig} config - user configuration\n   */\n  constructor(e) {\n    this.moduleInstances = {}, this.eventsDispatcher = new we();\n    let t, o;\n    this.isReady = new Promise((i, n) => {\n      t = i, o = n;\n    }), Promise.resolve().then(async () => {\n      this.configuration = e, this.validate(), this.init(), await this.start(), await this.render();\n      const { BlockManager: i, Caret: n, UI: r, ModificationsObserver: a } = this.moduleInstances;\n      r.checkEmptiness(), a.enable(), this.configuration.autofocus && (n.setToBlock(i.blocks[0], n.positions.START), i.highlightCurrentNode()), t();\n    }).catch((i) => {\n      L(`Editor.js is not ready because of ${i}`, \"error\"), o(i);\n    });\n  }\n  /**\n   * Setting for configuration\n   *\n   * @param {EditorConfig|string} config - Editor's config to set\n   */\n  set configuration(e) {\n    var o, i;\n    z(e) ? this.config = {\n      ...e\n    } : this.config = {\n      holder: e\n    }, Ie(!!this.config.holderId, \"config.holderId\", \"config.holder\"), this.config.holderId && !this.config.holder && (this.config.holder = this.config.holderId, this.config.holderId = null), this.config.holder == null && (this.config.holder = \"editorjs\"), this.config.logLevel || (this.config.logLevel = it.VERBOSE), Nt(this.config.logLevel), Ie(!!this.config.initialBlock, \"config.initialBlock\", \"config.defaultBlock\"), this.config.defaultBlock = this.config.defaultBlock || this.config.initialBlock || \"paragraph\", this.config.minHeight = this.config.minHeight !== void 0 ? this.config.minHeight : 300;\n    const t = {\n      type: this.config.defaultBlock,\n      data: {}\n    };\n    this.config.placeholder = this.config.placeholder || !1, this.config.sanitizer = this.config.sanitizer || {\n      p: !0,\n      b: !0,\n      a: !0\n    }, this.config.hideToolbar = this.config.hideToolbar ? this.config.hideToolbar : !1, this.config.tools = this.config.tools || {}, this.config.i18n = this.config.i18n || {}, this.config.data = this.config.data || { blocks: [] }, this.config.onReady = this.config.onReady || (() => {\n    }), this.config.onChange = this.config.onChange || (() => {\n    }), this.config.inlineToolbar = this.config.inlineToolbar !== void 0 ? this.config.inlineToolbar : !0, (V(this.config.data) || !this.config.data.blocks || this.config.data.blocks.length === 0) && (this.config.data = { blocks: [t] }), this.config.readOnly = this.config.readOnly || !1, (o = this.config.i18n) != null && o.messages && $.setDictionary(this.config.i18n.messages), this.config.i18n.direction = ((i = this.config.i18n) == null ? void 0 : i.direction) || \"ltr\";\n  }\n  /**\n   * Returns private property\n   *\n   * @returns {EditorConfig}\n   */\n  get configuration() {\n    return this.config;\n  }\n  /**\n   * Checks for required fields in Editor's config\n   */\n  validate() {\n    const { holderId: e, holder: t } = this.config;\n    if (e && t)\n      throw Error(\"«holderId» and «holder» param can't assign at the same time.\");\n    if (J(t) && !d.get(t))\n      throw Error(`element with ID «${t}» is missing. Pass correct holder's ID.`);\n    if (t && z(t) && !d.isElement(t))\n      throw Error(\"«holder» value must be an Element node\");\n  }\n  /**\n   * Initializes modules:\n   *  - make and save instances\n   *  - configure\n   */\n  init() {\n    this.constructModules(), this.configureModules();\n  }\n  /**\n   * Start Editor!\n   *\n   * Get list of modules that needs to be prepared and return a sequence (Promise)\n   *\n   * @returns {Promise<void>}\n   */\n  async start() {\n    await [\n      \"Tools\",\n      \"UI\",\n      \"BlockManager\",\n      \"Paste\",\n      \"BlockSelection\",\n      \"RectangleSelection\",\n      \"CrossBlockSelection\",\n      \"ReadOnly\"\n    ].reduce(\n      (t, o) => t.then(async () => {\n        try {\n          await this.moduleInstances[o].prepare();\n        } catch (i) {\n          if (i instanceof lt)\n            throw new Error(i.message);\n          L(`Module ${o} was skipped because of %o`, \"warn\", i);\n        }\n      }),\n      Promise.resolve()\n    );\n  }\n  /**\n   * Render initial data\n   */\n  render() {\n    return this.moduleInstances.Renderer.render(this.config.data.blocks);\n  }\n  /**\n   * Make modules instances and save it to the @property this.moduleInstances\n   */\n  constructModules() {\n    Object.entries(mi).forEach(([e, t]) => {\n      try {\n        this.moduleInstances[e] = new t({\n          config: this.configuration,\n          eventsDispatcher: this.eventsDispatcher\n        });\n      } catch (o) {\n        L(\"[constructModules]\", `Module ${e} skipped because`, \"error\", o);\n      }\n    });\n  }\n  /**\n   * Modules instances configuration:\n   *  - pass other modules to the 'state' property\n   *  - ...\n   */\n  configureModules() {\n    for (const e in this.moduleInstances)\n      Object.prototype.hasOwnProperty.call(this.moduleInstances, e) && (this.moduleInstances[e].state = this.getModulesDiff(e));\n  }\n  /**\n   * Return modules without passed name\n   *\n   * @param {string} name - module for witch modules difference should be calculated\n   */\n  getModulesDiff(e) {\n    const t = {};\n    for (const o in this.moduleInstances)\n      o !== e && (t[o] = this.moduleInstances[o]);\n    return t;\n  }\n}\n/**\n * Editor.js\n *\n * @license Apache-2.0\n * @see Editor.js <https://editorjs.io>\n * @author CodeX Team <https://codex.so>\n */\nclass vi {\n  /** Editor version */\n  static get version() {\n    return \"2.28.2\";\n  }\n  /**\n   * @param {EditorConfig|string|undefined} [configuration] - user configuration\n   */\n  constructor(e) {\n    let t = () => {\n    };\n    z(e) && D(e.onReady) && (t = e.onReady);\n    const o = new ki(e);\n    this.isReady = o.isReady.then(() => {\n      this.exportAPI(o), t();\n    });\n  }\n  /**\n   * Export external API methods\n   *\n   * @param {Core} editor — Editor's instance\n   */\n  exportAPI(e) {\n    const t = [\"configuration\"], o = () => {\n      Object.values(e.moduleInstances).forEach((n) => {\n        D(n.destroy) && n.destroy(), n.listeners.removeAll();\n      }), e = null;\n      for (const n in this)\n        Object.prototype.hasOwnProperty.call(this, n) && delete this[n];\n      Object.setPrototypeOf(this, null);\n    };\n    t.forEach((n) => {\n      this[n] = e[n];\n    }), this.destroy = o, Object.setPrototypeOf(this, e.moduleInstances.API.methods), delete this.exportAPI, Object.entries({\n      blocks: {\n        clear: \"clear\",\n        render: \"render\"\n      },\n      caret: {\n        focus: \"focus\"\n      },\n      events: {\n        on: \"on\",\n        off: \"off\",\n        emit: \"emit\"\n      },\n      saver: {\n        save: \"save\"\n      }\n    }).forEach(([n, r]) => {\n      Object.entries(r).forEach(([a, l]) => {\n        this[l] = e.moduleInstances.API.methods[n][a];\n      });\n    });\n  }\n}\nexport {\n  vi as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}